<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Drag & Drop Test</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: #1a1a1a;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 40px;
        }
        
        #testContainer {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 40px;
            color: #00d4ff;
        }
        
        #blocksList {
            background: #242424;
            padding: 20px;
            border-radius: 8px;
            min-height: 200px;
        }
        
        .test-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .test-btn {
            padding: 10px 20px;
            background: #00a8cc;
            border: 1px solid #00d4ff;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .test-btn:hover {
            background: #00c6ed;
        }
        
        .info-box {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .info-box h3 {
            margin-top: 0;
            color: #ffc800;
        }
        
        .info-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .info-box li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div id="testContainer">
        <h1>Statement Block Drag & Drop Test</h1>
        
        <div class="info-box">
            <h3>How to test:</h3>
            <ul>
                <li><strong>Reorder blocks:</strong> Drag a block by its handle (⋮⋮) and drop it in the gap between other blocks (blue highlight)</li>
                <li><strong>Merge blocks:</strong> Drag a block directly onto another block (yellow highlight) to merge their content</li>
                <li><strong>Edit blocks:</strong> Click on the text to edit inline</li>
                <li><strong>Delete blocks:</strong> Click the × button to remove a block</li>
            </ul>
        </div>
        
        <div class="test-controls">
            <button class="test-btn" onclick="addTestBlock()">Add Test Block</button>
            <button class="test-btn" onclick="clearAllBlocks()">Clear All</button>
            <button class="test-btn" onclick="loadSampleBlocks()">Load Sample Blocks</button>
        </div>
        
        <div id="blockEditorContainer">
            <div id="blocksList"></div>
        </div>
    </div>

    <script type="module">
        import { StatementBlockEditor } from './js/statement-block-editor.js';
        
        // Initialize the editor
        const editor = new StatementBlockEditor({
            onBlocksChanged: (blocks) => {
                console.log('Blocks changed:', blocks);
            }
        });
        
        // Sample data
        const sampleBlocks = [
            "The VR tool needs better gesture recognition for hand tracking",
            "When I try to grab objects, sometimes they don't respond properly",
            "It would be great to have haptic feedback when interacting with UI elements",
            "The performance drops significantly when there are more than 10 users in the space",
            "Add support for custom shaders in the material editor"
        ];
        
        // Global functions for buttons
        window.addTestBlock = () => {
            const blockText = prompt('Enter block text:');
            if (blockText) {
                editor.addBlock(blockText);
            }
        };
        
        window.clearAllBlocks = () => {
            if (confirm('Clear all blocks?')) {
                editor.clear();
            }
        };
        
        window.loadSampleBlocks = () => {
            editor.blocks = [...sampleBlocks];
            editor.onBlocksChanged(editor.blocks);
            editor.renderBlocks(document.getElementById('blockEditorContainer'));
        };
        
        // Load sample blocks on start
        window.loadSampleBlocks();
    </script>
</body>
</html>