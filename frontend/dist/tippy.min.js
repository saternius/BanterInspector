(()=>{var Nn=Object.defineProperty;var xn=(c,e)=>{for(var t in e)Nn(c,t,{get:e[t],enumerable:!0})};var V={};xn(V,{Logger:()=>St,appendToShell:()=>U,clamp:()=>Bn,confirm:()=>M,debounce:()=>zn,decodeSpacePropertyKey:()=>kn,deepClone:()=>N,deepEqual:()=>In,encodeSpacePropertyKey:()=>Pn,eulerToQuaternion:()=>Q,formatNumber:()=>vt,formatPropertyName:()=>Rn,generateId:()=>Ct,getComponentIcon:()=>Jn,getNestedProperty:()=>jn,hexToRgb:()=>An,isColorObject:()=>On,isEncodedSpacePropertyKey:()=>Tn,isQuaternion:()=>cn,isVector3Object:()=>bt,isVector4Object:()=>Dn,lerp:()=>Hn,parseBest:()=>g,parseValue:()=>Un,quaternionToEuler:()=>Et,rgbToHex:()=>Fn,setNestedProperty:()=>Vn,showNotification:()=>T,throttle:()=>qn,toSafeName:()=>Wn});function Rn(c){return c.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}function Fn(c,e,t){let n=i=>{let s=Math.round(Math.max(0,Math.min(255,i))).toString(16);return s.length===1?"0"+s:s};return"#"+n(c)+n(e)+n(t)}function An(c){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}function bt(c){return c&&typeof c=="object"&&"x"in c&&"y"in c&&"z"in c&&Object.keys(c).length===3}function Dn(c){return c&&typeof c=="object"&&"x"in c&&"y"in c&&"z"in c&&"w"in c&&Object.keys(c).length===4}function cn(c){return c&&typeof c=="object"&&"x"in c&&"y"in c&&"z"in c&&"w"in c&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.z=="number"&&typeof c.w=="number"}function Et(c){let e=Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z+c.w*c.w),t=c.x/e,n=c.y/e,i=c.z/e,s=c.w/e,o=2*(s*t+n*i),r=1-2*(t*t+n*n),a=Math.atan2(o,r),l=2*(s*n-i*t),d;Math.abs(l)>=1?d=Math.sign(l)*Math.PI/2:d=Math.asin(l);let p=2*(s*i+t*n),h=1-2*(n*n+i*i),u=Math.atan2(p,h);return{x:d*180/Math.PI,y:u*180/Math.PI,z:a*180/Math.PI}}window.quaternionToEuler=Et;function Q(c){let e=c.x*Math.PI/180,t=c.y*Math.PI/180,n=c.z*Math.PI/180,i=Math.cos(t*.5),s=Math.sin(t*.5),o=Math.cos(e*.5),r=Math.sin(e*.5),a=Math.cos(n*.5),l=Math.sin(n*.5);return{w:a*o*i+l*r*s,x:l*o*i-a*r*s,y:a*r*i+l*o*s,z:a*o*s-l*r*i}}window.eulerToQuaternion=Q;function On(c){return c&&typeof c=="object"&&"r"in c&&"g"in c&&"b"in c}function N(c,e=[],t=!0){if(c===null||typeof c!="object")return c;if(c instanceof Date)return new Date(c.getTime());if(c instanceof Array)return c.map(i=>N(i,e));let n={};for(let i in c)e.includes(i)||t&&i.startsWith("_")||c.hasOwnProperty(i)&&(n[i]=N(c[i],e));return n}function zn(c,e){let t;return function(...i){let s=()=>{clearTimeout(t),c(...i)};clearTimeout(t),t=setTimeout(s,e)}}function Ct(c="id"){return`${c}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Bn(c,e,t){return Math.max(e,Math.min(t,c))}function Hn(c,e,t){return c+(e-c)*Bn(t,0,1)}function vt(c,e=3){return parseFloat(c.toFixed(e))}function Un(c){if(typeof c!="string")return c;if(c=c.trim(),c==="true")return!0;if(c==="false")return!1;if(!isNaN(c)&&c!=="")return parseFloat(c);if(c.startsWith("{")||c.startsWith("["))try{return JSON.parse(c)}catch{}return c}function jn(c,e){return e.split(".").reduce((t,n)=>t?.[n],c)}function Vn(c,e,t){let n=e.split("."),i=n.pop(),s=n.reduce((o,r)=>(o[r]||(o[r]={}),o[r]),c);s[i]=t}function In(c,e){if(c===e)return!0;if(c==null||e==null||typeof c!=typeof e)return!1;if(typeof c!="object")return c===e;let t=Object.keys(c),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i of t)if(!n.includes(i)||!In(c[i],e[i]))return!1;return!0}function qn(c,e){let t;return function(...n){t||(c.apply(this,n),t=!0,setTimeout(()=>t=!1,e))}}function Wn(c){return c.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^(\d)/,"_$1").replace(/_+/g,"_").replace(/^_|_$/g,"")}function Jn(c){return{Transform:"\u22B9",Rigidbody:"\u269B",BoxCollider:"\u25A1",SphereCollider:"\u25CB",CapsuleCollider:"\u25EF",MeshCollider:"\u25A3",Geometry:"\u25C6",Material:"\u{1F3A8}",Text:"T",AudioSource:"\u{1F50A}",VideoPlayer:"\u25B6",Browser:"\u{1F310}",GLTF:"\u{1F4E6}",AssetBundle:"\u{1F4C1}",GrabHandle:"\u270B",HeldEvents:"\u{1F446}",AttachedObject:"\u{1F4CC}",SyncedObject:"\u{1F504}",Billboard:"\u{1F441}",Mirror:"\u{1FA9E}",Portal:"\u{1F300}"}[c]||"\u25CF"}function g(c){if(typeof c!="string")return c;let e=c.trim();if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1;if(e.toLowerCase()==="null")return null;if(e.toLowerCase()!=="undefined"){if(!isNaN(e)&&e!=="")return Number(e);if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e)}catch{}return c}}function M(c){return new Promise(e=>{let t=document.createElement("div");t.className="custom-confirm-modal",t.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100000;
        `;let n=document.createElement("div");n.style.cssText=`
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        `;let i=document.createElement("div");i.textContent=c,i.style.cssText=`
            color: #fff;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.5;
        `,n.appendChild(i);let s=document.createElement("div");s.style.cssText=`
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        `;let o=document.createElement("button");o.textContent="Cancel",o.style.cssText=`
            padding: 8px 16px;
            background: #444;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        `,o.onmouseover=()=>o.style.background="#555",o.onmouseout=()=>o.style.background="#444";let r=document.createElement("button");r.textContent="OK",r.style.cssText=`
            padding: 8px 16px;
            background: #0066cc;
            color: #fff;
            border: 1px solid #0077dd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        `,r.onmouseover=()=>r.style.background="#0077dd",r.onmouseout=()=>r.style.background="#0066cc",o.onmousedown=()=>{document.body.removeChild(t),e(!1)},r.onmousedown=()=>{document.body.removeChild(t),e(!0)};let a=l=>{l.key==="Escape"&&(document.body.removeChild(t),document.removeEventListener("keydown",a),e(!1))};document.addEventListener("keydown",a),s.appendChild(o),s.appendChild(r),n.appendChild(s),t.appendChild(n),document.body.appendChild(t),r.focus()})}function T(c){let e=document.createElement("div");e.className="editor-notification",e.textContent=c,document.body.appendChild(e),setTimeout(()=>{e.classList.add("show")},10),setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>{e.remove()},300)},2e3)}function U(c,e,t){if(!window.logger||!window.logger.include[c])return;let n=document.getElementById("lifecycleShell");if(!n)return;let i=n.children;i.length>=500&&n.removeChild(i[0]);let s=document.createElement("div");s.className="change-item",s.style.whiteSpace="pre-wrap",s.style.fontFamily="monospace";let o="white",r=c.toUpperCase();if(c==="command"&&(o=window.logger.getTagColor(c),s.id=e,r="COMMAND",s.innerHTML=`${new Date().toTimeString().split(" ")[0].slice(3,8)} <span style="color: ${o}; font-weight: bold">[${r}]:</span> ${t}`),c==="oneShot"){o=getUserColor(e),r=e;let a=`${new Date().toTimeString().split(" ")[0].slice(3,8)} <span style="color: ${o}; font-weight: bold">[${r}] </span> `,l=t.split("\xB6"),d=["#ffaa00","#88ddff","#ff88ff","#ff4444","#4488ff","#ff44ff","#ffff44","#444444","#ffffff"],p=["font-weight: bold","font-weight: normal","font-weight: italic","font-weight: bold italic","font-weight: bold normal","font-weight: normal bold","font-weight: bold normal italic","font-weight: normal bold italic"],h=0;l.forEach(u=>{a+=`<span style="color: ${d[h]}; ${p[h]}">${u} </span>`,h++}),s.innerHTML=a}n.appendChild(s),n.scrollTop=n.scrollHeight}var St=class{constructor(){this.include={error:!1,command:!1,script:!1,oneShot:!0,spaceProps:!1},this.broadcastTags=[],this.remoteTagsExcluded=[],this.tagColors={},this.originalLog=console.log.bind(console),this.originalError=console.error.bind(console),this.active=!0}hashStringToColor(e){let t=0;for(let o=0;o<e.length;o++)t=e.charCodeAt(o)+((t<<5)-t);let n=Math.abs(t%360),i=60+Math.abs(t>>8)%30,s=50+Math.abs(t>>16)%30;return`hsl(${n}, ${i}%, ${s}%)`}getTagColor(e){return this.tagColors[e]||(this.tagColors[e]=this.hashStringToColor(e)),this.tagColors[e]}getCallerInfo(){let t=new Error().stack.split(`
`);for(let n=2;n<t.length;n++){let i=t[n];if(!i.includes("Logger.")&&!i.includes("bound ")&&!i.includes("getCallerInfo")&&!i.includes("window.log")&&!i.includes("window.err")){let s=i.match(/(?:at\s+)?(?:.*?\s+\()?(.+?):(\d+):(\d+)\)?$/);if(s){let o=s[1],r=s[2],a=s[3];return{fileName:o.split("/").pop(),lineNum:r,colNum:a,fullPath:o}}}}return null}createLogProxy(e,t=!1){let n=this.getTagColor(e),i=this;return function(...s){if(t?console.error(`%c[${e.toUpperCase()}]:%c`,`color: ${n}; font-weight: bold`,"color: inherit",...s):console.log(`%c[${e.toUpperCase()}]:%c`,`color: ${n}; font-weight: bold`,"color: inherit",...s),i.include[e]){let o=i.getCallerInfo(),r=s.map(l=>typeof l=="object"?JSON.stringify(l):l).join(" "),a=o?` (${o.fileName}:${o.lineNum})`:"";U(t?"error":e,Ct(t?"error":"log"),r+a)}}}log(e,...t){this.createLogProxy(e,!1)(...t)}err(e,...t){this.createLogProxy(e,!0)(...t)}};window.logger=new St;var Gn=console.log,Kn=console.error;window.logFrequency={};window.log=function(c,...e){if(!window.logger.active)return;let t=window.logger.getTagColor(c);window.logFrequency[c]||(window.logFrequency[c]=0),window.logFrequency[c]++;let n=window.logger.getCallerInfo(),i=1e3,s=e.map(o=>typeof o=="string"&&o.length>i?o.substring(0,i)+"... [truncated]":o);if(n?(console.groupCollapsed(`%c[${c.toUpperCase()}]%c @ ${n.fileName}:${n.lineNum}%c`,`color: ${t}; font-weight: bold`,"color: #888; font-size: 0.9em","color: inherit",...s),console.trace("Stack trace"),console.groupEnd()):Gn.apply(console,[`%c[${c.toUpperCase()}]:%c`,`color: ${t}; font-weight: bold`,"color: inherit",...s]),window.logger.broadcastEvent&&window.logger.broadcastTags.includes(c)){let o={tag:c,color:t,truncatedArgs:s,fileName:n.fileName,lineNum:n.lineNum};window.dispatchEvent(new CustomEvent("log-event",{detail:o})),window.logger.remote&&!window.logger.remoteTagsExcluded.includes(c)&&net.sendOneShot("log_event\xB6"+JSON.stringify(o))}if(window.logger.include[c]){let r=e.map(l=>{if(typeof l=="object")try{let p=JSON.stringify(l);return p&&p.length>i?p.substring(0,i)+"...[truncated]":p}catch{return"[circular object]"}let d=String(l);return d.length>i?d.substring(0,i)+"...[truncated]":d}).join(" ");r.length>5e3&&(r=r.substring(0,5e3)+"... [message truncated]");let a=n?` (${n.fileName}:${n.lineNum})`:"";U(c,Ct("log"),r+a)}};window.err=function(c,...e){let t=window.logger.getTagColor(c),n=window.logger.getCallerInfo(),i=1e3,s=e.map(o=>{if(typeof o=="string"&&o.length>i)return o.substring(0,i)+"... [truncated]";if(typeof o=="object")try{let r=JSON.stringify(o);return r&&r.length>i?r.substring(0,i)+"... [truncated object]":o}catch{return"[circular or complex object]"}return o});if(n?(console.groupCollapsed(`%c[${c.toUpperCase()}]%c @ ${n.fileName}:${n.lineNum}%c`,`color: ${t}; font-weight: bold`,"color: #f88; font-size: 0.9em","color: inherit",...s),console.trace("Stack trace"),console.groupEnd()):Kn.apply(console,[`%c[${c.toUpperCase()}]:%c`,`color: ${t}; font-weight: bold`,"color: inherit",...s]),window.logger.include[c]){let r=e.map(l=>{if(typeof l=="object")try{let p=JSON.stringify(l);return p&&p.length>i?p.substring(0,i)+"...[truncated]":p}catch{return"[circular object]"}let d=String(l);return d.length>i?d.substring(0,i)+"...[truncated]":d}).join(" ");r.length>5e3&&(r=r.substring(0,5e3)+"... [message truncated]");let a=n?` (${n.fileName}:${n.lineNum})`:"";U("error",Ct("error"),r+a)}};window.showNotification=T;window.TransformOps={Add:(c,e)=>({x:c.x+e.x,y:c.y+e.y,z:c.z+e.z}),Subtract:(c,e)=>({x:c.x-e.x,y:c.y-e.y,z:c.z-e.z}),Multiply:(c,e)=>typeof e=="number"?{x:c.x*e,y:c.y*e,z:c.z*e}:typeof c=="number"?{x:c*e.x,y:c*e.y,z:c*e.z}:{x:c.x*e.x,y:c.y*e.y,z:c.z*e.z},Divide:(c,e)=>typeof e=="number"?{x:c.x/e,y:c.y/e,z:c.z/e}:typeof c=="number"?{x:c/e.x,y:c/e.y,z:c/e.z}:{x:c.x/e.x,y:c.y/e.y,z:c.z/e.z}};function gt(c){let e=Math.hypot(c.x,c.y,c.z,c.w)||1;return{x:c.x/e,y:c.y/e,z:c.z/e,w:c.w/e}}function Xn(c){return{x:-c.x,y:-c.y,z:-c.z,w:c.w}}function Qn(c,e){return{w:c.w*e.w-c.x*e.x-c.y*e.y-c.z*e.z,x:c.w*e.x+c.x*e.w+c.y*e.z-c.z*e.y,y:c.w*e.y-c.x*e.z+c.y*e.w+c.z*e.x,z:c.w*e.z+c.x*e.y-c.y*e.x+c.z*e.w}}function Yn(c){let e=Math.hypot(c.x,c.y,c.z)||1;return{x:c.x/e,y:c.y/e,z:c.z/e}}function Zn(c,e){let t=gt(c),n=Yn(e),i=t.x*n.x+t.y*n.y+t.z*n.z,s={x:n.x*i,y:n.y*i,z:n.z*i},o=gt({x:s.x,y:s.y,z:s.z,w:t.w});return o.w<0?{x:-o.x,y:-o.y,z:-o.z,w:-o.w}:o}function an(c,e){let t=Zn(c,e);return gt(Qn(c,Xn(t)))}var ei={x:1,y:0,z:0},ti={x:0,y:1,z:0},ni={x:0,y:0,z:1};window.lockQuaternionAxes=(c,e=!1,t=!1,n=!1)=>(c=gt(c),e&&(c=an(c,ei)),t&&(c=an(c,ti)),n&&(c=an(c,ni)),gt(c));function kn(c){if(typeof c!="string")return null;if(!c.startsWith("__"))return{isEncoded:!1,raw:c};let e=c.substring(2),t=e.lastIndexOf(":");if(t===-1)return{isEncoded:!0,raw:c,entityName:e,propertyPath:null,componentId:null,malformed:!0};let n=e.substring(t+1),i=e.substring(0,t),s=i.indexOf("/");if(s===-1)return{isEncoded:!0,raw:c,entityName:i,propertyPath:null,componentId:n,malformed:!0};let o=i.substring(0,s),r=i.substring(s+1);return{isEncoded:!0,raw:c,entityName:o,propertyPath:r,componentId:n,malformed:!1}}function Pn(c,e,t){return`__${c}/${e}:${t}`}function Tn(c){return typeof c=="string"&&c.startsWith("__")}window.decodeSpacePropertyKey=kn;window.encodeSpacePropertyKey=Pn;window.isEncodedSpacePropertyKey=Tn;var ln=class{constructor(){this.stages=[{id:"banterScene",label:"Initializing BS Library...",weight:25},{id:"modules",label:"Loading modules...",weight:30},{id:"scene-connect",label:"Connecting to Unity scene...",weight:20},{id:"hierarchy",label:"Gathering scene hierarchy...",weight:5},{id:"entities",label:"Generating entities...",weight:20}],this.currentStageIndex=-1,this.subProgress=0,this.element=null,this.progressFillElement=null,this.percentageElement=null,this.statusElement=null,this.substatusElement=null,this.errorState=!1,this.startTime=Date.now(),this.stageStartTime=Date.now()}show(){this.element=document.createElement("div"),this.element.id="loadingScreen",this.element.className="loading-screen",this.element.innerHTML=`
            <div class="loading-container">
                <div class="loading-logo">
                    <div class="loading-spinner"></div>
                </div>
                <h2 class="loading-title">Banter Scene Inspector</h2>
                <div class="loading-progress-container">
                    <div class="loading-progress-bar">
                        <div class="loading-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="loading-percentage">0%</div>
                </div>
                <div class="loading-status">Initializing...</div>
                <div class="loading-substatus"></div>
                <div class="loading-error-container" style="display: none;">
                    <div class="loading-error-message"></div>
                    <div class="loading-error-actions">
                        <button class="loading-retry-btn">Retry</button>
                    </div>
                </div>
            </div>
        `,this.progressFillElement=this.element.querySelector(".loading-progress-fill"),this.percentageElement=this.element.querySelector(".loading-percentage"),this.statusElement=this.element.querySelector(".loading-status"),this.substatusElement=this.element.querySelector(".loading-substatus"),this.errorContainer=this.element.querySelector(".loading-error-container"),this.errorMessage=this.element.querySelector(".loading-error-message"),document.body.appendChild(this.element),this.element.offsetHeight,this.element.classList.add("visible");let e=this.element.querySelector(".loading-retry-btn");e&&e.addEventListener("mousedown",()=>{this.clearError(),window.location.reload()})}hide(){if(!this.element)return;let e=Date.now()-this.startTime;log("init",`Total load time: ${(e/1e3).toFixed(2)}s`),this.element.classList.add("hiding"),setTimeout(()=>{this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.element=null)},500)}updateStage(e,t=0,n=""){let i=this.stages.findIndex(r=>r.id===e);if(i===-1){log("init",`Unknown loading stage: ${e}`);return}if(i!==this.currentStageIndex){if(this.currentStageIndex>=0){let r=Date.now()-this.stageStartTime;log("init",`Stage '${this.stages[this.currentStageIndex].id}' completed in ${(r/1e3).toFixed(2)}s`)}this.stageStartTime=Date.now(),this.currentStageIndex=i}this.subProgress=Math.max(0,Math.min(100,t));let s=this.stages[i];this.statusElement&&(this.statusElement.textContent=s.label),this.substatusElement&&(this.substatusElement.textContent=n||"");let o=this.calculateProgress();this.updateProgressBar(o)}calculateProgress(){if(this.currentStageIndex<0)return 0;let e=this.stages.reduce((i,s)=>i+s.weight,0),t=0;for(let i=0;i<this.currentStageIndex;i++)t+=this.stages[i].weight;let n=this.stages[this.currentStageIndex];return t+=n.weight*this.subProgress/100,t/e*100}updateProgressBar(e){let t=Math.round(e);this.progressFillElement&&(this.progressFillElement.style.width=`${e}%`),this.percentageElement&&(this.percentageElement.textContent=`${t}%`)}setError(e){this.errorState=!0,this.errorContainer&&(this.errorContainer.style.display="block"),this.errorMessage&&(this.errorMessage.textContent=e),this.statusElement&&(this.statusElement.textContent="Initialization Error",this.statusElement.classList.add("error")),this.progressFillElement&&(this.progressFillElement.style.background="linear-gradient(90deg, #ff4444, #cc0000)")}clearError(){this.errorState=!1,this.errorContainer&&(this.errorContainer.style.display="none"),this.statusElement&&this.statusElement.classList.remove("error"),this.progressFillElement&&(this.progressFillElement.style.background="")}createModuleTracker(e){let t=0;return()=>{t++;let n=t/e*100;return this.updateStage("modules",n,`Loading module ${t} of ${e}`),t===e}}createBSLibraryTimeout(e=1e4){return new Promise((t,n)=>{let i,s=0,o=100;i=setInterval(()=>{s+=o;let r=Math.min(90,s/e*100);this.updateStage("bs-wait",r,`Waiting... ${(s/1e3).toFixed(1)}s`),typeof window.BS<"u"&&window.BS.BanterScene?(clearInterval(i),this.updateStage("bs-wait",100,"BanterScript library loaded"),t()):s>=e&&(clearInterval(i),n(new Error("BanterScript library failed to load after "+e/1e3+" seconds")))},o)})}},q=new ln;var w=class{constructor(){this._bsRef=null,this._lastUpdate=new Map,this._initialized=!1,this.options={}}async init(e,t,n,i){if(this.id=n?.id||`${this.type}_${Math.floor(Math.random()*99999)}`,this._entity=e,this.properties=n?this.fillProperties(n):this.defaultProperties(),this.options=i||{},this.loadAsync=i?.loadAsync||!1,t)this.properties=this.extractProperties(t),this._bs=t;else{if(this._bsRef){let s=await e._bs.AddComponent(new this._bsRef);this._bs=s}await this._setMany(this.properties)}return window.SM.entityData.componentMap[this.id]=this,delete this.properties.id,this._initialized=!0,this.ref=net.db.ref(`space/${net.spaceId}/components/${this.id}`),this.ref.on("value",s=>{let o=s.val();if(o===null)return;delete o.id;for(let a in o){let l=JSON.stringify(this.properties[a]),d=JSON.stringify(o[a]);l!==d&&this._set(a,o[a])}let r=this.defaultProperties();for(let a in r)a in o||this._set(a,r[a])}),(this.options.context==="crawl"||this.options.context==="spawn")&&await this.ref.set(this.properties),this}enums(){return{}}setId(e){delete window.SM.entityData.componentMap[this.id],this.id=e,window.SM.entityData.componentMap[this.id]=this}async defaultProperties(){return{}}fillProperties(e){let t=this.defaultProperties();for(let n in e)t[n]!==void 0&&(t[n]=e[n]);return t}async extractProperties(e){return{}}async _setMany(e){for(let t in e)await this._set(t,e[t])}async _set(e,t){t=g(t),this.properties[e]=t,this._bs[e]=t}async _destroy(){this.ref.remove(),this._bs&&this._bs.Destroy();let e=this._entity.components.indexOf(this);e!==-1&&(this._entity.components.splice(e,1),delete SM.entityData.componentMap[this.id],inspector.propertiesPanel.render(this._entity.id))}async Set(e,t){t===null?await this.ref.child(e).remove():await this.ref.update({[e]:t})}WatchProperties(e,t){let n=e.map(i=>BS.PropertyName[i]);return log("WatchProperties",this.id,e),this._bs.WatchProperties(n,()=>{log("WatchProperties",this.id,e);for(let i of e)this.properties[i]=this._bs[i],SM.selectedEntity===this._entity.id&&inspector.propertiesPanel.updateProperty(this.id,i,this._bs[i]);t&&t({target:this,properties:this.properties})}),this}};var dn=async c=>{if(c==="Scene"||c==="People"||!c)return{x:1,y:1,z:1};let e=SM.getEntityById(c);if(!e)return{x:1,y:1,z:1};let t=await e.getTransform().Get("localScale"),n=await dn(e.parentId);return{x:t.x*n.x,y:t.y*n.y,z:t.z*n.z}},Y=class extends w{constructor(){super(),this._bsRef=BS.Transform,this.type="Transform"}async init(e,t,n,i){return await super.init(e,t,n,i),this}async _update(e,t){t=g(t),this.properties[e]=t,inspector.propertiesPanel.updateProperty(this.id,e,t)}async _set(e,t){t=g(t),this.properties[e]=t,t.x=parseFloat(t.x||0),t.y=parseFloat(t.y||0),t.z=parseFloat(t.z||0),e==="localPosition"||e==="localScale"||e==="position"||e==="scale"?this._bs[e]=new BS.Vector3(t.x,t.y,t.z):(e==="localRotation"||e==="rotation")&&("w"in t?(t.w=parseFloat(t.w||1),this._bs[e]=new BS.Vector4(t.x,t.y,t.z,t.w)):(t=Q(t),this._bs[e]=new BS.Vector4(t.x,t.y,t.z,t.w)))}extractProperties(e){return{localPosition:e.localPosition||{x:0,y:0,z:0},localRotation:e.localRotation||{x:0,y:0,z:0,w:1},localScale:e.localScale||{x:1,y:1,z:1}}}defaultProperties(){return{localPosition:{x:0,y:0,z:0},localRotation:{x:0,y:0,z:0,w:1},localScale:{x:1,y:1,z:1}}}async Add(e,t){let n=t.x||0,i=t.y||0,s=t.z||0,o=this.properties[e],r={x:o.x+n,y:o.y+i,z:o.z+s};return await this.Set(e,r),this}async Multiply(e,t){let n=t.x||1,i=t.y||1,s=t.z||1,o=this.properties[e],r={x:o.x*n,y:o.y*i,z:o.z*s};return await this.Set(e,r),this}async Get(e){return await this._bs.Q([13]),e==="transform"?{position:this._bs._position,rotation:this._bs._rotation,scale:await dn(this._entity.id),localPosition:this._bs._localPosition,localRotation:this._bs._localRotation,localScale:this._bs._localScale}:e==="scale"?await dn(this._entity.id):this._bs[`_${e}`]}};var j=class c{async init(e,t){this.name=e.name||`New_Entity_${Math.floor(Math.random()*99999)}`,this.parentId=e.parentId,this.components=e.components||[],this.children=e.children||[],this._bs=e._bs,this.loadAsync=e.loadAsync||!1,this.active=!0,this.layer=parseInt(e.layer)||0,this.persistent=!0,this.identifiers=new Set,this.initialized=!1,this.type="Entity",this.keepPositionOnParenting=!1,this.options=t||{},this.uuid=e.uuid||Math.floor(Math.random()*1e13),SM.entityData.entityUUIDMap[this.uuid]=this;let n=SM.getEntityOrScene(this.parentId);if(!e._bs){let i={name:this.name},s=e.localPosition,o=e.localRotation,r=e.localScale;s&&(i.localPosition=new BS.Vector3(s.x,s.y,s.z)),o&&(i.localRotation=new BS.Vector4(o.x,o.y,o.z,o.w)),r&&(i.localScale=new BS.Vector3(r.x,r.y,r.z)),n&&(i.parent=n._bs),i.layer=this.layer,i.active=this.active;let a=new BS.GameObject(i);i.parent&&setTimeout(async()=>{i.localPosition&&(a.transform.localPosition=i.localPosition),i.localRotation&&(a.transform.localRotation=i.localRotation),i.localScale&&(a.transform.localScale=i.localScale)},150),this._bs=a}return this._bs.networkId=e.networkId,this.id=this.parentId?this.parentId+"/"+this.name:this.name,this.identifiers.add(this.id),window.SM.entityData.entityMap[this.id]=this,this.initialized=!0,this.transform=this._bs.transform,this.parentId&&n&&n!=="building.."&&n.initialized&&this._setParent(n,!0),this.setupRefs(),this.options.context==="crawl"&&await this.meta_ref.set({active:this.active,layer:this.layer,localPosition:this.localPosition,localRotation:this.localRotation,localScale:this.localScale,position:this.position,rotation:this.rotation,uuid:this.uuid}),inspector.hierarchyPanel.render(),this}setupRefs(){this.ref=net.db.ref(`space/${net.spaceId}/${this.id}`),this.meta_ref=this.ref.child("__meta"),this.meta_ref.child("active").on("value",e=>{let t=e.val();t!==null&&(this.active=t,this._bs.SetActive(this.active),inspector.hierarchyPanel.render())}),this.meta_ref.child("layer").on("value",e=>{let t=e.val();t&&(this.layer=t,this._bs.SetLayer(this.layer))}),this.meta_ref.child("localPosition").on("value",e=>{let t=e.val();t&&(t.x===this.transform.localPosition.x&&t.y===this.transform.localPosition.y&&t.z===this.transform.localPosition.z||(this.transform.localPosition=new BS.Vector3(t.x,t.y,t.z)))}),this.meta_ref.child("localRotation").on("value",e=>{let t=e.val();t&&(t.x===this.transform.localRotation.x&&t.y===this.transform.localRotation.y&&t.z===this.transform.localRotation.z&&t.w===this.transform.localRotation.w||(this.transform.localRotation=new BS.Vector4(t.x,t.y,t.z,t.w)))}),this.meta_ref.child("localScale").on("value",e=>{let t=e.val();t&&(t.x===this.transform.localScale.x&&t.y===this.transform.localScale.y&&t.z===this.transform.localScale.z||(this.transform.localScale=new BS.Vector3(t.x,t.y,t.z)))}),this.meta_ref.child("position").on("value",e=>{let t=e.val();t&&(t.x===this.transform.position.x&&t.y===this.transform.position.y&&t.z===this.transform.position.z||(this.transform.position=new BS.Vector3(t.x,t.y,t.z)))}),this.meta_ref.child("rotation").on("value",e=>{let t=e.val();t&&(t.x===this.transform.rotation.x&&t.y===this.transform.rotation.y&&t.z===this.transform.rotation.z&&t.w===this.transform.rotation.w||(this.transform.rotation=new BS.Vector4(t.x,t.y,t.z,t.w)))}),this.meta_ref.child("components").on("child_added",async e=>{let t=e.val(),n=SM.getEntityComponentById(e.key,!1);if(log(`Entity[${this.id}]`,`${n?"existing":"new"} component added`,e.key,t),!n){let s=await net.db.ref(`space/${net.spaceId}/components/${e.key}`).once("value");s=s.val(),s.id=e.key;let o=componentTypeMap[e.key.split("_")[0]];n=await new o().init(this,null,s)}this.components.find(s=>s.id===e.key)||(log(`Entity[${this.id}]`,`does not have ${e.key} => adding`),await this._addComponent(n))}),this.meta_ref.child("components").on("child_removed",async e=>{let t=e.val(),n=SM.getEntityComponentById(e.key);n&&(log(`Entity[${this.id}]`,"removing component",e.key),await this._removeComponent(n))}),this.startListeningForChildChanges=()=>{this.ref.on("child_added",async e=>{let t=e.key;if(t==="__meta")return;window.lastAddedChild=e;let n=e.val(),i=SM.entityData.entityUUIDMap[n.__meta.uuid];if(i){if(log("ENTITY_REF_REDUNDANT",t,this.id,n,i),i==="building.."){let s=setInterval(()=>{let o=SM.entityData.entityUUIDMap[n.__meta.uuid];log("ENTITY_REF_REDUNDANT_CHECK",t,this.id,n,o),o&&o!=="building.."&&o.initialized&&(clearInterval(s),this.children.includes(o)||this._addChild(o))},50);setTimeout(()=>clearInterval(s),5e3);return}this.id===i.parentId?i._rename(t):i._setParent(this)}else{SM.entityData.entityUUIDMap[n.__meta.uuid]="building..",log("ENTITY_REF_NEW",t,this.id,n),n.parentId=this.id,n.name=t;let s=this.id+"/"+t,o=SM.getEntityById(s);if(o){log("ENTITY_REF_REDUNDANT",t,this.id,n,o);return}let r=new c;await r.init(n),SM.entityData.entityUUIDMap[n.__meta.uuid]=r}inspector.hierarchyPanel.render()}),this.ref.on("child_removed",async e=>{let t=e.key;if(t==="__meta")return;let n=e.val(),i=this.id+"/"+t,s=SM.getEntityById(i);s&&(SM.garbage.push(s),this.children=this.children.filter(o=>o!==s),setTimeout(()=>{let o=SM.getEntityById(s.parentId);(!o||!o.children.includes(s))&&s._destroy()},500)),n.__meta.destroyed&&await s._destroy(),inspector.hierarchyPanel.render()})},SM.loaded&&this.startListeningForChildChanges()}get localPosition(){return this.transform?this.transform.localPosition:{x:0,y:0,z:0}}get localRotation(){return this.transform?this.transform.localRotation:{x:0,y:0,z:0,w:1}}get localScale(){return this.transform?this.transform.localScale:{x:1,y:1,z:1}}get position(){return this.transform?this.transform.position:{x:0,y:0,z:0}}get rotation(){return this.transform?this.transform.rotation:{x:0,y:0,z:0,w:1}}get scale(){return this.transform?this.transform.scale:{x:1,y:1,z:1}}GetComponent(e,t=0){return this.components.filter(n=>n.type===e)[t]}AddComponent(e){this.meta_ref.child("components").child(e.id).set(!0),this._addComponent(e)}async _addComponent(e){this.components.includes(e)||(this.components.push(e),SM.entityData.componentMap[e.id]=e,e._entity=this,inspector.propertiesPanel.render())}RemoveComponent(e){this.meta_ref.child("components").child(e.id).remove(),this._removeComponent(e)}async _removeComponent(e){await e._destroy()}getComponent(e,t=0){return this.components.filter(n=>n.type===e)[t]}getComponents(e){return this.components.filter(t=>t.type===e)}reorderComponent(e,t){if(e<0||e>=this.components.length||t<0||t>=this.components.length)return err("entity","Invalid component indices for reorder"),!1;let[n]=this.components.splice(e,1);return this.components.splice(t,0,n),!0}_loaded(){this._finished_loading=!0,this.components.filter(t=>t.type==="ScriptRunner").forEach(async t=>{await t.ctx.onLoaded()})}_addChild(e){if(log("ENTITY_ADD_CHILD",e.id,this.id),e.parentId=this.id,!this.children.includes(e))return this.children.push(e),e._bs.SetParent(this._bs,this.keepPositionOnParenting),e}async _setParent(e,t){if(!(!e||e==="building..")){if(!t){if(e===this)return;if(this.parentId){let n=SM.getEntityById(this.parentId);if(n===e){this._rename(this.name);return}n&&(n.children=n.children.filter(i=>i.id!==this.id))}}e._addChild(this),this._rename(this.name)}}async Rename(e){await this._rename(e)}_renameDownwards(){this.identifiers.add(this.id),delete SM.entityData.entityMap[this.id],this.id=this.parentId+"/"+this.name,SM.entityData.entityMap[this.id]=this,this._bs.SetName(this.id),this.children.forEach(e=>{e._renameDownwards()}),this.meta_ref&&(this.meta_ref.child("components").off(),this.meta_ref.child("active").off(),this.meta_ref.child("layer").off(),this.meta_ref.child("localPosition").off(),this.meta_ref.child("localRotation").off(),this.meta_ref.child("localScale").off(),this.meta_ref.child("position").off(),this.meta_ref.child("rotation").off(),this.meta_ref.off()),this.ref&&this.ref.off(),this.setupRefs()}async _rename(e){log("RENAMING ENTITY",this.id,"=>",e);let t=this.parentId+"/"+e;if(this.id===t){log("RENAMING ENTITY",this.id,"=>",e,"=> same name, skipping");return}this.name=e;let n=this.ref,i=await n.once("value"),s=net.db.ref(`space/${net.spaceId}/${this.parentId}`);this._renameDownwards();let o=i.val();log("entity","renaming",this.id,"=>",t,"with snapshot",o),await s.child(e).set(o),n.remove()}async Destroy(){await this.meta_ref.child("destroyed").set(!0),this.ref.remove()}async _destroy(){this._stagedForDestruction=!0;let e=[...this.components.filter(i=>i.type==="ScriptRunner")];for(let i of e)await i._destroy();let t=[...this.children];for(let i of t)await i._destroy();let n=[...this.components];for(let i of n)i.type!=="ScriptRunner"&&await i._destroy();if(await this._bs.Destroy(),delete SM.entityData.entityMap[this.id],this.parentId){let i=SM.getEntityById(this.parentId);i&&(i.children=i.children.filter(s=>s.id!==this.id))}SM.garbage.includes(this)&&(SM.garbage=SM.garbage.filter(i=>i.id!==this.id))}transformVal(e){let t=this.transform[e],n={x:t.x,y:t.y,z:t.z};return t.w&&(n.w=t.w),n}_set(e,t){if(t=g(t),e=="active"){if(t===this.active)return;this.active=t,this._bs.SetActive(t),this.components.forEach(n=>{n.type==="ScriptRunner"&&(t?n._refresh():n._stop())})}else if(e=="persistent"){if(t===this.persistent)return;this.persistent=t}else if(e=="layer"){if(t===this.layer)return;this.layer=t,this._bs.SetLayer(t)}else if(e=="localPosition"){if(t===this.localPosition)return;this.transform.localPosition=new BS.Vector3(t.x,t.y,t.z)}else if(e=="localRotation"){if(t===this.localRotation)return;"w"in t?t.w=parseFloat(t.w||1):t=Q(t),this.transform.localRotation=new BS.Vector4(t.x,t.y,t.z,t.w)}else if(e=="localScale"){if(t===this.localScale)return;this.transform.localScale=new BS.Vector3(t.x,t.y,t.z)}else if(e=="position"){if(t===this.position)return;this.transform.position=new BS.Vector3(t.x,t.y,t.z)}else if(e=="rotation"){if(t===this.rotation)return;this.transform.rotation=new BS.Vector4(t.x,t.y,t.z,t.w)}}async export(){let t=(await this.ref.once("value")).val(),n={};for(let s of this.components)n[s.id]=s.properties;let i=this.getAllDescendants();for(let s of i)for(let o of s.components)n[o.id]=o.properties;return{Entity:{[this.name]:t},Components:n}}async Set(e,t){let n=g(t);e=="name"?this.Rename(t):(log("entity","Set =>",this.id,e,n),this.meta_ref.update({[e]:n}))}Get(e){let t={forward:()=>{let i=this.transform.rotation;return new BS.Vector3(2*(i.x*i.z+i.w*i.y),2*(i.y*i.z-i.w*i.x),1-2*(i.x*i.x+i.y*i.y))},backward:()=>{let i=this.Get("forward");return new BS.Vector3(-i.x,-i.y,-i.z)},right:()=>{let i=this.transform.rotation;return new BS.Vector3(1-2*(i.y*i.y+i.z*i.z),2*(i.x*i.y+i.w*i.z),2*(i.x*i.z-i.w*i.y))},left:()=>{let i=this.Get("right");return new BS.Vector3(-i.x,-i.y,-i.z)},up:()=>{let i=this.transform.rotation;return new BS.Vector3(2*(i.x*i.y-i.w*i.z),1-2*(i.x*i.x+i.z*i.z),2*(i.y*i.z+i.w*i.x))},down:()=>{let i=this.Get("up");return new BS.Vector3(-i.x,-i.y,-i.z)}};if(t[e])return t[e]();let n=this.transform[e];return n||this[e]}async SetParent(e){let t=SM.getEntityById(e);if(!t){err("entity","SetParent","New parent not found",e);return}let n=this.ref,i=await this.ref.once("value");await t.ref.child(this.name).set(i.val()),n.remove()}WatchTransform(e,t){log("watch",this.id,"transform",e);let n=e.map(i=>BS.PropertyName[i]);log("watch",this.id,"bs_props",n),this._bs.WatchTransform(n,i=>{log("WatchTransform"),SM.selectedEntity===this.id&&inspector.propertiesPanel.updateTransform(),t&&t({target:this,transform:this.transform})})}GetScript(e){let t=this.components.filter(n=>n.type==="ScriptRunner"&&n.properties.name===e).map(n=>n.ctx);return t.length===0?null:t[0]}GetChild(e){let t=this.children.filter(n=>n.name===e);return t.length===0?null:t[0]}getAllDescendants(){let e=[],t=n=>{for(let i of n.children)e.push(i),t(i)};return t(this),e}};var z=class extends w{constructor(){super(),this._bsRef=null,this.inventoryItem=null}async init(e,t,n,i){return await super.init(e,t,n,i),i?.owner&&(this.properties.owner=i.owner),this.ctx=this.ctx?this.ctx:this.newScriptContext(),this._scriptFunction=this._scriptFunction?this._scriptFunction:null,this.type="ScriptRunner",this.setId(this.id.replace("undefined","ScriptRunner")),this}async _setMany(e){for(let t in e)t!=="file"&&await this._set(t,e[t]);await this._set("file",e.file)}async _set(e,t){log("mono","[MONO] updating property =>",e,t),t=g(t),this.properties[e]=t,e==="file"&&(t&&t.length>0?await this.LoadScript(t):this.ctx&&(this.ctx._running&&await this._stop(),this.ctx.vars={},this.properties.vars={})),e==="vars"&&this.ctx&&this.ctx.vars&&Object.entries(t).forEach(([n,i])=>{this.ctx.vars[n]&&i.value!==this.ctx.vars[n].value&&this._setVar(n,i)})}extractProperties(e){return{name:e.name||"myScript",file:e.file||null,vars:e.vars||{},owner:"global",hotreload:!0}}defaultProperties(){return{name:"myScript",file:null,vars:{},owner:"global",hotreload:!0}}amOwner(){return this.properties.owner===SM.myName()}async getScriptAsset(e){let t=SM.getScriptAsset(e);if(!t)if(window.inventory&&window.inventory.items[e]){if(window.inventory.items[e].itemType==="script")return log("mono",`Found "${e}" in inventory, loading to scene...`),await window.LoadScript(e),SM.getScriptAsset(e);log("mono",`Item "${e}" in inventory is not a script`)}else log("mono",`Script "${e}" not found in inventory either`);return t}async LoadScript(e){if(!e||e.length===0){this.ctx._running=!1;return}let t=await this.getScriptAsset(e);if(!t){log("mono",`ScriptAsset "${e}" not found`);return}await this._loadScript(e,t)}async _loadScript(e,t){if(!t){log("mono",`ScriptAsset "${e}" not found`);return}let n=t.properties.data;if(!n){log("mono",`Script "${e}" has no data`);return}if(this.ctx&&this.ctx._running&&await this.ctx.onDestroy(),this.ctx=this.newScriptContext(),this._scriptFunction=new Function(n),t.properties.vars){let o=t.properties.vars,r=SM.props[`__${this.id}/vars:component`]||{},a={};log("mono","ScriptAsset varSpecs:",o),log("mono","Historical vars:",r),log("mono","Properties vars:",this.properties.vars);for(let[l,d]of Object.entries(o))r[l]!==void 0?(a[l]=r[l],log("mono",`$${l} =>`,JSON.stringify(r[l]),"via historicalVars")):this.properties.vars?.[l]!==void 0?(a[l]=this.properties.vars[l],log("mono",`$${l} =>`,JSON.stringify(this.properties.vars[l]),"via properties")):(a[l]={type:d.type,value:d.value},log("mono",`$${l} =>`,JSON.stringify(d.value),"via ScriptAsset default"));this.ctx.vars=a,this.properties.vars=a}else this.ctx.vars={},this.properties.vars={};this._scriptFunction.call(this.ctx),await lifecycle.registerScriptRunner(this),this._start(),log("mono",`Script "${e}" loaded successfully for ${this.properties.name} with ctx.vars:`,this.ctx.vars);let i=SM.getEntityById(SM.selectedEntity);i&&i.components.filter(r=>r.type==="ScriptRunner"&&r.properties.file===e).length>0&&inspector.propertiesPanel.render(SM.selectedEntity);let s=new CustomEvent("script-refreshed",{detail:{componentId:this.id,name:this.properties.name,file:this.properties.file}});window.dispatchEvent(s),this._entity._finished_loading&&await this.ctx.onLoaded()}async _start(){this.ctx._running||this._entity.active&&(this.ctx._running=!0,await this.ctx.onStart(),this._entity._finished_loading&&await this.ctx.onLoaded(),inspector.lifecyclePanel.render(),log("mono","started",this.id))}async _stop(){this.ctx._running&&this._entity.active&&(this.ctx._running=!1,await this.ctx.onDestroy(),inspector.lifecyclePanel.render(),log("mono","stopped",this.id))}async _update(){this.ctx._running&&this._entity.active&&await this.ctx.onUpdate()}async _refresh(){if(!this._entity.active)return;let e=this.properties.file;if(!e||e.length===0){log("mono","No script file to refresh");return}log("mono","refreshing script [",this.ctx._running,"].."),this.ctx._running&&(this.ctx._running=!1,await this.ctx.onDestroy());let t=await this.getScriptAsset(e);t?await this._loadScript(e,t):log("mono",`ScriptAsset "${e}" not found for refresh`),log("mono","refreshed",this.id)}Start(){log("mono",`Starting ${this.properties.file} on ${this.id}`);let e="scriptrunner_start\xB6"+this.id;net.sendOneShot(e)}Stop(){log("mono",`Stopping ${this.properties.file} on ${this.id}`);let e="scriptrunner_stop\xB6"+this.id;net.sendOneShot(e)}Refresh(){log("mono",`Refreshing ${this.properties.file} on ${this.id}`);let e="scriptrunner_refresh\xB6"+this.id;net.sendOneShot(e)}newScriptContext(){let e={vars:SM.props[`__${this.id}/vars:component`]||this.properties.vars||{},_running:!1,onStart:async()=>{},onLoaded:async()=>{},onUpdate:async()=>{},onDestroy:async()=>{},onVarChange:async(t,n)=>{},onKeyDown:()=>{},onKeyUp:()=>{},keyDown:()=>{},keyUp:()=>{},keyPress:()=>{},log:(...t)=>{console.log(...t)},_entity:this._entity,_scene:window.scene,_BS:window.BS,_component:this};return lifecycle.recordContext(e),e}async SetVar(e,t){!this.ctx||!this.ctx.vars||this.ref.child("vars").child(e).child("value").set(t)}async _setVar(e,t){if(log("mono","[MONO] updating var =>",e,t),!this.ctx||!this.ctx.vars)return;let n=t;typeof t!="object"&&(n=this.properties.vars[e],n.value=t),this.properties.vars[e]=n,this.ctx.vars[e]=n,await this.ctx.onVarChange(e,n)}async _destroy(){await super._destroy(),this._stop(),await lifecycle.unregisterScriptRunner(this),inspector.lifecyclePanel.render()}};var G=class extends w{constructor(){super(),this._bsRef=null,this.inventoryItem=null}async init(e,t,n,i){return await super.init(e,t,n,i),this.type="ScriptAsset",this.setId(this.id.replace("undefined","ScriptAsset")),this.updateRunners(),this}extractProperties(e){return{name:e.name||"myScript",data:e.data||"",vars:e.vars!==void 0?e.vars:null}}defaultProperties(){return{name:"myScript",data:"",vars:null}}async _set(e,t){t=g(t),e==="data"&&t!==this.properties.data?(console.log("scriptasset","set",e,t),this.properties[e]=t,this.updateRunners()):this.properties[e]=t}updateRunners(){this.getAllAttachedRunners().forEach(e=>{e.properties.hotreload&&e.Refresh()})}getAllAttachedRunners(){return SM.getAllScriptRunners().filter(e=>e.properties.file===this.properties.name)}};var I=class extends w{constructor(){super()}async init(e,t,n,i){return await super.init(e,t,n,i),this.options.source==="ui"&&this.initGrabbable(),this}async initGrabbable(){let e=this._entity?.getComponent("Material");if(!e){setTimeout(this.initGrabbable.bind(this),50);return}e.Set("shaderName","Standard"),e.Set("color",e.properties.color),AddComponent(this._entity.id,"MeshCollider"),AddComponent(this._entity.id,"ScriptRunner",{componentProperties:{file:"Grabbable.js"}})}};var Z=class extends I{constructor(){super(),this._bsRef=BS.BanterGeometry,this.type="Geometry"}defaultProperties(){return{geometryType:0,parametricType:0,width:1,height:1,depth:1,radius:.5,radiusTop:.5,radiusBottom:.5,radialSegments:32,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:6.283185307179586,phiStart:0,phiLength:6.283185307179586,widthSegments:1,depthSegments:1,tube:.4,tubularSegments:64,arc:6.283185307179586,p:2,q:3,segments:64,innerRadius:.2,outerRadius:.5,phiSegments:8,thetaSegments:6}}extractProperties(e){let t={geometryType:g(e.geometryType)||0,parametricType:g(e.parametricType)||0};return["width","height","depth","radius","radiusTop","radiusBottom","radialSegments","heightSegments","thetaStart","thetaLength","phiStart","phiLength","widthSegments","depthSegments","tube","tubularSegments","arc","p","q","segments","innerRadius","outerRadius","phiSegments","thetaSegments"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),e.openEnded!==void 0&&(t.openEnded=g(e.openEnded)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Geometry:`,n)}}}};var ee=class extends w{constructor(){super(),this._bsRef=BS.BanterMaterial,this.type="Material"}defaultProperties(){return{shaderName:"Standard",texture:"",color:{r:1,g:1,b:1,a:1},side:0,generateMipMaps:!0}}enums(){return{shaderName:{Standard:"Standard","Unlit/Diffuse":"Unlit/Diffuse","Unlit/DiffuseTransparent":"Unlit/DiffuseTransparent"}}}extractProperties(e){let t={};return e.shaderName!==void 0&&(t.shaderName=g(e.shaderName)),e.texture!==void 0&&(t.texture=g(e.texture)),e.color!==void 0&&(t.color={r:e.color.x||1,g:e.color.y||1,b:e.color.z||1,a:e.color.w||1}),e.side!==void 0&&(t.side=g(e.side)),e.generateMipMaps!==void 0&&(t.generateMipMaps=g(e.generateMipMaps)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="color"&&typeof t=="object"?this._bs.color=new BS.Vector4(t.r||0,t.g||0,t.b||0,t.a||1):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Material:`,n)}}}};var te=class extends w{constructor(){super(),this._bsRef=BS.BanterRigidbody,this.type="Rigidbody"}defaultProperties(){return{velocity:{x:0,y:0,z:0},angularVelocity:{x:0,y:0,z:0},mass:1,drag:0,angularDrag:.05,isKinematic:!1,useGravity:!0,centerOfMass:{x:0,y:0,z:0},collisionDetectionMode:0,freezePositionX:!1,freezePositionY:!1,freezePositionZ:!1,freezeRotationX:!1,freezeRotationY:!1,freezeRotationZ:!1}}extractProperties(e){let t={};return["velocity","angularVelocity","centerOfMass"].forEach(o=>{e[o]!==void 0&&(t[o]={x:e[o].x||0,y:e[o].y||0,z:e[o].z||0})}),["mass","drag","angularDrag"].forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),["isKinematic","useGravity","freezePositionX","freezePositionY","freezePositionZ","freezeRotationX","freezeRotationY","freezeRotationZ"].forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),e.collisionDetectionMode!==void 0&&(t.collisionDetectionMode=g(e.collisionDetectionMode)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{["velocity","angularVelocity","centerOfMass"].includes(e)&&typeof t=="object"?this._bs[e]=new BS.Vector3(t.x||0,t.y||0,t.z||0):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Rigidbody:`,n)}}}};var ne=class extends w{constructor(){super(),this._bsRef=BS.BanterAudioSource,this.type="AudioSource"}defaultProperties(){return{volume:1,pitch:1,mute:!1,loop:!1,bypassEffects:!1,bypassListenerEffects:!1,bypassReverbZones:!1,playOnAwake:!0,spatialBlend:1}}extractProperties(e){let t={};return["volume","pitch","spatialBlend"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),["mute","loop","bypassEffects","bypassListenerEffects","bypassReverbZones","playOnAwake"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on AudioSource:`,n)}}}};var ie=class extends w{constructor(){super(),this._bsRef=BS.BanterVideoPlayer,this.type="VideoPlayer"}defaultProperties(){return{url:"",volume:1,loop:!1,playOnAwake:!0,skipOnDrop:!1,waitForFirstFrame:!1,time:0}}extractProperties(e){let t={};return e.url!==void 0&&(t.url=g(e.url)),["volume","time"].forEach(r=>{e[r]!==void 0&&(t[r]=g(e[r]))}),["loop","playOnAwake","skipOnDrop","waitForFirstFrame"].forEach(r=>{e[r]!==void 0&&(t[r]=g(e[r]))}),["isPlaying","isLooping","isPrepared","isMuted"].forEach(r=>{e[r]!==void 0&&(t[r]=g(e[r]))}),["duration"].forEach(r=>{e[r]!==void 0&&(t[r]=g(e[r]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{!["isPlaying","isLooping","isPrepared","isMuted","duration"].includes(e)&&this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on VideoPlayer:`,n)}}}PlayToggle(){this._bs&&typeof this._bs.PlayToggle=="function"&&this._bs.PlayToggle()}MuteToggle(){this._bs&&typeof this._bs.MuteToggle=="function"&&this._bs.MuteToggle()}Stop(){this._bs&&typeof this._bs.Stop=="function"&&this._bs.Stop()}};var se=class extends I{constructor(){super(),this._bsRef=BS.BanterText,this.type="Text"}defaultProperties(){return{text:"New Text",color:{r:1,g:1,b:1,a:1},horizontalAlignment:1,verticalAlignment:1,fontSize:.1,richText:!1,enableWordWrapping:!0}}extractProperties(e){let t={};return e.text!==void 0&&(t.text=g(e.text)),e.color!==void 0&&(t.color={r:e.color.x||1,g:e.color.y||1,b:e.color.z||1,a:e.color.w||1}),["horizontalAlignment","verticalAlignment"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),e.fontSize!==void 0&&(t.fontSize=g(e.fontSize)),["richText","enableWordWrapping"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="color"&&typeof t=="object"?this._bs.color=new BS.Vector4(t.r||0,t.g||0,t.b||0,t.a||1):e==="rectTransformSizeDelta"&&typeof t=="object"?this._bs.rectTransformSizeDelta=new BS.Vector2(t.x||0,t.y||0):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Text:`,n)}}}};var pn=class{constructor(e){this.component=e,this.visible=!1,this.visual=null,this.visualTransform=null,this.type="BoxCollider",this.controls={view:{input:"button",callback:this.view.bind(this),label:"View",id:"view"}}}updateVisual(){this.visual&&this.visualTransform&&(this.visualTransform.localScale=new BS.Vector3(this.component.properties.size.x,this.component.properties.size.y,this.component.properties.size.z),this.visualTransform.localPosition=new BS.Vector3(this.component.properties.center.x,this.component.properties.center.y,this.component.properties.center.z))}async view(){if(this.visible=!this.visible,this.visible){this.visual=new BS.GameObject(this.name),this.visualTransform=this.visual.transform,this.visualTransform.localScale=new BS.Vector3(this.component.properties.size.x,this.component.properties.size.y,this.component.properties.size.z),this.visualTransform.localPosition=new BS.Vector3(this.component.properties.center.x,this.component.properties.center.y,this.component.properties.center.z),this.visual.AddComponent(new BS.BanterGeometry);let t=new BS.BanterMaterial;t.color=new BS.Vector4(0,1,0,.25),t.shaderName="Unlit/DiffuseTransparent",this.visual.AddComponent(t),await this.visual.SetParent(this.component._entity._bs,!0),this.controls.view.label="Hide"}else this.visual&&(this.visual.Destroy(),this.visual=null),this.controls.view.label="View";let e=document.getElementById(`${this.component.id}_view`);e.innerHTML=this.controls.view.label}},oe=class extends w{constructor(){super(),this._bsRef=BS.BoxCollider,this.type="BoxCollider",this._controls=new pn(this)}defaultProperties(){return{isTrigger:!1,center:{x:0,y:0,z:0},size:{x:1,y:1,z:1}}}extractProperties(e){let t={};return e.isTrigger!==void 0&&(t.isTrigger=g(e.isTrigger)),e.center!==void 0&&(t.center={x:e.center.x||0,y:e.center.y||0,z:e.center.z||0}),e.size!==void 0&&(t.size={x:e.size.x||1,y:e.size.y||1,z:e.size.z||1}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{(e==="center"||e==="size")&&typeof t=="object"?(this._bs[e]=new BS.Vector3(t.x||0,t.y||0,t.z||0),this._controls.updateVisual()):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on BoxCollider:`,n)}}}};var re=class extends w{constructor(){super(),this._bsRef=BS.SphereCollider,this.type="SphereCollider"}defaultProperties(){return{isTrigger:!1,center:{x:0,y:0,z:0},radius:.5}}extractProperties(e){let t={};return e.isTrigger!==void 0&&(t.isTrigger=g(e.isTrigger)),e.center!==void 0&&(t.center={x:e.center.x||0,y:e.center.y||0,z:e.center.z||0}),e.radius!==void 0&&(t.radius=g(e.radius)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="center"&&typeof t=="object"?this._bs.center=new BS.Vector3(t.x||0,t.y||0,t.z||0):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on SphereCollider:`,n)}}}};var ae=class extends w{constructor(){super(),this._bsRef=BS.CapsuleCollider,this.type="CapsuleCollider"}defaultProperties(){return{isTrigger:!1,center:{x:0,y:0,z:0},radius:.5,height:2,direction:1}}extractProperties(e){let t={};return e.isTrigger!==void 0&&(t.isTrigger=g(e.isTrigger)),e.center!==void 0&&(t.center={x:e.center.x||0,y:e.center.y||0,z:e.center.z||0}),e.radius!==void 0&&(t.radius=g(e.radius)),e.height!==void 0&&(t.height=g(e.height)),e.direction!==void 0&&(t.direction=g(e.direction)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="center"&&typeof t=="object"?this._bs.center=new BS.Vector3(t.x||0,t.y||0,t.z||0):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on CapsuleCollider:`,n)}}}};var ce=class extends w{constructor(){super(),this._bsRef=BS.MeshCollider,this.type="MeshCollider"}defaultProperties(){return{isTrigger:!1,convex:!1}}extractProperties(e){let t={};return e.isTrigger!==void 0&&(t.isTrigger=g(e.isTrigger)),e.convex!==void 0&&(t.convex=g(e.convex)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on MeshCollider:`,n)}}}};var le=class extends w{constructor(){super(),this._bsRef=BS.BanterBillboard,this.type="Billboard"}defaultProperties(){return{smoothing:.1,enableXAxis:!0,enableYAxis:!0,enableZAxis:!1}}extractProperties(e){let t={};return e.smoothing!==void 0&&(t.smoothing=g(e.smoothing)),["enableXAxis","enableYAxis","enableZAxis"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Billboard:`,n)}}}};var de=class extends w{constructor(){super(),this._bsRef=BS.BanterGrabHandle,this.type="GrabHandle"}enums(){return{grabType:{0:"POINT",1:"CYLINDER",2:"BALL",3:"SOFT"}}}defaultProperties(){return{grabType:0,grabRadius:.1}}extractProperties(e){let t={};return e.grabType!==void 0&&(t.grabType=g(e.grabType)),e.grabRadius!==void 0&&(t.grabRadius=g(e.grabRadius)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on GrabHandle:`,n)}}}};var pe=class extends w{constructor(){super(),this._bsRef=BS.BanterSyncedObject,this.type="SyncedObject"}defaultProperties(){return{syncPosition:!0,syncRotation:!0,takeOwnershipOnCollision:!1,takeOwnershipOnGrab:!0,kinematicIfNotOwned:!0}}extractProperties(e){let t={};return["syncPosition","syncRotation","takeOwnershipOnCollision","takeOwnershipOnGrab","kinematicIfNotOwned"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on SyncedObject:`,n)}}}};var he=class extends w{constructor(){super(),this._bsRef=BS.BanterPhysicMaterial,this.type="PhysicMaterial"}defaultProperties(){return{dynamicFriction:.6,staticFriction:.6}}extractProperties(e){let t={};return e.dynamicFriction!==void 0&&(t.dynamicFriction=g(e.dynamicFriction)),e.staticFriction!==void 0&&(t.staticFriction=g(e.staticFriction)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on PhysicMaterial:`,n)}}}};var ue=class extends w{constructor(){super(),this._bsRef=BS.BanterMirror,this.type="Mirror"}defaultProperties(){return{renderTextureSize:1024,cameraClear:1,backgroundColor:"#000000"}}extractProperties(e){let t={};return e.renderTextureSize!==void 0&&(t.renderTextureSize=g(e.renderTextureSize)),e.cameraClear!==void 0&&(t.cameraClear=g(e.cameraClear)),e.backgroundColor!==void 0&&(t.backgroundColor=g(e.backgroundColor)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Mirror:`,n)}}}SetCullingLayer(e){this._bs&&typeof this._bs.SetCullingLayer=="function"&&this._bs.SetCullingLayer(e)}AddCullingLayer(e){this._bs&&typeof this._bs.AddCullingLayer=="function"&&this._bs.AddCullingLayer(e)}};var me=class extends w{constructor(){super(),this._bsRef=BS.BanterBrowser,this.type="Browser"}defaultProperties(){return{url:"",mipMaps:4,pixelsPerUnit:1200,pageWidth:1024,pageHeight:576,actions:""}}extractProperties(e){let t={};return e.url!==void 0&&(t.url=g(e.url)),["mipMaps","pixelsPerUnit","pageWidth","pageHeight"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),e.actions!==void 0&&(t.actions=g(e.actions)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Browser:`,n)}}}};var fe=class extends w{constructor(){super(),this._bsRef=BS.BanterHeldEvents,this.type="HeldEvents"}defaultProperties(){return{sensitivity:1,fireRate:.1,auto:!1,blockLeftPrimary:!1,blockLeftSecondary:!1,blockRightPrimary:!1,blockRightSecondary:!1,blockLeftThumbstick:!1,blockLeftThumbstickClick:!1,blockRightThumbstick:!1,blockRightThumbstickClick:!1}}extractProperties(e){let t={};return["sensitivity","fireRate"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),["auto","blockLeftPrimary","blockLeftSecondary","blockRightPrimary","blockRightSecondary","blockLeftThumbstick","blockLeftThumbstickClick","blockRightThumbstick","blockRightThumbstickClick"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on HeldEvents:`,n)}}}};var ye=class extends w{constructor(){super(),this._bsRef=BS.BanterAttachedObject,this.type="AttachedObject"}defaultProperties(){return{uid:"",attachmentPoint:0}}enums(){return{attachmentPoint:{0:"HEAD",1:"BODY",2:"LEFT_HAND",3:"RIGHT_HAND",4:"COCKPIT"}}}extractProperties(e){let t={};return e.uid!==void 0&&(t.uid=g(e.uid)),e.attachmentPosition!==void 0&&(t.attachmentPosition={x:e.attachmentPosition.x||0,y:e.attachmentPosition.y||0,z:e.attachmentPosition.z||0}),e.attachmentRotation!==void 0&&(t.attachmentRotation={x:e.attachmentRotation.x||0,y:e.attachmentRotation.y||0,z:e.attachmentRotation.z||0,w:e.attachmentRotation.w||1}),["attachmentType","avatarAttachmentType","avatarAttachmentPoint","attachmentPoint"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),e==="uid"&&t===""&&this.properties.uid!==""&&(log("scene","Detaching Object",this.properties),SM.scene.LegacyAttachObject(this._entity._bs,null,null)),this.properties[e]=t;try{e==="attachmentPosition"&&typeof t=="object"?this._bs[e]=new BS.Vector3(parseFloat(t.x||0),parseFloat(t.y||0),parseFloat(t.z||0)):e==="attachmentRotation"&&typeof t=="object"?(t.x=parseFloat(t.x||0),t.y=parseFloat(t.y||0),t.z=parseFloat(t.z||0),"w"in t?(t.w=parseFloat(t.w||1),this._bs[e]=new BS.Vector4(t.x,t.y,t.z,t.w)):(t=eulerToQuaternion(t),this._bs[e]=new BS.Vector4(t.x,t.y,t.z,t.w))):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){err("scene",`Failed to update ${e} on AttachedObject:`,n)}this.properties.uid&&(log("scene","Attaching Object",this._entity._bs,this.properties.uid,this.properties.attachmentPoint),SM.scene.LegacyAttachObject(this._entity._bs,this.properties.uid,this.properties.attachmentPoint))}}};var ge=class extends w{constructor(){super(),this._bsRef=!1,this.type="GLTF",this._generationTimeout=null,this._gltfComponent=null,this._gltfTransform=null}defaultProperties(){return{url:"",generateMipMaps:!0,addColliders:!1,nonConvexColliders:!1,slippery:!1,climbable:!1,legacyRotate:!1}}extractProperties(e){let t={};return e.url!==void 0&&(t.url=g(e.url)),["generateMipMaps","addColliders","nonConvexColliders","slippery","climbable","legacyRotate"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}async generate(){if(!this.properties.url||this.properties.url===""){log("gltf","no url provided, skipping generation..");return}log("gltf","generating",this.properties),this._gltfComponent&&(log("gltf","destroying old gltf component.."),await this._gltfComponent.Destroy()),log("gltf","creating new gltf object.."),this._gltfComponent=new BS.BanterGLTF(this.properties.url,this.properties.generateMipMaps,this.properties.addColliders,this.properties.nonConvexColliders,this.properties.slippery,this.properties.climbable,this.properties.legacyRotate),await this._entity._bs.AddComponent(this._gltfComponent)}async _set(e,t){t=g(t),this.properties[e]=t,this._generationTimeout&&clearTimeout(this._generationTimeout),this._generationTimeout=setTimeout(this.generate.bind(this),500)}};var be=class extends w{constructor(){super(),this._bsRef=BS.BanterAssetBundle,this.type="AssetBundle"}defaultProperties(){return{windowsUrl:"",osxUrl:"",linuxUrl:"",androidUrl:"",iosUrl:""}}extractProperties(e){let t={};return["windowsUrl","osxUrl","linuxUrl","androidUrl","iosUrl"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on AssetBundle:`,n)}}}};var ve=class extends w{constructor(){super(),this._bsRef=BS.BanterPortal,this.type="Portal"}defaultProperties(){return{url:"",instance:""}}extractProperties(e){let t={};return e.url!==void 0&&(t.url=g(e.url)),e.instance!==void 0&&(t.instance=g(e.instance)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Portal:`,n)}}}};var we=class extends w{constructor(){super(),this._bsRef=BS.BanterColliderEvents,this.type="ColliderEvents"}defaultProperties(){return{}}extractProperties(e){return{}}_set(e,t){}};var Se=class extends I{constructor(){super(),this._bsRef=BS.BanterGeometry,this.type="Box"}defaultProperties(){return{width:1,height:1,depth:1}}extractProperties(e){let t={};return["width","height","depth"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Box:`,n)}}}};var Ee=class extends I{constructor(){super(),this._bsRef=BS.BanterCircle,this.type="Circle"}defaultProperties(){return{radius:1,segments:1,thetaStart:0,thetaLength:6.283185307179586}}extractProperties(e){let t={},n=["radius","thetaStart","thetaLength"],i=["segments"];return n.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),i.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Circle:`,n)}}}};var Ce=class extends I{constructor(){super(),this._bsRef=BS.BanterCone,this.type="Cone"}defaultProperties(){return{radius:1,height:1,radialSegments:32,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:6.283185307179586}}extractProperties(e){let t={},n=["radius","height","thetaStart","thetaLength"],i=["radialSegments","heightSegments"],s=["openEnded"];return n.forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),i.forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),s.forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Cone:`,n)}}}};var xe=class extends I{constructor(){super(),this._bsRef=BS.BanterGeometry,this.type="Cylinder"}async init(e,t,n,i){return await super.init(e,t,n,i),this._bs.geometryType=2,this}defaultProperties(){return{height:1,radialSegments:32,radius:1}}extractProperties(e){let t={};return["height","radius","radialSegments"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(e==="radius"?(this._bs.radiusTop=t,this._bs.radiusBottom=t):this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Cylinder:`,n)}}}};var Be=class extends I{constructor(){super(),this._bsRef=BS.BanterPlane,this.type="Plane"}defaultProperties(){return{width:1,height:1,widthSegments:1,heightSegments:1}}extractProperties(e){let t={},n=["width","height"],i=["widthSegments","heightSegments"];return n.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),i.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Plane:`,n)}}}};var Ie=class extends I{constructor(){super(),this._bsRef=BS.BanterRing,this.type="Ring"}defaultProperties(){return{innerRadius:1,outerRadius:2,thetaSegments:32,phiSegments:1,thetaStart:0,thetaLength:6.283185307179586}}extractProperties(e){let t={},n=["innerRadius","outerRadius","thetaStart","thetaLength"],i=["thetaSegments","phiSegments"];return n.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),i.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Ring:`,n)}}}};var ke=class extends I{constructor(){super(),this._bsRef=BS.BanterSphere,this.type="Sphere"}defaultProperties(){return{radius:1,widthSegments:16,heightSegments:16,phiStart:0,phiLength:6.283185307179586,thetaStart:0,thetaLength:3.141592653589793}}extractProperties(e){let t={},n=["radius","phiStart","phiLength","thetaStart","thetaLength"],i=["widthSegments","heightSegments"];return n.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),i.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Sphere:`,n)}}}};var Pe=class extends I{constructor(){super(),this._bsRef=BS.BanterTorus,this.type="Torus"}defaultProperties(){return{tube:1,radialSegments:8,tubularSegments:6,arc:6.283185307179586}}extractProperties(e){let t={},n=["tube","arc"],i=["radialSegments","tubularSegments"];return n.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),i.forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Torus:`,n)}}}};var Te=class extends I{constructor(){super(),this._bsRef=BS.BanterInvertedMesh,this.type="InvertedMesh"}defaultProperties(){return{}}extractProperties(e){return{}}_set(e,t){}};var $e=class extends w{constructor(){super(),this._bsRef=BS.BanterKitItem,this.type="KitItem"}defaultProperties(){return{path:"",resetTransform:!1}}extractProperties(e){let t={};return e.path!==void 0&&(t.path=e.path),e.resetTransform!==void 0&&(t.resetTransform=e.resetTransform),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on KitItem:`,n)}}}};var _e=class extends w{constructor(){super(),this._bsRef=BS.BanterStreetView,this.type="StreetView"}defaultProperties(){return{panoId:""}}extractProperties(e){let t={};return e.panoId!==void 0&&(t.panoId=g(e.panoId)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on StreetView:`,n)}}}};var Me=class extends w{constructor(){super(),this._bsRef=BS.BanterWorldObject,this.type="WorldObject"}defaultProperties(){return{}}extractProperties(e){return{}}_set(e,t){}};var $=c=>c===1/0?999999:c,Le=class extends w{constructor(){super(),this._bsRef=BS.ConfigurableJoint,this.type="ConfigurableJoint"}defaultProperties(){return{targetPosition:{x:0,y:0,z:0},autoConfigureConnectedAnchor:!1,xMotion:0,yMotion:0,zMotion:0,angularXMotion:0,angularYMotion:0,angularZMotion:0,anchor:{x:0,y:0,z:0},axis:{x:1,y:0,z:0},secondaryAxis:{x:0,y:1,z:0},connectedAnchor:{x:0,y:0,z:0},targetRotation:{x:0,y:0,z:0,w:1},targetVelocity:{x:0,y:0,z:0},targetAngularVelocity:{x:0,y:0,z:0},enableCollision:!1,enablePreprocessing:!0,breakForce:999999,breakTorque:999999,connectedMassScale:1,massScale:1,rotationDriveMode:0,configuredInWorldSpace:!1,swapBodies:!1}}extractProperties(e){let t={};return["targetPosition","anchor","axis","secondaryAxis","connectedAnchor","targetVelocity","targetAngularVelocity"].forEach(r=>{e[r]!==void 0&&(t[r]={x:$(e[r].x)||0,y:$(e[r].y)||0,z:$(e[r].z)||0})}),e.targetRotation!==void 0&&(t.targetRotation={x:$(e.targetRotation.x)||0,y:$(e.targetRotation.y)||0,z:$(e.targetRotation.z)||0,w:$(e.targetRotation.w)||1}),["xMotion","yMotion","zMotion","angularXMotion","angularYMotion","angularZMotion"].forEach(r=>{e[r]!==void 0&&(t[r]=$(e[r]))}),["autoConfigureConnectedAnchor","enableCollision","enablePreprocessing","configuredInWorldSpace","swapBodies"].forEach(r=>{e[r]!==void 0&&(t[r]=$(e[r]))}),["breakForce","breakTorque","connectedMassScale","massScale","rotationDriveMode"].forEach(r=>{e[r]!==void 0&&(t[r]=$(e[r]))}),t}_set(e,t){if(this._bs){this.properties[e]=t;try{["targetPosition","anchor","axis","secondaryAxis","connectedAnchor","targetVelocity","targetAngularVelocity"].includes(e)&&typeof t=="object"?this._bs[e]=new BS.Vector3($(t.x)||0,$(t.y)||0,$(t.z)||0):e==="targetRotation"&&typeof t=="object"?this._bs.targetRotation=new BS.Quaternion($(t.x)||0,$(t.y)||0,$(t.z)||0,$(t.w)||1):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on ConfigurableJoint:`,n)}}}};var Ne=c=>c===1/0?999999:c,H=class extends w{constructor(){super()}defaultJointProperties(){return{anchor:{x:0,y:0,z:0},connectedAnchor:{x:0,y:0,z:0},autoConfigureConnectedAnchor:!0,breakForce:999999,breakTorque:999999,enableCollision:!1,enablePreprocessing:!0,connectedMassScale:1,massScale:1}}extractJointProperties(e){let t={};return["anchor","connectedAnchor"].forEach(s=>{e[s]!==void 0&&(t[s]={x:Ne(e[s].x)||0,y:Ne(e[s].y)||0,z:Ne(e[s].z)||0})}),["autoConfigureConnectedAnchor","breakForce","breakTorque","enableCollision","enablePreprocessing","connectedMassScale","massScale"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_setJointProperty(e,t){if(!this._bs)return;let n=["anchor","connectedAnchor","axis","swingAxis","secondaryAxis"];try{n.includes(e)&&typeof t=="object"?this._bs[e]=new BS.Vector3(Ne(t.x)||0,Ne(t.y)||0,Ne(t.z)||0):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(i){console.error(`Failed to update ${e} on ${this.type}:`,i)}}};var Re=class extends H{constructor(){super(),this._bsRef=BS.CharacterJoint,this.type="CharacterJoint"}defaultProperties(){return{...this.defaultJointProperties(),axis:{x:1,y:0,z:0},swingAxis:{x:0,y:1,z:0},enableProjection:!1,projectionDistance:.1,projectionAngle:180}}extractProperties(e){let t=this.extractJointProperties(e);return["axis","swingAxis"].forEach(i=>{e[i]!==void 0&&(t[i]={x:e[i].x||0,y:e[i].y||0,z:e[i].z||0})}),e.enableProjection!==void 0&&(t.enableProjection=g(e.enableProjection)),e.projectionDistance!==void 0&&(t.projectionDistance=g(e.projectionDistance)),e.projectionAngle!==void 0&&(t.projectionAngle=g(e.projectionAngle)),t}_set(e,t){this._bs&&(t=g(t),this.properties[e]=t,this._setJointProperty(e,t))}};var Fe=class extends H{constructor(){super(),this._bsRef=BS.FixedJoint,this.type="FixedJoint"}defaultProperties(){return this.defaultJointProperties()}extractProperties(e){return this.extractJointProperties(e)}_set(e,t){this._bs&&(t=g(t),this.properties[e]=t,this._setJointProperty(e,t))}};var Ae=class extends H{constructor(){super(),this._bsRef=BS.HingeJoint,this.type="HingeJoint"}defaultProperties(){return{...this.defaultJointProperties(),axis:{x:0,y:1,z:0},useLimits:!1,useMotor:!1,useSpring:!1}}extractProperties(e){let t=this.extractJointProperties(e);return e.axis!==void 0&&(t.axis={x:e.axis.x||0,y:e.axis.y||0,z:e.axis.z||0}),["useLimits","useMotor","useSpring"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){this._bs&&(t=g(t),this.properties[e]=t,this._setJointProperty(e,t))}};var De=class extends H{constructor(){super(),this._bsRef=BS.SpringJoint,this.type="SpringJoint"}defaultProperties(){return{...this.defaultJointProperties(),spring:0,damper:0,minDistance:0,maxDistance:0,tolerance:.025}}extractProperties(e){let t=this.extractJointProperties(e);return["spring","damper","minDistance","maxDistance","tolerance"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){this._bs&&(t=g(t),this.properties[e]=t,this._setJointProperty(e,t))}};var Oe=class extends w{constructor(){super(),this._bsRef=BS.BanterGrababble,this.type="Grabbable"}defaultProperties(){return{grabType:0,grabRadius:.1,gunTriggerSensitivity:.5,gunTriggerFireRate:.1,gunTriggerAutoFire:!1,blockLeftPrimary:!1,blockLeftSecondary:!1,blockRightPrimary:!1,blockRightSecondary:!1,blockLeftThumbstick:!1,blockLeftThumbstickClick:!1,blockRightThumbstick:!1,blockRightThumbstickClick:!1,blockLeftTrigger:!1,blockRightTrigger:!1}}extractProperties(e){let t={};return["grabType","grabRadius","gunTriggerSensitivity","gunTriggerFireRate"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),["gunTriggerAutoFire","blockLeftPrimary","blockLeftSecondary","blockRightPrimary","blockRightSecondary","blockLeftThumbstick","blockLeftThumbstickClick","blockRightThumbstick","blockRightThumbstickClick","blockLeftTrigger","blockRightTrigger"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Grabbable:`,n)}}}};var ze=class extends w{constructor(){super(),this._bsRef=BS.BanterUIPanel,this.type="UIPanel"}defaultProperties(){return{resolution:{x:1024,y:1024},screenSpace:!1,enableHaptics:!0,clickHaptic:.5,enterHaptic:.2,exitHaptic:.1,enableSounds:!0,clickSoundUrl:"",enterSoundUrl:"",exitSoundUrl:""}}extractProperties(e){let t={};return e.resolution!==void 0&&(t.resolution={x:e.resolution.x||1024,y:e.resolution.y||1024}),["screenSpace","enableHaptics","enableSounds"].forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),["clickHaptic","enterHaptic","exitHaptic"].forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),["clickSoundUrl","enterSoundUrl","exitSoundUrl"].forEach(o=>{e[o]!==void 0&&(t[o]=g(e[o]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="resolution"&&typeof t=="object"?this._bs.resolution=new BS.Vector2(t.x||1024,t.y||1024):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on UIPanel:`,n)}}}SetBackgroundColor(e){this._bs&&typeof this._bs.SetBackgroundColor=="function"&&this._bs.SetBackgroundColor(e)}};var He=class extends w{constructor(){super(),this._bsRef=BS.BanterAvatarPedestal,this.type="AvatarPedestal"}defaultProperties(){return{avatarId:""}}extractProperties(e){let t={};return e.avatarId!==void 0&&(t.avatarId=g(e.avatarId)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on AvatarPedestal:`,n)}}}};var Ue=class extends I{constructor(){super(),this._bsRef=BS.BanterTorusKnot,this.type="TorusKnot"}defaultProperties(){return{radius:.5,tube:.2,radialSegments:64,tubularSegments:128,p:2,q:3}}extractProperties(e){let t={};return["radius","tube","radialSegments","tubularSegments","p","q"].forEach(i=>{e[i]!==void 0&&(t[i]=g(e[i]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on TorusKnot:`,n)}}}};var B=class extends I{constructor(){super()}defaultProperties(){return{stacks:20,slices:20}}extractProperties(e){let t={};return e.stacks!==void 0&&(t.stacks=g(e.stacks)),e.slices!==void 0&&(t.slices=g(e.slices)),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on ${this.type}:`,n)}}}};var je=class extends B{constructor(){super(),this._bsRef=BS.BanterApple,this.type="Apple"}};var Ve=class extends B{constructor(){super(),this._bsRef=BS.BanterCatenoid,this.type="Catenoid"}};var qe=class extends B{constructor(){super(),this._bsRef=BS.BanterFermet,this.type="Fermet"}};var We=class extends B{constructor(){super(),this._bsRef=BS.BanterHelicoid,this.type="Helicoid"}};var Je=class extends B{constructor(){super(),this._bsRef=BS.BanterHorn,this.type="Horn"}};var Ge=class extends B{constructor(){super(),this._bsRef=BS.BanterKlein,this.type="Klein"}};var Ke=class extends B{constructor(){super(),this._bsRef=BS.BanterMobius,this.type="Mobius"}};var Xe=class extends B{constructor(){super(),this._bsRef=BS.BanterMobius3d,this.type="Mobius3d"}};var Qe=class extends B{constructor(){super(),this._bsRef=BS.BanterNatica,this.type="Natica"}};var Ye=class extends B{constructor(){super(),this._bsRef=BS.BanterPillow,this.type="Pillow"}};var Ze=class extends B{constructor(){super(),this._bsRef=BS.BanterScherk,this.type="Scherk"}};var et=class extends B{constructor(){super(),this._bsRef=BS.BanterSnail,this.type="Snail"}};var tt=class extends B{constructor(){super(),this._bsRef=BS.BanterSpiral,this.type="Spiral"}};var nt=class extends B{constructor(){super(),this._bsRef=BS.BanterSpring,this.type="Spring"}};var it=class extends w{constructor(){super(),this._bsRef=BS.Light,this.type="Light"}enums(){return{type:{0:"SPOT",1:"DIRECTIONAL",2:"POINT",3:"RECTANGLE",4:"DISC",5:"PYRAMID",6:"BOX",7:"TUBE"}}}defaultProperties(){return{type:1,color:{r:1,g:1,b:1,a:1},intensity:1,range:10,spotAngle:30,innerSpotAngle:21.8,shadows:0,shadowStrength:1,bounceIntensity:1,cookieSize:10,renderMode:0,cullingMask:-1}}extractProperties(e){let t={};return e.color!==void 0&&(t.color={r:e.color.r||1,g:e.color.g||1,b:e.color.b||1,a:e.color.a||1}),["intensity","range","spotAngle","innerSpotAngle","shadowStrength","bounceIntensity","cookieSize"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),["type","shadows","renderMode","cullingMask"].forEach(s=>{e[s]!==void 0&&(t[s]=g(e[s]))}),t}_set(e,t){if(this._bs){t=g(t),this.properties[e]=t;try{e==="color"&&typeof t=="object"?BS.Color&&(this._bs[e]=new BS.Color(t.r||0,t.g||0,t.b||0,t.a||1)):this._bs[e]!==void 0&&(this._bs[e]=t)}catch(n){console.error(`Failed to update ${e} on Light:`,n)}}}};var hn={Default:0,TransparentFX:1,IgnoreRaycast:2,UserLayer1:3,Water:4,UI:5,UserLayer2:6,UserLayer3:7,UserLayer4:8,UserLayer5:9,UserLayer6:10,UserLayer7:11,UserLayer8:12,UserLayer9:13,UserLayer10:14,UserLayer11:15,UserLayer12:16,NetworkPlayer:17,RPMAvatarHead:18,RPMAvatarBody:19,Grabbable:20,HandColliders:21,WalkingLegs:22,PhysicsPlayer:23},xt=new Set([BS.ComponentType.Transform,BS.ComponentType.BanterGeometry,BS.ComponentType.BanterMaterial,BS.ComponentType.BanterRigidbody,BS.ComponentType.BanterAudioSource,BS.ComponentType.BanterVideoPlayer,BS.ComponentType.BanterText,BS.ComponentType.BoxCollider,BS.ComponentType.SphereCollider,BS.ComponentType.CapsuleCollider,BS.ComponentType.MeshCollider,BS.ComponentType.BanterBillboard,BS.ComponentType.BanterGrabHandle,BS.ComponentType.BanterSyncedObject,BS.ComponentType.BanterPhysicMaterial,BS.ComponentType.BanterMirror,BS.ComponentType.BanterBrowser,BS.ComponentType.BanterHeldEvents,BS.ComponentType.BanterAttachedObject,BS.ComponentType.BanterGLTF,BS.ComponentType.BanterAssetBundle,BS.ComponentType.BanterPortal,BS.ComponentType.BanterColliderEvents,BS.ComponentType.BanterBox,BS.ComponentType.BanterCircle,BS.ComponentType.BanterCone,BS.ComponentType.BanterCylinder,BS.ComponentType.BanterPlane,BS.ComponentType.BanterRing,BS.ComponentType.BanterSphere,BS.ComponentType.BanterTorus,BS.ComponentType.BanterInvertedMesh,BS.ComponentType.BanterKitItem,BS.ComponentType.BanterStreetView,BS.ComponentType.BanterWorldObject,BS.ComponentType.ConfigurableJoint,BS.ComponentType.CharacterJoint,BS.ComponentType.FixedJoint,BS.ComponentType.HingeJoint,BS.ComponentType.SpringJoint,BS.ComponentType.BanterGrabbable,BS.ComponentType.BanterUIPanel,BS.ComponentType.BanterAvatarPedestal,BS.ComponentType.BanterTorusKnot,BS.ComponentType.BanterApple,BS.ComponentType.BanterCatenoid,BS.ComponentType.BanterFermet,BS.ComponentType.BanterHelicoid,BS.ComponentType.BanterHorn,BS.ComponentType.BanterKlein,BS.ComponentType.BanterMobius,BS.ComponentType.BanterMobius3d,BS.ComponentType.BanterNatica,BS.ComponentType.BanterPillow,BS.ComponentType.BanterScherk,BS.ComponentType.BanterSnail,BS.ComponentType.BanterSpiral,BS.ComponentType.BanterSpring,BS.ComponentType.Light]),Bt={Transform:Y,Geometry:Z,Material:ee,Rigidbody:te,AudioSource:ne,VideoPlayer:ie,Text:se,BoxCollider:oe,SphereCollider:re,CapsuleCollider:ae,MeshCollider:ce,Billboard:le,GrabHandle:de,SyncedObject:pe,PhysicMaterial:he,Mirror:ue,Browser:me,HeldEvents:fe,AttachedObject:ye,GLTF:ge,AssetBundle:be,Portal:ve,ColliderEvents:we,Box:Se,Circle:Ee,Cone:Ce,Cylinder:xe,Plane:Be,Ring:Ie,Sphere:ke,Torus:Pe,InvertedMesh:Te,KitItem:$e,StreetView:_e,WorldObject:Me,ConfigurableJoint:Le,CharacterJoint:Re,FixedJoint:Fe,HingeJoint:Ae,SpringJoint:De,Grabbable:Oe,UIPanel:ze,AvatarPedestal:He,TorusKnot:Ue,Apple:je,Catenoid:Ve,Fermet:qe,Helicoid:We,Horn:Je,Klein:Ge,Mobius:Ke,Mobius3d:Xe,Natica:Qe,Pillow:Ye,Scherk:Ze,Snail:et,Spiral:tt,Spring:nt,Light:it,ScriptRunner:z,ScriptAsset:G};window.componentTypeMap=Bt;var It={[BS.ComponentType.Transform]:Y,[BS.ComponentType.BanterGeometry]:Z,[BS.ComponentType.BanterMaterial]:ee,[BS.ComponentType.BanterRigidbody]:te,[BS.ComponentType.BanterAudioSource]:ne,[BS.ComponentType.BanterVideoPlayer]:ie,[BS.ComponentType.BanterText]:se,[BS.ComponentType.BoxCollider]:oe,[BS.ComponentType.SphereCollider]:re,[BS.ComponentType.CapsuleCollider]:ae,[BS.ComponentType.MeshCollider]:ce,[BS.ComponentType.BanterBillboard]:le,[BS.ComponentType.BanterGrabHandle]:de,[BS.ComponentType.BanterSyncedObject]:pe,[BS.ComponentType.BanterPhysicMaterial]:he,[BS.ComponentType.BanterMirror]:ue,[BS.ComponentType.BanterBrowser]:me,[BS.ComponentType.BanterHeldEvents]:fe,[BS.ComponentType.BanterAttachedObject]:ye,[BS.ComponentType.BanterGLTF]:ge,[BS.ComponentType.BanterAssetBundle]:be,[BS.ComponentType.BanterPortal]:ve,[BS.ComponentType.BanterColliderEvents]:we,[BS.ComponentType.BanterBox]:Se,[BS.ComponentType.BanterCircle]:Ee,[BS.ComponentType.BanterCone]:Ce,[BS.ComponentType.BanterCylinder]:xe,[BS.ComponentType.BanterPlane]:Be,[BS.ComponentType.BanterRing]:Ie,[BS.ComponentType.BanterSphere]:ke,[BS.ComponentType.BanterTorus]:Pe,[BS.ComponentType.BanterInvertedMesh]:Te,[BS.ComponentType.BanterKitItem]:$e,[BS.ComponentType.BanterStreetView]:_e,[BS.ComponentType.BanterWorldObject]:Me,[BS.ComponentType.ConfigurableJoint]:Le,[BS.ComponentType.CharacterJoint]:Re,[BS.ComponentType.FixedJoint]:Fe,[BS.ComponentType.HingeJoint]:Ae,[BS.ComponentType.SpringJoint]:De,[BS.ComponentType.BanterGrabbable]:Oe,[BS.ComponentType.BanterUIPanel]:ze,[BS.ComponentType.BanterAvatarPedestal]:He,[BS.ComponentType.BanterTorusKnot]:Ue,[BS.ComponentType.BanterApple]:je,[BS.ComponentType.BanterCatenoid]:Ve,[BS.ComponentType.BanterFermet]:qe,[BS.ComponentType.BanterHelicoid]:We,[BS.ComponentType.BanterHorn]:Je,[BS.ComponentType.BanterKlein]:Ge,[BS.ComponentType.BanterMobius]:Ke,[BS.ComponentType.BanterMobius3d]:Xe,[BS.ComponentType.BanterNatica]:Qe,[BS.ComponentType.BanterPillow]:Ye,[BS.ComponentType.BanterScherk]:Ze,[BS.ComponentType.BanterSnail]:et,[BS.ComponentType.BanterSpiral]:tt,[BS.ComponentType.BanterSpring]:nt,[BS.ComponentType.Light]:it,[z]:z,[G]:G},kt={[BS.ComponentType.Transform]:"Transform",[BS.ComponentType.BanterGeometry]:"Geometry",[BS.ComponentType.BanterMaterial]:"Material",[BS.ComponentType.BanterRigidbody]:"Rigidbody",[BS.ComponentType.BanterAudioSource]:"AudioSource",[BS.ComponentType.BanterVideoPlayer]:"VideoPlayer",[BS.ComponentType.BanterText]:"Text",[BS.ComponentType.BoxCollider]:"BoxCollider",[BS.ComponentType.SphereCollider]:"SphereCollider",[BS.ComponentType.CapsuleCollider]:"CapsuleCollider",[BS.ComponentType.MeshCollider]:"MeshCollider",[BS.ComponentType.BanterBillboard]:"Billboard",[BS.ComponentType.BanterGrabHandle]:"GrabHandle",[BS.ComponentType.BanterSyncedObject]:"SyncedObject",[BS.ComponentType.BanterPhysicMaterial]:"PhysicMaterial",[BS.ComponentType.BanterMirror]:"Mirror",[BS.ComponentType.BanterBrowser]:"Browser",[BS.ComponentType.BanterHeldEvents]:"HeldEvents",[BS.ComponentType.BanterAttachedObject]:"AttachedObject",[BS.ComponentType.BanterGLTF]:"GLTF",[BS.ComponentType.BanterAssetBundle]:"AssetBundle",[BS.ComponentType.BanterPortal]:"Portal",[BS.ComponentType.BanterColliderEvents]:"ColliderEvents",[BS.ComponentType.BanterBox]:"Box",[BS.ComponentType.BanterCircle]:"Circle",[BS.ComponentType.BanterCone]:"Cone",[BS.ComponentType.BanterCylinder]:"Cylinder",[BS.ComponentType.BanterPlane]:"Plane",[BS.ComponentType.BanterRing]:"Ring",[BS.ComponentType.BanterSphere]:"Sphere",[BS.ComponentType.BanterTorus]:"Torus",[BS.ComponentType.BanterInvertedMesh]:"InvertedMesh",[BS.ComponentType.BanterKitItem]:"KitItem",[BS.ComponentType.BanterStreetView]:"StreetView",[BS.ComponentType.BanterWorldObject]:"WorldObject",[BS.ComponentType.ConfigurableJoint]:"ConfigurableJoint",[BS.ComponentType.CharacterJoint]:"CharacterJoint",[BS.ComponentType.FixedJoint]:"FixedJoint",[BS.ComponentType.HingeJoint]:"HingeJoint",[BS.ComponentType.SpringJoint]:"SpringJoint",[BS.ComponentType.BanterGrabbable]:"Grabbable",[BS.ComponentType.BanterUIPanel]:"UIPanel",[BS.ComponentType.BanterAvatarPedestal]:"AvatarPedestal",[BS.ComponentType.BanterTorusKnot]:"TorusKnot",[BS.ComponentType.BanterApple]:"Apple",[BS.ComponentType.BanterCatenoid]:"Catenoid",[BS.ComponentType.BanterFermet]:"Fermet",[BS.ComponentType.BanterHelicoid]:"Helicoid",[BS.ComponentType.BanterHorn]:"Horn",[BS.ComponentType.BanterKlein]:"Klein",[BS.ComponentType.BanterMobius]:"Mobius",[BS.ComponentType.BanterMobius3d]:"Mobius3d",[BS.ComponentType.BanterNatica]:"Natica",[BS.ComponentType.BanterPillow]:"Pillow",[BS.ComponentType.BanterScherk]:"Scherk",[BS.ComponentType.BanterSnail]:"Snail",[BS.ComponentType.BanterSpiral]:"Spiral",[BS.ComponentType.BanterSpring]:"Spring",[BS.ComponentType.Light]:"Light",[z]:"ScriptRunner",[G]:"ScriptAsset"},un={Geometry:["Material"],BoxCollider:["ColliderEvents"],SphereCollider:["ColliderEvents"],CapsuleCollider:["ColliderEvents"],MeshCollider:["ColliderEvents"],Box:["Material"],Cylinder:["Material"]};window.componentBSTypeMap=It;window.componentTextMap=kt;window.ComponentRegistry={classes:{Entity:j,EntityComponent:w,TransformComponent:Y,ScriptRunnerComponent:z,GeometryComponent:Z,BoxComponent:Se,CircleComponent:Ee,ConeComponent:Ce,CylinderComponent:xe,PlaneComponent:Be,RingComponent:Ie,SphereComponent:ke,TorusComponent:Pe,TorusKnotComponent:Ue,InvertedMeshComponent:Te,TextComponent:se,AppleComponent:je,CatenoidComponent:Ve,FermetComponent:qe,HelicoidComponent:We,HornComponent:Je,KleinComponent:Ge,MobiusComponent:Ke,Mobius3dComponent:Xe,NaticaComponent:Qe,PillowComponent:Ye,ScherkComponent:Ze,SnailComponent:et,SpiralComponent:tt,SpringComponent:nt,MaterialComponent:ee,PhysicMaterialComponent:he,RigidbodyComponent:te,BoxColliderComponent:oe,SphereColliderComponent:re,CapsuleColliderComponent:ae,MeshColliderComponent:ce,ConfigurableJointComponent:Le,CharacterJointComponent:Re,FixedJointComponent:Fe,HingeJointComponent:Ae,SpringJointComponent:De,AudioSourceComponent:ne,VideoPlayerComponent:ie,GLTFComponent:ge,GrabHandleComponent:de,GrabbableComponent:Oe,SyncedObjectComponent:pe,HeldEventsComponent:fe,AttachedObjectComponent:ye,ColliderEventsComponent:we,BillboardComponent:le,MirrorComponent:ue,BrowserComponent:me,AssetBundleComponent:be,PortalComponent:ve,KitItemComponent:$e,StreetViewComponent:_e,WorldObjectComponent:Me,UIPanelComponent:ze,AvatarPedestalComponent:He,LightComponent:it},metadata:{Entity:{category:"core",description:"Entity/GameObject class",icon:"\u{1F4E6}"},EntityComponent:{category:"core",description:"Base component class",icon:"\u{1F9E9}"},TransformComponent:{category:"core",description:"Position, rotation, scale",icon:"\u{1F4D0}"},ScriptRunnerComponent:{category:"scripting",description:"Script execution component",icon:"\u{1F4DC}"},GeometryComponent:{category:"meshes",description:"Generic geometry component",icon:"\u{1F537}"},BoxComponent:{category:"meshes",description:"Box/cube primitive",icon:"\u25FC\uFE0F"},CircleComponent:{category:"meshes",description:"Circle primitive",icon:"\u2B55"},ConeComponent:{category:"meshes",description:"Cone primitive",icon:"\u{1F53A}"},CylinderComponent:{category:"meshes",description:"Cylinder primitive",icon:"\u{1F96B}"},PlaneComponent:{category:"meshes",description:"Flat plane primitive",icon:"\u25AC"},RingComponent:{category:"meshes",description:"Ring/torus primitive",icon:"\u2B55"},SphereComponent:{category:"meshes",description:"Sphere primitive",icon:"\u26AA"},TorusComponent:{category:"meshes",description:"Torus/donut primitive",icon:"\u{1F369}"},TorusKnotComponent:{category:"meshes",description:"Torus knot geometry",icon:"\u{1F369}"},InvertedMeshComponent:{category:"meshes",description:"Inverted mesh (inside-out)",icon:"\u{1F504}"},TextComponent:{category:"meshes",description:"3D text mesh",icon:"\u{1F4DD}"},AppleComponent:{category:"meshes",description:"Apple parametric surface",icon:"\u{1F34E}"},CatenoidComponent:{category:"meshes",description:"Catenoid minimal surface",icon:"\u{1F300}"},FermetComponent:{category:"meshes",description:"Fermat spiral surface",icon:"\u{1F300}"},HelicoidComponent:{category:"meshes",description:"Helicoid minimal surface",icon:"\u{1F300}"},HornComponent:{category:"meshes",description:"Horn/trumpet surface",icon:"\u{1F4EF}"},KleinComponent:{category:"meshes",description:"Klein bottle surface",icon:"\u{1F300}"},MobiusComponent:{category:"meshes",description:"M\xF6bius strip",icon:"\u267E\uFE0F"},Mobius3dComponent:{category:"meshes",description:"3D M\xF6bius surface",icon:"\u267E\uFE0F"},NaticaComponent:{category:"meshes",description:"Seashell-like surface",icon:"\u{1F41A}"},PillowComponent:{category:"meshes",description:"Pillow-shaped surface",icon:"\u{1F6CF}\uFE0F"},ScherkComponent:{category:"meshes",description:"Scherk minimal surface",icon:"\u{1F300}"},SnailComponent:{category:"meshes",description:"Snail shell surface",icon:"\u{1F40C}"},SpiralComponent:{category:"meshes",description:"Spiral surface",icon:"\u{1F300}"},SpringComponent:{category:"meshes",description:"Spring/helix surface",icon:"\u{1F529}"},MaterialComponent:{category:"materials",description:"Material properties (color, texture)",icon:"\u{1F3A8}"},PhysicMaterialComponent:{category:"materials",description:"Physics material (friction, bounce)",icon:"\u2699\uFE0F"},RigidbodyComponent:{category:"physics",description:"Physics simulation",icon:"\u{1F4AB}"},BoxColliderComponent:{category:"physics",description:"Box collision shape",icon:"\u{1F4E6}"},SphereColliderComponent:{category:"physics",description:"Sphere collision shape",icon:"\u26AA"},CapsuleColliderComponent:{category:"physics",description:"Capsule collision shape",icon:"\u{1F48A}"},MeshColliderComponent:{category:"physics",description:"Mesh-based collision",icon:"\u{1F537}"},ConfigurableJointComponent:{category:"physics",description:"Configurable physics joint",icon:"\u{1F517}"},CharacterJointComponent:{category:"physics",description:"Character ragdoll joint",icon:"\u{1F9B4}"},FixedJointComponent:{category:"physics",description:"Fixed connection between rigidbodies",icon:"\u{1F517}"},HingeJointComponent:{category:"physics",description:"Rotational joint around axis",icon:"\u{1F6AA}"},SpringJointComponent:{category:"physics",description:"Elastic spring connection",icon:"\u{1FA83}"},AudioSourceComponent:{category:"media",description:"Audio playback",icon:"\u{1F50A}"},VideoPlayerComponent:{category:"media",description:"Video playback",icon:"\u{1F4F9}"},GLTFComponent:{category:"media",description:"GLTF 3D model loader",icon:"\u{1F3AD}"},GrabHandleComponent:{category:"behaviors",description:"Grabbable object",icon:"\u270B"},GrabbableComponent:{category:"behaviors",description:"Advanced grab mechanics with VR controller integration",icon:"\u{1F932}"},SyncedObjectComponent:{category:"behaviors",description:"Multi-user synchronization",icon:"\u{1F504}"},HeldEventsComponent:{category:"behaviors",description:"Events when object is held",icon:"\u{1F91D}"},AttachedObjectComponent:{category:"behaviors",description:"Attach to player or object",icon:"\u{1F4CC}"},ColliderEventsComponent:{category:"behaviors",description:"Collision/trigger events",icon:"\u{1F4A5}"},BillboardComponent:{category:"misc",description:"Always face camera",icon:"\u{1F441}\uFE0F"},MirrorComponent:{category:"misc",description:"Reflective mirror surface",icon:"\u{1FA9E}"},BrowserComponent:{category:"misc",description:"Embedded web browser",icon:"\u{1F310}"},AssetBundleComponent:{category:"misc",description:"Load Unity asset bundles",icon:"\u{1F4E6}"},PortalComponent:{category:"misc",description:"Portal to another space",icon:"\u{1F6AA}"},KitItemComponent:{category:"misc",description:"Kit item reference",icon:"\u{1F381}"},StreetViewComponent:{category:"misc",description:"Google Street View integration",icon:"\u{1F5FA}\uFE0F"},WorldObjectComponent:{category:"misc",description:"World object reference",icon:"\u{1F30D}"},UIPanelComponent:{category:"misc",description:"UI panel with haptics and sounds",icon:"\u{1F4F1}"},AvatarPedestalComponent:{category:"misc",description:"Ready Player Me avatar display",icon:"\u{1F9CD}"},LightComponent:{category:"misc",description:"Light source (directional, point, spot)",icon:"\u{1F4A1}"}},layers:hn,typeMap:Bt,bsTypeMap:It,textMap:kt,bundleMap:un,supportedComponents:xt,getByName(c){return this.classes[c]||this.typeMap[c]||null},getByCategory(c){return Object.entries(this.metadata).filter(([e,t])=>t.category===c).map(([e,t])=>e)},getCategories(){return[...new Set(Object.values(this.metadata).map(c=>c.category))]},getInfo(c){return this.metadata[c]||null},list(){return Object.entries(this.metadata).map(([c,e])=>({name:c,category:e.category,description:e.description,icon:e.icon}))},getStats(){let c=this.getCategories(),e={total:Object.keys(this.classes).length,byCategory:{},layers:Object.keys(this.layers).length};return c.forEach(t=>{e.byCategory[t]=this.getByCategory(t).length}),e},isSupported(c){if(typeof c=="string"){let e=Object.keys(this.textMap).find(t=>this.textMap[t]===c);return this.supportedComponents.has(parseInt(e))}return this.supportedComponents.has(c)},getLayerName(c){return Object.keys(this.layers).find(e=>this.layers[e]===c)||null},getLayerNumber(c){return this.layers[c]??null},getBundledComponents(c){return this.bundleMap[c]||[]}};console.log("[ComponentRegistry] Exposed globally with",Object.keys(window.ComponentRegistry.classes).length,"component types");console.log('[ComponentRegistry] Usage: ComponentRegistry.list() or ComponentRegistry.getByCategory("meshes")');console.log("[ComponentRegistry] Categories:",window.ComponentRegistry.getCategories().join(", "));var mn=class{constructor(){this.scene=null,this.entityData={entities:[],entityMap:{},entityUUIDMap:{},componentMap:{}},this.props={hierarchy:null},this.garbage=[],this.selectedEntity=null,this.expandedNodes=new Set,this.loaded=!1}myName(){return this.scene.localUser.name}async showMissingObjectWarning(e){return await M(`No "${e}" GameObject found in the scene. Would you like to create an empty "${e}" GameObject as a substitute?`)}async createEmptyGameObject(e){log("init",`Creating empty GameObject: ${e}`);let t=new window.BS.GameObject(e);return showNotification(`Created empty "${e}" GameObject`),t}changeFileServer(e){localStorage.setItem("file_server",e),window.location.reload()}async initialize(){try{if(typeof window.BS>"u"||!window.BS.BanterScene){err("init","BS library not available");return}this.scene=window.BS.BanterScene.GetInstance(),this.setup=async()=>{this.loaded||(log("init","initializing firebase.."),net.initFirebase(async e=>{log("init","spaceState =>",e),e.vars.hostUser?Object.values(this.scene.users).map(r=>r.name).includes(e.vars.hostUser)||(log("init","Host user not here, so I'll make myself the host",this.myName()),net.claimHost()):(log("init","Server has no host user, so I guess it's me",this.myName()),net.claimHost());let t=await this.scene.Find("Scene"),n=await this.scene.Find("People");log("INIT","sceneObj =>",t),log("INIT","peopleObj =>",n),t||(log("init","No Scene object found"),await this.showMissingObjectWarning("Scene")?t=await this.createEmptyGameObject("Scene"):err("init","User declined to create Scene object. Initialization may fail.")),n||(log("init","No People object found"),await this.showMissingObjectWarning("People")?n=await this.createEmptyGameObject("People"):err("init","User declined to create People object. Initialization may fail."));let i=null,s=null;if(e.Scene)e.People[this.myName()]&&(await net.db.ref(`space/${net.spaceId}/People/${this.myName()}/__meta/destroyed`).set(!0),await net.db.ref(`space/${net.spaceId}/People/${this.myName()}`).remove(),delete e.People[this.myName()]),i=await this.loadHierarchy("Scene",e.Scene,{context:"startupLoad"}),s=await this.loadHierarchy("People",e.People,{context:"startupLoad"});else{net.setVar("_MUTEX_CRAWL",Date.now()),window.loadingScreen.updateStage("hierarchy",0,"Gathering scene structure...");let o=await this.gatherSceneHierarchy();log("init","gathered Scene's hierarchy =>",o),this.props.hierarchy=o,window.loadingScreen.updateStage("hierarchy",100,"Scene structure loaded"),window.loadingScreen.updateStage("entities",0,"Generating entities..."),i=await this.loadHierarchy("Scene",o,{context:"crawl"}),s=await this.loadHierarchy("People",{},{context:"crawl"}),net.delVar("_MUTEX_CRAWL")}this.entityData.entities=[i,s],this.initializeExpandedNodes(),window.loadingScreen.updateStage("entities",100,"All entities generated"),inspector?.hierarchyPanel?.render(),inspector?.lifecyclePanel?.render(),this.loaded=!0,SM.getAllEntities().forEach(o=>o.startListeningForChildChanges()),await this.executeStartupScripts("onSceneLoaded"),setTimeout(()=>{inspector?.hierarchyPanel?.render(),SM.getAllScriptRunners().forEach(o=>o._refresh())},1e3)}))}}catch(e){err("init","Failed to connect to Unity:",e)}window.scene=this.scene}async Reset(e){console.log("%cReset() destroys persistant data, and should only be used consciously","color: red; font-weight: bold;")}async Reset2(e){await net.clearSpaceState();let t=async()=>{this._reset()};this.scene.localUser.name!=="Technocrat"&&e?inventory.ui.showWarningConfirm("Reset Scene","This will delete any unsaved changes, and return to an empty scene.",t,()=>{showNotification('canceled reset"')}):await t()}async _reset(){scene.OpenPage(`banter://${location.host}`)}async handleUserJoined(e){log("scene-event","[USER JOINED] fired",e);let t=e.detail.name;await AddEntity("People",t)}async saveScene(){localStorage.setItem("lastProps",JSON.stringify(this.props))}async gatherSceneHierarchy(){log("init","gathering SceneHierarchy"),window.loadingScreen&&window.loadingScreen.updateStage("hierarchy",10,"Finding scene object...");let e=await this.scene.Find("Scene");if(!e)return log("init","no scene object found"),null;window.loadingScreen&&window.loadingScreen.updateStage("hierarchy",20,"Scene object found");let t=n=>{let i={},s={};for(let o in n.components){let r=n.components[o];if(r.componentType==BS.ComponentType.Transform)continue;let a=`${kt[r.componentType]}_${Math.floor(Math.random()*99999)}`;i[a]=!0}if(s.__meta={active:!0,layer:0,localPosition:n.transform.localPosition,localRotation:n.transform.localRotation,localScale:n.transform.localScale,position:n.transform.position,rotation:n.transform.rotation,components:i},n.Traverse){let o=[];n.Traverse(r=>{log("init","traversing..",r.id,r.name,r.parent,n.unityId),r&&r.id!==n.unityId&&r.parent==n.unityId&&(s[r.name]=t(r))})}return s};return t(e,null)}async gatherEntityHierarchy(e){if(!e)return null;let t=i=>({name:i.name,layer:i.layer,components:Array.from(new Set(i.components.map(o=>o.id))),children:i.children.map(o=>t(o)),localPosition:i.transform.localPosition,localRotation:i.transform.localRotation,localScale:i.transform.localScale});return t(e)}async updateHierarchy(e=!0){let t=await this.gatherEntityHierarchy(this.getSceneEntity());this.props.hierarchy=t,e&&this._updateUI()}async loadHierarchy(e,t,n){if(log("init","loading hierarchy for",e,"=>",t),!t)return null;t.__meta||(t.__meta={active:!0,layer:0,localPosition:{x:0,y:0,z:0},localRotation:{x:0,y:0,z:0,w:1},localScale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:1},components:{}});let i=async(s,o,r,a)=>{let l=r?r+"/"+o:o,d=await this.scene.FindByPath(l);if(!d)return await this.loadHistoricalEntity(s,o,r);let p=await new j().init({name:o,parentId:r,_bs:d,layer:d.layer||0,localPosition:s.__meta.localPosition,localRotation:s.__meta.localRotation,localScale:s.__meta.localScale,position:s.__meta.position,rotation:s.__meta.rotation,uuid:s.__meta.uuid},a),h=0,u=s.__meta.components?Object.keys(s.__meta.components):[];for(let m in d.components){let f=d.components[m];if(f.componentType==BS.ComponentType.Transform)continue;let v=u[h];if(h++,!v){log("init","no component ref found for",f,s.__meta.components,h,d.components);continue}if(xt.has(f.componentType)){let b=It[f.componentType],S=this.getHistoricalProps(v).props;S.id=v;let E=await new b().init(p,f,S,a);p.AddComponent(E)}}u.forEach(async m=>{if(!m){log("init","[SUS SITUATION]: component_ref is not defined",m,s,s.__meta.components);return}if(m.startsWith("ScriptRunner")){let f=this.getHistoricalProps(m).props;f.id=m;let v=await new z().init(p,null,f,a);p.AddComponent(v)}});let y=Object.keys(s).map(async m=>{if(m.startsWith("__"))return;let f=s[m];return await i(f,m,p.id,a)});return await Promise.all(y),p._loaded(),p};return await i(t,e,null,n)}getHistoricalProps(e){let t=net.state.components[e];return t||(log("init","ISSUE: no props found for",e),t={}),{type:e.split("_")[0],props:t}}async loadHistoricalEntity(e,t,n){log("init","loading historical entity =>",e);let i=await new j().init({name:t,parentId:n,layer:e.__meta.layer||0,localPosition:e.__meta.localPosition||{x:0,y:0,z:0},localRotation:e.__meta.localRotation||{x:0,y:0,z:0,w:1},localScale:e.__meta.localScale||{x:1,y:1,z:1},position:e.__meta.position||{x:0,y:0,z:0},rotation:e.__meta.rotation||{x:0,y:0,z:0,w:1},uuid:e.__meta.uuid}),s=Object.keys(e).map(async o=>{if(o.startsWith("__"))return;let r=e[o];return await this.loadHistoricalEntity(r,o,i.id)});return await Promise.all(s),i._loaded(),i}initializeExpandedNodes(){this.entityData.entities.forEach(e=>{this.expandedNodes.add(e.id)})}getEntityComponentById(e,t=!0){let n=this.entityData.componentMap[e];return t&&!n&&(log("fallback","searching for component: ",e),n=this.fallbackComponentSearch(e),log("fallback","found: ",n)),n}fallbackComponentSearch(e){let t=(i,s)=>{for(var o=0;o<i.length;o++){let a=i[o];for(var r=0;r<a.components.length;r++){let d=a.components[r];if(d.id===s)return d}let l=t(a.children,s);if(l)return l}},n=t(entities(),e);return n&&(this.entityData.componentMap[e]=n),n}toggleNodeExpansion(e){this.expandedNodes.has(e)?this.expandedNodes.delete(e):this.expandedNodes.add(e)}selectEntity(e){this.selectedEntity=e,this._updateUI(),window.dispatchEvent(new CustomEvent("entitySelected",{detail:{entityId:e}}))}_updateUI(){inspector?.hierarchyPanel&&inspector.hierarchyPanel.render(),inspector?.propertiesPanel&&inspector.propertiesPanel.render(this.selectedEntity)}getEntityById(e,t=!0){if(!e)return null;let n=this.entityData.entityMap[e];return t&&!n&&(log("fallback","searching for: ",e),n=this.fallbackEntitySearch(e),log("fallback","found: ",n)),n}getEntityByUuid(e){return Object.values(SM.entityData.entityMap).find(t=>t.uuid===e)}fallbackEntitySearch(e){let t=(i,s)=>{for(var o=0;o<i.length;o++){let r=i[o];if(r.id===s)return r;let a=t(r.children,s);if(a)return a}},n=t(entities(),e);return n&&(this.entityData.entityMap[e]=n),n}getAllEntities(){return Object.values(this.entityData.entityMap||{})}getSceneEntity(){return this.entityData.entities[0]}getEntityOrScene(e){let t=this.getEntityById(e);return t||(t=this.getSceneEntity()),t}getSelectedEntity(e){return e?this.getEntityOrScene(this.selectedEntity):this.getEntityById(this.selectedEntity)}getEntityByName(e){return SM.getAllEntities().find(t=>t.name==e)}getAllComponents(){return Object.values(this.entityData.componentMap).filter(e=>e._entity.components.includes(e))}getAllScriptRunners(){return this.getAllComponents().filter(e=>e.type==="ScriptRunner")}getAllScriptAssets(){return this.getAllComponents().filter(e=>e.type==="ScriptAsset")}getScriptAsset(e){return this.getAllScriptAssets().find(t=>t.properties.name===e)}getScriptByName(e){return this.getAllScriptRunners().find(n=>n.properties.name===e)?.ctx}async _addNewEntity(e,t=null){if(!this.scene||!window.BS)return log("init","NO SCENE AVAILABLE"),null;if(t||(t=this.entityData.entities[0].id),!this.getEntityById(t))return log("scene","no parent entity found"),null;let i=await new j().init({parentId:t,name:e,uuid:Math.floor(Math.random()*1e13)});log("scene","NEW SLOT:",i)}async _createEntityFromGameObject(e,t,n,i,s){let o=await new j().init({name:n||e.name,parentId:t,_bs:e,layer:e.layer,localPosition:e.transform.localPosition,localRotation:e.transform.localRotation,localScale:e.transform.localScale}),r=0;for(let l in e.components){let d=e.components[l];if(d.componentType!==BS.ComponentType.Transform&&xt.has(d.componentType)){let p=i.components[r],h=s[p.id],u=Bt[h.split("_")[0]],y=await new u().init(o,d,{id:h});o.AddComponent(y),this.entityData.componentMap[h]=y,r++}}let a=this.getEntityById(t);if(a&&a.children.push(o),e.Traverse&&i.children&&i.children.length>0){let l=0;e.Traverse(d=>{if(d&&d.id!==e.unityId&&d.parent===e.unityId){let p=i.children[l];this._createEntityFromGameObject(d,o.id,d.name,p,s),l++}})}return o._loaded(),o}async executeStartupScripts(e,t=0){if(log("startup","executing startup scripts for: ",e),!lifecycle||!window.inventory||!window.inventory.items)return log("startup","Lifecycle not initialized, delaying.."),await new Promise(n=>setTimeout(n,500)),await this.executeStartupScripts(e);if(e==="onInspectorLoaded"){if(lifecycle.startupExecutionStart.onInspectorLoaded){log("startup","Inspector startup has already started, skipping..");return}lifecycle.startupExecutionStart.onInspectorLoaded=!0}if(e==="onSceneLoaded"){if(lifecycle.startupExecutionStart.onInspectorLoaded||(log("startup","Inspector startup has not started for some reason.."),await this.executeStartupScripts("onInspectorLoaded")),lifecycle.startupExecutionStart.onInspectorLoaded&&!lifecycle.startupExecutionComplete.onInspectorLoaded)return log("startup","Inspector startup has not completed yet, delaying.."),await new Promise(n=>setTimeout(n,500)),await this.executeStartupScripts(e,t+1);if(lifecycle.startupExecutionStart.onSceneLoaded){log("startup","Scene startup has already started, skipping..");return}lifecycle.startupExecutionStart.onSceneLoaded=!0}try{if(!window.inventory){log("startup","Inventory not initialized, skipping startup scripts");return}let n=Object.values(window.inventory.items).filter(i=>i.itemType==="script"&&i.startup===!0&&i.active===!0&&i.startupSequence===e);log("startup",`Found ${n.length} startup scripts to execute`);for(let i of n)try{log("startup",`Executing startup script: ${i.name}`);let s={vars:{},_scene:this.scene,_BS:window.BS,_entity:null,_component:null};new Function("console",i.data).call(s,console),typeof s.onStart=="function"&&s.onStart(),showNotification(`Startup script "${i.name}" executed`)}catch(s){err("startup",`Error executing startup script "${i.name}":`,s),showNotification(`Failed to execute startup script "${i.name}"`,"error")}log("startup","All startup scripts executed")}catch(n){err("startup","Error in executeStartupScripts:",n)}lifecycle.startupExecutionComplete[e]=!0,log("startup",`[${e}] COMPLETED`)}},ii=new mn;window.SM=ii;window.entities=()=>window.SM.entityData.entities;window.crawl=()=>{let c=e=>{let t={entity:e,_bs:e._bs,name:e.name,".":e.components,_:e.components.map(n=>n.type)};for(let n=0;n<e.children.length;n++)t[n]=c(e.children[n]);return t};return c(window.entities()[0])};window.sel=()=>window.SM.getSelectedEntity();window.doIOwnCallback=(c,e)=>console.log(c,e);window.getUserColor=c=>Object.values(scene.users).find(e=>e.name===c)?.color||"#8b8f9e";var fn=class{constructor(e){this.networking=e,this.currentUser=null,this.authStateListeners=[]}async initializeAuth(){if(!firebase.auth)return console.error("Firebase Auth not available"),!1;try{let e=firebase.auth().currentUser;if(e)return this.currentUser=e,!0;let t=this.networking.secret,n=this.sanitizeUsername(SM.scene?.localUser?.name||"anonymous");return await this.authenticateAnonymously(n,t),!0}catch(e){return console.error("Failed to initialize Firebase Auth:",e),!1}}async authenticateAnonymously(e,t){try{let n=await firebase.auth().signInAnonymously();return this.currentUser=n.user,console.log("Authenticated anonymously as:",e),this.currentUser}catch(n){throw console.error("Anonymous authentication failed:",n),n}}async registerUserSecret(e,t,n){try{(await fetch(`${window.repoUrl.slice(0,-3)}/setclaims`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({uid:e,username:t,secret:n})})).ok?(console.log("Custom claims set for:",t),await this.currentUser.getIdToken(!0)):console.log("Could not set custom claims (server may not be running)")}catch{console.log("Auth server not available - running without custom claims")}}sanitizeUsername(e){return e.replace(/[.#$[\]]/g,"_")}async signOut(){try{await firebase.auth().signOut(),this.currentUser=null,console.log("Signed out successfully")}catch(e){console.error("Sign out failed:",e)}}getCurrentUser(){return this.currentUser||firebase.auth().currentUser}onAuthStateChanged(e){return this.authStateListeners.push(e),firebase.auth().onAuthStateChanged(e)}isAuthenticated(){return!!this.getCurrentUser()}async getIdToken(){let e=this.getCurrentUser();if(!e)throw new Error("No authenticated user");return await e.getIdToken()}};function $n(c){let e=new fn(c),t=async()=>{if(typeof firebase<"u"&&firebase.auth){await e.initializeAuth();let n={setData:c.setData.bind(c),getData:c.getData.bind(c),updateData:c.updateData.bind(c),deleteData:c.deleteData.bind(c),addData:c.addData.bind(c)};c.setData=async function(i,s){return e.isAuthenticated()||await e.initializeAuth(),n.setData(i,s)},c.getData=async function(i){return e.isAuthenticated()||await e.initializeAuth(),n.getData(i)},c.updateData=async function(i,s){return e.isAuthenticated()||await e.initializeAuth(),n.updateData(i,s)},c.deleteData=async function(i){return e.isAuthenticated()||await e.initializeAuth(),n.deleteData(i)},c.addData=async function(i,s){return e.isAuthenticated()||await e.initializeAuth(),n.addData(i,s)},c.auth=e,window.loadInventoryDeps()}else setTimeout(t,1e3)};return t(),e}var yn=class{constructor(){this.db=null,this.storage=null,this.secret=this.getSecret(),this.logs=[],this.spaceId=window.location.host.split(".")[0],this.state={},this.varsListeners=new Map}get host(){return this.state.vars.hostUser}get amHost(){return this.state.vars.hostUser===SM.myName()}claimHost(){this.setVar("hostUser",SM.myName())}onVarsChange(e){let t=this.db.ref(`space/${this.spaceId}/vars`);return t.on("value",e),this.varsListeners.set(e,t),e}offVarsChange(e){this.varsListeners.has(e)&&(this.varsListeners.get(e).off("value",e),this.varsListeners.delete(e))}onVarAdded(e){let t=this.db.ref(`space/${this.spaceId}/vars`);return t.on("child_added",e),{ref:t,callback:e,event:"child_added"}}onVarChanged(e){let t=this.db.ref(`space/${this.spaceId}/vars`);return t.on("child_changed",e),{ref:t,callback:e,event:"child_changed"}}onVarRemoved(e){let t=this.db.ref(`space/${this.spaceId}/vars`);return t.on("child_removed",e),{ref:t,callback:e,event:"child_removed"}}removeListener(e){e&&e.ref&&e.ref.off(e.event,e.callback)}categorizeVars(e=this.state.vars){let t={public:{},protected:{}};return Object.entries(e||{}).forEach(([n,i])=>{n.startsWith("_")?t.protected[n.substring(1)]=i:t.public[n]=i}),t}async getAllVars(){return(await this.db.ref(`space/${this.spaceId}/vars`).once("value")).val()||{}}cleanupListeners(){this.varsListeners.forEach((e,t)=>{e.off("value",t)}),this.varsListeners.clear()}getSecret(){let e=localStorage.getItem("secret");return e||(e=Math.random().toString(36).substring(2,15),localStorage.setItem("secret",e)),e}initFirebase(e){if(log("init","initializing firebase"),!window.FIREBASE_CONFIG){err("init","Firebase configuration not found");return}let t=window.FIREBASE_CONFIG;if(typeof firebase<"u"&&!firebase.apps.length)try{firebase.initializeApp(t),this.db=firebase.database(),this.storage=firebase.storage();let n=()=>{window.inventory&&window.inventory.firebase?(window.inventory.firebase.setupFirebaseListeners(),$n(this),this.db.ref("space/"+this.spaceId).once("value",s=>{let o=s.val();o?(o.vars||(o.vars={},this.db.ref("space/"+this.spaceId+"/vars").set({})),o.People||(o.People={},this.db.ref("space/"+this.spaceId+"/People").set({})),o.components||(o.components={},this.db.ref("space/"+this.spaceId+"/components").set({})),o.scripts||(o.scripts={},this.db.ref("space/"+this.spaceId+"/scripts").set({}))):(o={vars:{},People:{},components:{},scripts:{}},this.db.ref("space/"+this.spaceId).set(o)),this.state=o,e(o)})):setTimeout(n,500)};n()}catch(n){console.error("Failed to initialize Firebase:",n)}}async testConnection(){try{log("net","Testing Firebase Realtime Database connection...");let e=this.db.ref("test/connection-test");await e.set({timestamp:firebase.database.ServerValue.TIMESTAMP,test:!0,message:"Realtime Database connection test"}),log("net","Realtime Database write successful");let t=await e.once("value");log("net","Realtime Database read successful:",t.val()),log("net","\u2705 Firebase Realtime Database is working correctly!")}catch(e){err("net","Realtime Database connection test failed:",e)}}async testStorageConnection(){log("net","=== Starting Firebase Storage Test ===");try{log("net","Step 1: Checking storage initialization...");let e=this.getStorage();if(!e){err("net","\u2717 Storage not initialized");return}log("net","\u2713 Storage initialized:",e),log("net","Step 2: Checking storage bucket...");let t=e.ref();log("net","Storage root reference:",t),log("net","Storage bucket:",t.bucket),log("net","Step 3: Creating test reference...");let n=`test/storage-test-${Date.now()}.txt`,i=e.ref(n);log("net","Test reference created:",i.fullPath),log("net","Step 4: Attempting to upload test text...");let s="Firebase Storage test content",o=new Blob([s],{type:"text/plain"});try{let r=await i.put(o);log("net","\u2713 Upload successful:",r),log("net","Upload state:",r.state),log("net","Bytes transferred:",r.bytesTransferred),log("net","Step 5: Getting download URL...");let a=await r.ref.getDownloadURL();return log("net","\u2713 Download URL obtained:",a),log("net","Step 6: Cleaning up test file..."),await i.delete(),log("net","\u2713 Test file deleted successfully"),log("net","=== Firebase Storage Test PASSED ==="),!0}catch(r){err("net","\u2717 Upload/Download failed:",r),err("net","Error code:",r.code),err("net","Error message:",r.message),r.serverResponse&&err("net","Server response:",r.serverResponse),r.code==="storage/unauthorized"?(err("net","Issue: Storage security rules may be blocking uploads"),err("net","Solution: Check Firebase Console > Storage > Rules")):r.code==="storage/unknown"&&(err("net","Issue: Unknown storage error - check CORS and bucket configuration"),err("net","Check: Firebase Console > Storage > Files tab to ensure bucket exists"))}}catch(e){if(err("net","\u2717 Storage test failed:",e),err("net","Full error object:",e),e.code&&err("net","Error code:",e.code),e.message&&err("net","Error message:",e.message),e.serverResponse){err("net","Server response:",e.serverResponse);try{let t=JSON.parse(e.serverResponse);err("net","Parsed server response:",t)}catch{}}}return log("net","=== Firebase Storage Test FAILED ==="),!1}getDatabase(){return!this.db&&typeof firebase<"u"&&(this.db=firebase.database()),this.db}getStorage(){return!this.storage&&typeof firebase<"u"&&(this.storage=firebase.storage()),this.storage}async addData(e,t){if(!this.db)throw err("net","Firebase Database not initialized"),new Error("Firebase Database not initialized");try{log("net",`Adding data to path: ${e}`,t);let n=this.db.ref(e).push();return await n.set({...t,createdAt:firebase.database.ServerValue.TIMESTAMP}),log("net","Data added successfully with key:",n.key),{id:n.key,ref:n}}catch(n){throw err("net",`Failed to add data to ${e}:`,n),n}}async setData(e,t){if(!this.db)throw new Error("Firebase Database not initialized");return await this.db.ref(e).set(t),{path:e,data:t}}async getData(e){if(!this.db)throw new Error("Firebase Database not initialized");return(await this.db.ref(e).once("value")).val()}async updateData(e,t){if(!this.db)throw new Error("Firebase Database not initialized");return await this.db.ref(e).update(t),{path:e,updates:t}}async deleteData(e){if(!this.db)throw new Error("Firebase Database not initialized");return await this.db.ref(e).remove(),{path:e}}async queryData(e,t={}){if(!this.db)throw new Error("Firebase Database not initialized");let n=this.db.ref(e);t.orderBy&&(n=n.orderByChild(t.orderBy)),t.startAt!==void 0&&(n=n.startAt(t.startAt)),t.endAt!==void 0&&(n=n.endAt(t.endAt)),t.equalTo!==void 0&&(n=n.equalTo(t.equalTo)),t.limitToFirst?n=n.limitToFirst(t.limitToFirst):t.limitToLast&&(n=n.limitToLast(t.limitToLast));let i=await n.once("value"),s=[];return i.forEach(o=>{s.push({id:o.key,...o.val()})}),s}async routeOneShot(e,t,n){let i=e.split("\xB6");if(i[0]==="runJS"){let o=i[1];log("runJS",o),new Function(o)();return}if(e==="reset"&&await SM._reset(),i[0]==="scriptrunner_start"){let o=i[1],r=SM.getEntityComponentById(o);r&&await r._start()}if(i[0]==="scriptrunner_stop"){let o=i[1],r=SM.getEntityComponentById(o);r&&await r._stop()}if(i[0]==="scriptrunner_refresh"){let o=i[1],r=SM.getEntityComponentById(o);r&&await r._refresh()}if(i[0]==="import"){let[o,r]=i.slice(1);await inventory.firebase.importFromFirebase(o,"",r)}let s=document.getElementById("saveBtn");s&&(s.style.opacity=1,s.style.cursor="pointer",s.style.pointerEvents="auto")}async handleOneShot(e){let t=e.detail.data,n=t.indexOf(":"),i=parseInt(t.slice(0,n));t=t.slice(n+1);let s=t.indexOf(":"),o=t.slice(0,s);if(o===SM.myName())return;let r=t.slice(s+1);U("oneShot",o,r),await this.routeOneShot(r,i,o)}convertKeyToFirebaseKey(e){return e=e.replace("$",""),e=e.replace(":","/"),e.startsWith("__")&&(e="components/"+e.slice(2)),e}clearSpaceState(){this.state={},this.db.ref("space/"+this.spaceId).remove()}getVar(e){return this.state.vars[e]}setVar(e,t,n){if(n&&!this.amHost)return;this.state.vars[e]=t,this.db.ref("space/"+this.spaceId+"/vars/"+e).set(t)}setScript(e,t){}async SetScript(e,t){}async SetVar(e,t,n){if(n&&!this.amHost)return;await this.db.ref("space/"+this.spaceId+"/vars/"+e).set(t)}delVar(e,t){if(t&&!this.amHost)return;delete this.state.vars[e],this.db.ref("space/"+this.spaceId+"/vars/"+e).remove()}async DelVar(e,t){if(t&&!this.amHost)return;await this.db.ref("space/"+this.spaceId+"/vars/"+e).remove()}async sendOneShot(e){let t=Date.now(),n=SM.myName(),i=`${t}:${n}:${e}`;SM.scene.OneShot(i),U("oneShot",n,e),await this.routeOneShot(e,t,n)}runJS(e){this.sendOneShot(`runJS\xB6${e}`)}},Pt=new yn;window.net=Pt;window.testFirebaseDB=async()=>{log("net","Testing Firebase Realtime Database...");try{let c=Pt.getDatabase(),e={test:!0,timestamp:firebase.database.ServerValue.TIMESTAMP,message:"Test data from Realtime Database",number:42,boolean:!0,array:["item1","item2"],nested:{key:"value"}};log("net","Adding test data...");let t=c.ref("test").push();await t.set(e),log("net","\u2705 Data added with key:",t.key),log("net","Reading data...");let n=await t.once("value");log("net","\u2705 Retrieved data:",n.val()),log("net","Updating data..."),await t.update({updated:!0,updateTime:firebase.database.ServerValue.TIMESTAMP}),log("net","\u2705 Data updated"),log("net","Listing data...");let i=await c.ref("test").limitToFirst(10).once("value");return log("net","\u2705 Listed data:",i.val()),log("net","Deleting data..."),await t.remove(),log("net","\u2705 Data deleted"),"\u2705 All Realtime Database tests passed!"}catch(c){return err("net","\u274C Realtime Database test failed:",c),c}};var gn=class{constructor(){this.changeListeners=[],this.isProcessing=!1,this.undoStack=[],this.redoStack=[],this.maxSize=100,this.isApplying=!1,this.setupKeyboardShortcuts(),this.updateUI()}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){let t=this.changeListeners.indexOf(e);t>-1&&this.changeListeners.splice(t,1)}async applyChange(e){if(this.isProcessing){console.warn("Change already in progress");return}this.isProcessing=!0;let t=!1;try{if(!e||typeof e.apply!="function"){console.error("Invalid change object - must have apply() method");return}let i=!(e.options?.source==="history"||this.isApplying)&&e.options?.source==="ui",s=e.timeout||5e3;t=await e.apply(),i&&this.recordChange(e),this.notifyListeners(e)}catch(n){throw console.error("Failed to apply change:",n),n}finally{this.isProcessing=!1}return t}async applyWithTimeout(e,t,n){return Promise.race([e(),new Promise(i=>{setTimeout(()=>{console.warn(`Change ${n.constructor.name||"unknown"} timed out after ${t}ms`),i(null)},t)})])}recordChange(e){if(this.isApplying){log("change-manager","Skipping record - isApplying is true");return}if(e.options?.source!=="ui"){log("change-manager","Skipping record - source is not ui:",e.options?.source);return}if(!e||typeof e.apply!="function"||typeof e.undo!="function"){err("change-manager","Invalid change object for history - must have apply() and undo() methods");return}let t={id:Date.now(),timestamp:Date.now(),description:e.getDescription?e.getDescription():"Unknown change",change:e};this.undoStack.push(t),this.redoStack=[],this.undoStack.length>this.maxSize&&this.undoStack.shift(),this.updateUI()}async undo(){if(this.undoStack.length===0){this.showNotification("Nothing to undo");return}let e=this.undoStack.pop();this.isApplying=!0;try{await this.applyWithTimeout(e.change.undo.bind(e.change),5e7,e.change.id),this.redoStack.push(e),this.updateUI(),this.showNotification(`Undone: ${e.description}`),log("UNDO/REDO",`Undone: ${e.description}`)}catch(t){console.error("Undo failed:",t),this.showNotification("Undo failed: "+t.message,"error"),this.undoStack.push(e)}finally{this.isApplying=!1}C.notifyListeners(e)}async redo(){if(this.redoStack.length===0){this.showNotification("Nothing to redo");return}let e=this.redoStack.pop();this.isApplying=!0;try{await this.applyWithTimeout(e.change.apply.bind(e.change),5e7,e.change.id),this.undoStack.push(e),this.updateUI(),this.showNotification(`Redone: ${e.description}`),log("UNDO/REDO",`Redone: ${e.description}`)}catch(t){console.error("Redo failed:",t),this.showNotification("Redo failed: "+t.message,"error"),this.redoStack.push(e)}finally{this.isApplying=!1}C.notifyListeners(e)}notifyListeners(e){this.changeListeners.forEach(t=>{try{t(e)}catch(n){console.error("Change listener error:",n)}})}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&!e.altKey){if(navigation.currentPage!=="world-inspector")return;e.key==="z"&&!e.shiftKey?(e.preventDefault(),this.undo()):(e.key==="z"&&e.shiftKey||e.key==="y")&&(e.preventDefault(),this.redo())}})}updateUI(){let e=document.getElementById("undoBtn"),t=document.getElementById("redoBtn");e&&(e.disabled=this.undoStack.length===0,e.title=this.undoStack.length>0?`Undo: ${this.undoStack[this.undoStack.length-1].description} (Ctrl+Z)`:"Nothing to undo (Ctrl+Z)"),t&&(t.disabled=this.redoStack.length===0,t.title=this.redoStack.length>0?`Redo: ${this.redoStack[this.redoStack.length-1].description} (Ctrl+Shift+Z)`:"Nothing to redo (Ctrl+Shift+Z)")}showNotification(e,t="info"){document.dispatchEvent(new CustomEvent("historyNotification",{detail:{message:e,type:t}}))}getStatus(){return{canUndo:this.undoStack.length>0,canRedo:this.redoStack.length>0,undoCount:this.undoStack.length,redoCount:this.redoStack.length,isApplying:this.isApplying}}gatherHistory(e){let t=o=>{let r=new Array(...o.identifiers),a=o.components.map(l=>l.id);return r=r.concat(a),o.children.forEach(l=>{let d=t(l);r=r.concat(d)}),r};function n(o,r){return Object.values(o).some(a=>a&&typeof a=="object"?n(a,r):r.has(a))}let i=new Set(t(e)),s=[];return this.undoStack.map(o=>o.change.cmd()).forEach(o=>{if(o.action==="add_entity"){let r=o.parentId+"/"+o.entityName;i.has(r)&&s.push(o)}n(o,i)&&s.push(o)}),s}clear(){this.undoStack=[],this.redoStack=[],this.updateUI(),this.showNotification("History cleared")}},C=new gn;window.changeManager=C;var Za=window.location.hostname==="localhost",bn=class{constructor(){return this.startupExecutionStart={onInspectorLoaded:!1,onSceneLoaded:!1},this.startupExecutionComplete={onInspectorLoaded:!1,onSceneLoaded:!1},this.scriptRunners=new Map,this.fps=30,this.updateInterval=null,this.isRunning=!1,this.contexts=[],this.setupKeyboardListeners(),this}recordContext(e){}async registerScriptRunner(e){this.scriptRunners.set(e.id,e),this.scriptRunners.size===1&&!this.isRunning&&this.start(),this.pruneOrphanedScriptRunners(),inspector.lifecyclePanel.render()}pruneOrphanedScriptRunners(){}unregisterScriptRunner(e){e&&(this.scriptRunners.delete(e.id),this.scriptRunners.size===0&&this.stop(),this.pruneOrphanedScriptRunners(),inspector.lifecyclePanel.render())}start(){if(this.isRunning)return;this.isRunning=!0;let e=1e3/this.fps;this.updateInterval=setInterval(()=>{this.triggerUpdate()},e),log("lifecycle",`LifecycleManager started with ${this.fps} FPS`),inspector.lifecyclePanel.render()}stop(){this.isRunning&&(this.isRunning=!1,this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),log("lifecycle","LifecycleManager stopped"),inspector.lifecyclePanel.render())}setFPS(e){this.fps=Math.max(1,Math.min(120,e)),this.isRunning&&(this.stop(),this.start())}triggerUpdate(){this.scriptRunners.forEach((e,t)=>{e._update()})}relayEventToScriptRunners(e,t){this.scriptRunners.forEach((n,i)=>{if(n.ctx[e]&&typeof n.ctx[e]=="function")try{n.ctx[e](t)}catch(s){err("lifecycle",`Error in ${e} for ${i}:`,s)}})}setupKeyboardListeners(){document.addEventListener("keydown",e=>{this.relayEventToScriptRunners("onKeyDown",e.key)}),document.addEventListener("keyup",e=>{this.relayEventToScriptRunners("onKeyUp",e.key)}),document.addEventListener("keypress",e=>{this.relayEventToScriptRunners("keyPress",e.key)})}keyDown(e){this.relayEventToScriptRunners("onKeyDown",e)}keyUp(e){this.relayEventToScriptRunners("onKeyUp",e)}keyPress(e){this.relayEventToScriptRunners("keyPress",e)}},_=new bn;window.lifecycle=_;window.LifecycleAPI={get manager(){return _},getAllScripts(){let c=[];return _.scriptRunners.forEach((e,t)=>{c.push({id:t,scriptFile:mb.properties?.file,entity:mb._entity?{eid:mb._entity.eid,name:mb._entity.name,active:mb._entity.active,layer:mb._entity.layer}:null,running:mb.ctx?._running,initialized:mb._initialized,owner:mb.properties?.owner,vars:mb.properties?.vars,instance:mb})}),c},getByEntity(c){return this.getAllScripts().filter(e=>e.entity?.name===c)},getByFile(c){return this.getAllScripts().filter(e=>e.scriptFile===c)},getRunning(){return this.getAllScripts().filter(c=>c.running)},getByOwner(c){return this.getAllScripts().filter(e=>e.owner===c)},getLifecycleMethods(c){let e=_.scriptRunners.get(c);return e?.ctx?{onStart:typeof e.ctx.onStart=="function",onUpdate:typeof e.ctx.onUpdate=="function",onDestroy:typeof e.ctx.onDestroy=="function",onLoaded:typeof e.ctx.onLoaded=="function",onVarChange:typeof e.ctx.onVarChange=="function",onKeyDown:typeof e.ctx.onKeyDown=="function",onKeyUp:typeof e.ctx.onKeyUp=="function"}:null},getCustomMethods(c){let e=_.scriptRunners.get(c);if(!e?.ctx)return[];let t=["vars","_running","onStart","onLoaded","onUpdate","onDestroy","onVarChange","onKeyDown","onKeyUp","keyDown","keyUp","keyPress","log","_entity","_scene","_BS","_component","default"];return Object.keys(e.ctx).filter(n=>!t.includes(n)&&typeof e.ctx[n]=="function")},callMethod(c,e,...t){let n=_.scriptRunners.get(c);if(!n?.ctx?.[e])throw new Error(`Method ${e} not found on script ${c}`);if(typeof n.ctx[e]!="function")throw new Error(`${e} is not a function`);return n.ctx[e](...t)},getStats(){let c=this.getAllScripts(),e=c.filter(i=>i.running),t={};c.forEach(i=>{t[i.scriptFile]=(t[i.scriptFile]||0)+1});let n={};return c.forEach(i=>{i.owner&&(n[i.owner]=(n[i.owner]||0)+1)}),{total:c.length,running:e.length,fps:_.fps,isRunning:_.isRunning,byFile:t,byOwner:n,files:Object.keys(t),owners:Object.keys(n)}},list(){let c=this.getAllScripts();return console.table(c.map(e=>({id:e.id,file:e.scriptFile,entity:e.entity?.name,running:e.running,owner:e.owner}))),c},getInfo(c){let e=_.scriptRunners.get(c);if(!e)return console.warn(`Script ${c} not found`),null;let t={id:c,scriptFile:e.properties?.file,entity:e._entity?{eid:e._entity.eid,name:e._entity.name,active:e._entity.active,layer:e._entity.layer}:null,running:e.ctx?._running,initialized:e._initialized,owner:e.properties?.owner,vars:e.properties?.vars,lifecycleMethods:this.getLifecycleMethods(c),customMethods:this.getCustomMethods(c),inventoryItem:e.inventoryItem?{name:e.inventoryItem.name,folder:e.inventoryItem.folder,author:e.inventoryItem.author,created:new Date(e.inventoryItem.created).toLocaleString(),startup:e.inventoryItem.startup}:null};return console.log("ScriptRunner Info:",t),t},setFPS(c){_.setFPS(c),console.log(`Update FPS set to ${_.fps}`)},start(){_.start()},stop(){_.stop()}};console.log("[LifecycleAPI] Exposed globally with monitoring for",_.scriptRunners.size,"ScriptRunner scripts");var wn={};xn(wn,{AddComponentChange:()=>st,AddEntityChange:()=>ot,Change:()=>P,CloneEntityChange:()=>lt,ComponentPropertyChange:()=>_t,CreateFolderChange:()=>pt,CreateScriptItemChange:()=>ft,DeleteItemChange:()=>X,EditScriptItemChange:()=>yt,EntityMoveChange:()=>K,EntityPropertyChange:()=>$t,LoadItemChange:()=>ct,LoadScriptChange:()=>Nt,MoveFolderChange:()=>Rt,MoveItemDirectoryChange:()=>mt,RemoveComponentChange:()=>Lt,RemoveEntityChange:()=>rt,RemoveFolderChange:()=>ut,RenameFolderChange:()=>ht,RenameItemChange:()=>dt,ReorderComponentChange:()=>Mt,SaveEntityItemChange:()=>O,ScriptRunnerVarChange:()=>at,SpacePropertyChange:()=>D});var P=class{constructor(){this.id=`change_${Math.floor(Math.random()*1e6)}`,this.timeout=5e3,this.voidChange=!1}void(e){this.voidChange=!0,e&&T(e)}async apply(){let e=document.getElementById(this.id);if(e){e.style.textDecoration="none",e.style.color="white";return}let t=this.cmd(),n="";Object.entries(t).forEach(([i,s])=>{typeof s=="object"&&(s=JSON.stringify(s)),i!=="options"&&(n+=s+" ")}),this.voidChange&&(e.style.textDecoration="line-through",e.style.color="gray"),U("command",this.id,n)}async undo(){if(this.voidChange)return;let e=document.getElementById(this.id);e&&(e.style.textDecoration="line-through",e.style.color="gray")}cmd(){return{action:"empty_change"}}},$t=class extends P{constructor(e,t,n,i){super(),this.timeout=500,this.entityId=e,this.property=t,this.newValue=n,this.options=i||{},this.oldValue=this.options.oldValue||this.getOldValue()}getOldValue(){return SM.getEntityById(this.entityId)[this.property]}async apply(){if(this.property==="name"){if(this.oldValue.endsWith("_js")){this.void("Cannot change the name of scripts");return}if(this.oldValue==="Scene"||this.newValue==="Scene"){this.void("Cannot assign/change the name of 'Scene'");return}if(this.newValue==="People"||this.oldValue==="People"){this.void("Cannot change the name of 'People'");return}let e=SM.getEntityById(this.entityId);if(!e){this.void("Entity not found");return}if(e.parentId==="People"){this.void("Cannot change the name of 'People'");return}let t=e.parentId+"/"+this.newValue;if(SM.getEntityById(t,!1)){this.void("Entity with that name already exists");return}}super.apply(),await this.change(this.newValue)}async undo(){await this.change(this.oldValue)}async change(e){(SM?.getEntityById(this.entityId)).Set(this.property,e)}getDescription(){return`Changed entity ${this.entityId} ${this.property} to ${this.newValue}`}getUndoDescription(){return`Changed entity ${this.entityId} ${this.property} to ${this.oldValue}`}cmd(){return{action:"set_entity_property",entityId:this.entityId,property:this.property,newValue:this.newValue,options:this.options}}},_t=class extends P{constructor(e,t,n,i){if(super(),this.timeout=500,this.componentId=e,this.property=t,this.newValue=N(n),this.options=i||{},this.component=SM.getEntityComponentById(e),!this.component){this.void(`Component ${e} not found`);return}this.oldValue=N(this.options.oldValue||this.getOldValue())}getOldValue(){return N(this.component.properties?.[this.property])}async apply(){super.apply(),await this.change(this.newValue)}async undo(){super.undo(),await this.change(this.oldValue)}async change(e){this.component&&await this.component.Set(this.property,e)}getDescription(){return`Changed ${this.component.type} ${this.property} to ${JSON.stringify(this.newValue)}`}getUndoDescription(){return`Changed ${this.component.type} ${this.property} to ${JSON.stringify(this.oldValue)}`}cmd(){return{action:"set_component_property",componentId:this.componentId,property:this.property,newValue:this.newValue,options:this.options}}},D=class extends P{constructor(e,t,n,i){super(),this.timeout=500,this.property=e,this.newValue=t,this.protected=n,this.options=i||{},this.oldValue=i.oldValue||this.getOldValue()}getOldValue(){return net.state.vars?.[this.property]||net.state[this.property]}async apply(){super.apply(),await this.change(this.newValue)}async undo(){super.undo(),await this.change(this.oldValue)}async change(e){e===void 0?await net.DelVar(this.property,this.protected):await net.SetVar(this.property,e,this.protected)}getDescription(){return`Change ${this.protected?"protected":"public"} property ${this.property} to ${this.newValue}`}getUndoDescription(){return`Change ${this.protected?"protected":"public"} property ${this.property} to ${this.oldValue}`}cmd(){return{action:"set_space_property",property:this.property,newValue:this.newValue,protected:this.protected,options:this.options}}},st=class extends P{constructor(e,t,n){super(),this.timeout=3e3,this.entityId=e,this.componentType=t,this.options=n||{},this.componentProperties=this.options.componentProperties||{},this.componentId=this.componentProperties.id||`${this.componentType}_${Math.floor(Math.random()*1e4)}`;let i=window.ChangeTypes?.validateComponent(t);if(i&&!i.valid){this.void(`Invalid component type: ${t}`);let s=i.message;throw i.suggestions&&i.suggestions.length>0&&(s+=`

Did you mean one of these?
`+i.suggestions.slice(0,5).map(o=>`  - ${o}`).join(`
`)),s+=`

Note: Component names like Box, Sphere, Material, etc.`,s+=`
Except colliders which don't (e.g., BoxCollider, SphereCollider)`,s+=`

Use ComponentRegistry.list() to see all available components.`,new Error(s)}}async apply(){super.apply();let e=SM.getEntityById(this.entityId);if(!e){this.void(`Entity not found => ${this.entityId}`);return}this.componentProperties.id=this.componentId,log("AddComponentChange","adding component =>",this.componentId,this.componentProperties),await net.db.ref(`space/${net.spaceId}/components/${this.componentId}`).set(this.componentProperties),await net.db.ref(`space/${net.spaceId}/${e.id}/__meta/components/${this.componentId}`).set(!0),inspector.propertiesPanel.render();let t=0;return await new Promise(i=>{let s=()=>{let o=SM.getEntityComponentById(this.componentId,!1);o!==void 0&&o._initialized?i(o):(t++,t>100?i(null):setTimeout(s,50))};s()})}async undo(){super.undo(),this.componentId&&log("TODO","implement undo for AddComponentChange")}getDescription(){return`Add ${this.componentType} component`}getUndoDescription(){return`Remove ${this.componentType} component`}cmd(){return{action:"add_component",entityId:this.entityId,componentType:this.componentType,componentProperties:this.componentProperties,options:this.options}}},Mt=class extends P{constructor(e,t,n,i){super(),this.timeout=1e3,this.entityId=e,this.fromIndex=t,this.toIndex=n,this.options=i||{}}async apply(){super.apply();let e=SM.getEntityById(this.entityId);if(!e||!e.components)return;let t=e.components;if(this.fromIndex<0||this.fromIndex>=t.length||this.toIndex<0||this.toIndex>=t.length){console.error("Invalid component indices for reorder");return}let n={entityId:this.entityId,fromIndex:this.fromIndex,toIndex:this.toIndex},s=`component_reordered\xB6${JSON.stringify(n)}`;net.sendOneShot(s)}async undo(){super.undo();let e={entityId:this.entityId,fromIndex:this.toIndex,toIndex:this.fromIndex},n=`component_reordered\xB6${JSON.stringify(e)}`;net.sendOneShot(n)}getDescription(){return`Reorder component from position ${this.fromIndex} to ${this.toIndex}`}getUndoDescription(){return`Reorder component from position ${this.toIndex} to ${this.fromIndex}`}cmd(){return{action:"reorder_component",entityId:this.entityId,fromIndex:this.fromIndex,toIndex:this.toIndex,options:this.options}}},Lt=class extends P{constructor(e,t,n){super(),this.timeout=3e3,this.componentId=t,this.entityId=e,this.options=n||{}}async apply(){super.apply();let e=SM.getEntityById(this.entityId),t=SM.getEntityComponentById(this.componentId);if(!e||!t){this.void(`Entity or component not found => ${this.entityId} or ${this.componentId}`);return}await e.RemoveComponent(t)}async undo(){super.undo(),log("TODO","implement undo for RemoveComponentChange")}getDescription(){return`Remove ${this.componentId||"unknown"} from ${this.entityId}`}getUndoDescription(){return`Add ${this.componentId||"unknown"} to ${this.entityId}`}cmd(){return{action:"remove_component",componentId:this.componentId,options:this.options}}},ot=class extends P{constructor(e,t,n){super(),this.timeout=1e3,this.parentId=e,this.entityName=t||`NewEntity_${Math.floor(Math.random()*1e5)}`,this.newEntityId=null,this.options=n||{}}async apply(){super.apply(),this.newEntityId=`${this.parentId}/${this.entityName}`;let e=SM.getEntityById(this.newEntityId,!1);return e?(T("Entity with that name already exists"),e):(await net.db.ref(`space/${net.spaceId}/${this.parentId}`).child(this.entityName).set({__meta:{active:!0,layer:0,localPosition:{x:0,y:0,z:0},localRotation:{x:0,y:0,z:0,w:1},localScale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:1},components:{},uuid:Math.floor(Math.random()*1e13)}}),await new Promise(s=>{let o=()=>{console.log("checking for: ",this.newEntityId);let r=SM.getEntityById(this.newEntityId,!1);r!==void 0&&r.initialized?(console.log("entity found: ",r),s(r)):(console.log("entity not found: ",this.newEntityId),setTimeout(o,50))};o()}))}async undo(){if(super.undo(),!this.newEntityId)return;let t=`entity_removed\xB6${this.newEntityId}`;net.sendOneShot(t)}getDescription(){return`New Entity: ${this.entityName} @ ${this.parentId}`}getUndoDescription(){return`Remove Entity: ${this.entityName} @ ${this.parentId}`}cmd(){return{action:"add_entity",parentId:this.parentId,entityName:this.entityName,options:this.options}}},rt=class extends P{constructor(e,t){super(),this.timeout=5e3,this.entityId=e,this.siblingIndex=null,this.options=t||{}}async apply(){super.apply();let e=SM.getEntityById(this.entityId);if(!e){this.void(`Entity not found => ${this.entityId}`);return}await e.Destroy()}async undo(){super.undo(),this.entityExport}getDescription(){return`Remove Entity: ${this.entityId}`}getUndoDescription(){return`Restore Entity: ${this.entityId}`}cmd(){return{action:"remove_entity",entityId:this.entityId,options:this.options}}},K=class extends P{constructor(e,t,n){super(),this.timeout=500,this.entityId=e,this.newParentId=t,this.options=n||{}}async apply(){if(log("move entity change","apply",this.entityId,this.newParentId),super.apply(),this.oldParentId===this.newParentId)return;if(this.oldParentId==="People"||this.newParentId==="People"||this.entityId==="People"){T("People entities cannot be moved");return}let e=SM.getEntityById(this.entityId),t=SM.getEntityById(this.newParentId);!e||!t||await e.SetParent(this.newParentId)}async undo(){super.undo();let e=SM.getEntityById(this.entityId);e&&await e.SetParent(this.oldParentId)}getDescription(){return"Move entity"}getUndoDescription(){return"Move entity"}cmd(){return{action:"move_entity",entityId:this.entityId,newParentId:this.newParentId,keepPosition:this.keepPosition,options:this.options}}},at=class extends P{constructor(e,t,n,i){super(),this.timeout=500,this.componentId=e,this.varName=t,this.newValue=N(n),this.options=i||{},this.scriptrunner=SM.getEntityComponentById(e),this.oldValue=N(i.oldValue||this.getOldValue())}getOldValue(){if(!(!this.scriptrunner||!this.scriptrunner.ctx?.vars))return N(this.scriptrunner.ctx.vars[this.varName])}async apply(){super.apply(),await this.change(this.newValue)}async undo(){super.undo(),await this.change(this.oldValue)}async change(e){log("scriptrunner","changing var =>",this.scriptrunner,this.varName,e),this.scriptrunner&&this.scriptrunner.ctx.vars&&(await this.scriptrunner.SetVar(this.varName,e.value),inspector?.propertiesPanel&&inspector.propertiesPanel.render(SM.selectedEntity))}getDescription(){return`Changed ScriptRunner var ${this.varName} to ${JSON.stringify(this.newValue)}`}getUndoDescription(){return`Changed ScriptRunner var ${this.varName} to ${JSON.stringify(this.oldValue)}`}cmd(){return{action:"set_script_runner_var",componentId:this.componentId,varName:this.varName,newValue:this.newValue,options:this.options}}},ct=class extends P{constructor(e,t,n,i){super(),this.timeout=1e7,this.itemName=e,this.parentId=t||"Scene",this.options=i||{},this.entityId=null,this.itemData=n}async apply(){super.apply();let e="NewEntity_"+Math.floor(Math.random()*99999);if(!this.itemData){let s=inventory.items[this.itemName];if(!s)return err("inventory","No item found =>",this.itemName),null;if(s.itemType!=="entity")return err("inventory","Item is not a entity =>",this.itemName),null;if(!s.data.Entity)return err("inventory","No entity data found =>",this.itemName),null;let o=JSON.parse(JSON.stringify(s.data)),r=Object.keys(o.Entity)[0];e=this.options.name?this.options.name:`${this.itemName}_${Math.floor(Math.random()*99999)}`;let a=o.Entity[r];delete o.Entity[r];let l={},d=p=>{if(p.__meta.uuid=Math.floor(Math.random()*1e13),p.__meta.components){let h={};Object.keys(p.__meta.components).forEach(u=>{let y=`${u.split("_")[0]}_${Math.floor(Math.random()*99999)}`;l[y]=o.Components[u],h[y]=!0}),p.__meta.components=h}Object.keys(p).forEach(h=>{if(h==="__meta")return;let u=p[h];d(u)})};d(a),o.Entity[e]=a,o.Components=l,log("inventory","[ITEM DATA] =>",o),s.data.Components&&await net.db.ref(`space/${net.spaceId}/components`).update(o.Components),await net.db.ref(`space/${net.spaceId}/${this.parentId}`).update(o.Entity),this.itemData=o}log("loadItem","loading entity =>",this.itemData),this.entityId=`${this.parentId}/${e}`;let t=()=>{let s=SM.getEntityById(this.entityId,!1);if(!s)return log("loadItem","entity not found =>",this.entityId),!1;let o=!0;return Object.keys(this.itemData.Components).forEach(r=>{let a=SM.getEntityComponentById(r,!1);a?a._entity.components.includes(a)||(log("loadItem",`${a.id} not a component of ${s.id} yet`),o=!1):(log("loadItem","component not found =>",r),o=!1)}),o},n=0;return await new Promise(s=>{let o=()=>{let r=t();if(n++,log("loadItem","checking for entity =>",this.entityId,r),n>250){err("loadItem","Entity could not be loaded/found =>",this.entityId),s(null);return}r?s(SM.getEntityById(this.entityId)):setTimeout(o,50)};o()})}async undo(){if(super.undo(),!this.entityId)return;let e=`entity_removed\xB6${this.entityId}`;net.sendOneShot(e)}getDescription(){return`Load item ${this.itemName} to ${this.parentId}`}getUndoDescription(){return`Remove item ${this.itemName} from ${this.parentId}`}cmd(){return{action:"load_item",itemName:this.itemName,parentId:this.parentId,itemData:this.itemData,options:this.options}}},Nt=class extends P{constructor(e,t){super(),this.timeout=1e7,this.scriptName=e,this.options=t||{},this.itemData=null,this.entityId=null}async apply(){super.apply();let e=this.scriptName.replaceAll(".","_"),t=SM.getEntityByName(e);if(t)return err("loadScript","Script already exists in scene =>",t.id),this.void("Script already exists in scene => "+t.id),t;let n="ScriptAsset_"+Math.floor(Math.random()*99999);this.itemData={Entity:{[e]:{__meta:{active:!0,components:{[n]:!0},layer:0,localPosition:{x:0,y:0,z:0},localRotation:{w:1,x:0,y:0,z:0},localScale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},uuid:Math.floor(Math.random()*1e13)}}},Components:{[n]:{name:this.scriptName,author:inventory.items[this.scriptName]?.author||"Unknown",data:inventory.items[this.scriptName].data,vars:inventory.items[this.scriptName].vars||{}}}},await net.db.ref(`space/${net.spaceId}/components`).update(this.itemData.Components),await net.db.ref(`space/${net.spaceId}/Scene`).update(this.itemData.Entity),this.entityId=`Scene/${e}`;let i=()=>{let r=SM.getEntityById(this.entityId,!1);if(!r)return log("loadItem","entity not found =>",this.entityId),!1;let a=!0;return Object.keys(this.itemData.Components).forEach(l=>{let d=SM.getEntityComponentById(l,!1);d?d._entity.components.includes(d)||(log("loadItem",`${d.id} not a component of ${r.id} yet`),a=!1):(log("loadItem","component not found =>",l),a=!1)}),a},s=0;return await new Promise(r=>{let a=()=>{let l=i();if(s++,log("loadItem","checking for entity =>",this.entityId,l),s>250){err("loadItem","Entity could not be loaded/found =>",this.entityId),r(null);return}l?r(SM.getEntityById(this.entityId)):setTimeout(a,50)};a()})}async undo(){super.undo(),log("todo","undo load script")}getDescription(){return`Load script ${this.scriptName}`}getUndoDescription(){return`Remove script ${this.scriptName}`}cmd(){return{action:"load_script",scriptName:this.scriptName,options:this.options}}},lt=class extends P{constructor(e,t){if(super(),this.timeout=1e4,this.sourceEntity=SM.getEntityById(e),!this.sourceEntity){console.error(`Source entity ${e} not found`);return}this.sourceEntityId=e,this.cloneName=`${this.sourceEntity.name}_${Math.floor(Math.random()*1e5)}`,this.clonedEntityId=`${this.sourceEntity.parentId}/${this.cloneName}`,this.options=t||{}}async apply(){if(super.apply(),!this.sourceEntity)return this.void("Source entity not found"),null;let e=await this.sourceEntity.export();if(!e||!e.Entity)return this.void("Failed to export source entity"),null;let t=Object.keys(e.Entity)[0],n=e.Entity[t],i={},s=d=>{if(d.__meta.uuid=Math.floor(Math.random()*1e13),d.__meta.components){let p={};Object.keys(d.__meta.components).forEach(h=>{let u=`${h.split("_")[0]}_${Math.floor(Math.random()*99999)}`;i[u]=e.Components[h],p[u]=!0}),d.__meta.components=p}Object.keys(d).forEach(p=>{if(p==="__meta")return;let h=d[p];h&&typeof h=="object"&&h.__meta&&s(h)})};s(n);let o={Entity:{[this.cloneName]:n},Components:i};this.itemData=o,log("CloneEntityChange","cloning entity =>",this.sourceEntityId,"to",this.clonedEntityId),Object.keys(o.Components).length>0&&await net.db.ref(`space/${net.spaceId}/components`).update(o.Components),await net.db.ref(`space/${net.spaceId}/${this.sourceEntity.parentId}`).update(o.Entity);let r=0,a=()=>{let d=SM.getEntityById(this.clonedEntityId,!1);if(!d)return!1;let p=!0;return Object.keys(this.itemData.Components).forEach(h=>{let u=SM.getEntityComponentById(h,!1);u&&u._entity.components.includes(u)||(p=!1)}),p&&d._finished_loading};return await new Promise(d=>{let p=()=>{let h=a();if(r++,r>200){err("CloneEntityChange","Entity could not be loaded/found =>",this.clonedEntityId),d(null);return}h?d(SM.getEntityById(this.clonedEntityId)):setTimeout(p,50)};p()})}async undo(){if(super.undo(),!this.clonedEntityId)return;let e=`entity_removed\xB6${this.clonedEntityId}`;net.sendOneShot(e)}getDescription(){return`Clone entity ${this.sourceEntity.name}`}getUndoDescription(){return"Remove cloned entity"}cmd(){return{action:"clone_entity",entityId:this.sourceEntityId,options:this.options}}},O=class c extends P{constructor(e,t,n,i){if(super(),this.timeout=1e4,this.entityId=e,this.entityId.length===0){T("No entity selected");return}this.entity=SM.getEntityById(e),this.itemName=t||this.entity.name,this.folder=n||inventory.currentFolder,this.options=i||{},this.itemName=this.itemName.trim()}async finalizeAddItem(){let e=await this.entity.export(),t=Date.now(),n={author:SM.scene?.localUser?.name||"Unknown",name:this.itemName,created:t,last_used:t,itemType:"entity",icon:"\u{1F4E6}",description:"",data:e,folder:this.folder},i=`inventory_${this.itemName}`;localStorage.setItem(i,JSON.stringify(n)),log("inventory","saved item =>",n),await inventory.firebase.syncToFirebase(n);let s=this.folder?this.folder:"/";T(`Item "${this.itemName}" saved to ${s}`),inventory.reload()}async apply(){if(this.entityId.length===0)return;super.apply();let e=Object.keys(inventory.items);if(!this.itemName||this.itemName.trim()===""){T("Item not added - no name provided.");return}return this.options.source==="ui"?(e.includes(this.itemName)?inventory.ui.showWarningConfirm("Overwrite Existing Item",`WARNING: An item named "${this.itemName}" already exists.<br><br><strong style="color: #ff6b6b;">Clicking "Confirm" will DELETE the existing saved entity "${this.itemName}" and replace it with the new one.</strong><br><br>This action cannot be undone. Are you sure you want to overwrite it?`,async()=>{await new X(this.itemName,{source:"ui"}).apply(),T(`Overwriting existing item "${this.itemName}"`),new c(this.entityId,this.itemName,this.folder,this.options).apply()},()=>{T('canceled save"')}):this.finalizeAddItem().then(()=>{}),!0):(await this.finalizeAddItem(),!0)}async undo(){super.undo(),T("[ NO UNDO FOR SAVE ITEM ]")}getDescription(){return`Save item ${this.itemName} to ${this.folder}`}getUndoDescription(){return`Remove item ${this.itemName} from ${this.folder}`}cmd(){return{action:"save_item",entityId:this.entityId,itemName:this.itemName,folder:this.folder,options:this.options}}},dt=class extends P{constructor(e,t,n){super(),this.timeout=1e3,this.itemName=e,this.newName=t,this.options=n||{}}async finalizeRename(){let e=inventory.items[this.itemName];if(!e)return!1;e.itemType==="script"&&!this.newName.endsWith(".js")&&(this.newName=this.newName+".js");let t=`inventory_${this.itemName}`;localStorage.removeItem(t),delete inventory.items[this.itemName];let n=e.folder;if(n&&n.remote){let s=inventory.firebase.sanitizeFirebasePath(SM.scene?.localUser?.name||"default"),o=inventory.firebase.sanitizeFirebasePath(n),r=inventory.firebase.sanitizeFirebasePath(this.itemName),a=`inventory/${s}/${o}/${r}`;await net.deleteData(a)}e.name=this.newName,e.last_used=Date.now(),e.folder=inventory.currentFolder;let i=`inventory_${this.newName}`;if(localStorage.setItem(i,JSON.stringify(e)),inventory.items[this.newName]=e,await inventory.firebase.syncToFirebase(e),T(`Item "${this.itemName}" renamed to "${this.newName}"`),inventory.reload(),inventory.selectItem(this.newName),e.itemType==="script"&&window.inspector&&window.inspector.scriptEditors){for(let[s,o]of window.inspector.scriptEditors)if(o.currentScript.name===this.itemName){if(o.currentScript.name=this.newName,o.currentScript.data=e.data,o.navElement){let a=o.navElement.querySelector(".close-tab-btn");o.navElement.innerHTML=`
                            <span class="nav-icon">\u{1F4DC}</span>
                            ${this.newName}
                            <span class="close-tab-btn" data-close-script="${o.pageId}">\xD7</span>
                        `;let l=o.navElement.querySelector(".close-tab-btn");l&&o.closeBtnHandler&&l.addEventListener("mousedown",o.closeBtnHandler)}let r=document.querySelector(`#${o.pageId}-page .editor-title h2`);r&&(r.textContent=`Editing: ${this.newName}`),window.inspector.scriptEditors.delete(s),window.inspector.scriptEditors.set(this.newName,o),localStorage.setItem("openedEditors",Array.from(window.inspector.scriptEditors.keys()).join(","));break}}return!0}async apply(){return super.apply(),this.newName===this.itemName?!0:inventory.items[this.newName]?!1:(this.options.source==="ui"?inventory.ui.showWarningConfirm("Renaming is Dangerous","WARNING: Renaming an item can break existing references in scripts or other entities that depend on this name.<br><br>This action cannot be undone. Are you sure you want to continue?",async()=>{Object.keys(inventory.items).includes(this.newName)?inventory.ui.showWarningConfirm("Overwrite Existing Item",`WARNING: An item named "${this.newName}" already exists.<br><br><strong style="color: #ff6b6b;">Clicking "Confirm" will DELETE the existing saved entity "${this.newName}" and replace it with the new one.</strong><br><br>This action cannot be undone. Are you sure you want to overwrite it?`,async()=>{this.finalizeRename()},()=>{T('canceled rename"')}):this.finalizeRename()},()=>{T('canceled rename"')}):this.finalizeRename(),!0)}async undo(){super.undo(),log("command","[ NO UNDO FOR RENAME ITEM ]")}getDescription(){return`Rename item ${this.itemName} to ${this.newName}`}getUndoDescription(){return`Rename item ${this.newName} to ${this.itemName}`}cmd(){return{action:"rename_item",itemName:this.itemName,newName:this.newName,options:this.options}}},X=class extends P{constructor(e,t){super(),this.timeout=1e3,this.itemName=e,this.options=t||{},this.itemData=inventory.items[this.itemName]}async apply(){super.apply();let e=`inventory_${this.itemName}`;return localStorage.removeItem(e),delete inventory.items[this.itemName],await this.syncDeleteToFirebase(),!0}async syncDeleteToFirebase(){if(!(!this.itemData||!this.isItemInRemoteLocation())){if(!window.net){console.warn("Networking not initialized, skipping sync");return}try{let n=`inventory/${inventory.firebase.sanitizeFirebasePath(SM.scene?.localUser?.name||"default")}`;if(this.itemData.folder){let s=inventory.firebase.sanitizeFirebasePath(this.itemData.folder);n+=`/${s}`}let i=inventory.firebase.sanitizeFirebasePath(this.itemName);n+=`/${i}`,await net.deleteData(n),log("inventory","Item deleted from Firebase:",n)}catch(t){err("inventory","Failed to delete item from Firebase:",t)}}}isItemInRemoteLocation(){if(!this.itemData)return!1;if(this.itemData.folder){let e=inventory.folders[this.itemData.folder];return e&&e.remote===!0}}async undo(){super.undo(),log("command","[ NO UNDO FOR DELETE ITEM ]")}getDescription(){return`Delete item ${this.itemName}`}getUndoDescription(){return`Restore item ${this.itemName}`}cmd(){return{action:"delete_item",itemName:this.itemName,options:this.options}}},pt=class extends P{constructor(e,t,n){super(),this.timeout=500,this.folderName=e,this.parentFolderName=t||inventory.currentFolder,this.options=n||{}}async apply(){super.apply();let e=this.folderName.trim();if(inventory.folders[e])return T(`A folder named "${e}" already exists.`),!1;let t=inventory.folders[this.parentFolderName],n="";t&&t.path&&(n=t.path+"/");let i=Date.now(),s=`${n}${e}`,o={name:e,created:i,last_used:i,parent:this.parentFolderName,path:s,itemType:"folder",icon:"\u{1F4C2}",remote:!1,public:!1},r=`inventory_folder_${s}`;return localStorage.setItem(r,JSON.stringify(o)),inventory.folders[s]=o,!0}async undo(){super.undo(),log("command","[ NO UNDO FOR CREATE FOLDER ]")}getDescription(){return`Create folder ${this.folderName} in ${this.parentFolder}`}getUndoDescription(){return`Remove folder ${this.folderName} from ${this.parentFolder}`}cmd(){return{action:"create_folder",folderName:this.folderName,parentFolder:this.parentFolder,options:this.options}}},ht=class extends P{constructor(e,t,n){super(),this.timeout=500,this.originalName=e,this.newName=t,this.options=n||{}}async apply(){super.apply(),inventory._renameFolder(this.originalName,this.newName)}async undo(){super.undo(),inventory._renameFolder(this.newName,this.originalName)}getDescription(){return`Rename folder ${this.originalName} to ${this.newName}`}getUndoDescription(){return`Rename folder ${this.newName} to ${this.originalName}`}cmd(){return{action:"rename_folder",originalName:this.originalName,newName:this.newName,options:this.options}}},Rt=class extends P{},ut=class c extends P{constructor(e,t){super(),this.timeout=500,this.folderPath=e,this.options=t||{}}async apply(){super.apply(),Object.entries(inventory.items).forEach(([t,n])=>{if(n.folder===this.folderPath){let i=`inventory_${t}`;localStorage.removeItem(i),delete inventory.items[t]}}),Object.entries(inventory.folders).forEach(([t,n])=>{if(n.parent===this.folderPath){let i=`inventory_folder_${t}`;localStorage.removeItem(i),new c(t,this.options).apply()}});let e=`inventory_folder_${this.folderPath}`;localStorage.removeItem(e),delete inventory.folders[this.folderPath]}async undo(){super.undo(),log("command","[ NO UNDO FOR REMOVE FOLDER ]")}getDescription(){return`Remove folder ${this.folderPath}`}getUndoDescription(){return`Restore folder ${this.folderPath}`}cmd(){return{action:"remove_folder",folderPath:this.folderPath,options:this.options}}},mt=class extends P{constructor(e,t,n){super(),this.timeout=500,this.itemName=e,this.folderName=t,this.options=n||{}}async apply(){super.apply();let e=inventory.items[this.itemName];if(!e||e.folder===this.folderName)return!1;e.folder=this.folderName||null;let t=`inventory_${this.itemName}`;return localStorage.setItem(t,JSON.stringify(e)),!0}async undo(){super.undo(),log("command","[ NO UNDO FOR MOVE ITEM DIRECTORY ]")}getDescription(){return`Move item ${this.itemName} to folder ${this.folderName}`}getUndoDescription(){return`Move item ${this.itemName} to folder ${this.folderName}`}cmd(){return{action:"move_item_directory",itemName:this.itemName,folderName:this.folderName,options:this.options}}},ft=class extends P{constructor(e,t){super(),this.timeout=500,this.scriptName=e,this.options=t||{},this.fileType=t.fileType||"script"}async apply(){super.apply();let e,t,n;this.fileType==="markdown"?(e=`# ${this.scriptName.replace(".md","")}

## Description
Enter your documentation here...

## Usage
Describe how to use this...

## Notes
Additional notes...`,t="markdown",n="\u{1F4DD}"):(e=`this.default = {}

Object.entries(this.default).forEach(([key, val])=>{
    if(!this.vars[key]) this.vars[key] = val
})


this.onStart = ()=>{
    console.log("onStart")
}

this.onUpdate = ()=>{
    console.log("onUpdate")
}

this.onDestroy = ()=>{
    console.log("onDestroy")
}
`,t="script",n="\u{1F4DC}");let i=Date.now(),s={author:SM.scene?.localUser?.name||"Unknown",name:this.scriptName,created:i,last_used:i,itemType:t,icon:n,description:"",data:e,startup:!1,startupSequence:"onSceneLoaded",active:!1,global:!1,autoUpdate:!1};inventory.currentFolder&&(s.folder=inventory.currentFolder);let o=`inventory_${this.scriptName}`;return localStorage.setItem(o,JSON.stringify(s)),inventory.items[this.scriptName]=s,!0}async undo(){super.undo(),log("command","[ NO UNDO FOR SCRIPTS ]")}getDescription(){return`Create ${this.fileType} ${this.scriptName}`}getUndoDescription(){return`Delete ${this.fileType} ${this.scriptName}`}cmd(){return{action:"create_script",scriptName:this.scriptName,options:this.options}}},yt=class extends P{constructor(e,t,n){super(),this.timeout=1e3,this.scriptName=e,this.scriptContent=t,this.options=n||{}}async apply(){if(super.apply(),inventory){let e=inventory.items[this.scriptName];e.data=this.scriptContent,e.last_used=Date.now(),inventory.syncItem(this.scriptName,e)}}async undo(){super.undo(),log("command","[ NO UNDO FOR EDIT SCRIPT ]")}getDescription(){return`Edit script ${this.scriptName}`}getUndoDescription(){return`Edit script ${this.scriptName}`}cmd(){return{action:"edit_script",scriptName:this.scriptName,scriptContent:this.scriptContent,options:this.options}}},_n="commandHistory",si=100,vn=class{constructor(){this.history=this.loadHistory(),this.currentIndex=this.history.length,this.tempCommand=""}loadHistory(){try{let e=localStorage.getItem(_n);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load command history:",e),[]}}saveHistory(){try{localStorage.setItem(_n,JSON.stringify(this.history))}catch(e){console.error("Failed to save command history:",e)}}add(e){if(!e||e.trim()==="")return;let t=this.history.indexOf(e);t>-1&&this.history.splice(t,1),this.history.push(e),this.history.length>si&&this.history.shift(),this.currentIndex=this.history.length,this.tempCommand="",this.saveHistory()}navigateUp(e){return this.history.length===0?e:(this.currentIndex===this.history.length&&(this.tempCommand=e),this.currentIndex>0?(this.currentIndex--,this.history[this.currentIndex]):this.history[0])}navigateDown(e){return this.history.length===0?e:this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):this.currentIndex===this.history.length-1?(this.currentIndex=this.history.length,this.tempCommand):e}reset(){this.currentIndex=this.history.length,this.tempCommand=""}},Tt=new vn,A=document.getElementById("commandShellInput");A.addEventListener("keydown",c=>{if(c.key==="Enter"){let e=A.value;e.trim()&&(Tt.add(e),window.RunCommand(e)),A.value="",Tt.reset()}else c.key==="ArrowUp"?(c.preventDefault(),A.value=Tt.navigateUp(A.value),A.setSelectionRange(A.value.length,A.value.length)):c.key==="ArrowDown"&&(c.preventDefault(),A.value=Tt.navigateDown(A.value),A.setSelectionRange(A.value.length,A.value.length))});window.SetEntityProp=async(c,e,t,n)=>await new $t(c,e,t,n).apply();window.SetComponentProp=async(c,e,t,n)=>await new _t(c,e,t,n).apply();window.SetSpaceProp=async(c,e,t,n)=>await new D(c,e,t,n).apply();window.AddComponent=async(c,e,t)=>await new st(c,e,t).apply();window.RemoveComponent=async(c,e,t)=>await new Lt(c,e,t).apply();window.ReorderComponent=async(c,e,t,n)=>await new Mt(c,e,t,n).apply();window.AddEntity=async(c,e,t)=>await new ot(c,e,t).apply();window.RemoveEntity=async(c,e)=>await new rt(c,e).apply();window.MoveEntity=async(c,e,t)=>await new K(c,e,t).apply();window.RenameItem=async(c,e,t)=>await new dt(c,e,t).apply();window.SetScriptRunnerVar=async(c,e,t,n)=>await new at(c,e,t,n).apply();window.SetItem=c=>{let e="inventory_"+c.name;localStorage.setItem(e,JSON.stringify(c)),inventory.items[c.name]=c};window.LoadItem=async(c,e,t)=>await new ct(c,e,null,t).apply();window.CloneEntity=async(c,e)=>await new lt(c,e).apply();window.SaveEntityItem=async(c,e,t,n)=>await new O(c,e,t,n).apply();window.DeleteItem=async(c,e)=>await new X(c,e).apply();window.CreateFolder=async(c,e,t)=>await new pt(c,e,t).apply();window.RemoveFolder=async(c,e)=>await new ut(c,e).apply();window.MoveItemDirectory=async(c,e,t)=>await new mt(c,e,t).apply();window.CreateScript=async(c,e)=>await new ft(c,e).apply();window.EditScript=async(c,e,t)=>await new yt(c,e,t).apply();window.RenameFolder=async(c,e,t)=>await new ht(c,e,t).apply();window.MoveFolder=async(c,e,t)=>await new Rt(c,e,t).apply();window.LoadScript=async(c,e)=>await new Nt(c,e).apply();window.ChangeTypes={actions:{Change:P,SetEntityProp,SetComponentProp,SetSpaceProp,AddComponent,ReorderComponent,RemoveComponent,AddEntity,RemoveEntity,MoveEntity,SetScriptRunnerVar,LoadItem,CloneEntity,SaveEntityItem,RenameItem,DeleteItem,CreateFolder,RenameFolder,MoveFolder,RemoveFolder,MoveItemDirectory,CreateScript,EditScript},metadata:{Change:{category:"base",description:"Base class for all changes",parameters:[],undoable:!0},SetEntityProp:{category:"entity",description:"Change a property of an entity (name, active, layer, etc.)",parameters:["entityId","property","newValue","options"],undoable:!0,command:"set_entity_property"},SetComponentProp:{category:"component",description:"Change a property of a component",parameters:["componentId","property","newValue","options"],undoable:!0,command:"set_component_property"},SetSpaceProp:{category:"space",description:"Change a public or protected space property",parameters:["property","newValue","protect","options"],undoable:!0,command:"set_space_property"},AddComponent:{category:"component",description:"Add a component to an entity",parameters:["entityId","componentType","options"],undoable:!0,command:"add_component"},ReorderComponent:{category:"component",description:"Reorder a component in the entity component list",parameters:["entityId","fromIndex","toIndex","options"],undoable:!0,command:"reorder_component"},RemoveComponent:{category:"component",description:"Remove a component from an entity",parameters:["componentId","options"],undoable:!0,command:"remove_component"},AddEntity:{category:"entity",description:"Add a new entity as child of parent",parameters:["parentId","entityName","options"],undoable:!0,command:"add_entity"},RemoveEntity:{category:"entity",description:"Remove an entity and its children",parameters:["entityId","options"],undoable:!0,command:"remove_entity"},MoveEntity:{category:"entity",description:"Move entity to new parent",parameters:["entityId","newParentId","options"],undoable:!0,command:"move_entity"},SetScriptRunnerVar:{category:"script",description:"Change a ScriptRunner variable value",parameters:["componentId","varName","newValue","options"],undoable:!0,command:"set_script_runner_var"},LoadItem:{category:"inventory",description:"Load item from inventory into scene",parameters:["itemName","parentId","itemData","options"],undoable:!0,command:"load_item"},CloneEntity:{category:"entity",description:"Clone an entity and its children",parameters:["entityId","options"],undoable:!0,command:"clone_entity"},SaveEntityItem:{category:"inventory",description:"Save entity as inventory item",parameters:["entityId","itemName","folder","options"],undoable:!1,command:"save_item"},RenameItem:{category:"inventory",description:"Rename an inventory item",parameters:["itemName","newName","options"],undoable:!1,command:"rename_item"},DeleteItem:{category:"inventory",description:"Delete item from inventory",parameters:["itemName","options"],undoable:!1,command:"delete_item"},CreateFolder:{category:"inventory",description:"Create inventory folder",parameters:["folderName","parentFolderName","options"],undoable:!1,command:"create_folder"},RenameFolder:{category:"inventory",description:"Rename inventory folder",parameters:["originalName","newName","options"],undoable:!0,command:"rename_folder"},MoveFolder:{category:"inventory",description:"Move folder to new parent (NOT IMPLEMENTED)",parameters:[],undoable:!1,command:null},RemoveFolder:{category:"inventory",description:"Remove inventory folder and its contents",parameters:["folderPath","options"],undoable:!1,command:"remove_folder"},MoveItemDirectory:{category:"inventory",description:"Move item to different folder",parameters:["itemName","folderName","options"],undoable:!1,command:"move_item_directory"},CreateScriptItem:{category:"inventory",description:"Create new script or markdown item",parameters:["scriptName","options"],undoable:!1,command:"create_script"},EditScriptItem:{category:"inventory",description:"Edit script content",parameters:["scriptName","scriptContent","options"],undoable:!1,command:"edit_script"}},getInfo(c){return this.metadata[c]||null},getByCategory(c){return Object.entries(this.metadata).filter(([e,t])=>t.category===c).map(([e,t])=>e)},getCategories(){return[...new Set(Object.values(this.metadata).map(c=>c.category))]},getUndoable(){return Object.entries(this.metadata).filter(([c,e])=>e.undoable===!0).map(([c,e])=>c)},list(){return Object.entries(this.metadata).map(([c,e])=>({name:c,category:e.category,description:e.description,undoable:e.undoable,command:e.command||null}))},validateComponent(c){if(!window.ComponentRegistry)return{valid:!1,message:"ComponentRegistry not available",suggestions:[]};if(window.ComponentRegistry.typeMap[c])return{valid:!0,message:`Component "${c}" is valid`,suggestions:[]};let t=this.suggestComponent(c);return{valid:!1,message:`Component "${c}" not found. Did you mean one of these?`,suggestions:t.slice(0,5)}},suggestComponent(c){if(!window.ComponentRegistry)return[];let e=Object.keys(window.ComponentRegistry.typeMap),t=c.toLowerCase();return e.map(i=>{let s=i.toLowerCase(),o=0;s===t&&(o+=1e3),s.startsWith(t)&&(o+=100),s.includes(t)&&(o+=50);let r=[...t].filter(a=>s.includes(a)).length;return o+=r*10,o-=Math.abs(s.length-t.length)*2,{name:i,score:o}}).filter(i=>i.score>0).sort((i,s)=>s.score-i.score).map(i=>i.name)}};var Ft=class{constructor(){this.treeContainer=document.getElementById("hierarchyTree"),this.searchInput=document.getElementById("searchInput"),this.addChildBtn=document.getElementById("addChildEntityBtn"),this.cloneBtn=document.getElementById("cloneEntityBtn"),this.deleteBtn=document.getElementById("deleteEntityBtn"),this.saveBtn=document.getElementById("saveEntityBtn"),this.searchTerm="",this.draggedEntityId=null,this.dropTargetId=null,this.setupEventListeners()}setupEventListeners(){this.searchInput.addEventListener("input",e=>{this.searchTerm=e.target.value.toLowerCase(),this.render()}),document.addEventListener("sceneUpdated",()=>{this.render()}),this.treeContainer.addEventListener("dragover",e=>{!e.target.closest(".tree-node")&&this.draggedEntityId&&(e.preventDefault(),e.dataTransfer.dropEffect="move",this.treeContainer.classList.add("drag-over-root"))}),this.treeContainer.addEventListener("dragleave",e=>{e.target===this.treeContainer&&this.treeContainer.classList.remove("drag-over-root")}),this.treeContainer.addEventListener("drop",e=>{!e.target.closest(".tree-node")&&this.draggedEntityId&&(e.preventDefault(),this.treeContainer.classList.remove("drag-over-root"),this.handleDropToRoot())}),this.addChildBtn.addEventListener("mousedown",async()=>{let e=SM.selectedEntity,t=new ot(e,null,{source:"ui"});C.applyChange(t)}),this.cloneBtn.addEventListener("mousedown",async()=>{let e=new lt(SM.selectedEntity,{source:"ui"});C.applyChange(e),SM.selectEntity(e.entityId)}),this.deleteBtn.addEventListener("mousedown",async()=>{if(!SM.selectedEntity){showNotification("Please select a entity to delete");return}let e=SM.getEntityById(SM.selectedEntity);if(e&&await M(`Are you sure you want to delete "${e.name}" and all its children?`)){log("scene","deleting entity =>",SM.selectedEntity);let t=new rt(SM.selectedEntity,{source:"ui"});C.applyChange(t),SM.selectEntity("Scene")}}),this.saveBtn.addEventListener("mousedown",async()=>{if(!SM.selectedEntity){showNotification("Please select a entity to save");return}let e=new O(SM.selectedEntity,null,null,{source:"ui"});C.applyChange(e)})}render(){if(!this.treeContainer)return;if(this.treeContainer.innerHTML="",SM.entityData.entities.length===0){this.treeContainer.innerHTML='<div class="loading-state">No scene data available</div>';return}SM.entityData.entities.forEach(t=>{let n=this.renderEntityNode(t,this.searchTerm,0);n&&this.treeContainer.appendChild(n)})}renderEntityNode(e,t,n){if(t&&!this.matchesSearch(e,t))return null;let i=SM.expandedNodes.has(e.id),s=e.children&&e.children.length>0,o=SM.selectedEntity===e.id,r=document.createElement("div");r.className="tree-node-container",r.dataset.entityId=e.id;let a=document.createElement("div");a.className="tree-node",o&&a.classList.add("selected"),e.active||a.classList.add("inactive"),e.persistent||a.classList.add("non-persistent"),a.style.paddingLeft=`${n*20+8}px`,a.draggable=!0,a.dataset.entityId=e.id,a.addEventListener("dragstart",u=>this.handleDragStart(u,e)),a.addEventListener("dragend",u=>this.handleDragEnd(u)),a.addEventListener("dragover",u=>this.handleDragOver(u)),a.addEventListener("drop",u=>this.handleDrop(u)),a.addEventListener("dragenter",u=>this.handleDragEnter(u)),a.addEventListener("dragleave",u=>this.handleDragLeave(u));let l=document.createElement("span");l.className="tree-toggle",s?(l.classList.add("has-children"),l.textContent=i?"\u25BC":"\u25B6",l.onmousedown=u=>{u.stopPropagation(),this.toggleNode(e.id)}):(l.classList.add("empty"),l.textContent="\u2022");let d=document.createElement("div");d.className="node-content";let p=document.createElement("span");p.className="node-icon";let h=document.createElement("span");if(h.className="node-name",h.textContent=e.name,e.name.endsWith("_js")&&(h.style.color="#ff9500"),d.appendChild(p),d.appendChild(h),a.appendChild(l),a.appendChild(d),a.onmousedown=()=>SM.selectEntity(e.id),r.appendChild(a),s&&i){let u=document.createElement("div");u.className="tree-children",e.children.forEach(y=>{let m=this.renderEntityNode(y,t,n+1);m&&u.appendChild(m)}),r.appendChild(u)}return r}matchesSearch(e,t){if(!t||e.name.toLowerCase().includes(t))return!0;if(e.components){for(let n of e.components)if(n.type.toLowerCase().includes(t))return!0}if(e.children){for(let n of e.children)if(this.matchesSearch(n,t))return!0}return!1}toggleNode(e){SM.toggleNodeExpansion(e),this.render()}showError(e){this.treeContainer.innerHTML=`
                <div class="empty-state">
                    <h3>Error</h3>
                    <p>${e}</p>
                </div>
            `}handleDragStart(e,t){this.draggedEntityId=t.id,e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",t.id),e.target.classList.add("dragging"),e.dataTransfer.setDragImage(e.target,0,0)}handleDragEnd(e){e.target.classList.remove("dragging"),this.draggedEntityId=null,document.querySelectorAll(".drag-over").forEach(t=>{t.classList.remove("drag-over")}),this.treeContainer.classList.remove("drag-over-root")}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}handleDragEnter(e){if(!this.draggedEntityId)return;let t=e.target.closest(".tree-node");if(!t)return;let n=t.dataset.entityId;n!==this.draggedEntityId&&(this.isDescendant(this.draggedEntityId,n)||t.classList.add("drag-over"))}handleDragLeave(e){let t=e.target.closest(".tree-node");t&&t.classList.remove("drag-over")}async handleDrop(e){e.preventDefault(),e.stopPropagation();let t=e.target.closest(".tree-node");if(!t)return;let n=t.dataset.entityId;if(!n||n===this.draggedEntityId)return;if(this.isDescendant(this.draggedEntityId,n)){showNotification("Cannot move a entity into one of its descendants");return}let i=new K(this.draggedEntityId,n,{source:"ui"});C.applyChange(i),SM.expandedNodes.add(n)}isDescendant(e,t){let n=SM.getEntityById(e);if(!n)return!1;let i=s=>{if(!s.children)return!1;for(let o of s.children)if(o.id===t||i(o))return!0;return!1};return i(n)}async handleDropToRoot(){if(!this.draggedEntityId)return;let e=new K(this.draggedEntityId,null,{source:"ui"});C.applyChange(e)}};var At=class{constructor(){this.scaleLockStates=new Map,this.scaleRatios=new Map}isLocked(e){return this.scaleLockStates.get(e)||!1}getRatios(e){return this.scaleRatios.get(e)||null}setRatios(e,t){this.scaleRatios.set(e,t)}toggleLock(e,t){let n=!this.scaleLockStates.get(e);if(this.scaleLockStates.set(e,n),n){let i=t.x||1;this.setRatios(e,{x:(t.x||0)/i,y:(t.y||0)/i,z:(t.z||0)/i})}return n}createLockButton(e,t){let n=document.createElement("button");return n.className="scale-lock-btn",n.style.marginLeft="8px",n.style.padding="4px 4px",n.style.background=this.isLocked(e)?"#4a90e2":"#2a2a2a",n.style.border="1px solid #3a3a3a",n.style.borderRadius="4px",n.style.color=this.isLocked(e)?"#fff":"#999",n.style.cursor="pointer",n.style.fontSize="12px",n.innerHTML=this.isLocked(e)?"\u{1F512}":"\u{1F513}",n.title=this.isLocked(e)?"Proportional scaling locked":"Click to lock proportional scaling",n.onmousedown=i=>{i.stopPropagation();let s=this.toggleLock(e,t);n.style.background=s?"#4a90e2":"#2a2a2a",n.style.color=s?"#fff":"#999",n.innerHTML=s?"\u{1F512}":"\u{1F513}",n.title=s?"Proportional scaling locked":"Click to lock proportional scaling"},n}handleProportionalScale(e,t,n,i){if(!this.isLocked(e)){let l={...t};return l[n]=i,l}let s=parseFloat(i);if(isNaN(s))return t;let o=this.getRatios(e);if(!o){let l=t[n]||1;o={x:(t.x||0)/l,y:(t.y||0)/l,z:(t.z||0)/l},this.setRatios(e,o)}let r=t[n]||1,a=s/r;return{x:t.x*a,y:t.y*a,z:t.z*a}}clearAll(){this.scaleLockStates.clear(),this.scaleRatios.clear()}clearForEntity(e){let t=[];for(let n of this.scaleLockStates.keys())n.startsWith(e+"_")&&t.push(n);t.forEach(n=>{this.scaleLockStates.delete(n),this.scaleRatios.delete(n)})}};var Dt=class{constructor(){this.transformMode="local"}getMode(){return this.transformMode}toggleMode(){return this.transformMode=this.transformMode==="local"?"global":"local",this.transformMode}setMode(e){(e==="local"||e==="global")&&(this.transformMode=e)}getTransformValues(e){return e?this.transformMode==="global"?{position:e.transform.position||{x:0,y:0,z:0},rotation:e.transform.rotation||{x:0,y:0,z:0,w:1},scale:e.transform.scale||{x:1,y:1,z:1}}:{position:e.transformVal("localPosition"),rotation:e.transformVal("localRotation"),scale:e.transformVal("localScale")}:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:1},scale:{x:1,y:1,z:1}}}getTransformLabels(){return this.transformMode==="global"?{positionLabel:"position",rotationLabel:"rotation",scaleLabel:"scale"}:{positionLabel:"localPosition",rotationLabel:"localRotation",scaleLabel:"localScale"}}createModeToggleButton(e){let t=document.createElement("button");return t.className="transform-mode-toggle-btn",t.style.padding="4px 8px",t.style.marginRight="8px",t.style.background="#2a2a2a",t.style.border="1px solid #3a3a3a",t.style.borderRadius="4px",t.style.color="#ccc",t.style.cursor="pointer",t.style.fontSize="11px",t.style.fontWeight="bold",t.textContent=this.transformMode==="local"?"Local":"Global",t.title="Toggle between local and global transform display",t.onmousedown=n=>{n.stopPropagation(),this.toggleMode(),t.textContent=this.transformMode==="local"?"Local":"Global",e&&e()},t}createPositionResetButton(e){let t=document.createElement("button");return t.className="position-reset-btn",t.style.marginLeft="8px",t.style.padding="4px 8px",t.style.background="#2a2a2a",t.style.border="1px solid #3a3a3a",t.style.borderRadius="4px",t.style.color="#999",t.style.cursor="pointer",t.style.fontSize="14px",t.innerHTML="\u2205",t.title="Reset position to zero",t.onmousedown=n=>{n.stopPropagation(),e&&e()},t}createRotationResetButton(e){let t=document.createElement("button");return t.className="rotation-reset-btn",t.style.marginLeft="8px",t.style.padding="4px 8px",t.style.background="#2a2a2a",t.style.border="1px solid #3a3a3a",t.style.borderRadius="4px",t.style.color="#999",t.style.cursor="pointer",t.style.fontSize="14px",t.innerHTML="\u2205",t.title="Reset rotation to zero",t.onmousedown=n=>{n.stopPropagation(),e&&e()},t}updateTransformInputs(e,t,n){if(!t||!e)return;let{quaternionToEuler:i,formatNumber:s}=n,o=this.getTransformValues(t),r=this.getTransformLabels(),a=u=>u.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase()).trim(),l=a(r.positionLabel),d=a(r.rotationLabel),p=a(r.scaleLabel);this.updateVector3Inputs(e,l,o.position,s);let h=i(o.rotation);this.updateVector3Inputs(e,d,h,s),this.updateVector3Inputs(e,p,o.scale,s)}updateVector3Inputs(e,t,n,i){let s=e.querySelectorAll(".property-row");for(let o of s){let r=o.querySelector(".property-label");if(r&&r.textContent===t){let a=o.querySelectorAll('.vector-group input[type="number"]');a.length>=3&&(a[0].value=i?i(n.x,6):n.x,a[1].value=i?i(n.y,6):n.y,a[2].value=i?i(n.z,6):n.z);break}}}};var Ot=class{constructor(){}updateProperty(e,t,n,i={}){let s=`prop_${e}_${t}`,o=document.getElementById(s);o&&(typeof n=="boolean"?this.updateCheckbox(o,n):typeof n=="number"?this.updateNumberInput(o,n):typeof n=="string"?this.updateStringInput(o,n):typeof n=="object"&&this.updateObjectProperty(o,n,i))}updateCheckbox(e,t){let n=e.querySelector('input[type="checkbox"]');n&&(n.checked=t)}updateNumberInput(e,t){let n=e.querySelector('input[type="number"]:not(.vector-group input)');n&&(n.value=t)}updateStringInput(e,t){let n=e.querySelector("select");if(n)n.value=t;else{let i=e.querySelector('input[type="text"]');i&&(i.value=t)}}updateObjectProperty(e,t,n){t&&("x"in t&&"y"in t&&"z"in t&&!("w"in t)?this.updateVector3(e,t):"x"in t&&"y"in t&&"z"in t&&"w"in t?this.updateQuaternion(e,t,n):"r"in t&&"g"in t&&"b"in t&&this.updateColor(e,t,n))}updateVector3(e,t){let n=e.querySelectorAll('.vector-group input[type="number"]');n.length>=3&&(n[0].value=t.x||0,n[1].value=t.y||0,n[2].value=t.z||0)}updateQuaternion(e,t,n){let{quaternionToEuler:i,formatNumber:s}=n||{};if(i){let o=i(t),r=e.querySelectorAll('.vector-group input[type="number"]');r.length>=3&&(r[0].value=s?s(o.x,2):o.x,r[1].value=s?s(o.y,2):o.y,r[2].value=s?s(o.z,2):o.z)}}updateColor(e,t,n){let i=e.querySelector(".color-swatch");i&&(i.style.backgroundColor=`rgba(${t.r*255}, ${t.g*255}, ${t.b*255}, ${t.a||1})`);let s=e.querySelectorAll('.vector-group input[type="number"]');s.length>=3&&(s[0].value=t.r||0,s[1].value=t.g||0,s[2].value=t.b||0,s[3]&&(s[3].value=t.a||1));let o=e.querySelector('input[type="color"]');if(o){let{rgbToHex:r}=n||{};r&&(o.value=r(t.r*255,t.g*255,t.b*255))}}updateAllProperties(e,t,n){t&&Object.entries(t).forEach(([i,s])=>{this.updateProperty(e,i,s,n)})}updateEntityProperty(e,t,n){if(!e)return;let i=e.querySelectorAll(".property-row");for(let s of i){let o=s.querySelector(".property-label");if(o&&o.textContent===t){typeof n=="boolean"?this.updateCheckbox(s,n):typeof n=="number"?this.updateNumberInput(s,n):typeof n=="string"?this.updateStringInput(s,n):typeof n=="object"&&this.updateObjectProperty(s,n);break}}}};var W=class{constructor(e){this.utils=e||{}}createVector3Input(e,t,n,i,s=null,o=!1,r=null,a=!1){let l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.width="100%";let d=document.createElement("div");if(d.className="vector-group",["x","y","z"].forEach(p=>{let h=document.createElement("span");h.className="vector-label",h.textContent=p.toUpperCase();let u=document.createElement("input");u.type="number",u.className="property-input number",u.value=t[p]||0,u.step="any",u.id=`${i}_${e}.${p}`,u.onchange=()=>{if(o&&r&&r.isLocked(`${i}_${e}`)){let y=r.handleProportionalScale(`${i}_${e}`,t,p,u.value);n("proportional",y)}else n(p,u.value,t)},s&&typeof inputHandler<"u"&&(u.onclick=y=>{inputHandler.inputFocusChanged(u,s,`${e}.${p}`)},inputHandler.focusComponent===s&&inputHandler.focusProperty===`${e}.${p}`&&(u.style.backgroundColor="#1e3764",u.style.borderColor="#326689")),d.appendChild(h),d.appendChild(u)}),l.appendChild(d),o&&r){let p=`${i}_${e}`,h=r.createLockButton(p,t);d.appendChild(h)}if(a){let p=this.createVector3ResetButton(e,()=>{n("reset",{x:0,y:0,z:0})});d.appendChild(p)}return l}createVector4Input(e,t,n,i,s=null,o=!1){let{quaternionToEuler:r,formatNumber:a}=this.utils,l=r?r(t):{x:0,y:0,z:0},d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.width="100%";let p=document.createElement("div");if(p.className="vector-group",["x","y","z"].forEach(h=>{let u=document.createElement("span");u.className="vector-label",u.textContent=h.toUpperCase();let y=document.createElement("input");y.type="number",y.className="property-input number",y.value=a?a(l[h],2):l[h],y.step="any",y.id=`${i}_${e}.${h}`,y.onchange=()=>n(h,y.value,t),s&&typeof inputHandler<"u"&&(y.onclick=m=>{inputHandler.inputFocusChanged(y,s,`localRotation.${h}`)},inputHandler.focusComponent===s&&inputHandler.focusProperty===`localRotation.${h}`&&(y.style.backgroundColor="#1e3764",y.style.borderColor="#326689")),p.appendChild(u),p.appendChild(y)}),o){let h=this.createRotationResetButton(()=>{n("reset",{x:0,y:0,z:0,w:1})});p.appendChild(h)}return d.appendChild(p),d}createColorInput(e,t,n,i=null,s){let{rgbToHex:o,hexToRgb:r}=this.utils,a=document.createElement("div");a.className="color-group";let l=document.createElement("div");l.className="color-preview";let d=document.createElement("div");d.className="color-swatch",d.style.backgroundColor=`rgba(${t.r*255}, ${t.g*255}, ${t.b*255}, ${t.a||1})`,l.appendChild(d);let p=document.createElement("input");p.type="color",p.style.display="none",o&&(p.value=o(t.r*255,t.g*255,t.b*255)),p.onchange=()=>{if(r){let u=r(p.value),y={r:u.r/255,g:u.g/255,b:u.b/255,a:t.a||1};d.style.backgroundColor=`rgba(${u.r}, ${u.g}, ${u.b}, ${y.a})`,s&&s(y)}},i&&typeof inputHandler<"u"&&(l.onclick=u=>{u.stopPropagation(),inputHandler.inputFocusChanged(p,i,e)}),l.onmousedown=()=>p.click();let h=document.createElement("div");return h.className="vector-group",["r","g","b","a"].forEach(u=>{let y=document.createElement("input");y.type="number",y.className="property-input number",y.value=u==="a"?t[u]||1:t[u],y.min="0",y.max="1",y.step="0.01",y.onchange=()=>{let m=parseFloat(y.value);if(!isNaN(m)){let f={r:u==="r"?Math.max(0,Math.min(1,m)):t.r,g:u==="g"?Math.max(0,Math.min(1,m)):t.g,b:u==="b"?Math.max(0,Math.min(1,m)):t.b,a:u==="a"?Math.max(0,Math.min(1,m)):t.a||1};d.style.backgroundColor=`rgba(${f.r*255}, ${f.g*255}, ${f.b*255}, ${f.a})`,s&&s(f)}},i&&typeof inputHandler<"u"&&(y.onclick=m=>{inputHandler.inputFocusChanged(y,i,`${e}.${u}`)},inputHandler.focusComponent===i&&inputHandler.focusProperty===`${e}.${u}`&&(y.style.backgroundColor="#1e3764",y.style.borderColor="#326689")),h.appendChild(y)}),a.appendChild(l),a.appendChild(p),a.appendChild(h),a}createVector3ResetButton(e,t){let n=document.createElement("button");return n.className="position-reset-btn",n.style.marginLeft="8px",n.style.padding="4px 8px",n.style.background="#2a2a2a",n.style.border="1px solid #3a3a3a",n.style.borderRadius="4px",n.style.color="#999",n.style.cursor="pointer",n.style.fontSize="14px",n.innerHTML="\u2205",n.title=`Reset ${e} to zero`,n.onmousedown=i=>{i.stopPropagation(),t&&t()},n}createRotationResetButton(e){let t=document.createElement("button");return t.className="rotation-reset-btn",t.style.marginLeft="8px",t.style.padding="4px 8px",t.style.background="#2a2a2a",t.style.border="1px solid #3a3a3a",t.style.borderRadius="4px",t.style.color="#999",t.style.cursor="pointer",t.style.fontSize="14px",t.innerHTML="\u2205",t.title="Reset rotation to zero",t.onmousedown=n=>{n.stopPropagation(),e&&e()},t}isVector3Object(e){return e&&typeof e=="object"&&"x"in e&&"y"in e&&"z"in e&&!("w"in e)}isQuaternion(e){return e&&typeof e=="object"&&"x"in e&&"y"in e&&"z"in e&&"w"in e}isColor(e){return e&&typeof e=="object"&&"r"in e&&"g"in e&&"b"in e}};var zt=class{constructor(e,t,n=null){this.utils=e||{},this.changeManager=t,this.scaleLockHandler=n,this.vectorColorRenderer=new W(e)}createPropertyRow(e,t,n,i,s=null,o=null,r=null){let{formatPropertyName:a}=this.utils,l=document.createElement("div");l.className="property-row";let d=document.createElement("span");d.className="property-label",d.textContent=a?a(e):e;let p=document.createElement("div");switch(p.className="property-value",n){case"checkbox":p.appendChild(this.createCheckboxInput(t,i,o,e));break;case"text":p.appendChild(this.createTextInput(t,i,o,e));break;case"number":p.appendChild(this.createNumberInput(t,i,o,e,r));break;case"dropdown":p.appendChild(this.createDropdownInput(t,s,i,o,e));break;case"vector3":this.createVector3Row(p,e,t,i,o,r);break;case"vector4":this.createVector4Row(p,e,t,i,o,r);break}return l.appendChild(document.createElement("span")),l.appendChild(d),l.appendChild(p),l}renderProperty(e,t,n,i,s){let{formatPropertyName:o,parseBest:r,deepClone:a}=this.utils,{ComponentPropertyChange:l}=this.changeManager.changeTypes||{},d=n.type,p=n.id,h=document.createElement("div");h.className="property-row",h.id=`prop_${p}_${e}`;let u=document.createElement("button");u.className="property-button",u.textContent="\u21BB",u.title="Reset to default";let y=document.createElement("span");y.className="property-label",y.textContent=o?o(e):e,y.title=e;let m=document.createElement("div");m.className="property-value";let f=n.enums?n.enums():{};if(f[e])m.appendChild(this.createEnumDropdown(e,t,f[e],p,l)),m.style.width="50%";else if(e==="uid")m.appendChild(this.createUserUidDropdown(t,p,e,l));else if(typeof t=="boolean")m.appendChild(this.createComponentCheckbox(t,p,e,l));else if(typeof t=="number")m.appendChild(this.createComponentNumberInput(t,p,e,n,l));else if(this.vectorColorRenderer.isVector3Object(t))this.createComponentVector3Input(m,e,t,p,n,l);else if(e==="color"&&this.vectorColorRenderer.isColor(t)){let v=this.vectorColorRenderer.createColorInput(e,t,p,n,b=>{if(l){let S=new l(p,e,b,{source:"ui"});this.changeManager.applyChange(S)}});m.appendChild(v)}else m.appendChild(this.createComponentTextInput(t,p,e,l));return h.appendChild(u),h.appendChild(y),h.appendChild(m),h}createCheckboxInput(e,t,n,i){let s=document.createElement("input");return s.type="checkbox",s.className="checkbox-input",s.checked=e,n&&(s.id=`${n}_${i}`),s.onchange=()=>t(s.checked),s}createTextInput(e,t,n,i){let s=document.createElement("input");return s.type="text",s.className="property-input",s.value=e||"",n&&(s.id=`${n}_${i}`),s.onchange=()=>t(s.value),s}createNumberInput(e,t,n,i,s=null){let o=document.createElement("input");return o.type="number",o.className="property-input number",o.value=e||0,o.step="any",n&&(o.id=`${n}_${i}`),o.onchange=()=>{let r=parseFloat(o.value);isNaN(r)||t(r)},s&&typeof inputHandler<"u"&&(o.onclick=r=>{inputHandler.inputFocusChanged(o,s,i)},inputHandler.focusComponent===s&&inputHandler.focusProperty===i&&(o.style.backgroundColor="#1e3764",o.style.borderColor="#326689")),o}createDropdownInput(e,t,n,i,s){let o=document.createElement("select");return o.className="property-input",i&&(o.id=`${i}_${s}`),Object.entries(t).forEach(([r,a])=>{let l=document.createElement("option");l.value=a,l.textContent=r,a===e&&(l.selected=!0),o.appendChild(l)}),o.onchange=()=>n(o.value),o}createVector3Row(e,t,n,i,s,o){let r=t.toLowerCase().includes("scale"),a=t==="localPosition"||t==="position",l=this.vectorColorRenderer.createVector3Input(t,n,i,s,o,r,this.scaleLockHandler,a);e.appendChild(l)}createVector4Row(e,t,n,i,s,o){let r=t==="localRotation"||t==="rotation",a=this.vectorColorRenderer.createVector4Input(t,n,i,s,o,r);e.appendChild(a)}createEnumDropdown(e,t,n,i,s){let{parseBest:o}=this.utils,r=document.createElement("select");return r.className="property-input",r.style.width="100%",Object.keys(n).forEach(a=>{let l=document.createElement("option");l.value=a,l.textContent=n[a],t==a&&(l.selected=!0),r.appendChild(l)}),r.onchange=()=>{if(s){let a=new s(i,e,o?o(r.value):r.value,{source:"ui"});this.changeManager.applyChange(a)}},r}createUserUidDropdown(e,t,n,i){let s=document.createElement("select");s.className="property-input",s.style.width="100%",typeof SM<"u"&&SM.scene&&SM.scene.users&&Object.values(SM.scene.users).forEach(r=>{let a=document.createElement("option");a.value=r.uid,a.textContent=r.name,e===r.uid&&(a.selected=!0),s.appendChild(a)});let o=document.createElement("option");return o.value="",o.textContent="None",e===""&&(o.selected=!0),s.appendChild(o),s.onchange=()=>{if(i){let r=new i(t,n,s.value,{source:"ui"});this.changeManager.applyChange(r)}},s}createComponentCheckbox(e,t,n,i){let s=document.createElement("input");return s.type="checkbox",s.className="checkbox-input",s.checked=e,s.onchange=()=>{if(i){let o=new i(t,n,s.checked,{source:"ui"});this.changeManager.applyChange(o)}},s}createComponentNumberInput(e,t,n,i,s){let o=document.createElement("input");return o.type="number",o.className="property-input number",o.value=e,o.step="any",o.onchange=()=>{let r=parseFloat(o.value);if(!isNaN(r)&&s){let a=new s(t,n,r,{source:"ui"});this.changeManager.applyChange(a)}},i&&typeof inputHandler<"u"&&(o.onclick=r=>{inputHandler.inputFocusChanged(o,i,n)},inputHandler.focusComponent===i&&inputHandler.focusProperty===n&&(o.style.backgroundColor="#1e3764",o.style.borderColor="#326689")),o}createComponentTextInput(e,t,n,i){let s=document.createElement("input");return s.type="text",s.className="property-input",s.value=e?.toString()||"",s.onchange=()=>{if(i){let o=new i(t,n,s.value,{source:"ui"});this.changeManager.applyChange(o)}},s}createComponentVector3Input(e,t,n,i,s,o){let{deepClone:r}=this.utils,a=(d,p)=>{if(!o||!r)return;let h=r(n),u=parseFloat(p);if(!isNaN(u)){h[d]=u;let y=new o(i,t,h,{source:"ui",oldValue:n});this.changeManager.applyChange(y)}},l=this.vectorColorRenderer.createVector3Input(t,n,a,i,s,!1,null,!1);e.appendChild(l)}};var Ht=class{constructor(e,t,n,i,s){this.propertyInputRenderer=e,this.transformHandler=t,this.scaleLockHandler=n,this.utils=i||{},this.changeManager=s}async createEntityPropertiesSection(e,t=!1){if(!e)return null;let n=document.createElement("div");n.className="entity-section",n.dataset.panel="propertyPanelComponent";let i=this.createEntityHeader(e);n.appendChild(i);let s=await this.createEntityBody(e,t);return n.appendChild(s),n}createEntityHeader(e){let t=document.createElement("div");t.className="component-header perm";let n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.width="100%";let i=document.createElement("div");i.innerHTML=`
            <span class="component-name">Entity</span>
            <span class="component-type">${e.id}</span>
        `;let s=this.transformHandler.createModeToggleButton(()=>{typeof SM<"u"&&SM.selectedEntity&&window.dispatchEvent(new CustomEvent("transform-mode-changed"))});return n.appendChild(i),n.appendChild(s),t.appendChild(n),t}async createEntityBody(e,t){let n=document.createElement("div");if(n.className="component-body",t){let a=this.createAsyncToggleRow(e);n.appendChild(a)}let i=this.createNameRow(e);n.appendChild(i);let s=await this.createLayerRow(e);n.appendChild(s);let o=this.createActiveRow(e);return n.appendChild(o),this.createTransformRows(e).forEach(a=>n.appendChild(a)),n}createNameRow(e){let{EntityPropertyChange:t}=this.changeManager.changeTypes||{},n=document.createElement("div");n.className="property-row";let i=document.createElement("span");i.className="property-label",i.textContent="Name",n.appendChild(i);let s=document.createElement("input");s.type="text",s.className="name-input",s.value=e.name,s.style.width="100%";let o=()=>{let r=s.value.trim();if(r&&r!==e.name&&t){let a=new t(e.id,"name",r,{source:"ui"});this.changeManager.applyChange(a),setTimeout(()=>{typeof SM<"u"&&SM.selectEntity(e.parentId+"/"+r)},70)}};return s.addEventListener("change",o),s.addEventListener("blur",o),n.appendChild(s),n}async createLayerRow(e){let{EntityPropertyChange:t}=this.changeManager.changeTypes||{};return this.propertyInputRenderer.createPropertyRow("layer",e.layer,"dropdown",n=>{if(t){let i=new t(e.id,"layer",n,{source:"ui"});this.changeManager.applyChange(i)}},hn)}createActiveRow(e){let{EntityPropertyChange:t}=this.changeManager.changeTypes||{};return this.propertyInputRenderer.createPropertyRow("active",e.active,"checkbox",n=>{if(t){let i=new t(e.id,"active",n,{source:"ui"});this.changeManager.applyChange(i)}})}createTransformRows(e){let{EntityPropertyChange:t}=this.changeManager.changeTypes||{},{deepClone:n,quaternionToEuler:i,eulerToQuaternion:s}=this.utils,o=[],r=this.transformHandler.getTransformValues(e),a=this.transformHandler.getTransformLabels(),l=this.propertyInputRenderer.createPropertyRow(a.positionLabel,r.position,"vector3",(h,u)=>{if(h==="reset"){let y=new t(e.id,"localPosition",{x:0,y:0,z:0},{source:"ui"});this.changeManager.applyChange(y)}else{let y=n?n(r.position):{...r.position};y[h]=parseFloat(u);let m=new t(e.id,"localPosition",y,{source:"ui",oldValue:r.position});this.changeManager.applyChange(m)}},null,e.id,e);o.push(l);let d=this.propertyInputRenderer.createPropertyRow(a.rotationLabel,r.rotation,"vector4",(h,u)=>{if(h==="reset"){let y=new t(e.id,"localRotation",{x:0,y:0,z:0,w:1},{source:"ui"});this.changeManager.applyChange(y)}else{let y=typeof SM<"u"?SM.getSelectedEntity():e,m=this.transformHandler.getMode()==="global"?y.transform.rotation:y.transform.localRotation,f=i?i(m):{x:0,y:0,z:0},v=parseFloat(u);if(!isNaN(v)){let b=n?n(this.transformHandler.getMode()==="global"?y.transform.rotation:y.transformVal("localRotation")):{...m};f[h]=v;let S=s?s(f):m,E=new t(e.id,"localRotation",S,{source:"ui",oldValue:b});this.changeManager.applyChange(E)}}},null,e.id,e);o.push(d);let p=this.propertyInputRenderer.createPropertyRow(a.scaleLabel,r.scale,"vector3",(h,u)=>{let y=`${e.id}_localScale`;if(h==="proportional"){let m=new t(e.id,"localScale",u,{source:"ui",oldValue:r.scale});this.changeManager.applyChange(m),setTimeout(()=>{window.dispatchEvent(new CustomEvent("update-transform-display"))},50)}else if(this.scaleLockHandler&&this.scaleLockHandler.isLocked(y)){let m=this.scaleLockHandler.handleProportionalScale(y,r.scale,h,u),f=new t(e.id,"localScale",m,{source:"ui",oldValue:r.scale});this.changeManager.applyChange(f),setTimeout(()=>{window.dispatchEvent(new CustomEvent("update-transform-display"))},50)}else{let m=n?n(r.scale):{...r.scale};m[h]=parseFloat(u);let f=new t(e.id,"localScale",m,{source:"ui",oldValue:r.scale});this.changeManager.applyChange(f)}},null,e.id,e);return o.push(p),o}createAsyncToggleRow(e){let t=document.createElement("div");t.className="async-toggle-row";let n=document.createElement("span");n.className="property-label",n.textContent="Async",n.style.fontWeight="bold",n.style.flex="none";let i=document.createElement("div");i.className="property-value";let s=document.createElement("input");return s.type="checkbox",s.className="checkbox-input",s.style.flex="none",s.checked=e.loadAsync||!1,s.onchange=()=>{console.log("loadAsync changed",s.checked),e.loadAsync=s.checked},i.appendChild(s),t.appendChild(document.createElement("span")),t.appendChild(n),t.appendChild(i),t}};var Ut=class{constructor(e,t,n){this.propertyInputRenderer=e,this.utils=t||{},this.changeManager=n,this.collapsedComponents=new Set}renderComponent(e,t,n,i,s=!1){let o=document.createElement("div");o.className="component-section",o.dataset.panel="propertyPanelComponent",o.dataset.componentId=e.id,o.dataset.componentIndex=t;let r=this.createComponentHeader(e,t,n,i);o.appendChild(r);let a=this.createComponentBody(e,s);return o.appendChild(a),this.setupToggleFunctionality(r,a,i,e,t),o}createComponentHeader(e,t,n,i){let s=document.createElement("div");s.className="component-header";let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.width="100%",o.style.justifyContent="space-between";let r=document.createElement("div");r.innerHTML=`
            <span class="component-name">${e.type}</span>
            <span class="component-type">${e.id}</span>
        `;let a=this.createActionButtons(e,t,n,i);return o.appendChild(r),o.appendChild(a),s.appendChild(o),s}createActionButtons(e,t,n,i){let{ReorderComponentChange:s,RemoveComponentChange:o}=this.changeManager.changeTypes||{},{confirm:r}=this.utils,a=document.createElement("div");if(a.style.display="flex",a.style.alignItems="center",a.style.gap="8px",t>0){let p=document.createElement("button");p.className="component-reorder-btn",p.innerHTML="\u2191",p.title="Move up",p.onmousedown=h=>{if(h.stopPropagation(),s){let u=new s(i,t,t-1,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(p)}if(t<n-1){let p=document.createElement("button");p.className="component-reorder-btn",p.innerHTML="\u2193",p.title="Move down",p.onmousedown=h=>{if(h.stopPropagation(),s){let u=new s(i,t,t+1,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(p)}let l=document.createElement("button");l.className="component-delete-btn",l.innerHTML="\xD7",l.title="Delete component",l.onmousedown=async p=>{if(p.stopPropagation(),(r?await r(`Delete ${e.type} component?`):window.confirm(`Delete ${e.type} component?`))&&o){let u=new o(i,e.id,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-deleted"))},100)}},a.appendChild(l);let d=document.createElement("span");return d.className="component-toggle",d.textContent="\u25BC",a.appendChild(d),a}createComponentBody(e,t){let n=document.createElement("div");if(n.className="component-body",t){let i=this.createAsyncToggleRow(e);n.appendChild(i)}return e._controls&&this.renderComponentControls(e._controls,e,n),e.properties&&Object.entries(e.properties).forEach(([i,s],o)=>{let r=this.propertyInputRenderer.renderProperty(i,s,e,0,o);n.appendChild(r)}),n}renderComponentControls(e,t,n){!e||!e.controls||Object.values(e.controls).forEach(i=>{if(i.input==="button"){let s=document.createElement("button");s.className="property-button prop-control-btn",s.textContent=i.label,s.id=`${t.id}_${i.id}`,s.onmousedown=i.callback,n.appendChild(s)}})}createAsyncToggleRow(e){let t=document.createElement("div");t.className="async-toggle-row";let n=document.createElement("span");n.className="property-label",n.textContent="Async",n.style.fontWeight="bold",n.style.flex="none";let i=document.createElement("div");i.className="property-value";let s=document.createElement("input");return s.type="checkbox",s.className="checkbox-input",s.style.flex="none",s.checked=e.loadAsync||!1,s.onchange=()=>{console.log("loadAsync changed",s.checked),e.loadAsync=s.checked},i.appendChild(s),t.appendChild(document.createElement("span")),t.appendChild(n),t.appendChild(i),t}setupToggleFunctionality(e,t,n,i,s){let o=`${n}_${i.type}_${s}`,r=!this.collapsedComponents.has(o);t.style.display=r?"block":"none";let a=e.querySelector(".component-toggle");a&&(a.textContent=r?"\u25BC":"\u25B6"),e.onmousedown=()=>{r=!r,t.style.display=r?"block":"none",a&&(a.textContent=r?"\u25BC":"\u25B6"),r?this.collapsedComponents.delete(o):this.collapsedComponents.add(o),window.dispatchEvent(new CustomEvent("component-collapse-changed"))}}getCollapsedComponents(){return this.collapsedComponents}setCollapsedComponents(e){this.collapsedComponents=new Set(e)}clearCollapsedStates(){this.collapsedComponents.clear()}collapseAll(e,t){t.forEach((n,i)=>{let s=`${e}_${n.type}_${i}`;this.collapsedComponents.add(s)})}};var jt=class{constructor(e,t,n){this.propertyInputRenderer=e,this.utils=t||{},this.changeManager=n,this.vectorColorRenderer=new W(t),this.collapsedComponents=new Set}renderScriptRunnerComponent(e,t,n,i){let s=document.createElement("div");s.className="component-section",s.dataset.panel="propertyPanelComponent",s.dataset.componentId=e.id,s.dataset.componentIndex=t;let o=this.createScriptRunnerHeader(e,t,n,i);s.appendChild(o);let r=this.createScriptRunnerBody(e,i);return s.appendChild(r),this.setupToggleFunctionality(o,r,i,e,t),s}createScriptRunnerHeader(e,t,n,i){let s=document.createElement("div");s.className="component-header runner-header";let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.width="100%",o.style.justifyContent="space-between";let r=document.createElement("div"),a=this.getUserColor(e.properties.owner);r.innerHTML=`
            <span class="component-name">ScriptRunner</span>
            <span class="component-type">${e.id}</span>
            <span class="component-owner" style="color:${a}">${e.properties.owner}</span>
            <span class="component-status" style="font-size:10px; margin-left:30px; color:#${e.ctx?._running?"00b100":"b10000"};">${e.ctx?._running?"Running":"Stopped"}</span>
        `;let l=this.createScriptRunnerActions(e,t,n,i);return o.appendChild(r),o.appendChild(l),s.appendChild(o),s}getUserColor(e){return typeof getUserColor=="function"?getUserColor(e):"#888"}createScriptRunnerActions(e,t,n,i){let{ReorderComponentChange:s,RemoveComponentChange:o}=this.changeManager.changeTypes||{},{confirm:r}=this.utils,a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.gap="8px";let l=document.createElement("button");if(l.className="component-reorder-btn",l.innerHTML="\u21BB",l.title="Refresh script",l.onmousedown=h=>{h.stopPropagation(),e.Refresh&&e.Refresh()},a.appendChild(l),t>0){let h=document.createElement("button");h.className="component-reorder-btn",h.innerHTML="\u2191",h.title="Move up",h.onmousedown=u=>{if(u.stopPropagation(),s){let y=new s(i,t,t-1,{source:"ui"});this.changeManager.applyChange(y),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(h)}if(t<n-1){let h=document.createElement("button");h.className="component-reorder-btn",h.innerHTML="\u2193",h.title="Move down",h.onmousedown=u=>{if(u.stopPropagation(),s){let y=new s(i,t,t+1,{source:"ui"});this.changeManager.applyChange(y),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(h)}let d=document.createElement("button");d.className="component-delete-btn",d.innerHTML="\xD7",d.title="Delete component",d.onmousedown=async h=>{if(h.stopPropagation(),(r?await r("Delete ScriptRunner component?"):window.confirm("Delete ScriptRunner component?"))&&o){let y=new o(i,e.id,{source:"ui"});this.changeManager.applyChange(y),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-deleted"))},100)}},a.appendChild(d);let p=document.createElement("span");return p.className="component-toggle",p.textContent="\u25BC",a.appendChild(p),a}createScriptRunnerBody(e,t){let{ComponentPropertyChange:n}=this.changeManager.changeTypes||{},i=document.createElement("div");i.className="component-body";let s=this.propertyInputRenderer.createPropertyRow("Name",e.properties.name||"myScript","text",a=>{if(e.properties.name=a,n){let l=new n(e.id,"name",a,{source:"ui"});this.changeManager.applyChange(l)}});i.appendChild(s);let o=this.createFileSelectionRow(e,t);i.appendChild(o);let r=this.propertyInputRenderer.createPropertyRow("Hotreload",e.properties.hotreload,"checkbox",a=>{log("scriptrunner","hotreload",a);let l=new n(e.id,"hotreload",a,{source:"ui"});this.changeManager.applyChange(l)});if(i.appendChild(r),e.ctx&&e.ctx.vars&&Object.keys(e.ctx.vars).length>0){let a=this.createVarsHeader();i.appendChild(a),Object.entries(e.ctx.vars).forEach(([l,d])=>{let p=this.renderScriptRunnerVar(l,d,e);i.appendChild(p)})}if(e.properties.file){let a=this.createEditScriptButton(e);i.appendChild(a)}return i}createFileSelectionRow(e,t){let{ComponentPropertyChange:n}=this.changeManager.changeTypes||{},i=document.createElement("div");i.className="property-row";let s=document.createElement("span");s.className="property-label",s.textContent="Script File";let o=document.createElement("div");o.className="property-value";let r=document.createElement("select");r.className="property-input",r.style.width="100%";let a=document.createElement("option");if(a.value="",a.textContent="-- Select Script --",r.appendChild(a),typeof window<"u"&&window.inventory){let l=SM.getAllScriptAssets().map(p=>p.properties),d=p=>{if(!p)return;let h=document.createElement("option");h.value=p.name,h.textContent=`${p.name} (by ${p.author})`,e.properties.file===p.name&&(h.selected=!0),r.appendChild(h)};l.forEach(p=>{d(p)})}return r.onchange=async()=>{if(e.properties.file!==r.value&&n){let l=new n(e.id,"file",r.value,{source:"ui"});this.changeManager.applyChange(l),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scriptrunner-file-changed",{detail:{entityId:t}}))},100)}},o.appendChild(r),i.appendChild(document.createElement("span")),i.appendChild(s),i.appendChild(o),i}createVarsHeader(){let e=document.createElement("div");return e.className="property-row",e.style.marginTop="12px",e.style.fontWeight="bold",e.innerHTML="<span></span><span>Script Variables</span><span></span>",e}renderScriptRunnerVar(e,t,n){let{ScriptRunnerVarChange:i}=this.changeManager.changeTypes||{},{formatPropertyName:s}=this.utils,o=document.createElement("div");o.className="property-row";let r=document.createElement("span");r.className="property-label",r.textContent=s?s(e):e,r.title=e;let a=document.createElement("div");if(a.className="property-value",t.type||(t.value===!0||t.value===!1?t.type="boolean":isNaN(t.value)?t.type="string":t.type="number"),t.type==="boolean"){let l=document.createElement("input");l.type="checkbox",l.className="checkbox-input",l.checked=t.value,l.onchange=()=>{if(i){let d=new i(n.id,e,{type:"boolean",value:l.checked},{source:"ui"});this.changeManager.applyChange(d)}},a.appendChild(l)}else if(t.type==="number"){let l=document.createElement("input");l.type="number",l.className="property-input number",l.value=t.value,l.step="any",l.onchange=()=>{let d=parseFloat(l.value);if(!isNaN(d)&&i){let p=new i(n.id,e,{type:"number",value:d},{source:"ui"});this.changeManager.applyChange(p)}},a.appendChild(l)}else if(t.type==="vector3"){let l=document.createElement("div");l.className="vector-group",["x","y","z"].forEach(d=>{let p=document.createElement("span");p.className="vector-label",p.textContent=d.toUpperCase();let h=document.createElement("input");h.type="number",h.className="property-input number",h.value=t.value[d]||0,h.step="any",h.onchange=()=>{let u=parseFloat(h.value);if(!isNaN(u)&&i){t.value[d]=u;let y=new i(n.id,e,{type:"vector3",value:t.value},{source:"ui"});this.changeManager.applyChange(y)}},l.appendChild(p),l.appendChild(h)}),a.appendChild(l)}else if(t.type==="color"){let l=this.vectorColorRenderer.createColorInput(e,t.value,n.id,n,d=>{if(i){let p=new i(n.id,e,{type:"color",value:d},{source:"ui"});this.changeManager.applyChange(p)}},!0);a.appendChild(l)}else{let l=document.createElement("input");l.type="text",l.className="property-input",l.value=t.value?.toString()||"",l.onchange=()=>{if(i){let d=new i(n.id,e,{type:"string",value:l.value},{source:"ui"});this.changeManager.applyChange(d)}},a.appendChild(l)}return o.appendChild(document.createElement("span")),o.appendChild(r),o.appendChild(a),o}createEditScriptButton(e){let t=document.createElement("div");t.className="property-row",t.style.marginTop="12px",t.style.paddingTop="12px",t.style.borderTop="1px solid #333";let n=document.createElement("button");n.className="edit-script-btn",n.style.width="100%",n.style.padding="8px",n.style.backgroundColor="rgb(42 52 60)",n.style.color="white",n.style.border="none",n.style.borderRadius="4px",n.style.cursor="pointer",n.innerHTML="\u{1F4DD} Edit Script",n.onmousedown=()=>{if(e.properties.file.length>0){let s=SM.getEntityByName(e.properties.file.replace(".","_"));s&&SM.selectEntity(s.id)}},n.onmouseover=()=>{n.style.backgroundColor="rgb(41 70 92)"},n.onmouseout=()=>{n.style.backgroundColor="rgb(42 52 60)"},t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span"));let i=document.createElement("div");return i.className="property-value",i.appendChild(n),t.appendChild(i),t}setupToggleFunctionality(e,t,n,i,s){let o=`${n}_${i.type}_${s}`,r=!this.collapsedComponents.has(o);t.style.display=r?"block":"none";let a=e.querySelector(".component-toggle");a&&(a.textContent=r?"\u25BC":"\u25B6"),e.onmousedown=()=>{r=!r,t.style.display=r?"block":"none",a&&(a.textContent=r?"\u25BC":"\u25B6"),r?this.collapsedComponents.delete(o):this.collapsedComponents.add(o),window.dispatchEvent(new CustomEvent("component-collapse-changed"))}}getCollapsedComponents(){return this.collapsedComponents}setCollapsedComponents(e){this.collapsedComponents=new Set(e)}};var Vt=class{constructor(e,t,n){this.propertyInputRenderer=e,this.utils=t||{},this.changeManager=n,this.vectorColorRenderer=new W(t),this.collapsedComponents=new Set,this.collapsedVars=new Set}renderScriptAssetComponent(e,t,n,i){let s=document.createElement("div");s.className="component-section",s.dataset.panel="propertyPanelComponent",s.dataset.componentId=e.id,s.dataset.componentIndex=t;let o=this.createScriptHeader(e,t,n,i);s.appendChild(o);let r=this.createScriptAssetBody(e,i);return s.appendChild(r),this.setupToggleFunctionality(o,r,i,e,t),s}createScriptHeader(e,t,n,i){let s=document.createElement("div");s.className="component-header scriptasset-header";let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.width="100%",o.style.justifyContent="space-between";let r=document.createElement("div");r.innerHTML=`
            <span class="component-name">ScriptAsset</span>
            <span class="component-type">${e.id}</span>
            <span class="component-owner" style="color:#b1b1b1;">${e.properties.author}</span>
        `;let a=this.createScriptActions(e,t,n,i);return o.appendChild(r),o.appendChild(a),s.appendChild(o),s}getUserColor(e){return typeof getUserColor=="function"?getUserColor(e):"#888"}createScriptActions(e,t,n,i){let{ReorderComponentChange:s,RemoveComponentChange:o}=this.changeManager.changeTypes||{},{confirm:r}=this.utils,a=document.createElement("div");if(a.style.display="flex",a.style.alignItems="center",a.style.gap="8px",t>0){let p=document.createElement("button");p.className="component-reorder-btn",p.innerHTML="\u2191",p.title="Move up",p.onmousedown=h=>{if(h.stopPropagation(),s){let u=new s(i,t,t-1,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(p)}if(t<n-1){let p=document.createElement("button");p.className="component-reorder-btn",p.innerHTML="\u2193",p.title="Move down",p.onmousedown=h=>{if(h.stopPropagation(),s){let u=new s(i,t,t+1,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},a.appendChild(p)}let l=document.createElement("button");l.className="component-delete-btn",l.innerHTML="\xD7",l.title="Delete component",l.onmousedown=async p=>{if(p.stopPropagation(),(r?await r("Delete ScriptAsset component?"):window.confirm("Delete ScriptAsset component?"))&&o){let u=new o(i,e.id,{source:"ui"});this.changeManager.applyChange(u),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-deleted"))},100)}},a.appendChild(l);let d=document.createElement("span");return d.className="component-toggle",d.textContent="\u25BC",a.appendChild(d),a}createScriptAssetBody(e,t){let n=document.createElement("div");n.className="component-body";let i=this.createReadOnlyNameRow(e);n.appendChild(i);let s=this.createDataCodeRow(e);n.appendChild(s);let o=this.createVarsSection(e,t);return n.appendChild(o),n}createReadOnlyNameRow(e){let t=document.createElement("div");t.className="property-row";let n=document.createElement("span");n.className="property-label",n.textContent="Name";let i=document.createElement("div");i.className="property-value";let s=document.createElement("input");return s.type="text",s.className="property-input",s.value=e.properties.name||"myScript",s.readOnly=!0,s.style.backgroundColor="#1a1a1a",s.style.cursor="not-allowed",s.style.opacity="0.7",i.appendChild(s),t.appendChild(document.createElement("span")),t.appendChild(n),t.appendChild(i),t}createDataCodeRow(e){let t=document.createElement("div");t.style.marginTop="12px",t.style.marginBottom="12px";let n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.marginBottom="8px";let i=document.createElement("span");i.style.fontWeight="600",i.style.fontSize="13px",i.style.color="#aaa",i.textContent="Data (JavaScript)";let s=document.createElement("span");s.style.fontSize="11px",s.style.color="#666";let o=(e.properties.data||"").split(`
`).length;s.textContent=`${o} lines`,n.appendChild(i),n.appendChild(s);let r=document.createElement("div");r.style.position="relative";let a=document.createElement("textarea");a.className="property-input",a.value=e.properties.data||"",a.rows=Math.min(Math.max(o,5),15),a.readOnly=!0,a.style.fontFamily='Monaco, Consolas, "Courier New", monospace',a.style.fontSize="12px",a.style.lineHeight="1.5",a.style.whiteSpace="pre",a.style.overflowX="auto",a.style.backgroundColor="#0d0d0d",a.style.color="#d4d4d4",a.style.border="1px solid #2a2a2a",a.style.borderRadius="4px",a.style.padding="12px",a.style.paddingTop="40px",a.style.resize="vertical",a.style.width="100%",a.style.boxSizing="border-box",a.style.cursor="default";let l=document.createElement("button");return l.innerHTML="\u270F\uFE0F Edit",l.style.position="absolute",l.style.top="8px",l.style.right="8px",l.style.padding="6px 12px",l.style.backgroundColor="#2a4a6a",l.style.color="#fff",l.style.border="none",l.style.borderRadius="4px",l.style.cursor="pointer",l.style.fontSize="12px",l.style.fontWeight="600",l.style.transition="background-color 0.2s",l.style.zIndex="10",l.onmouseover=()=>{l.style.backgroundColor="#3a5a7a"},l.onmouseout=()=>{l.style.backgroundColor="#2a4a6a"},l.onmousedown=d=>{d.stopPropagation();let p=new CustomEvent("open-script-editor",{detail:{name:e.properties.name||"myScript",content:e.properties.data||"",author:e.properties._owner||"Unknown",created:Date.now(),isScriptAsset:!0,componentId:e.id}});window.dispatchEvent(p)},r.appendChild(a),r.appendChild(l),t.appendChild(n),t.appendChild(r),t}createVarsSection(e,t){let n=document.createElement("div");n.style.marginTop="16px",n.style.paddingTop="16px",n.style.borderTop="1px solid #333";let i=this.createVarsHeader(e);n.appendChild(i);let s=this.createVarsBody(e);return n.appendChild(s),this.setupVarsToggle(i,s,e,t),n}createVarsHeader(e){let t=document.createElement("div");t.style.display="flex",t.style.justifyContent="space-between",t.style.alignItems="center",t.style.cursor="pointer",t.style.padding="10px 12px",t.style.backgroundColor="#1a1a1a",t.style.border="1px solid #2a2a2a",t.style.borderRadius="6px",t.style.marginBottom="12px",t.style.transition="background-color 0.2s",t.onmouseover=()=>{t.style.backgroundColor="#222"},t.onmouseout=()=>{t.style.backgroundColor="#1a1a1a"};let n=document.createElement("span");n.style.fontWeight="600",n.style.fontSize="13px",n.style.color="#aaa";let i=Object.keys(e.properties.vars||{}).length;n.textContent="Variables";let s=document.createElement("span");s.style.display="inline-block",s.style.marginLeft="8px",s.style.padding="2px 8px",s.style.backgroundColor="#2a4a6a",s.style.color="#5b9dd6",s.style.borderRadius="10px",s.style.fontSize="11px",s.style.fontWeight="600",s.textContent=i.toString();let o=document.createElement("div");o.appendChild(n),o.appendChild(s);let r=document.createElement("span");return r.className="vars-toggle",r.textContent="\u25BC",r.style.fontSize="12px",r.style.color="#666",t.appendChild(o),t.appendChild(r),t}createVarsBody(e){let t=document.createElement("div");t.className="vars-body";let n=e.properties.vars||{};Object.entries(n).forEach(([s,o])=>{let r=this.renderScriptVar(s,o,e);t.appendChild(r)});let i=this.createAddVarSection(e);return t.appendChild(i),t}setupVarsToggle(e,t,n,i){let s=`${i}_${n.id}_vars`,o=!this.collapsedVars.has(s);t.style.display=o?"block":"none";let r=e.querySelector(".vars-toggle");r&&(r.textContent=o?"\u25BC":"\u25B6"),e.onmousedown=a=>{a.stopPropagation(),o=!o,t.style.display=o?"block":"none",r&&(r.textContent=o?"\u25BC":"\u25B6"),o?this.collapsedVars.delete(s):this.collapsedVars.add(s)}}renderScriptVar(e,t,n){let{ComponentPropertyChange:i}=this.changeManager.changeTypes||{},{formatPropertyName:s}=this.utils,o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.backgroundColor="#0d0d0d",o.style.border="1px solid #2a2a2a",o.style.padding="10px 12px",o.style.marginBottom="6px",o.style.borderRadius="6px",o.style.gap="12px";let r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.gap="10px",r.style.minWidth="140px";let a=document.createElement("span");a.style.fontWeight="500",a.style.fontSize="13px",a.style.color="#ddd",a.textContent=s?s(e):e,a.title=e;let l=document.createElement("span");l.style.padding="2px 6px",l.style.borderRadius="4px",l.style.fontSize="10px",l.style.fontWeight="600",l.style.textTransform="uppercase";let p={string:{bg:"#2a3a2a",color:"#6db46d"},number:{bg:"#3a2a4a",color:"#b46dd6"},boolean:{bg:"#2a3a4a",color:"#6d9dd6"}}[t.type]||{bg:"#2a2a2a",color:"#888"};l.style.backgroundColor=p.bg,l.style.color=p.color,l.textContent=t.type,r.appendChild(a),r.appendChild(l);let h=document.createElement("div");h.style.display="flex",h.style.alignItems="center",h.style.gap="8px",h.style.flex="1";let u=this.createVarInput(e,t,n);u.style.flex="1",u.style.maxWidth="300px",h.appendChild(u);let y=document.createElement("button");return y.innerHTML="\xD7",y.title="Delete variable",y.style.padding="4px 8px",y.style.backgroundColor="transparent",y.style.color="#666",y.style.border="1px solid #333",y.style.borderRadius="4px",y.style.cursor="pointer",y.style.fontSize="16px",y.style.lineHeight="1",y.style.transition="all 0.2s",y.onmouseover=()=>{y.style.backgroundColor="#4a2a2a",y.style.color="#d66",y.style.borderColor="#4a2a2a"},y.onmouseout=()=>{y.style.backgroundColor="transparent",y.style.color="#666",y.style.borderColor="#333"},y.onmousedown=m=>{m.stopPropagation();let f={...n.properties.vars};delete f[e];let v=Object.keys(f).length===0?null:f;if(i){let b=new i(n.id,"vars",v,{source:"ui"});this.changeManager.applyChange(b),setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},h.appendChild(y),o.appendChild(r),o.appendChild(h),o}createVarInput(e,t,n){let{ComponentPropertyChange:i}=this.changeManager.changeTypes||{},s=o=>{let a={...n.properties.vars||{}};if(a[e]={type:t.type,value:o},i){let l=new i(n.id,"vars",a,{source:"ui"});this.changeManager.applyChange(l)}};switch(t.type){case"boolean":let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";let r=document.createElement("input");r.type="checkbox",r.checked=t.value,r.style.width="18px",r.style.height="18px",r.style.cursor="pointer",r.onchange=()=>s(r.checked);let a=document.createElement("span");return a.style.fontSize="12px",a.style.color="#888",a.textContent=r.checked?"true":"false",r.onchange=()=>{s(r.checked),a.textContent=r.checked?"true":"false"},o.appendChild(r),o.appendChild(a),o;case"number":let l=document.createElement("input");return l.type="number",l.className="property-input",l.value=t.value,l.step="any",l.style.padding="6px 10px",l.onchange=()=>{let p=parseFloat(l.value);isNaN(p)||s(p)},l;case"string":default:let d=document.createElement("input");return d.type="text",d.className="property-input",d.value=t.value?.toString()||"",d.style.padding="6px 10px",d.onchange=()=>s(d.value),d}}createAddVarSection(e){let{ComponentPropertyChange:t}=this.changeManager.changeTypes||{},n=document.createElement("div");n.style.marginTop="16px",n.style.padding="16px",n.style.backgroundColor="#1a1a1a",n.style.border="1px solid #2a2a2a",n.style.borderRadius="6px";let i=document.createElement("div");i.textContent="Add New Variable",i.style.fontWeight="600",i.style.fontSize="13px",i.style.color="#aaa",i.style.marginBottom="12px",n.appendChild(i);let s=document.createElement("div");s.style.display="grid",s.style.gridTemplateColumns="1fr 1fr",s.style.gap="10px",s.style.marginBottom="12px";let o=document.createElement("div"),r=document.createElement("label");r.textContent="Name",r.style.display="block",r.style.fontSize="11px",r.style.color="#888",r.style.marginBottom="4px",r.style.fontWeight="500";let a=document.createElement("input");a.type="text",a.className="property-input",a.placeholder="variableName",a.style.width="100%",a.style.boxSizing="border-box",o.appendChild(r),o.appendChild(a),s.appendChild(o);let l=document.createElement("div"),d=document.createElement("label");d.textContent="Type",d.style.display="block",d.style.fontSize="11px",d.style.color="#888",d.style.marginBottom="4px",d.style.fontWeight="500";let p=document.createElement("select");p.className="property-input",p.style.width="100%",p.style.boxSizing="border-box",["string","number","boolean"].forEach(v=>{let b=document.createElement("option");b.value=v,b.textContent=v.charAt(0).toUpperCase()+v.slice(1),p.appendChild(b)}),l.appendChild(d),l.appendChild(p),s.appendChild(l),n.appendChild(s);let u=document.createElement("div");u.style.marginBottom="12px";let y=document.createElement("label");y.textContent="Default Value",y.style.display="block",y.style.fontSize="11px",y.style.color="#888",y.style.marginBottom="4px",y.style.fontWeight="500";let m=document.createElement("input");m.type="text",m.className="property-input",m.placeholder="Enter default value",m.style.width="100%",m.style.boxSizing="border-box",u.appendChild(y),u.appendChild(m),n.appendChild(u);let f=document.createElement("button");return f.textContent="+ Add Variable",f.style.width="100%",f.style.padding="10px",f.style.backgroundColor="#2a4a6a",f.style.color="#fff",f.style.border="none",f.style.borderRadius="6px",f.style.cursor="pointer",f.style.fontWeight="600",f.style.fontSize="13px",f.style.transition="background-color 0.2s",f.onmousedown=v=>{v.stopPropagation();let b=a.value.trim(),S=p.value,E=m.value;if(!b){alert("Please enter a variable name");return}if((e.properties.vars||{})[b]){alert("Variable with this name already exists");return}let R;switch(S){case"boolean":R=E.toLowerCase()==="true";break;case"number":R=parseFloat(E)||0;break;case"string":default:R=E;break}let L={...e.properties.vars||{}};if(L[b]={type:S,value:R},t){let k=new t(e.id,"vars",L,{source:"ui"});this.changeManager.applyChange(k),a.value="",m.value="",setTimeout(()=>{window.dispatchEvent(new CustomEvent("component-reordered"))},100)}},f.onmouseover=()=>{f.style.backgroundColor="#3a5a7a"},f.onmouseout=()=>{f.style.backgroundColor="#2a4a6a"},n.appendChild(f),n}setupToggleFunctionality(e,t,n,i,s){let o=`${n}_${i.type}_${s}`,r=!this.collapsedComponents.has(o);t.style.display=r?"block":"none";let a=e.querySelector(".component-toggle");a&&(a.textContent=r?"\u25BC":"\u25B6"),e.onmousedown=()=>{r=!r,t.style.display=r?"block":"none",a&&(a.textContent=r?"\u25BC":"\u25B6"),r?this.collapsedComponents.delete(o):this.collapsedComponents.add(o),window.dispatchEvent(new CustomEvent("component-collapse-changed"))}}getCollapsedComponents(){return this.collapsedComponents}setCollapsedComponents(e){this.collapsedComponents=new Set(e)}};var qt=class{constructor(){this.propertiesContent=document.getElementById("propertiesContent"),this.addComponentContainer=document.getElementById("addComponentContainer"),this.addComponentBtn=document.getElementById("addComponentBtn"),this.selectedEntityNameElement=document.getElementById("selectedEntityName"),this.collapseAllBtn=document.getElementById("collapseAllBtn"),this.loadSettingsBtn=document.getElementById("loadSettingsBtn"),this.showLoadSettings=!1,this.isRendering=!1,this.pendingRender=null,this.initializeModules(),this.setupEventListeners()}async initializeModules(){this.utils=V,this.changeManager=C,this.changeManager.changeTypes=wn,this.scaleLockHandler=new At,this.transformHandler=new Dt,this.propertyUpdater=new Ot,this.propertyInputRenderer=new zt(V,C,this.scaleLockHandler),this.entityRenderer=new Ht(this.propertyInputRenderer,this.transformHandler,this.scaleLockHandler,V,C),this.componentRenderer=new Ut(this.propertyInputRenderer,V,C),this.scriptRunnerRenderer=new jt(this.propertyInputRenderer,V,C),this.scriptAssetRenderer=new Vt(this.propertyInputRenderer,V,C)}setupEventListeners(){this.addComponentBtn?.addEventListener("mousedown",()=>{document.dispatchEvent(new CustomEvent("showComponentMenu",{detail:{entityId:SM.selectedEntity}}))}),this.collapseAllBtn?.addEventListener("mousedown",()=>{this.collapseAllComponents()}),this.loadSettingsBtn?.addEventListener("mousedown",()=>{this.toggleLoadSettings()}),window.addEventListener("transform-mode-changed",()=>{SM.selectedEntity&&this.render(SM.selectedEntity)}),window.addEventListener("update-transform-display",()=>{this.updateTransform()}),window.addEventListener("component-reordered",()=>{SM.selectedEntity&&this.render(SM.selectedEntity)}),window.addEventListener("component-deleted",()=>{SM.selectedEntity&&this.render(SM.selectedEntity)}),window.addEventListener("monobehavior-file-changed",e=>{e.detail&&e.detail.entityId&&this.render(e.detail.entityId)}),window.addEventListener("component-collapse-changed",()=>{this.updateCollapseAllButtonVisibility()})}toggleLoadSettings(){this.showLoadSettings=!this.showLoadSettings,this.loadSettingsBtn&&(this.loadSettingsBtn.style.backgroundColor=this.showLoadSettings?"#4a90e2":"",this.loadSettingsBtn.style.color=this.showLoadSettings?"#fff":""),SM.selectedEntity&&this.render(SM.selectedEntity)}toggleTransformMode(){this.transformHandler.toggleMode(),SM.selectedEntity&&this.render(SM.selectedEntity)}collapseAllComponents(){let e=SM.getEntityById(SM.selectedEntity);!e||!e.components||(this.componentRenderer.collapseAll(SM.selectedEntity,e.components),e.components.forEach((t,n)=>{if(t.type==="ScriptRunner"){let i=`${SM.selectedEntity}_${t.type}_${n}`;this.scriptRunnerRenderer.collapsedComponents.add(i)}else if(t.type==="ScriptAsset"){let i=`${SM.selectedEntity}_${t.type}_${n}`;this.scriptAssetRenderer.collapsedComponents.add(i)}}),this.render(SM.selectedEntity))}updateCollapseAllButtonVisibility(){if(!this.collapseAllBtn)return;let e=SM.getEntityById(SM.selectedEntity,!1);if(!e||!e.components||e.components.length===0){this.collapseAllBtn.style.display="none";return}let t=e.components.some((n,i)=>{let s=`${SM.selectedEntity}_${n.type}_${i}`;return n.type==="ScriptRunner"?!this.scriptRunnerRenderer.collapsedComponents.has(s):n.type==="ScriptAsset"?!this.scriptAssetRenderer.collapsedComponents.has(s):!this.componentRenderer.collapsedComponents.has(s)});this.collapseAllBtn.style.display=t?"block":"none"}async render(e=null){let t=e||SM.selectedEntity;if(this.isRendering){this.pendingRender=t;return}this.isRendering=!0;try{await this._doRender(t)}finally{if(this.isRendering=!1,this.pendingRender!==null){let n=this.pendingRender;this.pendingRender=null,await this.render(n)}}}async _doRender(e){if(!this.propertiesContent)return;let t=e?SM.getEntityById(e):null;if(!t){this.renderEmptyState();return}this.selectedEntityNameElement&&(this.selectedEntityNameElement.textContent=`Properties - ${t.name}`);let n=this.propertiesContent.scrollTop;this.propertiesContent.innerHTML="";let i=await this.entityRenderer.createEntityPropertiesSection(t,this.showLoadSettings);i&&this.propertiesContent.appendChild(i),t.components&&t.components.length>0&&t.components.forEach((s,o)=>{let r;s.type==="ScriptRunner"?r=this.scriptRunnerRenderer.renderScriptRunnerComponent(s,o,t.components.length,SM.selectedEntity):s.type==="ScriptAsset"?r=this.scriptAssetRenderer.renderScriptAssetComponent(s,o,t.components.length,SM.selectedEntity):r=this.componentRenderer.renderComponent(s,o,t.components.length,SM.selectedEntity,this.showLoadSettings),r&&this.propertiesContent.appendChild(r)}),this.addComponentContainer&&(this.addComponentContainer.style.display="block"),this.updateCollapseAllButtonVisibility(),this.propertiesContent.scrollTop=n,window.dispatchEvent(new CustomEvent("ui-rendered",{detail:{id:"propertiesPanel"}}))}renderEmptyState(){this.propertiesContent.innerHTML=`
            <div class="empty-state">
                <h3>No entity selected</h3>
                <p>Select a entity from the hierarchy to view its properties</p>
            </div>
        `,this.addComponentContainer&&(this.addComponentContainer.style.display="none"),this.selectedEntityNameElement&&(this.selectedEntityNameElement.textContent="Properties"),this.collapseAllBtn&&(this.collapseAllBtn.style.display="none")}updateTransform(){let e=SM.getSelectedEntity();if(!e)return;let t=this.propertiesContent.querySelector(".entity-section");t&&this.transformHandler.updateTransformInputs(t,e,this.utils)}updateProperty(e,t,n){this.propertyUpdater.updateProperty(e,t,n,this.utils)}handleVector3Change(e,t,n,i){let s=SM.getEntityById(SM.selectedEntity);if(!s)return;let o=s.components.find(l=>l.id===e);if(!o||!o.properties[t])return;let r=o.properties[t],a=parseFloat(i);if(!isNaN(a)){let l=this.utils.deepClone?this.utils.deepClone(r):{...r};r[n]=a;let{ComponentPropertyChange:d}=this.changeManager.changeTypes||{};if(d){let p=new d(e,t,r,{source:"ui",oldValue:l});this.changeManager.applyChange(p)}}}async deleteComponent(e,t){let n=SM.selectedEntity;if(!n)return;let{RemoveComponentChange:i}=this.changeManager.changeTypes||{};if(i){let s=new i(n,e,{source:"ui"});this.changeManager.applyChange(s)}setTimeout(()=>this.render(n),100)}moveComponentUp(e){if(e<=0)return;let{ReorderComponentChange:t}=this.changeManager.changeTypes||{};if(t){let n=new t(SM.selectedEntity,e,e-1,{source:"ui"});this.changeManager.applyChange(n)}setTimeout(()=>this.render(SM.selectedEntity),100)}moveComponentDown(e,t){if(e>=t-1)return;let{ReorderComponentChange:n}=this.changeManager.changeTypes||{};if(n){let i=new n(SM.selectedEntity,e,e+1,{source:"ui"});this.changeManager.applyChange(i)}setTimeout(()=>this.render(SM.selectedEntity),100)}};var Wt=class{constructor(){this.localCache=null,this.networkCache=null,this.divergences=new Map,this.lastComparisonTime=0,this.comparisonThrottle=500}async compare(){let e=Date.now();if(e-this.lastComparisonTime<this.comparisonThrottle)return this.divergences;this.lastComparisonTime=e;try{this.localCache=entities(),this.networkCache=networking.getSpaceHeir(),this.divergences.clear();let t=this.buildPathMap(this.localCache,"local"),n=this.buildPathMap(this.networkCache,"network");return this.compareHierarchies(t,n),this.compareComponentProperties(t,n),this.divergences}catch(t){return console.error("Error comparing hierarchies:",t),this.divergences}}buildPathMap(e,t){let n=new Map,i=(s,o="")=>{let r=o?`${o}/${s.name}`:s.name;n.set(r,{name:s.name,active:s.active,layer:s.layer,position:s.position?{...s.position}:null,rotation:s.rotation?{...s.rotation}:null,scale:s.scale?{...s.scale}:null,localPosition:s.localPosition?{...s.localPosition}:null,localRotation:s.localRotation?{...s.localRotation}:null,localScale:s.localScale?{...s.localScale}:null,children:s.children?s.children.map(a=>a.name):[],components:this.extractComponents(s.components,t),source:t}),s.children&&Array.isArray(s.children)&&s.children.forEach(a=>i(a,r))};return Array.isArray(e)?e.forEach(s=>i(s)):e&&e.roots?e.roots.forEach(s=>i(s)):e&&i(e),n}extractComponents(e,t="local"){return!e||!Array.isArray(e)?[]:e.map(n=>{if(t==="network"&&typeof n=="string"){let i=n.match(/^([A-Za-z]+)(?:_\d+)?$/),s=i?i[1]:n,o=this.getNetworkComponentProperties(n);return{type:s,id:n,properties:o}}if(typeof n=="string")return{type:n};if(n&&n.constructor){let i=n.constructor.name;i.endsWith("Component")&&(i=i.replace(/Component$/,""));let s=this.extractLocalComponentProperties(n);return{type:i,id:n.id||null,properties:s}}else if(n&&n.type)return{type:n.type};return{type:"unknown"}})}compareHierarchies(e,t){new Set([...e.keys(),...t.keys()]).forEach(i=>{let s=e.get(i),o=t.get(i),r={path:i,types:new Set,details:{},severity:"low"};!s&&o?(r.types.add("missing-local"),r.severity="high",r.details.existence="Only exists in network"):s&&!o?(r.types.add("missing-network"),r.severity="high",r.details.existence="Only exists locally"):s&&o&&this.compareProperties(s,o,r),r.types.size>0&&this.divergences.set(i,r)}),this.propagateChildDivergences()}compareProperties(e,t,n){e.active!==t.active&&(n.types.add("property-active"),n.details.active={local:e.active,network:t.active},n.severity="medium"),e.layer!==t.layer&&(n.types.add("property-layer"),n.details.layer={local:e.layer,network:t.layer},n.severity="medium"),this.compareVector3(e.position,t.position,"position",n),this.compareQuaternion(e.rotation,t.rotation,"rotation",n),this.compareVector3(e.scale,t.scale,"scale",n),this.compareVector3(e.localPosition,t.localPosition,"localPosition",n),this.compareQuaternion(e.localRotation,t.localRotation,"localRotation",n),this.compareVector3(e.localScale,t.localScale,"localScale",n);let i=new Set(e.children),s=new Set(t.children);(e.children.length!==t.children.length||![...i].every(o=>s.has(o)))&&(n.types.add("hierarchy-children"),n.details.children={localCount:e.children.length,networkCount:t.children.length,onlyInLocal:[...i].filter(o=>!s.has(o)),onlyInNetwork:[...s].filter(o=>!i.has(o))}),this.compareComponents(e.components,t.components,n)}compareVector3(e,t,n,i,s=.001){!e&&!t||(!e||!t||Math.abs((e.x||0)-(t.x||0))>s||Math.abs((e.y||0)-(t.y||0))>s||Math.abs((e.z||0)-(t.z||0))>s)&&(i.types.add(`property-${n}`),i.details[n]={local:e?{x:e.x,y:e.y,z:e.z}:null,network:t?{x:t.x,y:t.y,z:t.z}:null})}compareQuaternion(e,t,n,i,s=.001){!e&&!t||(!e||!t||Math.abs((e.x||0)-(t.x||0))>s||Math.abs((e.y||0)-(t.y||0))>s||Math.abs((e.z||0)-(t.z||0))>s||Math.abs((e.w||1)-(t.w||1))>s)&&(i.types.add(`property-${n}`),i.details[n]={local:e?{x:e.x,y:e.y,z:e.z,w:e.w}:null,network:t?{x:t.x,y:t.y,z:t.z,w:t.w}:null})}compareComponents(e,t,n){let i=new Set(e.map(o=>o.type)),s=new Set(t.map(o=>o.type));(e.length!==t.length||![...i].every(o=>s.has(o)))&&(n.types.add("components"),n.details.components={localCount:e.length,networkCount:t.length,localTypes:[...i],networkTypes:[...s],onlyInLocal:[...i].filter(o=>!s.has(o)),onlyInNetwork:[...s].filter(o=>!i.has(o))},n.severity="medium")}propagateChildDivergences(){let e=new Set;this.divergences.forEach((t,n)=>{let i=n.lastIndexOf("/");if(i>0){let s=n.substring(0,i);e.add(s)}}),e.forEach(t=>{let n=this.divergences.get(t);n?n.types.add("has-child-divergences"):this.divergences.set(t,{path:t,types:new Set(["has-child-divergences"]),details:{},severity:"info"})})}getSummary(){let e={total:this.divergences.size,byType:{},bySeverity:{high:0,medium:0,low:0,info:0}};return this.divergences.forEach(t=>{t.types.forEach(n=>{e.byType[n]=(e.byType[n]||0)+1}),e.bySeverity[t.severity]++}),e}getEntityStatus(e){let t=this.divergences.get(e);return t?t.types.has("missing-local")||t.types.has("missing-network")?"missing":t.types.has("property-active")||t.types.has("property-layer")||t.types.has("component-properties")?"error":(t.types.has("has-child-divergences"),"warning"):"synced"}getNetworkComponentProperties(e){if(!networking.spaceState)return{};let t=networking.spaceState,n={},i=`__${e}:`;return Object.keys(networking.spaceState).forEach(s=>{if(s.startsWith(i)){let o=s.substring(i.length),r=networking.spaceState[s];n[o]=g?g(r):r}}),n}extractLocalComponentProperties(e){let t={};if(e.properties&&typeof e.properties=="object")return Object.keys(e.properties).forEach(i=>{t[i]=e.properties[i]}),t;if(e.id&&window.SM&&window.SM.scene&&window.SM.scene.components){let i=window.SM.scene.components[e.id];if(i)return Object.keys(i).forEach(s=>{if(s.startsWith("_")){let o=s.substring(1);t[o]=i[s]}}),t}return["color","texture","shaderName","generateMipMaps","side","width","height","depth","radius","isTrigger","center","size","mass","drag","angularDrag","useGravity","isKinematic","attachmentPoint","uid"].forEach(i=>{if(e[i]!==void 0)t[i]=e[i];else if(e["_"+i]!==void 0)t[i]=e["_"+i];else if(e.Get&&typeof e.Get=="function")try{let s=e.Get(i);s!==void 0&&(t[i]=s)}catch{}}),t}compareComponentProperties(e,t){e.forEach((n,i)=>{let s=t.get(i);if(!s)return;let o=this.divergences.get(i);if(o||(o={path:i,types:new Set,details:{},severity:"low"}),n.components&&s.components){let r=[];n.components.forEach(a=>{let l=s.components.find(d=>d.id===a.id||d.type===a.type&&d.id&&a.id&&d.id.split("_")[0]===a.type);if(l&&a.properties&&l.properties){let d=this.compareComponentPropertyValues(a.properties,l.properties);Object.keys(d).length>0&&r.push({componentId:a.id||l.id,type:a.type,differences:d})}}),s.components.forEach(a=>{if(!n.components.find(d=>d.id===a.id||d.type===a.type&&d.id&&a.id&&a.id.split("_")[0]===d.type)&&a.properties&&Object.keys(a.properties).length>0){let d={};Object.keys(a.properties).forEach(p=>{d[p]={local:void 0,network:a.properties[p]}}),r.push({componentId:a.id,type:a.type,differences:d,missingLocally:!0})}}),r.length>0&&(o.types.add("component-properties"),o.details.componentProperties=r,o.severity="medium",this.divergences.set(i,o))}})}compareComponentPropertyValues(e,t){let n={};return new Set([...Object.keys(e),...Object.keys(t)]).forEach(s=>{let o=e[s],r=t[s];if(!(o===void 0&&r===void 0))if(r!==void 0&&o===void 0)n[s]={local:o,network:r};else{if(o!==void 0&&r===void 0)return;this.areValuesEqual(o,r)||(n[s]={local:o,network:r})}}),n}areValuesEqual(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(typeof e=="object"&&typeof t=="object"){let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let s of n)if(!this.areValuesEqual(e[s],t[s]))return!1;return!0}return typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<.001:!1}};var Jt=class{constructor(){this.editingProps=new Map,this.pinnedProps=new Set,this.popupWindow=null,this.isPopupOpen=!1,this.popupType=null,this.isDragging=!1,this.isResizing=!1,this.dragOffset={x:0,y:0},this.resizeStartPos={x:0,y:0,width:0,height:0},this.renders=0,this.renderOrigins={},this.viewMode="flat",this.syncComparator=new Wt,this.expandedNodes=new Set,this.showAllInline=!1,this.searchQuery="",this.propertyFilters=new Set(["active","layer","position","rotation","scale","localPosition","localRotation","localScale","components","children"]),this.varsCache={},this.listeners=[],this.loadPinnedProps(),this.loadViewPreferences(),this.setupFirebaseListeners(),this.setupEventListeners(),this.setupCollapsible(),this.addPopupButtons(),this.render("spaceprop:init")}addPopupButtons(){setTimeout(()=>{let e=document.querySelector("#publicPropsSection"),t=document.querySelector("#protectedPropsSection");if(e){if(!e.querySelector(".popup-btn")){let n=document.createElement("button");n.className="popup-btn",n.innerHTML="\u26F6",n.title="Open in popup window",n.onmousedown=i=>{i.stopPropagation(),this.togglePopup("public")},e.appendChild(n)}if(!e.querySelector(".render-count")){let n=document.createElement("span");n.className="render-count",n.title="Render calls",n.style.cssText="margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;",n.innerHTML=`R: <span id="publicPropsRenderCount">${this.renders}</span>`,e.appendChild(n)}if(!e.querySelector(".show-all-toggle")){let n=document.createElement("button");n.className="show-all-toggle",n.style.cssText="margin-left: 10px; font-size: 12px; padding: 2px 8px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;",n.innerHTML=this.showAllInline?"Show Pinned Only":"Show All",n.title=this.showAllInline?"Show only pinned properties":"Show all properties",n.onmousedown=i=>{i.stopPropagation(),this.showAllInline=!this.showAllInline,n.innerHTML=this.showAllInline?"Show Pinned Only":"Show All",n.title=this.showAllInline?"Show only pinned properties":"Show all properties";let s=document.querySelector("#protectedPropsSection .show-all-toggle");s&&(s.innerHTML=n.innerHTML,s.title=n.title),this.render("spaceprop:showAllToggle")},e.appendChild(n)}}if(t){if(!t.querySelector(".popup-btn")){let n=document.createElement("button");n.className="popup-btn",n.innerHTML="\u26F6",n.title="Open in popup window",n.onmousedown=i=>{i.stopPropagation(),this.togglePopup("protected")},t.appendChild(n)}if(!t.querySelector(".render-count")){let n=document.createElement("span");n.className="render-count",n.title="Render calls",n.style.cssText="margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;",n.innerHTML=`R: <span id="protectedPropsRenderCount">${this.renders}</span>`,t.appendChild(n)}if(!t.querySelector(".show-all-toggle")){let n=document.createElement("button");n.className="show-all-toggle",n.style.cssText="margin-left: 10px; font-size: 12px; padding: 2px 8px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;",n.innerHTML=this.showAllInline?"Show Pinned Only":"Show All",n.title=this.showAllInline?"Show only pinned properties":"Show all properties",n.onmousedown=i=>{i.stopPropagation(),this.showAllInline=!this.showAllInline,n.innerHTML=this.showAllInline?"Show Pinned Only":"Show All",n.title=this.showAllInline?"Show only pinned properties":"Show all properties";let s=document.querySelector("#publicPropsSection .show-all-toggle");s&&(s.innerHTML=n.innerHTML,s.title=n.title),this.render("spaceprop:showAllToggle2")},t.appendChild(n)}}},100)}togglePopup(e){this.isPopupOpen&&this.popupType===e?this.closePopup():this.isPopupOpen?(this.closePopup(),this.openPopup(e)):this.openPopup(e)}openPopup(e){this.popupType=e;let t=document.getElementById("spacePropsContent");t&&(t.style.display="none"),this.createPopupWindow(e),this.isPopupOpen=!0,this.render("spaceprop:openPopup")}closePopup(){this.popupWindow&&this.popupWindow.parentNode&&this.popupWindow.remove(),this.popupWindow=null,this.isPopupOpen=!1,this.popupType=null;let e=document.getElementById("spacePropsContent");e&&(e.style.display=""),this.render("spaceprop:closePopup"),this.addPopupButtons()}createPropertyFilterButtons(){return["active","layer","position","rotation","scale","localPosition","localRotation","localScale","components","children"].map(t=>{let n=this.propertyFilters.has(t);return`
                    <button class="property-filter-btn ${n?"active":""}"
                            data-property="${t}"
                            style="padding: 4px 10px;
                                   border-radius: 4px;
                                   border: 1px solid ${n?"#3b82c4":"#555"};
                                   background: ${n?"#3b82c4":"#2a2a2a"};
                                   color: ${n?"white":"#888"};
                                   cursor: pointer;
                                   font-size: 12px;
                                   transition: all 0.2s;">
                        ${t}
                    </button>`}).join("")}createPopupWindow(e){this.popupWindow&&this.popupWindow.remove();let t=e==="public",n=t?"Public Properties":"Protected Properties",i=t?"public":"protected",s=t?"Public":"Protected";this.popupWindow=document.createElement("div"),this.popupWindow.id="space-props-popup",this.popupWindow.className="space-props-popup",this.popupWindow.innerHTML=`
                <div class="popup-header">
                    <span class="popup-title">${n}</span>
                    <div class="popup-controls">
                        <button class="view-toggle-btn ${this.viewMode==="flat"?"active":""}" data-mode="flat" title="Flat view">
                            <span>\u{1F4CB}</span> Flat
                        </button>
                        <button class="view-toggle-btn ${this.viewMode==="struct"?"active":""}" data-mode="struct" title="Structured view">
                            <span>\u{1F333}</span> Struct
                        </button>
                        <button class="view-toggle-btn ${this.viewMode==="sync"?"active":""}" data-mode="sync" title="Sync Status view">
                            <span>\u{1F504}</span> Sync Status
                        </button>
                        <button class="popup-close" title="Close">&times;</button>
                    </div>
                </div>
                <div class="popup-content">
                    <div class="space-props-content-popup">
                        <div class="space-props-section">
                            <div class="space-props-header">
                                <h3>${s} Properties</h3>
                                <span class="props-count" id="${i}PropsCountPopup">0</span>
                                <span class="render-count" style="margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;" title="Render calls">R: <span id="SpacePropsRenderCount">${this.renders}</span></span>
                                <button class="refresh-popup-btn" id="refreshPopupBtn" style="margin-left: 8px; font-size: 12px; padding: 2px 6px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;" title="Refresh all values">\u{1F504}</button>
                            </div>
                            <div class="search-bar-container" id="searchBarContainer" style="display: ${this.viewMode==="flat"?"block":"none"}; padding: 10px; border-bottom: 1px solid #333;">
                                <input type="text"
                                    id="propSearchInput"
                                    class="prop-search-input"
                                    placeholder="\u{1F50D} Search properties..."
                                    value="${this.searchQuery}"
                                    style="width: 100%; padding: 8px 12px; background: #2a2a2a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; font-size: 14px;">
                            </div>
                            <div class="property-filters-container" id="propertyFiltersContainer" style="display: ${this.viewMode==="struct"||this.viewMode==="sync"?"block":"none"}; padding: 10px; border-bottom: 1px solid #333;">
                                <div style="font-size: 11px; color: #888; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px;">Show Properties:</div>
                                <div class="property-filter-buttons" id="propertyFilterButtons" style="display: flex; flex-wrap: wrap; gap: 6px;">
                                    ${this.createPropertyFilterButtons()}
                                </div>
                            </div>
                            <div class="props-list" id="${i}PropsListPopup">
                                <div class="empty-props">No ${i} properties</div>
                            </div>
                            <div class="add-prop-container">
                                <input type="text" id="add${s}KeyPopup" class="prop-input" placeholder="Key">
                                <input type="text" id="add${s}ValuePopup" class="prop-input" placeholder="Value">
                                <button onclick="window.spacePropsPanel.add${s}PropPopup()" class="add-prop-button">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="popup-resize-handle"></div>
            `,this.popupWindow.style.left="50%",this.popupWindow.style.top="50%",this.popupWindow.style.transform="translate(-50%, -50%)",this.popupWindow.style.width="500px",this.popupWindow.style.height="400px",document.body.appendChild(this.popupWindow),this.setupPopupEventListeners(),this.injectStructViewStyles()}setupPopupEventListeners(){let e=this.popupWindow.querySelector(".popup-header"),t=this.popupWindow.querySelector(".popup-close"),n=this.popupWindow.querySelector(".popup-resize-handle"),i=this.popupWindow.querySelectorAll(".view-toggle-btn");t.addEventListener("click",a=>{a.stopPropagation(),this.closePopup()}),i.forEach(a=>{a.addEventListener("click",l=>{l.stopPropagation();let d=a.dataset.mode;if(d!==this.viewMode){this.viewMode=d,this.saveViewPreferences(),i.forEach(u=>u.classList.toggle("active",u.dataset.mode===d));let p=this.popupWindow.querySelector("#searchBarContainer");p&&(p.style.display=d==="flat"?"block":"none");let h=this.popupWindow.querySelector("#propertyFiltersContainer");if(h&&(h.style.display=d==="struct"||d==="sync"?"block":"none"),d==="struct"){this.searchQuery="";let u=this.popupWindow.querySelector("#propSearchInput");u&&(u.value="")}this.render("spaceprop:viewModeChanged")}})});let s=this.popupWindow.querySelector("#propSearchInput");s&&(s.addEventListener("input",a=>{this.searchQuery=a.target.value.toLowerCase(),this.render("spaceprop:searchInputChanged")}),s.addEventListener("keydown",a=>{a.key==="Escape"&&(this.searchQuery="",s.value="",this.render("spaceprop:searchInputCleared"))}));let o=this.popupWindow.querySelector("#refreshPopupBtn");if(o&&o.addEventListener("click",a=>{a.stopPropagation(),this.fullRefresh()}),this.popupWindow.querySelectorAll(".property-filter-btn").forEach(a=>{a.addEventListener("click",l=>{l.stopPropagation();let d=a.dataset.property;this.propertyFilters.has(d)?(this.propertyFilters.delete(d),a.classList.remove("active"),a.style.background="#2a2a2a",a.style.borderColor="#555",a.style.color="#888"):(this.propertyFilters.add(d),a.classList.add("active"),a.style.background="#3b82c4",a.style.borderColor="#3b82c4",a.style.color="white"),this.saveViewPreferences(),this.render("spaceprop:propertyFilterChanged")})}),e.addEventListener("mousedown",a=>{if(a.target.classList.contains("popup-close")||a.target.classList.contains("view-toggle-btn")||a.target.closest(".view-toggle-btn"))return;this.isDragging=!0;let l=this.popupWindow.getBoundingClientRect();this.dragOffset.x=a.clientX-l.left,this.dragOffset.y=a.clientY-l.top,this.popupWindow.style.transform="none",e.style.cursor="grabbing"}),n.addEventListener("mousedown",a=>{this.isResizing=!0;let l=this.popupWindow.getBoundingClientRect();this.resizeStartPos={x:a.clientX,y:a.clientY,width:l.width,height:l.height},a.preventDefault()}),document.addEventListener("mousemove",a=>{if(this.isDragging&&this.popupWindow){let l=a.clientX-this.dragOffset.x,d=a.clientY-this.dragOffset.y;this.popupWindow.style.left=`${l}px`,this.popupWindow.style.top=`${d}px`}else if(this.isResizing&&this.popupWindow){let l=a.clientX-this.resizeStartPos.x,d=a.clientY-this.resizeStartPos.y,p=Math.max(400,this.resizeStartPos.width+l),h=Math.max(300,this.resizeStartPos.height+d);this.popupWindow.style.width=`${p}px`,this.popupWindow.style.height=`${h}px`}}),document.addEventListener("mouseup",()=>{if(this.isDragging){this.isDragging=!1;let a=this.popupWindow?.querySelector(".popup-header");a&&(a.style.cursor="grab")}this.isResizing&&(this.isResizing=!1)}),this.popupType==="public"){let a=this.popupWindow.querySelector("#addPublicKeyPopup"),l=this.popupWindow.querySelector("#addPublicValuePopup");if(a&&l){let d=()=>this.addPublicPropPopup();a.addEventListener("keypress",p=>{p.key==="Enter"&&d()}),l.addEventListener("keypress",p=>{p.key==="Enter"&&d()})}}else if(this.popupType==="protected"){let a=this.popupWindow.querySelector("#addProtectedKeyPopup"),l=this.popupWindow.querySelector("#addProtectedValuePopup");if(a&&l){let d=()=>this.addProtectedPropPopup();a.addEventListener("keypress",p=>{p.key==="Enter"&&d()}),l.addEventListener("keypress",p=>{p.key==="Enter"&&d()})}}}setupCollapsible(){let e=document.getElementById("spacePropsCollapseBtn"),t=document.getElementById("spacePropsContent");e&&t&&(localStorage.getItem("spacePropsCollapsed")==="true"&&(t.classList.add("collapsed"),e.classList.add("collapsed")),e.addEventListener("click",()=>{t.classList.contains("collapsed")?(t.classList.remove("collapsed"),e.classList.remove("collapsed"),localStorage.setItem("spacePropsCollapsed","false")):(t.classList.add("collapsed"),e.classList.add("collapsed"),localStorage.setItem("spacePropsCollapsed","true"))}))}async setupFirebaseListeners(){if(!net.db){await new Promise(e=>setTimeout(e,100)),await this.setupFirebaseListeners();return}net.onVarsChange(e=>{this.varsCache=e.val()||{},this.renderFromCache()}),this.listeners.push(net.onVarAdded(e=>{this.handlePropertyAdded(e.key,e.val())})),this.listeners.push(net.onVarChanged(e=>{this.handlePropertyChanged(e.key,e.val())})),this.listeners.push(net.onVarRemoved(e=>{this.handlePropertyRemoved(e.key)}))}handlePropertyAdded(e,t){this.varsCache[e]=t,this.smartRender(e,e.startsWith("_"))}handlePropertyChanged(e,t){this.varsCache[e]=t,this.smartRender(e,e.startsWith("_"))}handlePropertyRemoved(e){delete this.varsCache[e],this.smartRender(e,e.startsWith("_"))}renderFromCache(){let{public:e,protected:t}=this.categorizeProperties();this.isPopupOpen&&this.popupWindow?this.viewMode==="struct"?this.popupType==="public"?this.renderStructView("public",this.varsCache,!0):this.popupType==="protected"&&this.renderStructView("protected",this.varsCache,!0):this.viewMode==="sync"?this.popupType==="public"?this.renderSyncView("public",this.varsCache,!0):this.popupType==="protected"&&this.renderSyncView("protected",this.varsCache,!0):this.popupType==="public"?this.renderPropsList("public",this.varsCache,!0):this.popupType==="protected"&&this.renderPropsList("protected",this.varsCache,!0):(this.renderPropsList("public",this.varsCache,!1),this.renderPropsList("protected",this.varsCache,!1))}categorizeProperties(){return net.categorizeVars(this.varsCache)}setupEventListeners(){let e=document.getElementById("addPublicKey"),t=document.getElementById("addPublicValue"),n=document.getElementById("addProtectedKey"),i=document.getElementById("addProtectedValue"),s=document.getElementById("refreshSpacePropsBtn");if(s&&s.addEventListener("mousedown",()=>{this.render("spaceprop:refreshSpacePropsBtn")}),e&&t){let o=()=>this.addPublicProp();e.addEventListener("keypress",r=>{r.key==="Enter"&&o()}),t.addEventListener("keypress",r=>{r.key==="Enter"&&o()})}if(n&&i){let o=()=>this.addProtectedProp();n.addEventListener("keypress",r=>{r.key==="Enter"&&o()}),i.addEventListener("keypress",r=>{r.key==="Enter"&&o()})}}shouldRenderForProperty(e,t=!1){if(this.isPopupOpen||this.showAllInline)return!0;let i=`${t?"protected":"public"}_${e}`;return this.pinnedProps.has(i)}smartRender(e=null,t=!1){if(!e){this.render("spaceprop:smartRender");return}this.shouldRenderForProperty(e,t)&&this.render("spaceprop:smartRender2")}fullRefresh(){this.editingProps.clear(),this.render("spaceprop:fullRefresh");let e=this.popupWindow?.querySelector("#refreshPopupBtn");if(e){let t=e.style.color;e.style.color="#3b82c4",setTimeout(()=>{e.style.color=t},300)}}render(e){this.renders++,e=e||"unknown",this.renderOrigins[e]=(this.renderOrigins[e]||0)+1,this.updateRenderCount();let t=this.varsCache;this.isPopupOpen&&this.popupWindow?this.viewMode==="struct"?this.popupType==="public"?this.renderStructView("public",t,!0):this.popupType==="protected"&&this.renderStructView("protected",t,!0):this.viewMode==="sync"?this.popupType==="public"?this.renderSyncView("public",t,!0):this.popupType==="protected"&&this.renderSyncView("protected",t,!0):this.popupType==="public"?this.renderPropsList("public",t,!0):this.popupType==="protected"&&this.renderPropsList("protected",t,!0):(this.renderPropsList("public",t,!1),this.renderPropsList("protected",t,!1))}updateRenderCount(){if(this.popupWindow){let n=this.popupWindow.querySelector("#SpacePropsRenderCount");n&&(n.textContent=this.renders)}let e=document.querySelector("#publicPropsRenderCount");e&&(e.textContent=this.renders);let t=document.querySelector("#protectedPropsRenderCount");t&&(t.textContent=this.renders)}renderPropsList(e,t,n=!1){let i=n?"Popup":"",s=document.getElementById(`${e}PropsList${i}`),o=document.getElementById(`${e}PropsCount${i}`);if(!s||!o)return;let r=Object.keys(t),a=r;if(!n&&!this.showAllInline&&(a=r.filter(d=>{let p=`${e}_${d}`;return this.pinnedProps.has(p)})),n&&this.searchQuery&&this.viewMode==="flat"&&(a=a.filter(d=>d.toLowerCase().includes(this.searchQuery))),!n&&!this.showAllInline?o.textContent=`${a.length} pinned / ${r.length} total`:n&&this.searchQuery&&this.viewMode==="flat"?o.textContent=`${a.length} / ${r.length}`:o.textContent=r.length,a.length===0){!n&&!this.showAllInline&&r.length>0?s.innerHTML=`<div class="empty-props">No pinned ${e} properties<br><small style="opacity:0.7">${r.length} total available</small></div>`:n&&this.searchQuery&&this.viewMode==="flat"?s.innerHTML=`<div class="empty-props">No properties matching "<strong>${this.searchQuery}</strong>"<br><small style="opacity:0.7">${r.length} total properties</small></div>`:s.innerHTML=`<div class="empty-props">No ${e} properties</div>`;return}s.innerHTML="",a.sort((d,p)=>{let h=`${e}_${d}`,u=`${e}_${p}`,y=this.pinnedProps.has(h),m=this.pinnedProps.has(u);return y&&!m?-1:!y&&m?1:d.localeCompare(p)}).forEach(d=>{let p=t[d];if(p==="null"||p==="undefined")return;let h=this.createPropItem(e,d,p,n);s.appendChild(h)})}createPropItem(e,t,n,i=!1){let s=document.createElement("div"),o=`${e}_${t}`,r=this.pinnedProps.has(o);s.className=r?"prop-item pinned":"prop-item";let a=document.createElement("button");a.className=r?"prop-pin-button pinned":"prop-pin-button",a.innerHTML="\u{1F4CC}",a.title=r?"Unpin":"Pin to top",a.onmousedown=h=>{h.stopPropagation(),this.togglePinProp(e,t)};let l=document.createElement("div");l.className="prop-key",l.textContent=t,l.title=t,l.style.marginLeft="4px";let d=document.createElement("div");d.className="prop-value";let p=this.editingProps.has(`${e}_${t}`);if(cn(n)){let h=Et(n),u=document.createElement("span");u.className="prop-value-display quaternion-euler",u.textContent=`(${vt(h.x,2)}, ${vt(h.y,2)}, ${vt(h.z,2)})`,u.title="Rotation in Euler angles (read-only)",d.appendChild(u);let y=document.createElement("div");y.className="prop-actions";let m=document.createElement("button");m.className="prop-button delete",m.innerHTML="\xD7",m.title="Delete",m.onmousedown=()=>this.deleteProp(e,t),y.appendChild(m),d.appendChild(y)}else if(bt(n)){let h=document.createElement("div");h.className="vector-group",["x","y","z"].forEach(m=>{let f=document.createElement("input");f.type="number",f.className="property-input number";let v=i?"_popup":"";f.id=`${e}_prop_${t}_${m}${v}`,f.value=n[m]||0,f.step="any",f.addEventListener("change",()=>{this.saveVector3Prop(e,t,i)}),f.addEventListener("keydown",S=>{S.key==="Enter"&&(this.saveVector3Prop(e,t,i),S.preventDefault())});let b=document.createElement("span");b.className="vector-label",b.textContent=m.toUpperCase(),h.appendChild(b),h.appendChild(f)}),d.appendChild(h);let u=document.createElement("div");u.className="prop-actions";let y=document.createElement("button");y.className="prop-button delete",y.innerHTML="\xD7",y.title="Delete",y.onmousedown=()=>this.deleteProp(e,t),u.appendChild(y),d.appendChild(u)}else if(p){let h=document.createElement("input");h.type="text",h.className="prop-input";let u=i?"_popup":"";h.id=`${e}_prop_${t}${u}`,h.value=typeof n=="object"?JSON.stringify(n):n,h.addEventListener("keypress",v=>{this.handlePropKeyPress(v,e,t,i)}),d.appendChild(h);let y=document.createElement("div");y.className="prop-actions";let m=document.createElement("button");m.className="prop-button save",m.innerHTML="\u2713",m.title="Save",m.onmousedown=()=>this.saveProp(e,t,i);let f=document.createElement("button");f.className="prop-button",f.innerHTML="\xD7",f.title="Cancel",f.onmousedown=()=>this.cancelEditProp(e,t),y.appendChild(m),y.appendChild(f),d.appendChild(y)}else{let h=document.createElement("span");h.className="prop-value-display",typeof n=="object"?h.textContent=JSON.stringify(n):h.textContent=n,d.appendChild(h);let u=document.createElement("div");u.className="prop-actions";let y=document.createElement("button");y.className="prop-button",y.innerHTML="\u270E",y.title="Edit",y.onmousedown=()=>this.editProp(e,t,i);let m=document.createElement("button");m.className="prop-button delete",m.innerHTML="\xD7",m.title="Delete",m.onmousedown=()=>this.deleteProp(e,t),u.appendChild(y),u.appendChild(m),d.appendChild(u)}return s.appendChild(a),s.appendChild(l),s.appendChild(d),s}editProp(e,t,n=!1){this.editingProps.set(`${e}_${t}`,!0),this.render(),setTimeout(()=>{let i=this.varsCache[t],s=n?"_popup":"";if(bt(i)){let o=document.getElementById(`${e}_prop_${t}_x${s}`);o&&(o.dataset.input="propertyPanelEditProp",o.focus(),o.select())}else{let o=document.getElementById(`${e}_prop_${t}${s}`);o&&(o.dataset.input="propertyPanelEditProp",o.focus(),o.select())}},0)}saveProp(e,t,n=!1){let i=this.varsCache[t],s=n?"_popup":"";if(bt(i)){let o=document.getElementById(`${e}_prop_${t}_x${s}`),r=document.getElementById(`${e}_prop_${t}_y${s}`),a=document.getElementById(`${e}_prop_${t}_z${s}`);if(o&&r&&a){let l={x:parseFloat(o.value)||0,y:parseFloat(r.value)||0,z:parseFloat(a.value)||0},d=new D(t,l,e==="protected",{source:"ui"});C.applyChange(d)}}else{let o=document.getElementById(`${e}_prop_${t}${s}`);if(o){let r=this.parseValue(o.value),a=new D(t,r,e==="protected",{source:"ui"});C.applyChange(a)}}this.cancelEditProp(e,t)}cancelEditProp(e,t){this.editingProps.delete(`${e}_${t}`),this.smartRender(t,e==="protected")}cleanup(){this.listeners.forEach(e=>{net.removeListener(e)}),this.listeners=[],this.popupWindow&&!this.popupWindow.closed&&this.popupWindow.close()}viewScript(e,t){let n=this.varsCache[t],i=t.substring(1),s=document.createElement("div");s.className="script-view-modal",s.style.cssText=`
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 80%;
                max-width: 800px;
                height: 80%;
                background: #1e1e1e;
                border: 1px solid #444;
                border-radius: 8px;
                z-index: 10000;
                display: flex;
                flex-direction: column;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
            `;let o=document.createElement("div");o.style.cssText=`
                padding: 12px 16px;
                background: #2a2a2a;
                border-bottom: 1px solid #444;
                display: flex;
                justify-content: space-between;
                align-items: center;
            `,o.innerHTML=`
                <h3 style="margin: 0; color: #e0e0e0;">\u{1F4C4} ${i}</h3>
                <button onclick="this.closest('.script-view-modal').remove()" style="background: none; border: none; color: #888; cursor: pointer; font-size: 20px;">\xD7</button>
            `;let r=document.createElement("div");r.style.cssText=`
                flex: 1;
                overflow: auto;
                padding: 16px;
                font-family: 'Consolas', 'Monaco', monospace;
                font-size: 12px;
            `;let a=n.split(`
`),l=a.length.toString().length,d=document.createElement("pre");d.style.cssText="margin: 0; color: #888;",a.forEach((y,m)=>{let f=(m+1).toString().padStart(l," "),v=document.createElement("div");v.style.cssText="white-space: pre-wrap; word-break: break-word;",v.innerHTML=`<span style="color: #555; margin-right: 12px;">${f}</span><span style="color: #e0e0e0;">${this.escapeHtml(y)}</span>`,d.appendChild(v)}),r.appendChild(d);let p=document.createElement("div");p.style.cssText=`
                padding: 8px 16px;
                background: #2a2a2a;
                border-top: 1px solid #444;
                color: #888;
                font-size: 11px;
            `;let h=(n.length/1024).toFixed(1);p.textContent=`${a.length} lines \u2022 ${h} KB`,s.appendChild(o),s.appendChild(r),s.appendChild(p),document.body.appendChild(s);let u=y=>{y.key==="Escape"&&(s.remove(),document.removeEventListener("keydown",u))};document.addEventListener("keydown",u)}escapeHtml(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}async deleteProp(e,t){if(await M(`Are you sure you want to delete the ${e} property "${t}"?`)){let n=new D(t,void 0,e==="protected",{source:"ui"});await C.applyChange(n)}}async addPublicProp(){let e=document.getElementById("addPublicKey"),t=document.getElementById("addPublicValue");if(!e||!t)return;let n=e.value.trim(),i=this.parseValue(t.value);if(n){let s=new D(n,i,!1,{source:"ui"});await C.applyChange(s),e.value="",t.value=""}}async addPublicPropPopup(){let e=this.popupWindow?.querySelector("#addPublicKeyPopup"),t=this.popupWindow?.querySelector("#addPublicValuePopup");if(!e||!t)return;let n=e.value.trim(),i=this.parseValue(t.value);if(n){let s=new D(n,i,!1,{source:"ui"});await C.applyChange(s),e.value="",t.value=""}}async addProtectedProp(){let e=document.getElementById("addProtectedKey"),t=document.getElementById("addProtectedValue");if(!e||!t)return;let n=e.value.trim(),i=this.parseValue(t.value);if(n){let s=new D(n,i,!0,{source:"ui"});await C.applyChange(s),e.value="",t.value=""}}async addProtectedPropPopup(){let e=this.popupWindow?.querySelector("#addProtectedKeyPopup"),t=this.popupWindow?.querySelector("#addProtectedValuePopup");if(!e||!t)return;let n=e.value.trim(),i=this.parseValue(t.value);if(n){let s=new D(n,i,!0,{source:"ui"});await C.applyChange(s),e.value="",t.value=""}}parseValue(e){if(e=e.trim(),e.startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch{}let t=/^\(?\s*(-?\d*\.?\d+)\s*[,\s]\s*(-?\d*\.?\d+)\s*[,\s]\s*(-?\d*\.?\d+)\s*\)?$/,n=e.match(t);return n?{x:parseFloat(n[1]),y:parseFloat(n[2]),z:parseFloat(n[3])}:e==="true"?!0:e==="false"?!1:!isNaN(e)&&e!==""?parseFloat(e):e}saveVector3Prop(e,t,n=!1){let i=n?"_popup":"",s=document.getElementById(`${e}_prop_${t}_x${i}`),o=document.getElementById(`${e}_prop_${t}_y${i}`),r=document.getElementById(`${e}_prop_${t}_z${i}`);if(s&&o&&r){let a={x:parseFloat(s.value)||0,y:parseFloat(o.value)||0,z:parseFloat(r.value)||0},l=new D(t,a,e==="protected",{source:"ui"});C.applyChange(l)}}handlePropKeyPress(e,t,n,i=!1){e.key==="Enter"?this.saveProp(t,n,i):e.key==="Escape"&&this.cancelEditProp(t,n)}togglePinProp(e,t){let n=`${e}_${t}`;this.pinnedProps.has(n)?this.pinnedProps.delete(n):this.pinnedProps.add(n),this.savePinnedProps(),this.render()}savePinnedProps(){localStorage.setItem("spacePropsPinned",JSON.stringify([...this.pinnedProps]))}loadPinnedProps(){let e=localStorage.getItem("spacePropsPinned");if(e)try{let t=JSON.parse(e);this.pinnedProps=new Set(t)}catch{this.pinnedProps=new Set}}loadViewPreferences(){let e=localStorage.getItem("spacePropsViewMode");e&&(this.viewMode=e);let t=localStorage.getItem("spacePropsExpandedNodes");if(t)try{let i=JSON.parse(t);this.expandedNodes=new Set(i)}catch{this.expandedNodes=new Set}let n=localStorage.getItem("spacePropsPropertyFilters");if(n)try{let i=JSON.parse(n);Array.isArray(i)&&i.length>0&&(this.propertyFilters=new Set(i))}catch{}}saveViewPreferences(){localStorage.setItem("spacePropsViewMode",this.viewMode),localStorage.setItem("spacePropsExpandedNodes",JSON.stringify([...this.expandedNodes])),localStorage.setItem("spacePropsPropertyFilters",JSON.stringify([...this.propertyFilters]))}parseKeysToTree(e){let t={simple:{},scripts:{},entities:{},components:{}};for(let[n,i]of Object.entries(e))if(n.startsWith("#")){let s=n.substring(1);t.scripts[s]={content:i,size:i?i.length:0,lines:i?i.split(`
`).length:0,_originalKey:n}}else n.startsWith("$")?this.parseEntityProperty(t.entities,n,i):n.startsWith("__")?this.parseComponentProperty(t.components,n,i):t.simple[n]=i;return t}parseEntityProperty(e,t,n){let i=t.substring(1),s=i.lastIndexOf(":");if(s===-1)e[i]={_value:n,_originalKey:t,_type:"entity"};else{let o=i.substring(0,s),r=i.substring(s+1),a=o.split("/"),l=e;for(let d=0;d<a.length;d++){let p=a[d];l[p]||(l[p]={_properties:{},_children:{},_type:"entity",_path:a.slice(0,d+1).join("/")}),d<a.length-1?l=l[p]._children||(l[p]._children={}):(l[p]._properties=l[p]._properties||{},l[p]._properties[r]={value:n,originalKey:t})}}}parseComponentProperty(e,t,n){let i=t.substring(2),s=i.indexOf(":");if(s===-1)e[i]={_value:n,_originalKey:t,_type:"component"};else{let o=i.substring(0,s),r=i.substring(s+1),a=o.lastIndexOf("_"),l,d;a!==-1?(l=o.substring(0,a),d=o.substring(a+1)):(l=o,d="default"),e[l]||(e[l]={_type:"componentGroup",_instances:{}}),e[l]._instances[d]||(e[l]._instances[d]={_properties:{},_originalName:o}),e[l]._instances[d]._properties[r]={value:n,originalKey:t}}}renderStructView(e,t,n=!1){let i=n?"Popup":"",s=document.getElementById(`${e}PropsList${i}`),o=document.getElementById(`${e}PropsCount${i}`);if(!s||!o)return;let r=Object.keys(t);if(o.textContent=r.length,r.length===0){s.innerHTML=`<div class="empty-props">No ${e} properties</div>`;return}let a=this.parseKeysToTree(t);s.innerHTML="";let l=document.createElement("div");if(l.className="struct-tree",Object.keys(a.simple).length>0){let d=document.createElement("div");d.className="tree-section";let p=document.createElement("div");p.className="tree-section-header",p.innerHTML='<span class="section-icon">\u{1F4DD}</span> Simple Properties',d.appendChild(p);let h=document.createElement("div");h.className="tree-section-content";for(let[u,y]of Object.entries(a.simple)){let m=this.renderSimpleProperty(e,u,y,n);h.appendChild(m)}d.appendChild(h),l.appendChild(d)}if(Object.keys(a.scripts).length>0){let d=document.createElement("div");d.className="tree-section";let p=document.createElement("div");p.className="tree-section-header",p.innerHTML='<span class="section-icon">\u{1F4DC}</span> Scripts',d.appendChild(p);let h=document.createElement("div");h.className="tree-section-content";for(let[u,y]of Object.entries(a.scripts)){let m=this.renderScriptProperty(e,u,y,n);h.appendChild(m)}d.appendChild(h),l.appendChild(d)}if(Object.keys(a.entities).length>0){let d=document.createElement("div");d.className="tree-section";let p=document.createElement("div");p.className="tree-section-header",p.innerHTML='<span class="section-icon">\u{1F4E6}</span> Entity Properties',d.appendChild(p);let h=document.createElement("div");h.className="tree-section-content";for(let[u,y]of Object.entries(a.entities)){let m=this.renderEntityNode(e,u,y,0,"",n);h.appendChild(m)}d.appendChild(h),l.appendChild(d)}if(Object.keys(a.components).length>0){let d=document.createElement("div");d.className="tree-section";let p=document.createElement("div");p.className="tree-section-header",p.innerHTML='<span class="section-icon">\u2699\uFE0F</span> Component Properties',d.appendChild(p);let h=document.createElement("div");h.className="tree-section-content";for(let[u,y]of Object.entries(a.components)){let m=this.renderComponentGroup(e,u,y,n);h.appendChild(m)}d.appendChild(h),l.appendChild(d)}s.appendChild(l)}renderSimpleProperty(e,t,n,i=!1){let s=document.createElement("div");s.className="tree-simple-prop";let o=document.createElement("span");o.className="tree-key simple-key",o.textContent=t;let r=document.createElement("span");r.className="tree-value",r.textContent=this.formatValue(n);let a=document.createElement("span");return a.className="tree-actions",a.innerHTML=`
                <button onclick="spacePropsPanel.editProp('${e}', '${t}', ${i})" class="edit-btn" title="Edit">\u270E</button>
                <button onclick="spacePropsPanel.deleteProp('${e}', '${t}')" class="delete-btn" title="Delete">\xD7</button>
            `,s.appendChild(o),s.appendChild(r),s.appendChild(a),s}renderScriptProperty(e,t,n,i=!1){let s=document.createElement("div");s.className="tree-script-prop",s.style.cssText="display: flex; align-items: center; padding: 4px 0;";let o=`script_preview_${t.replace(/\./g,"_")}`,r=document.createElement("button");r.className="tree-arrow",r.textContent=this.expandedNodes.has(o)?"\u25BC":"\u25B6",r.style.cssText="background: none; border: none; color: #888; cursor: pointer; padding: 0 4px;",r.onclick=()=>{this.toggleTreeNode(o),r.textContent=this.expandedNodes.has(o)?"\u25BC":"\u25B6"};let a=document.createElement("span");a.className="tree-key script-key",a.innerHTML=`\u{1F4C4} ${t}`,a.style.cssText="flex: 0 0 auto; margin-right: 10px;";let l=document.createElement("span");l.className="tree-value script-meta";let d=(n.size/1024).toFixed(1);l.innerHTML=`<span style="color: #888; font-size: 11px;">${n.lines} lines \u2022 ${d} KB</span>`,l.style.cssText="flex: 1; margin-right: 10px;";let p=document.createElement("span");p.className="tree-actions",p.style.cssText="display: flex; gap: 4px; opacity: 1;",p.innerHTML=`
                <button onclick="spacePropsPanel.viewScript('${e}', '${n._originalKey}')"
                        class="view-btn"
                        title="View full script"
                        style="background: #3b82c4; border: none; color: white; cursor: pointer; padding: 2px 6px; border-radius: 3px; font-size: 14px;">
                    \u{1F441} View
                </button>
                <button onclick="spacePropsPanel.editProp('${e}', '${n._originalKey}', ${i})"
                        class="edit-btn"
                        title="Edit script"
                        style="background: #444; border: none; color: #888; cursor: pointer; padding: 2px 6px; border-radius: 3px;">
                    \u270E
                </button>
                <button onclick="spacePropsPanel.deleteProp('${e}', '${n._originalKey}')"
                        class="delete-btn"
                        title="Delete script"
                        style="background: #444; border: none; color: #888; cursor: pointer; padding: 2px 6px; border-radius: 3px;">
                    \xD7
                </button>
            `,s.appendChild(r),s.appendChild(a),s.appendChild(l),s.appendChild(p);let h=document.createElement("div");h.appendChild(s);let u=document.createElement("div");u.className="script-preview-container",u.id=o,u.style.display=this.expandedNodes.has(o)?"block":"none",u.style.marginLeft="20px",u.style.marginTop="5px";let y=n.content.split(`
`).slice(0,10),m=document.createElement("pre");return m.className="script-preview",m.style.cssText="background: #1a1a1a; padding: 8px; border-radius: 4px; font-size: 11px; color: #888; overflow-x: auto; margin: 0;",m.textContent=y.join(`
`)+(n.lines>10?`
...`:""),u.appendChild(m),h.appendChild(u),h}renderEntityNode(e,t,n,i,s,o=!1){let r=document.createElement("div");r.className="tree-node entity-node",r.setAttribute("data-depth",i);let a=s?`${s}/${t}`:t,l=`entity_${a}`,d=document.createElement("div");d.className="tree-node-header",d.style.paddingLeft=`${i*20}px`;let p=n._children&&Object.keys(n._children).length>0,h=n._properties&&Object.keys(n._properties).length>0,u=p||h;if(u){let m=document.createElement("span");m.className="tree-arrow",m.textContent=this.expandedNodes.has(l)?"\u25BC":"\u25B6",m.onclick=()=>this.toggleTreeNode(l),d.appendChild(m)}else{let m=document.createElement("span");m.className="tree-arrow invisible",d.appendChild(m)}let y=document.createElement("span");if(y.className="tree-key entity-key",y.textContent=t,d.appendChild(y),r.appendChild(d),u){let m=document.createElement("div");if(m.className="tree-children",m.id=l,m.style.display=this.expandedNodes.has(l)?"block":"none",h){for(let[f,v]of Object.entries(n._properties))if(this.propertyFilters.has(f)){let b=this.renderEntityProperty(e,f,v,i+1,o);m.appendChild(b)}}if(p)for(let[f,v]of Object.entries(n._children)){let b=this.renderEntityNode(e,f,v,i+1,a,o);m.appendChild(b)}r.appendChild(m)}return r}renderEntityProperty(e,t,n,i,s=!1){let o=document.createElement("div");o.className="tree-entity-prop",o.style.paddingLeft=`${i*20}px`;let r=document.createElement("span");r.className="tree-arrow invisible";let a=document.createElement("span");a.className="tree-key entity-prop-key",a.textContent=t;let l=document.createElement("span");l.className="tree-value",l.textContent=this.formatValue(n.value);let d=document.createElement("span");return d.className="tree-actions",d.innerHTML=`
                <button onclick="spacePropsPanel.editProp('${e}', '${n.originalKey}', ${s})" class="edit-btn" title="Edit">\u270E</button>
                <button onclick="spacePropsPanel.deleteProp('${e}', '${n.originalKey}')" class="delete-btn" title="Delete">\xD7</button>
            `,o.appendChild(r),o.appendChild(a),o.appendChild(l),o.appendChild(d),o}renderComponentGroup(e,t,n,i=!1){let s=document.createElement("div");s.className="tree-component-group";let o=`component_${t}`,r=document.createElement("div");r.className="tree-node-header component-group-header";let a=Object.keys(n._instances).length>0;if(a){let p=document.createElement("span");p.className="tree-arrow",p.textContent=this.expandedNodes.has(o)?"\u25BC":"\u25B6",p.onclick=()=>this.toggleTreeNode(o),r.appendChild(p)}else{let p=document.createElement("span");p.className="tree-arrow invisible",r.appendChild(p)}let l=document.createElement("span");l.className="tree-key component-type",l.textContent=t,r.appendChild(l);let d=document.createElement("span");if(d.className="component-count",d.textContent=`(${Object.keys(n._instances).length})`,r.appendChild(d),s.appendChild(r),a){let p=document.createElement("div");p.className="tree-children",p.id=o,p.style.display=this.expandedNodes.has(o)?"block":"none";for(let[h,u]of Object.entries(n._instances)){let y=this.renderComponentInstance(e,t,h,u,i);p.appendChild(y)}s.appendChild(p)}return s}renderComponentInstance(e,t,n,i,s=!1){let o=document.createElement("div");o.className="tree-component-instance";let r=n!=="default"?n:i._originalName,a=`component_${t}_${n}`,l=document.createElement("div");l.className="tree-node-header component-instance-header",l.style.paddingLeft="20px";let d=Object.keys(i._properties).length>0;if(d){let u=document.createElement("span");u.className="tree-arrow",u.textContent=this.expandedNodes.has(a)?"\u25BC":"\u25B6",u.onclick=()=>this.toggleTreeNode(a),l.appendChild(u)}else{let u=document.createElement("span");u.className="tree-arrow invisible",l.appendChild(u)}let p=document.createElement("span");p.className="tree-key component-instance-key",p.textContent=`Instance ${r}`,l.appendChild(p);let h=document.createElement("span");if(h.className="component-prop-count",h.textContent=` (${Object.keys(i._properties).length} props)`,l.appendChild(h),o.appendChild(l),d){let u=document.createElement("div");u.className="tree-children component-properties",u.id=a,u.style.display=this.expandedNodes.has(a)?"block":"none";for(let[y,m]of Object.entries(i._properties)){let f=document.createElement("div");f.className="tree-component-prop",f.style.paddingLeft="40px";let v=document.createElement("span");v.className="tree-arrow invisible";let b=document.createElement("span");b.className="tree-key component-prop-key",b.textContent=y;let S=document.createElement("span");S.className="tree-value",S.textContent=this.formatValue(m.value);let E=document.createElement("span");E.className="tree-actions",E.innerHTML=`
                        <button onclick="spacePropsPanel.editProp('${e}', '${m.originalKey}', ${s})" class="edit-btn" title="Edit">\u270E</button>
                        <button onclick="spacePropsPanel.deleteProp('${e}', '${m.originalKey}')" class="delete-btn" title="Delete">\xD7</button>
                    `,f.appendChild(v),f.appendChild(b),f.appendChild(S),f.appendChild(E),u.appendChild(f)}o.appendChild(u)}return o}formatValue(e){return e==null?"null":typeof e=="object"?e.x!==void 0&&e.y!==void 0&&e.z!==void 0?`(${e.x}, ${e.y}, ${e.z})`:JSON.stringify(e):String(e)}toggleTreeNode(e){this.expandedNodes.has(e)?this.expandedNodes.delete(e):this.expandedNodes.add(e),this.saveViewPreferences(),this.render("spaceprop:toggleTreeNode")}injectStructViewStyles(){if(document.getElementById("struct-view-styles"))return;let e=document.createElement("style");e.id="struct-view-styles",e.textContent=`
                .popup-controls {
                    display: flex;
                    gap: 8px;
                    align-items: center;
                }

                .view-toggle-btn {
                    background: #444;
                    border: 1px solid #555;
                    color: #888;
                    padding: 4px 8px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 12px;
                    display: flex;
                    align-items: center;
                    gap: 4px;
                    transition: all 0.2s;
                }

                .view-toggle-btn:hover {
                    background: #555;
                    color: #e0e0e0;
                }

                .view-toggle-btn.active {
                    background: #3b82c4;
                    border-color: #2563eb;
                    color: white;
                }

                .struct-tree {
                    padding: 5px;
                }

                /* Section styles */
                .tree-section {
                    margin-bottom: 16px;
                    border: 1px solid #333;
                    border-radius: 4px;
                    overflow: hidden;
                }

                .tree-section-header {
                    background: #2a2a2a;
                    padding: 8px 12px;
                    font-weight: bold;
                    color: #e0e0e0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    border-bottom: 1px solid #333;
                }

                .section-icon {
                    font-size: 16px;
                }

                .tree-section-content {
                    padding: 8px;
                    background: #1a1a1a;
                }

                /* Tree nodes */
                .tree-node {
                    margin: 1px 0;
                }

                .tree-node-header {
                    display: flex;
                    align-items: center;
                    padding: 4px;
                    border-radius: 3px;
                    cursor: default;
                    transition: background 0.2s;
                }

                .tree-node-header:hover {
                    background: rgba(255, 255, 255, 0.05);
                }

                .tree-arrow {
                    width: 16px;
                    display: inline-block;
                    text-align: center;
                    cursor: pointer;
                    user-select: none;
                    color: #888;
                    transition: transform 0.2s;
                }

                .tree-arrow.invisible {
                    visibility: hidden;
                }

                /* Key styles by type */
                .tree-key {
                    font-weight: 600;
                    margin-right: 8px;
                }

                .simple-key {
                    color: #888;
                }

                .entity-key {
                    color: #3b82c4;
                }

                .entity-prop-key {
                    color: #60a5fa;
                    font-weight: normal;
                }

                .component-type {
                    color: #10b981;
                }

                .component-prop-key {
                    color: #34d399;
                    font-weight: normal;
                }

                .component-count {
                    color: #666;
                    font-size: 12px;
                    margin-left: 4px;
                }

                /* Value display */
                .tree-value {
                    color: #e0e0e0;
                    flex: 1;
                    margin-left: 8px;
                    word-break: break-all;
                    font-family: monospace;
                }

                /* Property rows */
                .tree-simple-prop,
                .tree-entity-prop,
                .tree-component-prop {
                    display: flex;
                    align-items: center;
                    padding: 4px 8px;
                    border-radius: 3px;
                    transition: background 0.2s;
                }

                .tree-simple-prop:hover,
                .tree-entity-prop:hover,
                .tree-component-prop:hover {
                    background: rgba(255, 255, 255, 0.05);
                }

                /* Hierarchy indentation */
                .tree-children {
                    border-left: 1px solid #333;
                    margin-left: 8px;
                }

                .entity-node .tree-children {
                    margin-left: 12px;
                    border-left-color: #2563eb;
                }

                .tree-component-group .tree-children {
                    margin-left: 12px;
                    border-left-color: #10b981;
                }

                /* Actions */
                .tree-actions {
                    display: flex;
                    gap: 4px;
                    opacity: 0;
                    transition: opacity 0.2s;
                    margin-left: auto;
                }

                .tree-simple-prop:hover .tree-actions,
                .tree-entity-prop:hover .tree-actions,
                .tree-component-prop:hover .tree-actions,
                .tree-node-header:hover .tree-actions {
                    opacity: 1;
                }

                .edit-btn, .delete-btn {
                    background: transparent;
                    border: 1px solid #444;
                    color: #888;
                    padding: 2px 6px;
                    border-radius: 3px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: all 0.2s;
                }

                .edit-btn:hover {
                    background: #444;
                    color: #e0e0e0;
                    border-color: #555;
                }

                .delete-btn:hover {
                    background: #c44;
                    border-color: #c44;
                    color: white;
                }

                /* Component instance styles */
                .tree-component-instance {
                    margin-bottom: 4px;
                }

                .tree-component-group-header {
                    font-weight: bold;
                }

                .component-instance-header {
                    background: rgba(16, 185, 129, 0.1);
                    border-left: 2px solid #10b981;
                    margin: 2px 0;
                }

                .component-instance-header:hover {
                    background: rgba(16, 185, 129, 0.15);
                }

                .component-instance-key {
                    color: #10b981;
                    font-weight: 600;
                }

                .component-prop-count {
                    color: #666;
                    font-size: 11px;
                    margin-left: 8px;
                    opacity: 0.8;
                }

                .component-properties {
                    border-left: 1px dashed #10b98133;
                    margin-left: 12px;
                }

                /* Empty state */
                .empty-props {
                    color: #666;
                    font-style: italic;
                    padding: 20px;
                    text-align: center;
                }
            `,document.head.appendChild(e)}async renderSyncView(e,t,n=!1){let i=n?"Popup":"",s=document.getElementById(`${e}PropsList${i}`),o=document.getElementById(`${e}PropsCount${i}`);if(!s||!o)return;let r=await this.syncComparator.compare(),a=this.syncComparator.getSummary();if(o.textContent=`${a.total} divergences`,r.size===0){s.innerHTML=`
                    <div class="sync-status-header" style="padding: 20px; text-align: center; color: #10b981;">
                        <div style="font-size: 32px; margin-bottom: 10px;">\u2705</div>
                        <div style="font-size: 16px; font-weight: bold;">All Synced!</div>
                        <div style="font-size: 14px; color: #888; margin-top: 5px;">Local and network hierarchies are identical</div>
                    </div>
                `;return}let l=this.renderSyncTree(r);s.innerHTML=`
                <div class="sync-status-container">
                    <div class="sync-summary" style="padding: 10px; background: #1e1e1e; border-bottom: 1px solid #333;">
                        <div style="font-size: 12px; color: #888; margin-bottom: 8px;">DIVERGENCE SUMMARY</div>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            ${a.bySeverity.high>0?`<div style="color: #ef4444;">\u{1F534} High: ${a.bySeverity.high}</div>`:""}
                            ${a.bySeverity.medium>0?`<div style="color: #f59e0b;">\u{1F7E1} Medium: ${a.bySeverity.medium}</div>`:""}
                            ${a.bySeverity.low>0?`<div style="color: #3b82f6;">\u{1F535} Low: ${a.bySeverity.low}</div>`:""}
                            ${a.bySeverity.info>0?`<div style="color: #6b7280;">\u2139\uFE0F Info: ${a.bySeverity.info}</div>`:""}
                        </div>
                    </div>
                    <div class="sync-tree" style="padding: 10px;">
                        ${l}
                    </div>
                </div>
            `,this.attachSyncResolutionListeners()}renderSyncTree(e){let t=entities(),n={roots:[]},i=[],s=(o,r="",a=0)=>{let l=r?`${r}/${o.name}`:o.name,d=e.get(l),p=this.syncComparator.getEntityStatus(l),h=a*20,u="\u{1F7E2}",y="sync-status-synced",m="Synced";p==="missing"?(u="\u{1F7E1}",y="sync-status-missing",d&&d.types.has("missing-local")?m="Only in network":m="Only in local"):p==="error"?(u="\u{1F534}",y="sync-status-conflict",m="Property conflicts"):p==="warning"&&(u="\u26A0\uFE0F",y="sync-status-warning",m="Has divergences");let f=`
                    <div class="sync-tree-node ${y}" style="margin-left: ${h}px; padding: 4px; border-radius: 3px; margin-bottom: 2px;">
                        <div class="sync-node-header" style="display: flex; align-items: center; gap: 8px;">
                            <span class="sync-status-icon" title="${m}">${u}</span>
                            <span class="sync-entity-name" style="font-weight: bold; color: #64b5f6;">${o.name}</span>
                `;d&&(f+='<div class="sync-divergence-details" style="margin-left: 10px; font-size: 12px; color: #888;">',d.details.active&&(f+=`<span style="color: #ef4444;">active: local=${d.details.active.local}, network=${d.details.active.network}</span>`),d.details.layer&&(f+=`<span style="color: #f59e0b; margin-left: 10px;">layer: local=${d.details.layer.local}, network=${d.details.layer.network}</span>`),d.details.components&&(f+=`<span style="color: #3b82f6; margin-left: 10px;">components: local=${d.details.components.localCount}, network=${d.details.components.networkCount}</span>`),d.details.children&&(f+=`<span style="color: #f59e0b; margin-left: 10px;">children: local=${d.details.children.localCount}, network=${d.details.children.networkCount}</span>`),f+="</div>",d.details.componentProperties&&(f+='<div style="margin-left: 20px; margin-top: 5px; padding: 5px; background: rgba(0,0,0,0.2); border-radius: 3px;">',f+='<div style="font-size: 11px; color: #888; margin-bottom: 4px;">Component Property Divergences:</div>',d.details.componentProperties.forEach(v=>{f+='<div style="margin-bottom: 8px; padding: 4px; background: rgba(255,255,255,0.05); border-radius: 2px;">',f+=`<div style="font-weight: bold; color: #64b5f6; font-size: 12px; margin-bottom: 4px;">${v.type} (${v.componentId})</div>`,Object.entries(v.differences).forEach(([b,S])=>{let E=S.local,x=S.network;if(typeof E=="object"&&E!==null)if(E.r!==void 0&&E.g!==void 0&&E.b!==void 0){let R=`rgba(${Math.round(E.r*255)}, ${Math.round(E.g*255)}, ${Math.round(E.b*255)}, ${E.a||1})`,J=x?`rgba(${Math.round(x.r*255)}, ${Math.round(x.g*255)}, ${Math.round(x.b*255)}, ${x.a||1})`:"none";f+='<div style="margin-left: 10px; font-size: 11px; display: flex; align-items: center; gap: 10px;">',f+=`<span style="color: #888;">${b}:</span>`,f+='<div style="display: flex; align-items: center; gap: 5px;">',f+='<span style="color: #888;">local:</span>',f+=`<div style="width: 20px; height: 20px; background: ${R}; border: 1px solid #555; border-radius: 2px;" title="${JSON.stringify(E)}"></div>`,f+="</div>",f+='<div style="display: flex; align-items: center; gap: 5px;">',f+='<span style="color: #888;">network:</span>',f+=`<div style="width: 20px; height: 20px; background: ${J}; border: 1px solid #555; border-radius: 2px;" title="${JSON.stringify(x)}"></div>`,f+="</div>",f+="</div>"}else E.x!==void 0||E.y!==void 0||E.z!==void 0?(f+='<div style="margin-left: 10px; font-size: 11px;">',f+=`<span style="color: #888;">${b}:</span>`,f+=`<span style="color: #ef4444; margin-left: 5px;">local: (${E.x?.toFixed(2)||0}, ${E.y?.toFixed(2)||0}, ${E.z?.toFixed(2)||0})</span>`,f+=`<span style="color: #10b981; margin-left: 10px;">network: ${x?`(${x.x?.toFixed(2)||0}, ${x.y?.toFixed(2)||0}, ${x.z?.toFixed(2)||0})`:"null"}</span>`,f+="</div>"):(f+='<div style="margin-left: 10px; font-size: 11px;">',f+=`<span style="color: #888;">${b}:</span>`,f+=`<span style="color: #ef4444; margin-left: 5px;">local: ${JSON.stringify(E)}</span>`,f+=`<span style="color: #10b981; margin-left: 10px;">network: ${JSON.stringify(x)}</span>`,f+="</div>");else f+='<div style="margin-left: 10px; font-size: 11px;">',f+=`<span style="color: #888;">${b}:</span>`,f+=`<span style="color: #ef4444; margin-left: 5px;">local: ${E}</span>`,f+=`<span style="color: #10b981; margin-left: 10px;">network: ${x}</span>`,f+="</div>"}),f+="</div>"}),f+="</div>"),(p==="error"||p==="missing")&&(f+=`
                            <div class="sync-resolution-buttons" style="margin-left: auto; display: flex; gap: 5px;">
                                <button class="sync-push-btn" data-path="${l}" style="padding: 2px 8px; font-size: 11px; background: #065f46; border: 1px solid #10b981; border-radius: 3px; color: #10b981; cursor: pointer;" title="Push local to network">\u2192 Push</button>
                                <button class="sync-pull-btn" data-path="${l}" style="padding: 2px 8px; font-size: 11px; background: #7c2d12; border: 1px solid #f59e0b; border-radius: 3px; color: #f59e0b; cursor: pointer;" title="Pull from network">\u2190 Pull</button>
                            </div>
                        `)),f+=`
                        </div>
                    </div>
                `,i.push(f),o.children&&o.children.length>0&&o.children.forEach(v=>s(v,l,a+1))};return Array.isArray(t)&&t.forEach(o=>s(o)),n&&n.roots&&n.roots.forEach(o=>{t&&t.some(a=>a.name===o.name)||s(o)}),i.join("")}attachSyncResolutionListeners(){document.querySelectorAll(".sync-push-btn").forEach(e=>{e.addEventListener("click",async t=>{let n=t.target.dataset.path;console.log(`Push local state to network for: ${n}`),alert(`Push to network: ${n}
(Not yet implemented)`)})}),document.querySelectorAll(".sync-pull-btn").forEach(e=>{e.addEventListener("click",async t=>{let n=t.target.dataset.path;console.log(`Pull network state to local for: ${n}`);try{let s=(await this.syncComparator.compare()).get(n);if(!s){console.warn(`No divergence found for path: ${n}`);return}let o=n.split("/"),r=null,a=entities();if(a&&Array.isArray(a)){let h=o[0];r=a.find(u=>u.name===h);for(let u=1;u<o.length&&r;u++)r.children&&(r=r.children.find(y=>y.name===o[u]))}if(!r){console.error(`Entity not found for path: ${n}`),alert(`Cannot find entity: ${n}`);return}let l={roots:[]},d=null;if(l&&l.roots){let h=o[0];d=l.roots.find(u=>u.name===h);for(let u=1;u<o.length&&d;u++)d.children&&(d=d.children.find(y=>y.name===o[u]))}if(!d){console.error(`Network entity not found for path: ${n}`),alert(`Cannot find network state for: ${n}`);return}let p=0;s.details.active&&s.details.active.network!==void 0&&(console.log(`Updating ${n} active: ${r.active} -> ${d.active}`),await r._set("active",d.active),p++),s.details.layer&&s.details.layer.network!==void 0&&(console.log(`Updating ${n} layer: ${r.layer} -> ${d.layer}`),await r._set("layer",d.layer),p++),s.details.position&&d.position&&(console.log(`Updating ${n} position:`,r.position,"->",d.position),await r._set("position",d.position),p++),s.details.rotation&&d.rotation&&(console.log(`Updating ${n} rotation:`,r.rotation,"->",d.rotation),await r._set("rotation",d.rotation),p++),s.details.scale&&d.scale&&(console.log(`Updating ${n} scale:`,r.scale,"->",d.scale),await r._set("scale",d.scale),p++),s.details.localPosition&&d.localPosition&&(console.log(`Updating ${n} localPosition:`,r.transform?.localPosition,"->",d.localPosition),await r._set("localPosition",d.localPosition),p++),s.details.localRotation&&d.localRotation&&(console.log(`Updating ${n} localRotation:`,r.transform?.localRotation,"->",d.localRotation),await r._set("localRotation",d.localRotation),p++),s.details.localScale&&d.localScale&&(console.log(`Updating ${n} localScale:`,r.transform?.localScale,"->",d.localScale),await r._set("localScale",d.localScale),p++),s.details.componentProperties&&s.details.componentProperties.length>0&&console.log(`Component property divergences detected for ${n}, but pull for components not yet implemented`),inspector?.hierarchyPanel&&inspector.hierarchyPanel.render(),setTimeout(()=>{this.renderSyncView("public",net.state,this.isPopupOpen)},500),console.log(`\u2705 Pull completed for ${n}: ${p} properties updated locally`)}catch(i){console.error("Error pulling network state:",i),alert(`Error pulling network state: ${i.message}`)}})})}};window.addPublicProp=()=>{let c=window.spacePropsPanel;c&&c.addPublicProp()};window.addProtectedProp=()=>{let c=window.spacePropsPanel;c&&c.addProtectedProp()};var Gt=class{constructor(){this.overlay=document.getElementById("componentMenuOverlay"),this.searchInput=document.getElementById("componentSearchInput"),this.closeBtn=document.getElementById("closeComponentMenu"),this.categoryStates=new Map,this.setupEventListeners(),this.initializeCategories()}initializeCategories(){let e=document.querySelectorAll(".component-category");e.forEach((t,n)=>{let i=t.querySelector(".category-name")?.textContent||`category-${n}`;this.categoryStates.set(i,!1);let s=t.querySelector(".category-header");if(s&&!s.querySelector(".category-toggle")){let o=document.createElement("span");o.className="category-toggle",o.textContent="\u25BC",s.insertBefore(o,s.firstChild)}}),e.forEach((t,n)=>{this.toggleCategory(t)})}setupEventListeners(){document.addEventListener("showComponentMenu",e=>{this.show()}),this.closeBtn?.addEventListener("mousedown",()=>{this.hide()}),this.overlay?.addEventListener("mousedown",e=>{e.target===this.overlay&&this.hide()}),this.searchInput?.addEventListener("input",e=>{this.filterComponents(e.target.value)}),document.addEventListener("mousedown",e=>{let t=e.target.closest(".category-header");t&&this.overlay?.contains(t)&&(e.stopPropagation(),this.toggleCategory(t.closest(".component-category")))}),document.addEventListener("mousedown",e=>{let t=e.target.closest(".component-item");if(t&&this.overlay?.contains(t)){let n=t.dataset.component;n&&this.addComponent(n)}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.overlay?.style.display!=="none"&&this.hide()})}toggleCategory(e){let t=e.querySelector(".category-name")?.textContent;if(!t)return;let n=this.categoryStates.get(t)??!0;this.categoryStates.set(t,!n);let i=e.querySelector(".category-toggle"),s=e.querySelector(".category-items");i&&(i.textContent=n?"\u25B6":"\u25BC"),s&&s.classList.toggle("collapsed",n),e.classList.toggle("collapsed",n)}show(){!this.overlay||!SM.selectedEntity||(this.overlay.style.display="flex",this.searchInput.value="",this.filterComponents(""),this.initializeCategories(),setTimeout(()=>{this.searchInput?.focus()},100))}hide(){this.overlay&&(this.overlay.style.display="none")}filterComponents(e){let t=e.toLowerCase(),n=document.querySelectorAll(".component-item"),i=document.querySelectorAll(".component-category");n.forEach(s=>{let o=s.querySelector(".component-item-name")?.textContent.toLowerCase()||"",r=s.querySelector(".component-item-desc")?.textContent.toLowerCase()||"",a=o.includes(t)||r.includes(t);s.classList.toggle("hidden",!a)}),i.forEach(s=>{let r=s.querySelectorAll(".component-item:not(.hidden)").length>0;if(s.style.display=r?"block":"none",t&&r){let a=s.querySelector(".category-name")?.textContent;if(a&&!this.categoryStates.get(a)){this.categoryStates.set(a,!0),s.classList.remove("collapsed");let l=s.querySelector(".category-toggle");l&&(l.textContent="\u25BC");let d=s.querySelector(".category-items");d&&d.classList.remove("collapsed")}}})}async addComponent(e){if(log("component-menu","adding component =>",e),!SM.selectedEntity)return;let t=SM.getSelectedEntity();if(!t)return;let n=new st(t.id,e,{source:"ui"});await C.applyChange(n),await this.handleComponentBundles(e),this.hide(),SM.selectEntity(t.id)}async handleComponentBundles(e){let t=un[e];if(t)for(let n of t)await this.addComponent(n)}};var wt=class{constructor(){this.selectedLogs=new Set,this.shellBuffer=[],this.maxShellLines=1e3,this.setupEventListeners(),this.setupCollapsible(),this.render()}setupCollapsible(){let e=document.getElementById("lifecycleCollapseBtn"),t=document.getElementById("lifecyclePanel");e&&t&&(localStorage.getItem("lifecyclePanelCollapsed")==="true"&&(t.classList.add("collapsed"),e.classList.add("collapsed")),e.addEventListener("click",()=>{t.classList.contains("collapsed")?(t.classList.remove("collapsed"),e.classList.remove("collapsed"),localStorage.setItem("lifecyclePanelCollapsed","false")):(t.classList.add("collapsed"),e.classList.add("collapsed"),localStorage.setItem("lifecyclePanelCollapsed","true"))}))}setupEventListeners(){document.addEventListener("scriptrunnerRegistered",()=>{this.render()}),document.addEventListener("scriptrunnerUnregistered",()=>{this.render()}),document.addEventListener("sceneStateChanged",()=>{this.render()}),document.addEventListener("componentChanged",e=>{e.detail?.componentType==="ScriptRunner"&&this.render()})}getEntityInfo(e){return e._entity?[e._entity.name||"Unnamed Entity"]:["No entity"]}render(){let e=document.getElementById("lifecycleList");if(!e)return;e.innerHTML="";let t=SM.getAllScriptRunners();if(t.length===0){e.innerHTML='<div class="empty-lifecycle">No active ScriptRunner scripts</div>';return}let n=document.createElement("table");n.className="lifecycle-table";let i=document.createElement("thead");i.innerHTML=`
                <tr>
                    <th>Name</th>
                    <th>Owner</th>
                    <th>Usage</th>
                    <th>Log</th>
                    <th>Actions</th>
                </tr>
            `,n.appendChild(i);let s=document.createElement("tbody");t.forEach(o=>{let r=this.createScriptRunnerRow(o);s.appendChild(r)}),n.appendChild(s),e.appendChild(n)}createScriptRunnerRow(e){let t=document.createElement("tr");t.className="lifecycle-row";let n=document.createElement("td");n.className="lifecycle-name";let i=e.properties?.file||e.properties?.name||"Unknown Script";n.textContent=i,n.title=`Script: ${e.properties?.file||"No script"}`,n.style.cursor="pointer",n.onmousedown=()=>{let y=window.inventory.items[e.properties.file];if(y&&y.itemType==="script"){let m=new CustomEvent("open-script-editor",{detail:{name:e.properties.file,content:y.data,author:y.author,created:y.created}});window.dispatchEvent(m)}};let s=document.createElement("td");s.className="lifecycle-owner",s.textContent=e.properties?.owner||"Unknown Owner",s.title=`Owner: ${e.properties?.owner||"No owner"}`,s.style.cursor="pointer",s.onmousedown=()=>{e.amOwner()?(SetComponentProp(e.id,"owner","global"),setTimeout(()=>{this.render()},150)):(SetComponentProp(e.id,"owner",SM.myName()),setTimeout(()=>{this.render()},150))};let o=document.createElement("td");o.className="lifecycle-usage";let a=this.getEntityInfo(e).join(", ")||"No entities";a.length>32?(o.textContent=a.substring(0,32)+"...",o.title=a):o.textContent=a;let l=document.createElement("td");l.className="lifecycle-log";let d=document.createElement("input");d.type="checkbox",d.checked=this.selectedLogs.has(e.id),d.onchange=()=>this.toggleLogging(e.id,d.checked),l.appendChild(d);let p=document.createElement("td");p.className="lifecycle-actions";let h=document.createElement("button");h.className="lifecycle-button stop",h.innerHTML="\u23F9",h.title="Stop",e.ctx._running?h.onmousedown=()=>{e.Stop(),this.addShellOutput(i,"[Stopped]",e.id),this.render()}:(h.disabled=!0,h.title="Not running",h.style.opacity=.25,h.style.pointerEvents="none");let u=document.createElement("button");return u.className="lifecycle-button refresh",u.innerHTML="\u{1F504}",u.title="Refresh",u.onmousedown=()=>{e.Refresh(),this.addShellOutput(i,"[Refreshed]",e.id),this.render()},p.appendChild(h),p.appendChild(u),t.appendChild(n),t.appendChild(s),t.appendChild(o),t.appendChild(l),t.appendChild(p),t}toggleLogging(e,t){if(t){this.selectedLogs.add(e);let n=_.scriptRunners.get(e);if(n){let i=n.properties?.file||n.properties?.name||"Unknown";this.addShellOutput(i,"[Logging enabled]",n.id)}}else this.selectedLogs.delete(e)}addShellOutput(e,t,n){let i=`[${e}]: ${t}`}clearShell(){let e=document.getElementById("lifecycleShell");e.innerHTML=""}};window.LifecyclePanel=wt;var Kt=class{constructor(){this.currentPage="world-inspector",this.pages=new Map,this.navItems=new Map,this.dynamicPages=new Map,this.tabOrder=[],this.draggedTab=null,this.insertIndicator=null,this.init()}init(){document.querySelectorAll(".page").forEach(n=>{let i=n.id.replace("-page","");this.pages.set(i,n)}),document.querySelectorAll(".nav-item").forEach((n,i)=>{let s=n.getAttribute("data-page");this.navItems.set(s,n),this.tabOrder.push(s),n.addEventListener("mousedown",()=>this.switchPage(s)),this.setupTabDragging(n,s),s==="inventory"&&this.setupInventoryTabDrop(n)}),this.createInsertIndicator()}switchPage(e){if(e===this.currentPage)return;this.pages.forEach((n,i)=>{i===e?n.classList.add("active"):n.classList.remove("active")}),this.navItems.forEach((n,i)=>{i===e?n.classList.add("active"):n.classList.remove("active")}),this.currentPage=e;let t=new CustomEvent("page-switched",{detail:{pageId:e}});window.dispatchEvent(t)}getCurrentPage(){return this.currentPage}setupInventoryTabDrop(e){let t=e.ondragover;e.addEventListener("dragover",n=>{n.dataTransfer.types.includes("text/tab-reorder")||(n.preventDefault(),n.dataTransfer.dropEffect="copy",e.classList.add("drag-over"))}),e.addEventListener("dragleave",n=>{(!n.dataTransfer||!n.dataTransfer.types.includes("text/tab-reorder"))&&e.classList.remove("drag-over")}),e.addEventListener("drop",async n=>{if(n.dataTransfer.types.includes("text/tab-reorder"))return;n.preventDefault(),e.classList.remove("drag-over"),this.switchPage("inventory");let i=n.dataTransfer.getData("text/plain");if(i&&typeof O<"u"&&typeof changeManager<"u"){let s=new O(i,null,null,{source:"ui"});changeManager.applyChange(s)}})}addDynamicPage(e,t,n){this.removeDynamicPage(e),this.pages.set(e,t),this.dynamicPages.set(e,{pageElement:t,navElement:n}),document.querySelector(".nav-items").insertBefore(n,this.insertIndicator),this.navItems.set(e,n),this.tabOrder.push(e),n.addEventListener("mousedown",s=>{s.target.closest(".close-tab-btn")||this.switchPage(e)}),this.setupTabDragging(n,e)}removeDynamicPage(e){let t=this.dynamicPages.get(e);if(!t)return;t.pageElement.remove(),t.navElement.remove(),this.pages.delete(e),this.navItems.delete(e),this.dynamicPages.delete(e);let n=this.tabOrder.indexOf(e);n>-1&&this.tabOrder.splice(n,1),this.currentPage===e&&this.switchPage("world-inspector")}createInsertIndicator(){this.insertIndicator=document.createElement("div"),this.insertIndicator.className="tab-insert-indicator",this.insertIndicator.style.display="none",document.querySelector(".nav-items").appendChild(this.insertIndicator)}setupTabDragging(e,t){e.draggable=!0,e.setAttribute("data-page-id",t),e.addEventListener("dragstart",n=>{if(n.target.closest(".close-tab-btn")){n.preventDefault();return}this.draggedTab=e,e.classList.add("dragging"),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/tab-reorder",t);let i=e.cloneNode(!0);i.style.position="absolute",i.style.top="-1000px",i.style.opacity="0.8",document.body.appendChild(i),n.dataTransfer.setDragImage(i,n.offsetX,n.offsetY),setTimeout(()=>i.remove(),0)}),e.addEventListener("dragend",n=>{e.classList.remove("dragging"),this.hideInsertIndicator(),this.draggedTab=null}),e.addEventListener("dragover",n=>{if(n.preventDefault(),!n.dataTransfer.types.includes("text/tab-reorder")||!this.draggedTab||this.draggedTab===e)return;n.dataTransfer.dropEffect="move";let i=e.getBoundingClientRect(),s=i.left+i.width/2,o=n.clientX<s;this.showInsertIndicator(e,o)}),e.addEventListener("drop",n=>{if(n.preventDefault(),!n.dataTransfer.types.includes("text/tab-reorder")||!this.draggedTab||this.draggedTab===e)return;let i=n.dataTransfer.getData("text/tab-reorder"),s=e.getAttribute("data-page-id"),o=e.getBoundingClientRect(),r=o.left+o.width/2,a=n.clientX<r;this.reorderTabs(i,s,a)}),e.addEventListener("dragleave",n=>{(!n.relatedTarget||!n.relatedTarget.closest(".nav-items"))&&this.hideInsertIndicator()})}showInsertIndicator(e,t){let n=e.getBoundingClientRect(),s=document.querySelector(".nav-items").getBoundingClientRect();this.insertIndicator.style.display="block",this.insertIndicator.style.position="absolute",this.insertIndicator.style.top=`${n.top-s.top}px`,t?this.insertIndicator.style.left=`${n.left-s.left-2}px`:this.insertIndicator.style.left=`${n.right-s.left-2}px`,this.insertIndicator.style.height=`${n.height}px`}hideInsertIndicator(){this.insertIndicator&&(this.insertIndicator.style.display="none")}reorderTabs(e,t,n){let i=this.tabOrder.indexOf(e),s=this.tabOrder.indexOf(t);i===-1||s===-1||(this.tabOrder.splice(i,1),i<s&&s--,n||s++,this.tabOrder.splice(s,0,e),this.updateTabOrder())}updateTabOrder(){let e=document.querySelector(".nav-items"),t=document.createDocumentFragment();this.tabOrder.forEach(n=>{let i=this.navItems.get(n);i&&t.appendChild(i)}),e.innerHTML="",e.appendChild(t),e.appendChild(this.insertIndicator)}};var Xt=class{constructor(e){let t=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";e?this.baseUrl=e:t?this.baseUrl="http://localhost:3303":this.baseUrl="https://auth.tippy.dev",this.apiPath="/api/inventory",console.log("InventoryAPI initialized with base URL:",this.baseUrl)}async _request(e,t={}){let n=`${this.baseUrl}${this.apiPath}${e}`;try{let i=await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers},credentials:"include"}),s=await i.json();if(!i.ok)throw new Error(s.error||`HTTP ${i.status}: ${i.statusText}`);if(s.success===!1)throw new Error(s.error||"Operation failed");return s}catch(i){throw console.error("InventoryAPI request failed:",i),i}}async createItem(e){return this._request("/items",{method:"POST",body:JSON.stringify({item:e,userName:SM.myName(),secret:net.secret})})}async updateItem(e,t){return this._request(`/items/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify({updates:t,userName:SM.myName(),secret:net.secret})})}async deleteItem(e){return this._request(`/items/${encodeURIComponent(e)}`,{method:"DELETE",body:JSON.stringify({userName:SM.myName(),secret:net.secret})})}async createFolder(e){return this._request("/folders",{method:"POST",body:JSON.stringify({folder:e,userName:SM.myName(),secret:net.secret})})}async updateFolder(e,t){return this._request(`/folders/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify({updates:t,userName:SM.myName(),secret:net.secret})})}async deleteFolder(e){return this._request(`/folders/${encodeURIComponent(e)}`,{method:"DELETE",body:JSON.stringify({userName:SM.myName(),secret:net.secret})})}async bulkUpload(e){return this._request("/bulk",{method:"POST",body:JSON.stringify({contents:e,userName:SM.myName(),secret:net.secret})})}async uploadImage(e,t){let n=new FormData;n.append("image",e),n.append("metadata",JSON.stringify({...t,userName:SM.myName(),secret:net.secret,folder:t.folder||null}));let i=`${this.baseUrl}${this.apiPath}/images`;try{let s=await fetch(i,{method:"POST",body:n,credentials:"include"}),o=await s.json();if(!s.ok||o.success===!1)throw new Error(o.error||"Image upload failed");return o}catch(s){throw console.error("Image upload failed:",s),s}}async getPublicFolders(e){return this._request(`/public/${encodeURIComponent(e)}`,{method:"GET"})}async getUserInventory(e=null){let t=e||SM.myName();return this._request(`/users/${encodeURIComponent(t)}`,{method:"GET"})}async syncItem(e,t){let n=t.folder?`${t.folder}/${e}`:e;return n=n.replace(/[\.\$#\[\]]/g,"_"),this._request("/sync/item",{method:"POST",body:JSON.stringify({path:n,item:t,userName:SM.myName(),secret:net.secret})})}async syncFolder(e,t){return this._request("/sync/folder",{method:"POST",body:JSON.stringify({folderKey:e,folder:t,userName:SM.myName(),secret:net.secret})})}async removeFromFirebase(e){return this._request("/sync/remove",{method:"DELETE",body:JSON.stringify({path:e,userName:SM.myName(),secret:net.secret})})}async importFromFirebase(e,t=null,n=null){return this._request("/import/firebase",{method:"POST",body:JSON.stringify({firebaseRef:e,parentFolder:t,minUpdateTime:n,userName:SM.myName(),secret:net.secret})})}async importPublicUserFolders(e){return this._request("/import/user-public",{method:"POST",body:JSON.stringify({targetUsername:e,userName:SM.myName(),secret:net.secret})})}async importFolderContents(e){return this._request("/import/folder",{method:"POST",body:JSON.stringify({folderPath:e,userName:SM.myName(),secret:net.secret})})}async healthCheck(){try{return(await fetch(`${this.baseUrl}${this.apiPath}/health`,{method:"GET",credentials:"include"})).ok}catch(e){return console.error("Health check failed:",e),!1}}queueOfflineOperation(e){let t=JSON.parse(localStorage.getItem("inventory_offline_queue")||"[]");t.push({...e,timestamp:Date.now()}),localStorage.setItem("inventory_offline_queue",JSON.stringify(t))}async processOfflineQueue(){let e=JSON.parse(localStorage.getItem("inventory_offline_queue")||"[]"),t=[];for(let n of e)try{await this[n.method](...n.args)}catch{t.push(n)}return localStorage.setItem("inventory_offline_queue",JSON.stringify(t)),{processed:e.length-t.length,failed:t.length}}};var Qt=class{constructor(e={}){this.url=e.url||this._getWebSocketUrl(),this.ws=null,this.listeners=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=e.maxReconnectAttempts||5,this.reconnectDelay=e.reconnectDelay||1e3,this.messageQueue=[],this.authenticated=!1,this.userName=e.userName,this.secret=e.secret,this.debug=e.debug||!1,this.onConnect=e.onConnect||null,this.onDisconnect=e.onDisconnect||null,this.onError=e.onError||null}_getWebSocketUrl(){return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"ws://localhost:3303":"wss://auth.tippy.dev"}connect(){return this.ws&&this.ws.readyState===WebSocket.OPEN?(console.log("WebSocket already connected"),Promise.resolve()):new Promise((e,t)=>{try{this.ws=new WebSocket(this.url),this.setupEventHandlers(e,t)}catch(n){console.error("Failed to create WebSocket:",n),t(n)}})}setupEventHandlers(e,t){this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.userName&&this.secret?this.authenticate(this.userName,this.secret).then(()=>{this.processMessageQueue(),this.reestablishListeners(),this.onConnect&&this.onConnect(),e&&e()}).catch(n=>{console.error("Authentication failed:",n),t&&t(n)}):(console.warn("No credentials provided for WebSocket authentication"),t&&t(new Error("No credentials provided")))},this.ws.onmessage=n=>{try{let i=JSON.parse(n.data);this.handleMessage(i)}catch(i){console.error("Error parsing WebSocket message:",i)}},this.ws.onerror=n=>{console.error("WebSocket error:",n),this.onError&&this.onError(n)},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.authenticated=!1,this.onDisconnect&&this.onDisconnect(),this.attemptReconnect()}}authenticate(e,t){return this.userName=e,this.secret=t,new Promise((n,i)=>{let s=setTimeout(()=>{i(new Error("Authentication timeout"))},5e3);this.pendingAuth={resolve:n,reject:i,timeout:s},this.sendMessage({type:"auth",userName:e,secret:t})})}handleMessage(e){switch(this.debug&&console.log("WebSocket message received:",e),e.type){case"authenticated":this.authenticated=!0,this.pendingAuth&&(clearTimeout(this.pendingAuth.timeout),this.pendingAuth.resolve(),this.pendingAuth=null);break;case"event":this.handleFirebaseEvent(e);break;case"subscribed":console.log(`Subscribed to ${e.path} with event ${e.event}`);break;case"unsubscribed":console.log(`Unsubscribed listener ${e.listenerId}`);break;case"error":console.error("WebSocket error message:",e.error),e.error==="Invalid credentials"&&this.pendingAuth&&(clearTimeout(this.pendingAuth.timeout),this.pendingAuth.reject(new Error(e.error)),this.pendingAuth=null);break;case"pong":break;default:console.warn("Unknown message type:",e.type)}}handleFirebaseEvent(e){let{listenerId:t,event:n,data:i,key:s}=e,o=this.listeners.get(t);if(o&&o.callback){let r={val:()=>i,key:s,exists:()=>i!=null};try{o.callback(r)}catch(a){console.error(`Error in listener callback for ${t}:`,a)}}}on(e,t,n){let i=this.generateListenerId();return this.listeners.set(i,{path:e,event:t,callback:n}),this.isConnected()&&this.authenticated?this.sendMessage({type:"subscribe",path:e,event:t,listenerId:i}):this.messageQueue.push({type:"subscribe",path:e,event:t,listenerId:i}),i}off(e){this.listeners.has(e)&&(this.isConnected()&&this.authenticated&&this.sendMessage({type:"unsubscribe",listenerId:e}),this.listeners.delete(e))}offPath(e,t=null){let n=[];for(let[i,s]of this.listeners.entries())s.path===e&&(!t||s.event===t)&&n.push(i);n.forEach(i=>this.off(i))}offAll(){Array.from(this.listeners.keys()).forEach(t=>this.off(t))}sendMessage(e){if(this.isConnected())try{return this.ws.send(JSON.stringify(e)),!0}catch(t){return console.error("Error sending WebSocket message:",t),this.messageQueue.push(e),!1}else return this.messageQueue.push(e),!1}processMessageQueue(){for(;this.messageQueue.length>0&&this.isConnected()&&this.authenticated;){let e=this.messageQueue.shift();this.sendMessage(e)}}reestablishListeners(){console.log("Re-establishing listeners after reconnection");for(let[e,t]of this.listeners.entries())this.sendMessage({type:"subscribe",path:t.path,event:t.event,listenerId:e})}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++;let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Attempting to reconnect in ${e}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect().catch(t=>{console.error("Reconnection failed:",t)})},e)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}disconnect(){this.ws&&(this.offAll(),this.ws.close(),this.ws=null,this.authenticated=!1)}generateListenerId(){return`listener_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}ping(){this.sendMessage({type:"ping"})}startKeepalive(e=3e4){this.stopKeepalive(),this.keepaliveInterval=setInterval(()=>{this.isConnected()&&this.ping()},e)}stopKeepalive(){this.keepaliveInterval&&(clearInterval(this.keepaliveInterval),this.keepaliveInterval=null)}};var Yt=class{constructor(e){this.inventory=e,this.api=new Xt,this.ws=null,this.wsListeners=new Map,this.isInitialized=!1}async initWebSocket(){if(!this.isInitialized)try{let e=SM.scene?.localUser?.name,t=window.net?.secret;if(!e||!t){console.warn("Missing credentials for WebSocket connection");return}this.ws=new Qt({userName:this.sanitizeFirebasePath(e),secret:t,debug:!1,onConnect:()=>{log("net","WebSocket connected for inventory"),this.reestablishListeners()},onDisconnect:()=>{log("net","WebSocket disconnected, attempting reconnection...")},onError:n=>{err("net","WebSocket error:",n)}}),await this.ws.connect(),this.isInitialized=!0,log("net","WebSocket initialized successfully")}catch(e){err("net","Failed to initialize WebSocket:",e),showNotification("Real-time updates unavailable - WebSocket connection failed")}}reestablishListeners(){Object.entries(this.inventory.folders).forEach(([e,t])=>{if(this.folderLinkable(t)){let n=this.getFolderPath(e,t);this.wsListeners.has(n)&&this.wsListeners.delete(n),this.setupFolderListener(e,t)}})}folderIsMine(e){return e.imported?e.importedFrom?e.importedFrom.split("/")[1]===SM.myName():!1:!0}folderLinkable(e){return e.remote?e.autoUpdate?!0:!(e.importedFrom&&e.importedFrom.split("/")[1]!==SM.myName()):!1}getFolderPath(e,t){if(t.importedFrom!==void 0)return t.importedFrom;let n=SM.scene?.localUser?.name;if(!n)return null;n=this.sanitizeFirebasePath(n);let i=`inventory/${n}`;if(t.parent){let o=this.sanitizeFirebasePath(t.parent);i+=`/${o}`}let s=this.sanitizeFirebasePath(e);return i+=`/${s}`,i}async setupFirebaseListeners(){if(this.clearFirebaseListeners(),!this.ws&&(await this.initWebSocket(),!this.ws)){log("net","WebSocket not available, real-time updates disabled");return}let e=this.sanitizeFirebasePath(SM.scene?.localUser?.name||"default");Object.entries(this.inventory.folders).forEach(([n,i])=>{this.folderLinkable(i)&&this.setupFolderListener(n,i)});let t=`glb_loader/${e}_${window.net?.secret||""}`;if(log("glb_loader","setting up listener for",t),this.ws&&this.ws.isConnected()){let n=!0,i=this.ws.on(t,"value",async s=>{if(n){n=!1;return}let o=s.val();if(!o)return;let r=o.url,a=o.mesh_name;if(log("glb_loader","change",s.key,r,a),typeof AddEntity<"u"){let l=await AddEntity("Scene",a);await AddComponent(l.id,"GLTF",{componentProperties:{url:`${window.ngrokUrl}${r}`,addColliders:!0}}),await AddComponent(l.id,"ScriptRunner",{componentProperties:{file:"GLTFGrabbable.js"}})}});this.wsListeners.set(t,[i])}}setupFolderListener(e,t){if(log("net","[SETUP WEBSOCKET LISTENER for folder: ",e,"]"),!this.ws||!this.ws.isConnected()){log("net","WebSocket not connected, skipping listener setup");return}try{let n=this.getFolderPath(e,t);if(!n){log("net","No user name found, waiting for 100ms"),setTimeout(()=>{this.setupFolderListener(e,t)},100);return}if(this.wsListeners.has(n)){log("net","[WEBSOCKET LISTENER ALREADY SETUP for folder: ",e,"]");return}let i=[],s=this.ws.on(n,"child_added",a=>{this.handleFirebaseItemAdded(a,e)});i.push(s);let o=this.ws.on(n,"child_removed",a=>{this.handleFirebaseItemRemoved(a,e)});i.push(o);let r=this.ws.on(n,"child_changed",a=>{this.handleFirebaseItemChanged(a,e)});i.push(r),this.wsListeners.set(n,i),log("net","WebSocket listeners setup for folder:",n)}catch(n){err("net","Failed to setup WebSocket listener:",n)}}handleFirebaseItemAdded(e,t){let n=e.key,i=e.val();if(n!=="_folder"){if(i._folder){let s=i._folder.name||n,o=t?`${t}/${s}`:s;if(!this.inventory.folders[o]){let r={...i._folder,name:s,parent:t,remote:!0},a=`inventory_folder_${o}`;localStorage.setItem(a,JSON.stringify(r)),this.inventory.folders[o]=r,this.setupFolderListener(o,r),log("net","Remote folder added:",o),this.inventory.ui.render()}}else if(i.itemType){let s=i.name||n;if(!this.inventory.items[s]){let o={...i,folder:t},r=`inventory_${s}`;localStorage.setItem(r,JSON.stringify(o)),this.inventory.items[s]=o,log("inspector","Remote item added:",s),showNotification(`New item "${s}" added from remote`),this.inventory.ui.render()}}}}handleFirebaseItemRemoved(e,t){let n=e.key,i=e.val();if(n!=="_folder"){if(i&&i._folder){let s=i._folder.name||n,o=t?`${t}/${s}`:s;if(this.inventory.folders[o]){Object.entries(this.inventory.items).forEach(([a,l])=>{if(l.folder===o){let d=`inventory_${a}`;localStorage.removeItem(d),delete this.inventory.items[a]}});let r=`inventory_folder_${o}`;localStorage.removeItem(r),delete this.inventory.folders[o],log("inspector","Remote folder removed:",o),this.inventory.ui.render()}}else if(i&&i.itemType){let s=i.name||n;if(this.inventory.items[s]){let o=`inventory_${s}`;localStorage.removeItem(o),delete this.inventory.items[s],log("inspector","Remote item removed:",s),showNotification(`Item "${s}" removed from remote`),this.inventory.ui.render()}}}}handleFirebaseItemChanged(e,t){log("net","handleFirebaseItemChanged");let n=e.key,i=e.val();if(n!=="_folder"&&i&&i.itemType){let s=i.name||n;if(log("net",`${s}`,i),this.inventory.items[s]){let o={...i,folder:t},r=`inventory_${s}`;if(localStorage.setItem(r,JSON.stringify(o)),this.inventory.items[s]=o,log("inspector","Remote item updated:",s),o.itemType==="script"||o.itemType==="markdown")try{if(window.scriptEditors&&window.scriptEditors.size>0){for(let[l,d]of window.scriptEditors)if(d?.currentScript?.name===s){log("script","updating script editor",s);let p=o.data||i.data||"";d.codemirror&&typeof d.codemirror.setValue=="function"&&d.codemirror.setValue(p),d.currentScript.content=p;break}}let a=SM.getEntityByName(s.replace(".","_"));if(a){let l=a.getComponent("ScriptAsset");l&&(l.Set("data",o.data),a.id===SM.selectedEntity&&inspector.propertiesPanel.render())}}catch(a){err("inspector","Failed to sync open script editor with remote update:",a)}this.inventory.selectedItem===s&&this.inventory.ui.showPreview(s),this.inventory.ui.render()}}}clearFirebaseListeners(){this.ws&&(this.wsListeners.forEach((e,t)=>{e.forEach(n=>{this.ws.off(n)})}),this.wsListeners.clear(),log("net","WebSocket listeners cleared"))}async checkRemoteStatus(){if(this.inventory.currentFolder){let e=this.inventory.folders[this.inventory.currentFolder];this.inventory.isRemote=e&&e.remote}}async copyFirebaseRef(){let e=this.getCurrentFirebasePath();if(!e){showNotification("Unable to get Firebase path");return}try{await navigator.clipboard.writeText(e),showNotification("Firebase path copied to clipboard!")}catch(t){err("net","Failed to copy to clipboard:",t),showNotification("Failed to copy path")}}getCurrentFirebasePath(){if(!SM.scene?.localUser?.name)return null;let t=`inventory/${this.sanitizeFirebasePath(SM.scene.localUser.name)}`;if(this.inventory.currentFolder){let n=this.sanitizeFirebasePath(this.inventory.currentFolder);return`${t}/${n}`}return t}removeUndefined(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>this.removeUndefined(n));let t={};for(let[n,i]of Object.entries(e))i!==void 0&&(t[n]=this.removeUndefined(i));return t}async syncToFirebase(e){if(log("net","syncToFirebase via API",e),!!this.isItemInRemoteLocation(e))try{let n=this.removeUndefined(e);await this.api.syncItem(e.name,n),log("net",`Synced item "${e.name}" to Firebase via API`)}catch(n){err("net","Failed to sync item via API:",n),showNotification(`Failed to sync item: ${n.message}`)}}async syncFolderToFirebase(e,t){if(t.remote)try{let n={author:SM.myName(),name:t.name,created:t.created||Date.now(),remote:!0,parent:t.parent||null,_description:t._description||"",public:t.public||!1};await this.api.syncFolder(e,n),log("net",`Synced folder "${e}" to Firebase via API`)}catch(n){err("net","Failed to sync folder via API:",n),showNotification(`Failed to sync folder: ${n.message}`)}}isItemInRemoteLocation(e){let t=e&&e.folder?e.folder:this.inventory.currentFolder;if(t){let n=this.inventory.folders[t];return n&&n.remote}return!1}async forceSyncAll(){if(!SM.scene?.localUser?.name){showNotification("User not logged in. Cannot sync to Firebase.");return}if(!this.isItemInRemoteLocation()){showNotification("Current folder is not remote. Cannot sync.");return}try{let e=Object.entries(this.inventory.items).filter(([n,i])=>i.folder===this.inventory.currentFolder);if(e.length===0){showNotification("No items to sync in current folder");return}showNotification(`Syncing ${e.length} item(s) to Firebase...`);let t=0;for(let[n,i]of e)await this.syncToFirebase(i),t++;showNotification(`Successfully synced ${t} item(s) to Firebase!`)}catch(e){err("net","Failed to force sync items:",e),showNotification("Failed to sync items to Firebase")}}async makeRemote(){if(!SM.scene?.localUser?.name){showNotification("User not logged in. Cannot upload to Firebase.");return}let e=this.sanitizeFirebasePath(SM.scene.localUser.name),t=this.inventory.getCurrentViewContents(),n=0;Object.keys(t.items).forEach(a=>{n+=this.inventory.calculateSize(a,!1)}),Object.keys(t.folders).forEach(a=>{n+=this.inventory.calculateSize(a,!0)});let i=1024*1024;if(n>i){showNotification(`Total size (${(n/i).toFixed(2)}MB) exceeds 1MB limit.`);return}let s=Object.keys(t.items).length,o=Object.keys(t.folders).length,r=(n/i).toFixed(2);this.inventory.ui.showConfirmModal(`Upload ${s} items and ${o} folders (${r}MB) to Firebase?`,async()=>{await this.uploadToFirebase(t,e)},"Upload to Firebase")}async uploadToFirebase(e,t){try{let n={items:{},folders:{}};for(let[s,o]of Object.entries(e.items)){let r=this.sanitizeFirebasePath(s);this.inventory.currentFolder&&(o.folder=this.inventory.currentFolder),n.items[r]=o}for(let[s,o]of Object.entries(e.folders)){let r=this.sanitizeFirebasePath(s);this.inventory.currentFolder&&(o.parent=this.inventory.currentFolder),n.folders[r]=o;let a=this.inventory.getFolderContentsRecursive(s);for(let[l,d]of Object.entries(a.items)){let p=this.sanitizeFirebasePath(l);n.items[p]=d}for(let[l,d]of Object.entries(a.folders)){let p=this.sanitizeFirebasePath(l);n.folders[p]=d}}let i=await this.api.bulkUpload(n);log("net",`Bulk uploaded ${i.count} items/folders via API`);for(let s of Object.keys(e.folders))if(this.inventory.folders[s]){this.inventory.folders[s].remote=!0;let o=`inventory_folder_${s}`;localStorage.setItem(o,JSON.stringify(this.inventory.folders[s]))}if(this.inventory.currentFolder&&this.inventory.folders[this.inventory.currentFolder]){this.inventory.folders[this.inventory.currentFolder].remote=!0;let s=`inventory_folder_${this.inventory.currentFolder}`;localStorage.setItem(s,JSON.stringify(this.inventory.folders[this.inventory.currentFolder]))}showNotification("Successfully uploaded to Firebase!"),this.inventory.ui.render(),this.setupFirebaseListeners()}catch(n){err("net","Upload failed:",n),showNotification(`Upload failed: ${n.message}`)}}async importPublicUserFolders(e){if(this.inventory.folders[e])return showNotification(`A folder named "${e}" already exists`),!1;try{let t=await this.api.importPublicUserFolders(e);if(!t.userData)return!1;let n=Date.now(),i={name:e,created:n,last_used:n,path:e,parent:null,itemType:"folder",icon:"\u{1F464}",remote:!0,importedFrom:t.userPath,author:e,public:!0,userFolder:!0},s=`inventory_folder_${e}`;localStorage.setItem(s,JSON.stringify(i)),this.inventory.folders[e]=i;let o=0;for(let[r,a]of Object.entries(t.publicFolders)){let l=`${e}/${r}`,d={itemType:"folderRef",author:e,public:!0,name:r,folder:e,path:l,importedFrom:a.path,created:n,last_used:n,icon:"\u{1F4C1}",_description:a.metadata?._description||""},p=`inventory_${l}`;localStorage.setItem(p,JSON.stringify(d)),this.inventory.items[l]=d,o++}return this.inventory.ui.render(),o>0?showNotification(`Created folder for user "${e}" with ${o} public folder${o>1?"s":""}`):showNotification(`Created folder for user "${e}" (no public folders found)`),!0}catch(t){return console.error("Error importing public user folders:",t),showNotification(`Error: ${t.message}`),!1}}async importFromFirebase(e,t,n){let i=e.split("/").pop(),s=i;t!==void 0&&t!==""&&t!==null?s=`${t}/${i}`:this.inventory.currentFolder?(t=this.inventory.currentFolder,s=`${t}/${i}`):t=null;try{if(n&&this.inventory.folders[s]){let p=this.inventory.folders[s];if(p.lastImportTime&&p.lastImportTime>n)return log("net",`Skipping import of ${s} - already imported after ${new Date(n).toISOString()}`),!1}let r=(await this.api.importFromFirebase(e,t,n)).data;if(!r)return!1;let a=0,l=r._folder&&typeof r._folder=="object",d=Object.entries(r).some(([p,h])=>p!=="_folder"&&(h.itemType||h._folder));if(l||d){this.inventory.folders[s]&&(Object.entries(this.inventory.items).forEach(([f,v])=>{if(v.folder===s||v.folder&&v.folder.startsWith(s+"/")){let b=`inventory_${f}`;localStorage.removeItem(b),delete this.inventory.items[f]}}),Object.entries(this.inventory.folders).forEach(([f,v])=>{if(v.parent===s||v.parent&&v.parent.startsWith(s+"/")){let b=`inventory_folder_${f}`;localStorage.removeItem(b),delete this.inventory.folders[f]}}));let p=Date.now(),h={name:i,created:this.inventory.folders[s]?.created||p,last_used:p,lastImportTime:p,path:s,parent:t,itemType:"folder",icon:"\u{1F4C2}",remote:!0,imported:!0,importedFrom:e},u=`inventory_folder_${s}`;localStorage.setItem(u,JSON.stringify(h)),this.inventory.folders[s]=h,a++,await this.importFolderContents(r,s,e);let y=Object.values(this.inventory.items).filter(f=>f.folder===s||f.folder&&f.folder.startsWith(s+"/")).length,m=Object.values(this.inventory.folders).filter(f=>f.parent===s||f.parent&&f.parent.startsWith(s+"/")).length;a+=y+m}else for(let[p,h]of Object.entries(r))if(p!=="_folder"&&h.itemType){let u=h.name||p,y=u,m=1;for(;this.inventory.items[y];)y=`${u}_imported_${m}`,m++;let f=Date.now(),v={...h,folder:t,imported:!0,remote:!0,importedFrom:e,importedAt:f,lastImportTime:f},b=`inventory_${y}`;localStorage.setItem(b,JSON.stringify(v)),this.inventory.items[y]=v,a++}return a>0?(this.inventory.reload(),showNotification(`Successfully imported ${a} item(s)`),this.setupFirebaseListeners(),!0):(showNotification("No new items to import"),!1)}catch(o){return console.error("Firebase import error:",o),showNotification(`Import failed: ${o.message}`),!1}}async importFolderContents(e,t,n){for(let[i,s]of Object.entries(e))if(i!=="_folder"){if(s._folder){let o=s._folder,r=o.name||i,a=`${t}/${r}`;if(!this.inventory.folders[a]){let l={...o,name:r,parent:t,remote:!0,imported:!0,importedFrom:n},d=`inventory_folder_${a}`;localStorage.setItem(d,JSON.stringify(l)),this.inventory.folders[a]=l,await this.importFolderContents(s,a,n)}}else if(s.itemType){let o=s.name||i,r=o,a=1;for(;this.inventory.items[r]&&this.inventory.items[r].folder===t;)r=`${o}_imported_${a}`,a++;let l={...s,name:r,folder:t,imported:!0,remote:!0,importedFrom:n,importedAt:Date.now()},d=`inventory_${r}`;localStorage.setItem(d,JSON.stringify(l)),this.inventory.items[r]=l}}}async uploadImageToFirebase(e){try{showNotification("Uploading image...");let t={name:e.name,folder:this.inventory.currentFolder||null,author:SM.scene?.localUser?.name||"Unknown",size:e.size,type:e.type},n=await this.api.uploadImage(e,t),i=Date.now(),s={author:t.author,name:e.name,created:i,last_used:i,itemType:"image",icon:"\u{1F5BC}\uFE0F",description:"",data:{url:n.url,storagePath:n.path,size:e.size,type:e.type,width:0,height:0}},o=new Image;o.onload=()=>{s.data.width=o.width,s.data.height=o.height,this.inventory.saveImageItem(e.name,s)},o.onerror=()=>{this.inventory.saveImageItem(e.name,s)},o.src=n.url,log("net",`Uploaded image "${e.name}" via API`)}catch(t){err("net","Image upload failed:",t),showNotification(`Image upload failed: ${t.message}`)}}sanitizeFirebasePath(e){if(!e)return"";let t=n=>n.trim().replace(/[\.\$#\[\]\/]/g,"_").replace(/\s+/g,"_").replace(/_{2,}/g,"_").replace(/^_|_$/g,"");return e.split("/").map(t).join("/")}isValidFirebasePath(e){let t=/[\.\$#\[\]\/]/;return e&&e.trim().length>0&&!t.test(e)}};var Mn={Objects:["\u231A","\u231B","\u23F0","\u23F1\uFE0F","\u23F2\uFE0F","\u23F3","\u26B0\uFE0F","\u26B1\uFE0F","\u2702\uFE0F","\u270F\uFE0F","\u2712\uFE0F","\u{1F3F7}\uFE0F","\u{1F4B0}","\u{1F4B3}","\u{1F4B4}","\u{1F4B5}","\u{1F4B6}","\u{1F4B7}","\u{1F4B8}","\u{1F4B9}","\u{1F4BC}","\u{1F4C1}","\u{1F4C2}","\u{1F4C3}","\u{1F4C4}","\u{1F4C5}","\u{1F4C6}","\u{1F4C7}","\u{1F4C8}","\u{1F4C9}","\u{1F4CA}","\u{1F4CB}","\u{1F4CC}","\u{1F4CD}","\u{1F4CE}","\u{1F4CF}","\u{1F4D0}","\u{1F4D1}","\u{1F4D2}","\u{1F4D3}","\u{1F4D4}","\u{1F4D5}","\u{1F4D6}","\u{1F4D7}","\u{1F4D8}","\u{1F4D9}","\u{1F4DA}","\u{1F4DC}","\u{1F4DD}","\u{1F4F0}","\u{1F516}","\u{1F550}","\u{1F551}","\u{1F552}","\u{1F553}","\u{1F554}","\u{1F555}","\u{1F556}","\u{1F557}","\u{1F558}","\u{1F559}","\u{1F55A}","\u{1F55B}","\u{1F55C}","\u{1F55D}","\u{1F55E}","\u{1F55F}","\u{1F560}","\u{1F561}","\u{1F562}","\u{1F563}","\u{1F564}","\u{1F565}","\u{1F566}","\u{1F567}","\u{1F570}\uFE0F","\u{1F587}\uFE0F","\u{1F58A}\uFE0F","\u{1F58B}\uFE0F","\u{1F58C}\uFE0F","\u{1F58D}\uFE0F","\u{1F5C2}\uFE0F","\u{1F5C3}\uFE0F","\u{1F5C4}\uFE0F","\u{1F5D1}\uFE0F","\u{1F5D2}\uFE0F","\u{1F5D3}\uFE0F","\u{1F5DE}\uFE0F","\u{1F5FF}","\u{1F6AA}","\u{1F6AC}","\u{1F6BD}","\u{1F6BF}","\u{1F6C1}","\u{1F6CB}\uFE0F","\u{1F6CE}\uFE0F","\u{1F6CF}\uFE0F","\u{1F6D2}","\u{1F6D7}","\u{1F9EF}","\u{1F9F3}","\u{1F9F4}","\u{1F9F7}","\u{1F9F9}","\u{1F9FA}","\u{1F9FB}","\u{1F9FC}","\u{1F9FD}","\u{1F9FE}","\u{1F9FF}","\u{1FA91}","\u{1FA92}","\u{1FA99}","\u{1FA9E}","\u{1FA9F}","\u{1FAA0}","\u{1FAA3}","\u{1FAA4}","\u{1FAA5}","\u{1FAA6}","\u{1FAA7}","\u{1FAAA}","\u{1FAAC}","\u{1FAE7}"],Tech:["\u2328\uFE0F","\u260E\uFE0F","\u2709\uFE0F","\u{1F39E}\uFE0F","\u{1F3A5}","\u{1F3AC}","\u{1F3EE}","\u{1F4A1}","\u{1F4BB}","\u{1F4BD}","\u{1F4BE}","\u{1F4BF}","\u{1F4C0}","\u{1F4DE}","\u{1F4DF}","\u{1F4E0}","\u{1F4E4}","\u{1F4E5}","\u{1F4E6}","\u{1F4E7}","\u{1F4E8}","\u{1F4E9}","\u{1F4EA}","\u{1F4EB}","\u{1F4EC}","\u{1F4ED}","\u{1F4EE}","\u{1F4F1}","\u{1F4F2}","\u{1F4F7}","\u{1F4F8}","\u{1F4F9}","\u{1F4FA}","\u{1F4FC}","\u{1F4FD}\uFE0F","\u{1F50B}","\u{1F50C}","\u{1F50D}","\u{1F50E}","\u{1F50F}","\u{1F510}","\u{1F511}","\u{1F512}","\u{1F513}","\u{1F526}","\u{1F56F}\uFE0F","\u{1F5A5}\uFE0F","\u{1F5A8}\uFE0F","\u{1F5B1}\uFE0F","\u{1F5B2}\uFE0F","\u{1F5DD}\uFE0F","\u{1F5F3}\uFE0F","\u{1F9EE}","\u{1FA94}","\u{1FAAB}"],Tools:["\u2692\uFE0F","\u2694\uFE0F","\u2696\uFE0F","\u2697\uFE0F","\u2699\uFE0F","\u26CF\uFE0F","\u26D3\uFE0F","\u26D3\uFE0F\u200D\u{1F4A5}","\u{1F3F9}","\u{1F489}","\u{1F48A}","\u{1F4A3}","\u{1F4E1}","\u{1F517}","\u{1F527}","\u{1F528}","\u{1F529}","\u{1F52C}","\u{1F52D}","\u{1F5DC}\uFE0F","\u{1F5E1}\uFE0F","\u{1F6E0}\uFE0F","\u{1F6E1}\uFE0F","\u{1F9AF}","\u{1F9EA}","\u{1F9EB}","\u{1F9EC}","\u{1F9F0}","\u{1F9F2}","\u{1FA78}","\u{1FA79}","\u{1FA7A}","\u{1FA7B}","\u{1FA7C}","\u{1FA83}","\u{1FA8F}","\u{1FA93}","\u{1FA9A}","\u{1FA9B}","\u{1FA9C}","\u{1FA9D}"],Media:["\u23CF\uFE0F","\u23E9","\u23EA","\u23EB","\u23EC","\u23ED\uFE0F","\u23EE\uFE0F","\u23EF\uFE0F","\u23F8\uFE0F","\u23F9\uFE0F","\u23FA\uFE0F","\u25B6\uFE0F","\u25C0\uFE0F","\u26D1\uFE0F","\u{1F392}","\u{1F393}","\u{1F399}\uFE0F","\u{1F39A}\uFE0F","\u{1F39B}\uFE0F","\u{1F3A4}","\u{1F3A6}","\u{1F3A7}","\u{1F3A8}","\u{1F3A9}","\u{1F3AD}","\u{1F3B5}","\u{1F3B6}","\u{1F3B7}","\u{1F3B8}","\u{1F3B9}","\u{1F3BA}","\u{1F3BB}","\u{1F3BC}","\u{1F451}","\u{1F452}","\u{1F453}","\u{1F454}","\u{1F455}","\u{1F456}","\u{1F457}","\u{1F458}","\u{1F459}","\u{1F45A}","\u{1F45B}","\u{1F45C}","\u{1F45D}","\u{1F45E}","\u{1F45F}","\u{1F460}","\u{1F461}","\u{1F462}","\u{1F484}","\u{1F48D}","\u{1F48E}","\u{1F4E2}","\u{1F4E3}","\u{1F4EF}","\u{1F4F3}","\u{1F4F4}","\u{1F4F6}","\u{1F4FB}","\u{1F4FF}","\u{1F500}","\u{1F501}","\u{1F502}","\u{1F505}","\u{1F506}","\u{1F507}","\u{1F508}","\u{1F509}","\u{1F50A}","\u{1F514}","\u{1F515}","\u{1F53C}","\u{1F53D}","\u{1F576}\uFE0F","\u{1F5BC}\uFE0F","\u{1F6CD}\uFE0F","\u{1F6DC}","\u{1F941}","\u{1F97B}","\u{1F97C}","\u{1F97D}","\u{1F97E}","\u{1F97F}","\u{1F9BA}","\u{1F9E2}","\u{1F9E3}","\u{1F9E4}","\u{1F9E5}","\u{1F9E6}","\u{1F9F5}","\u{1F9F6}","\u{1FA70}","\u{1FA71}","\u{1FA72}","\u{1FA73}","\u{1FA74}","\u{1FA87}","\u{1FA88}","\u{1FA89}","\u{1FA95}","\u{1FA96}","\u{1FA97}","\u{1FA98}","\u{1FAA1}","\u{1FAA2}","\u{1FAAD}","\u{1FAAE}"],Nature:["\u2600\uFE0F","\u2601\uFE0F","\u2602\uFE0F","\u2603\uFE0F","\u2604\uFE0F","\u2614","\u2618\uFE0F","\u26A1","\u26C4","\u26C5","\u26C8\uFE0F","\u26F1\uFE0F","\u2744\uFE0F","\u2B50","\u{1F300}","\u{1F302}","\u{1F308}","\u{1F30A}","\u{1F30C}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F319}","\u{1F31A}","\u{1F31B}","\u{1F31C}","\u{1F31D}","\u{1F31E}","\u{1F31F}","\u{1F320}","\u{1F321}\uFE0F","\u{1F324}\uFE0F","\u{1F325}\uFE0F","\u{1F326}\uFE0F","\u{1F327}\uFE0F","\u{1F328}\uFE0F","\u{1F329}\uFE0F","\u{1F32A}\uFE0F","\u{1F32B}\uFE0F","\u{1F32C}\uFE0F","\u{1F331}","\u{1F332}","\u{1F333}","\u{1F334}","\u{1F335}","\u{1F337}","\u{1F338}","\u{1F339}","\u{1F33A}","\u{1F33B}","\u{1F33C}","\u{1F33E}","\u{1F33F}","\u{1F340}","\u{1F341}","\u{1F342}","\u{1F343}","\u{1F344}","\u{1F3F5}\uFE0F","\u{1F490}","\u{1F4A7}","\u{1F4AE}","\u{1F525}","\u{1F940}","\u{1FA90}","\u{1FAB4}","\u{1FAB7}","\u{1FAB9}","\u{1FABA}","\u{1FABB}","\u{1FABE}"],Symbols:["*\uFE0F\u20E3","0\uFE0F\u20E3","1\uFE0F\u20E3","2\uFE0F\u20E3","3\uFE0F\u20E3","4\uFE0F\u20E3","5\uFE0F\u20E3","6\uFE0F\u20E3","7\uFE0F\u20E3","8\uFE0F\u20E3","9\uFE0F\u20E3","\xA9\uFE0F","\xAE\uFE0F","\u203C\uFE0F","\u2049\uFE0F","\u2122\uFE0F","\u2139\uFE0F","\u2194\uFE0F","\u2195\uFE0F","\u2196\uFE0F","\u2197\uFE0F","\u2198\uFE0F","\u2199\uFE0F","\u21A9\uFE0F","\u21AA\uFE0F","\u24C2\uFE0F","\u2611\uFE0F","\u2622\uFE0F","\u2623\uFE0F","\u2626\uFE0F","\u262A\uFE0F","\u262E\uFE0F","\u262F\uFE0F","\u2638\uFE0F","\u2640\uFE0F","\u2642\uFE0F","\u2648","\u2649","\u264A","\u264B","\u264C","\u264D","\u264E","\u264F","\u2650","\u2651","\u2652","\u2653","\u267B\uFE0F","\u267E\uFE0F","\u267F","\u2695\uFE0F","\u269B\uFE0F","\u269C\uFE0F","\u26A0\uFE0F","\u26A7\uFE0F","\u26CE","\u26D4","\u2705","\u2714\uFE0F","\u2716\uFE0F","\u271D\uFE0F","\u2721\uFE0F","\u2733\uFE0F","\u2734\uFE0F","\u2747\uFE0F","\u274C","\u274E","\u2753","\u2754","\u2755","\u2757","\u2763\uFE0F","\u2764\uFE0F","\u2764\uFE0F\u200D\u{1F525}","\u2764\uFE0F\u200D\u{1FA79}","\u2795","\u2796","\u2797","\u27A1\uFE0F","\u27B0","\u27BF","\u2934\uFE0F","\u2935\uFE0F","\u2B05\uFE0F","\u2B06\uFE0F","\u2B07\uFE0F","\u2B55","\u3030\uFE0F","\u303D\uFE0F","\u3297\uFE0F","\u3299\uFE0F","\u{1F170}\uFE0F","\u{1F171}\uFE0F","\u{1F17E}\uFE0F","\u{1F17F}\uFE0F","\u{1F18E}","\u{1F191}","\u{1F192}","\u{1F193}","\u{1F194}","\u{1F195}","\u{1F196}","\u{1F197}","\u{1F198}","\u{1F199}","\u{1F19A}","\u{1F201}","\u{1F202}\uFE0F","\u{1F21A}","\u{1F22F}","\u{1F232}","\u{1F233}","\u{1F234}","\u{1F235}","\u{1F236}","\u{1F237}\uFE0F","\u{1F238}","\u{1F239}","\u{1F23A}","\u{1F250}","\u{1F251}","\u{1F3E7}","\u{1F48C}","\u{1F493}","\u{1F494}","\u{1F495}","\u{1F496}","\u{1F497}","\u{1F498}","\u{1F499}","\u{1F49A}","\u{1F49B}","\u{1F49C}","\u{1F49D}","\u{1F49E}","\u{1F49F}","\u{1F4B1}","\u{1F4B2}","\u{1F4DB}","\u{1F4F5}","\u{1F503}","\u{1F504}","\u{1F519}","\u{1F51A}","\u{1F51B}","\u{1F51C}","\u{1F51D}","\u{1F51E}","\u{1F51F}","\u{1F520}","\u{1F521}","\u{1F522}","\u{1F523}","\u{1F524}","\u{1F52F}","\u{1F530}","\u{1F531}","\u{1F549}\uFE0F","\u{1F54E}","\u{1F5A4}","\u{1F6AB}","\u{1F6AD}","\u{1F6AE}","\u{1F6AF}","\u{1F6B0}","\u{1F6B1}","\u{1F6B3}","\u{1F6B7}","\u{1F6B8}","\u{1F6B9}","\u{1F6BA}","\u{1F6BB}","\u{1F6BC}","\u{1F6BE}","\u{1F6C2}","\u{1F6C3}","\u{1F6C4}","\u{1F6C5}","\u{1F6D0}","\u{1F7F0}","\u{1F90D}","\u{1F90E}","\u{1F9E1}","\u{1FA75}","\u{1FA76}","\u{1FA77}","\u{1FAAF}","\u{1FADF}"],Shapes:["\u25AA\uFE0F","\u25AB\uFE0F","\u25FB\uFE0F","\u25FC\uFE0F","\u25FD","\u25FE","\u26AA","\u26AB","\u2B1B","\u2B1C","\u{1F4A0}","\u{1F518}","\u{1F532}","\u{1F533}","\u{1F534}","\u{1F535}","\u{1F536}","\u{1F537}","\u{1F538}","\u{1F539}","\u{1F53A}","\u{1F53B}","\u{1F7E0}","\u{1F7E1}","\u{1F7E2}","\u{1F7E3}","\u{1F7E4}","\u{1F7E5}","\u{1F7E6}","\u{1F7E7}","\u{1F7E8}","\u{1F7E9}","\u{1F7EA}","\u{1F7EB}"],People:["\u261D\uFE0F","\u261D\u{1F3FB}","\u261D\u{1F3FC}","\u261D\u{1F3FD}","\u261D\u{1F3FE}","\u261D\u{1F3FF}","\u2620\uFE0F","\u2639\uFE0F","\u263A\uFE0F","\u26F7\uFE0F","\u26F9\uFE0F","\u26F9\uFE0F\u200D\u2640\uFE0F","\u26F9\uFE0F\u200D\u2642\uFE0F","\u26F9\u{1F3FB}","\u26F9\u{1F3FB}\u200D\u2640\uFE0F","\u26F9\u{1F3FB}\u200D\u2642\uFE0F","\u26F9\u{1F3FC}","\u26F9\u{1F3FC}\u200D\u2640\uFE0F","\u26F9\u{1F3FC}\u200D\u2642\uFE0F","\u26F9\u{1F3FD}","\u26F9\u{1F3FD}\u200D\u2640\uFE0F","\u26F9\u{1F3FD}\u200D\u2642\uFE0F","\u26F9\u{1F3FE}","\u26F9\u{1F3FE}\u200D\u2640\uFE0F","\u26F9\u{1F3FE}\u200D\u2642\uFE0F","\u26F9\u{1F3FF}","\u26F9\u{1F3FF}\u200D\u2640\uFE0F","\u26F9\u{1F3FF}\u200D\u2642\uFE0F","\u270A","\u270A\u{1F3FB}","\u270A\u{1F3FC}","\u270A\u{1F3FD}","\u270A\u{1F3FE}","\u270A\u{1F3FF}","\u270B","\u270B\u{1F3FB}","\u270B\u{1F3FC}","\u270B\u{1F3FD}","\u270B\u{1F3FE}","\u270B\u{1F3FF}","\u270C\uFE0F","\u270C\u{1F3FB}","\u270C\u{1F3FC}","\u270C\u{1F3FD}","\u270C\u{1F3FE}","\u270C\u{1F3FF}","\u270D\uFE0F","\u270D\u{1F3FB}","\u270D\u{1F3FC}","\u270D\u{1F3FD}","\u270D\u{1F3FE}","\u270D\u{1F3FF}","\u{1F385}","\u{1F385}\u{1F3FB}","\u{1F385}\u{1F3FC}","\u{1F385}\u{1F3FD}","\u{1F385}\u{1F3FE}","\u{1F385}\u{1F3FF}","\u{1F3C2}","\u{1F3C2}\u{1F3FB}","\u{1F3C2}\u{1F3FC}","\u{1F3C2}\u{1F3FD}","\u{1F3C2}\u{1F3FE}","\u{1F3C2}\u{1F3FF}","\u{1F3C3}","\u{1F3C3}\u200D\u2640\uFE0F","\u{1F3C3}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u200D\u2642\uFE0F","\u{1F3C3}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FB}","\u{1F3C3}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F3C3}\u{1F3FB}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F3C3}\u{1F3FB}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FB}\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FC}","\u{1F3C3}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F3C3}\u{1F3FC}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F3C3}\u{1F3FC}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FC}\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FD}","\u{1F3C3}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F3C3}\u{1F3FD}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F3C3}\u{1F3FD}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FD}\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FE}","\u{1F3C3}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F3C3}\u{1F3FE}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F3C3}\u{1F3FE}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FE}\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FF}","\u{1F3C3}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F3C3}\u{1F3FF}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F3C3}\u{1F3FF}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F3C3}\u{1F3FF}\u200D\u27A1\uFE0F","\u{1F3C4}","\u{1F3C4}\u200D\u2640\uFE0F","\u{1F3C4}\u200D\u2642\uFE0F","\u{1F3C4}\u{1F3FB}","\u{1F3C4}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F3C4}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F3C4}\u{1F3FC}","\u{1F3C4}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F3C4}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F3C4}\u{1F3FD}","\u{1F3C4}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F3C4}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F3C4}\u{1F3FE}","\u{1F3C4}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F3C4}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F3C4}\u{1F3FF}","\u{1F3C4}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F3C4}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F3C7}","\u{1F3C7}\u{1F3FB}","\u{1F3C7}\u{1F3FC}","\u{1F3C7}\u{1F3FD}","\u{1F3C7}\u{1F3FE}","\u{1F3C7}\u{1F3FF}","\u{1F3CA}","\u{1F3CA}\u200D\u2640\uFE0F","\u{1F3CA}\u200D\u2642\uFE0F","\u{1F3CA}\u{1F3FB}","\u{1F3CA}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F3CA}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F3CA}\u{1F3FC}","\u{1F3CA}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F3CA}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F3CA}\u{1F3FD}","\u{1F3CA}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F3CA}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F3CA}\u{1F3FE}","\u{1F3CA}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F3CA}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F3CA}\u{1F3FF}","\u{1F3CA}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F3CA}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F3CB}\uFE0F","\u{1F3CB}\uFE0F\u200D\u2640\uFE0F","\u{1F3CB}\uFE0F\u200D\u2642\uFE0F","\u{1F3CB}\u{1F3FB}","\u{1F3CB}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F3CB}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F3CB}\u{1F3FC}","\u{1F3CB}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F3CB}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F3CB}\u{1F3FD}","\u{1F3CB}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F3CB}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F3CB}\u{1F3FE}","\u{1F3CB}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F3CB}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F3CB}\u{1F3FF}","\u{1F3CB}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F3CB}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F3CC}\uFE0F","\u{1F3CC}\uFE0F\u200D\u2640\uFE0F","\u{1F3CC}\uFE0F\u200D\u2642\uFE0F","\u{1F3CC}\u{1F3FB}","\u{1F3CC}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F3CC}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F3CC}\u{1F3FC}","\u{1F3CC}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F3CC}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F3CC}\u{1F3FD}","\u{1F3CC}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F3CC}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F3CC}\u{1F3FE}","\u{1F3CC}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F3CC}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F3CC}\u{1F3FF}","\u{1F3CC}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F3CC}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F440}","\u{1F441}\uFE0F","\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F","\u{1F442}","\u{1F442}\u{1F3FB}","\u{1F442}\u{1F3FC}","\u{1F442}\u{1F3FD}","\u{1F442}\u{1F3FE}","\u{1F442}\u{1F3FF}","\u{1F443}","\u{1F443}\u{1F3FB}","\u{1F443}\u{1F3FC}","\u{1F443}\u{1F3FD}","\u{1F443}\u{1F3FE}","\u{1F443}\u{1F3FF}","\u{1F444}","\u{1F445}","\u{1F446}","\u{1F446}\u{1F3FB}","\u{1F446}\u{1F3FC}","\u{1F446}\u{1F3FD}","\u{1F446}\u{1F3FE}","\u{1F446}\u{1F3FF}","\u{1F447}","\u{1F447}\u{1F3FB}","\u{1F447}\u{1F3FC}","\u{1F447}\u{1F3FD}","\u{1F447}\u{1F3FE}","\u{1F447}\u{1F3FF}","\u{1F448}","\u{1F448}\u{1F3FB}","\u{1F448}\u{1F3FC}","\u{1F448}\u{1F3FD}","\u{1F448}\u{1F3FE}","\u{1F448}\u{1F3FF}","\u{1F449}","\u{1F449}\u{1F3FB}","\u{1F449}\u{1F3FC}","\u{1F449}\u{1F3FD}","\u{1F449}\u{1F3FE}","\u{1F449}\u{1F3FF}","\u{1F44A}","\u{1F44A}\u{1F3FB}","\u{1F44A}\u{1F3FC}","\u{1F44A}\u{1F3FD}","\u{1F44A}\u{1F3FE}","\u{1F44A}\u{1F3FF}","\u{1F44B}","\u{1F44B}\u{1F3FB}","\u{1F44B}\u{1F3FC}","\u{1F44B}\u{1F3FD}","\u{1F44B}\u{1F3FE}","\u{1F44B}\u{1F3FF}","\u{1F44C}","\u{1F44C}\u{1F3FB}","\u{1F44C}\u{1F3FC}","\u{1F44C}\u{1F3FD}","\u{1F44C}\u{1F3FE}","\u{1F44C}\u{1F3FF}","\u{1F44D}","\u{1F44D}\u{1F3FB}","\u{1F44D}\u{1F3FC}","\u{1F44D}\u{1F3FD}","\u{1F44D}\u{1F3FE}","\u{1F44D}\u{1F3FF}","\u{1F44E}","\u{1F44E}\u{1F3FB}","\u{1F44E}\u{1F3FC}","\u{1F44E}\u{1F3FD}","\u{1F44E}\u{1F3FE}","\u{1F44E}\u{1F3FF}","\u{1F44F}","\u{1F44F}\u{1F3FB}","\u{1F44F}\u{1F3FC}","\u{1F44F}\u{1F3FD}","\u{1F44F}\u{1F3FE}","\u{1F44F}\u{1F3FF}","\u{1F450}","\u{1F450}\u{1F3FB}","\u{1F450}\u{1F3FC}","\u{1F450}\u{1F3FD}","\u{1F450}\u{1F3FE}","\u{1F450}\u{1F3FF}","\u{1F463}","\u{1F464}","\u{1F465}","\u{1F466}","\u{1F466}\u{1F3FB}","\u{1F466}\u{1F3FC}","\u{1F466}\u{1F3FD}","\u{1F466}\u{1F3FE}","\u{1F466}\u{1F3FF}","\u{1F467}","\u{1F467}\u{1F3FB}","\u{1F467}\u{1F3FC}","\u{1F467}\u{1F3FD}","\u{1F467}\u{1F3FE}","\u{1F467}\u{1F3FF}","\u{1F468}","\u{1F468}\u200D\u2695\uFE0F","\u{1F468}\u200D\u2696\uFE0F","\u{1F468}\u200D\u2708\uFE0F","\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F468}","\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}","\u{1F468}\u200D\u{1F33E}","\u{1F468}\u200D\u{1F373}","\u{1F468}\u200D\u{1F37C}","\u{1F468}\u200D\u{1F393}","\u{1F468}\u200D\u{1F3A4}","\u{1F468}\u200D\u{1F3A8}","\u{1F468}\u200D\u{1F3EB}","\u{1F468}\u200D\u{1F3ED}","\u{1F468}\u200D\u{1F466}","\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","\u{1F468}\u200D\u{1F467}","\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","\u{1F468}\u200D\u{1F468}\u200D\u{1F466}","\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}","\u{1F468}\u200D\u{1F468}\u200D\u{1F467}","\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}","\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}","\u{1F468}\u200D\u{1F469}\u200D\u{1F466}","\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","\u{1F468}\u200D\u{1F469}\u200D\u{1F467}","\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","\u{1F468}\u200D\u{1F4BB}","\u{1F468}\u200D\u{1F4BC}","\u{1F468}\u200D\u{1F527}","\u{1F468}\u200D\u{1F52C}","\u{1F468}\u200D\u{1F680}","\u{1F468}\u200D\u{1F692}","\u{1F468}\u200D\u{1F9AF}","\u{1F468}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u200D\u{1F9B0}","\u{1F468}\u200D\u{1F9B1}","\u{1F468}\u200D\u{1F9B2}","\u{1F468}\u200D\u{1F9B3}","\u{1F468}\u200D\u{1F9BC}","\u{1F468}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u200D\u{1F9BD}","\u{1F468}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FB}\u200D\u2695\uFE0F","\u{1F468}\u{1F3FB}\u200D\u2696\uFE0F","\u{1F468}\u{1F3FB}\u200D\u2708\uFE0F","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FB}\u200D\u{1F33E}","\u{1F468}\u{1F3FB}\u200D\u{1F373}","\u{1F468}\u{1F3FB}\u200D\u{1F37C}","\u{1F468}\u{1F3FB}\u200D\u{1F393}","\u{1F468}\u{1F3FB}\u200D\u{1F3A4}","\u{1F468}\u{1F3FB}\u200D\u{1F3A8}","\u{1F468}\u{1F3FB}\u200D\u{1F3EB}","\u{1F468}\u{1F3FB}\u200D\u{1F3ED}","\u{1F468}\u{1F3FB}\u200D\u{1F4BB}","\u{1F468}\u{1F3FB}\u200D\u{1F4BC}","\u{1F468}\u{1F3FB}\u200D\u{1F527}","\u{1F468}\u{1F3FB}\u200D\u{1F52C}","\u{1F468}\u{1F3FB}\u200D\u{1F680}","\u{1F468}\u{1F3FB}\u200D\u{1F692}","\u{1F468}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FB}\u200D\u{1F9AF}","\u{1F468}\u{1F3FB}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FB}\u200D\u{1F9B0}","\u{1F468}\u{1F3FB}\u200D\u{1F9B1}","\u{1F468}\u{1F3FB}\u200D\u{1F9B2}","\u{1F468}\u{1F3FB}\u200D\u{1F9B3}","\u{1F468}\u{1F3FB}\u200D\u{1F9BC}","\u{1F468}\u{1F3FB}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FB}\u200D\u{1F9BD}","\u{1F468}\u{1F3FB}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FC}\u200D\u2695\uFE0F","\u{1F468}\u{1F3FC}\u200D\u2696\uFE0F","\u{1F468}\u{1F3FC}\u200D\u2708\uFE0F","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FC}\u200D\u{1F33E}","\u{1F468}\u{1F3FC}\u200D\u{1F373}","\u{1F468}\u{1F3FC}\u200D\u{1F37C}","\u{1F468}\u{1F3FC}\u200D\u{1F393}","\u{1F468}\u{1F3FC}\u200D\u{1F3A4}","\u{1F468}\u{1F3FC}\u200D\u{1F3A8}","\u{1F468}\u{1F3FC}\u200D\u{1F3EB}","\u{1F468}\u{1F3FC}\u200D\u{1F3ED}","\u{1F468}\u{1F3FC}\u200D\u{1F4BB}","\u{1F468}\u{1F3FC}\u200D\u{1F4BC}","\u{1F468}\u{1F3FC}\u200D\u{1F527}","\u{1F468}\u{1F3FC}\u200D\u{1F52C}","\u{1F468}\u{1F3FC}\u200D\u{1F680}","\u{1F468}\u{1F3FC}\u200D\u{1F692}","\u{1F468}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FC}\u200D\u{1F9AF}","\u{1F468}\u{1F3FC}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FC}\u200D\u{1F9B0}","\u{1F468}\u{1F3FC}\u200D\u{1F9B1}","\u{1F468}\u{1F3FC}\u200D\u{1F9B2}","\u{1F468}\u{1F3FC}\u200D\u{1F9B3}","\u{1F468}\u{1F3FC}\u200D\u{1F9BC}","\u{1F468}\u{1F3FC}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FC}\u200D\u{1F9BD}","\u{1F468}\u{1F3FC}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FD}\u200D\u2695\uFE0F","\u{1F468}\u{1F3FD}\u200D\u2696\uFE0F","\u{1F468}\u{1F3FD}\u200D\u2708\uFE0F","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FD}\u200D\u{1F33E}","\u{1F468}\u{1F3FD}\u200D\u{1F373}","\u{1F468}\u{1F3FD}\u200D\u{1F37C}","\u{1F468}\u{1F3FD}\u200D\u{1F393}","\u{1F468}\u{1F3FD}\u200D\u{1F3A4}","\u{1F468}\u{1F3FD}\u200D\u{1F3A8}","\u{1F468}\u{1F3FD}\u200D\u{1F3EB}","\u{1F468}\u{1F3FD}\u200D\u{1F3ED}","\u{1F468}\u{1F3FD}\u200D\u{1F4BB}","\u{1F468}\u{1F3FD}\u200D\u{1F4BC}","\u{1F468}\u{1F3FD}\u200D\u{1F527}","\u{1F468}\u{1F3FD}\u200D\u{1F52C}","\u{1F468}\u{1F3FD}\u200D\u{1F680}","\u{1F468}\u{1F3FD}\u200D\u{1F692}","\u{1F468}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FD}\u200D\u{1F9AF}","\u{1F468}\u{1F3FD}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FD}\u200D\u{1F9B0}","\u{1F468}\u{1F3FD}\u200D\u{1F9B1}","\u{1F468}\u{1F3FD}\u200D\u{1F9B2}","\u{1F468}\u{1F3FD}\u200D\u{1F9B3}","\u{1F468}\u{1F3FD}\u200D\u{1F9BC}","\u{1F468}\u{1F3FD}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FD}\u200D\u{1F9BD}","\u{1F468}\u{1F3FD}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FE}\u200D\u2695\uFE0F","\u{1F468}\u{1F3FE}\u200D\u2696\uFE0F","\u{1F468}\u{1F3FE}\u200D\u2708\uFE0F","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FE}\u200D\u{1F33E}","\u{1F468}\u{1F3FE}\u200D\u{1F373}","\u{1F468}\u{1F3FE}\u200D\u{1F37C}","\u{1F468}\u{1F3FE}\u200D\u{1F393}","\u{1F468}\u{1F3FE}\u200D\u{1F3A4}","\u{1F468}\u{1F3FE}\u200D\u{1F3A8}","\u{1F468}\u{1F3FE}\u200D\u{1F3EB}","\u{1F468}\u{1F3FE}\u200D\u{1F3ED}","\u{1F468}\u{1F3FE}\u200D\u{1F4BB}","\u{1F468}\u{1F3FE}\u200D\u{1F4BC}","\u{1F468}\u{1F3FE}\u200D\u{1F527}","\u{1F468}\u{1F3FE}\u200D\u{1F52C}","\u{1F468}\u{1F3FE}\u200D\u{1F680}","\u{1F468}\u{1F3FE}\u200D\u{1F692}","\u{1F468}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FE}\u200D\u{1F9AF}","\u{1F468}\u{1F3FE}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FE}\u200D\u{1F9B0}","\u{1F468}\u{1F3FE}\u200D\u{1F9B1}","\u{1F468}\u{1F3FE}\u200D\u{1F9B2}","\u{1F468}\u{1F3FE}\u200D\u{1F9B3}","\u{1F468}\u{1F3FE}\u200D\u{1F9BC}","\u{1F468}\u{1F3FE}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FE}\u200D\u{1F9BD}","\u{1F468}\u{1F3FE}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FF}\u200D\u2695\uFE0F","\u{1F468}\u{1F3FF}\u200D\u2696\uFE0F","\u{1F468}\u{1F3FF}\u200D\u2708\uFE0F","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F468}\u{1F3FF}\u200D\u{1F33E}","\u{1F468}\u{1F3FF}\u200D\u{1F373}","\u{1F468}\u{1F3FF}\u200D\u{1F37C}","\u{1F468}\u{1F3FF}\u200D\u{1F393}","\u{1F468}\u{1F3FF}\u200D\u{1F3A4}","\u{1F468}\u{1F3FF}\u200D\u{1F3A8}","\u{1F468}\u{1F3FF}\u200D\u{1F3EB}","\u{1F468}\u{1F3FF}\u200D\u{1F3ED}","\u{1F468}\u{1F3FF}\u200D\u{1F4BB}","\u{1F468}\u{1F3FF}\u200D\u{1F4BC}","\u{1F468}\u{1F3FF}\u200D\u{1F527}","\u{1F468}\u{1F3FF}\u200D\u{1F52C}","\u{1F468}\u{1F3FF}\u200D\u{1F680}","\u{1F468}\u{1F3FF}\u200D\u{1F692}","\u{1F468}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F468}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F468}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F468}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F468}\u{1F3FF}\u200D\u{1F9AF}","\u{1F468}\u{1F3FF}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FF}\u200D\u{1F9B0}","\u{1F468}\u{1F3FF}\u200D\u{1F9B1}","\u{1F468}\u{1F3FF}\u200D\u{1F9B2}","\u{1F468}\u{1F3FF}\u200D\u{1F9B3}","\u{1F468}\u{1F3FF}\u200D\u{1F9BC}","\u{1F468}\u{1F3FF}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F468}\u{1F3FF}\u200D\u{1F9BD}","\u{1F468}\u{1F3FF}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}","\u{1F469}\u200D\u2695\uFE0F","\u{1F469}\u200D\u2696\uFE0F","\u{1F469}\u200D\u2708\uFE0F","\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F468}","\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F469}","\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}","\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}","\u{1F469}\u200D\u{1F33E}","\u{1F469}\u200D\u{1F373}","\u{1F469}\u200D\u{1F37C}","\u{1F469}\u200D\u{1F393}","\u{1F469}\u200D\u{1F3A4}","\u{1F469}\u200D\u{1F3A8}","\u{1F469}\u200D\u{1F3EB}","\u{1F469}\u200D\u{1F3ED}","\u{1F469}\u200D\u{1F466}","\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","\u{1F469}\u200D\u{1F467}","\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","\u{1F469}\u200D\u{1F469}\u200D\u{1F466}","\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}","\u{1F469}\u200D\u{1F469}\u200D\u{1F467}","\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}","\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}","\u{1F469}\u200D\u{1F4BB}","\u{1F469}\u200D\u{1F4BC}","\u{1F469}\u200D\u{1F527}","\u{1F469}\u200D\u{1F52C}","\u{1F469}\u200D\u{1F680}","\u{1F469}\u200D\u{1F692}","\u{1F469}\u200D\u{1F9AF}","\u{1F469}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u200D\u{1F9B0}","\u{1F469}\u200D\u{1F9B1}","\u{1F469}\u200D\u{1F9B2}","\u{1F469}\u200D\u{1F9B3}","\u{1F469}\u200D\u{1F9BC}","\u{1F469}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u200D\u{1F9BD}","\u{1F469}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FB}\u200D\u2695\uFE0F","\u{1F469}\u{1F3FB}\u200D\u2696\uFE0F","\u{1F469}\u{1F3FB}\u200D\u2708\uFE0F","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u{1F33E}","\u{1F469}\u{1F3FB}\u200D\u{1F373}","\u{1F469}\u{1F3FB}\u200D\u{1F37C}","\u{1F469}\u{1F3FB}\u200D\u{1F393}","\u{1F469}\u{1F3FB}\u200D\u{1F3A4}","\u{1F469}\u{1F3FB}\u200D\u{1F3A8}","\u{1F469}\u{1F3FB}\u200D\u{1F3EB}","\u{1F469}\u{1F3FB}\u200D\u{1F3ED}","\u{1F469}\u{1F3FB}\u200D\u{1F4BB}","\u{1F469}\u{1F3FB}\u200D\u{1F4BC}","\u{1F469}\u{1F3FB}\u200D\u{1F527}","\u{1F469}\u{1F3FB}\u200D\u{1F52C}","\u{1F469}\u{1F3FB}\u200D\u{1F680}","\u{1F469}\u{1F3FB}\u200D\u{1F692}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FB}\u200D\u{1F9AF}","\u{1F469}\u{1F3FB}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FB}\u200D\u{1F9B0}","\u{1F469}\u{1F3FB}\u200D\u{1F9B1}","\u{1F469}\u{1F3FB}\u200D\u{1F9B2}","\u{1F469}\u{1F3FB}\u200D\u{1F9B3}","\u{1F469}\u{1F3FB}\u200D\u{1F9BC}","\u{1F469}\u{1F3FB}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FB}\u200D\u{1F9BD}","\u{1F469}\u{1F3FB}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FC}\u200D\u2695\uFE0F","\u{1F469}\u{1F3FC}\u200D\u2696\uFE0F","\u{1F469}\u{1F3FC}\u200D\u2708\uFE0F","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u{1F33E}","\u{1F469}\u{1F3FC}\u200D\u{1F373}","\u{1F469}\u{1F3FC}\u200D\u{1F37C}","\u{1F469}\u{1F3FC}\u200D\u{1F393}","\u{1F469}\u{1F3FC}\u200D\u{1F3A4}","\u{1F469}\u{1F3FC}\u200D\u{1F3A8}","\u{1F469}\u{1F3FC}\u200D\u{1F3EB}","\u{1F469}\u{1F3FC}\u200D\u{1F3ED}","\u{1F469}\u{1F3FC}\u200D\u{1F4BB}","\u{1F469}\u{1F3FC}\u200D\u{1F4BC}","\u{1F469}\u{1F3FC}\u200D\u{1F527}","\u{1F469}\u{1F3FC}\u200D\u{1F52C}","\u{1F469}\u{1F3FC}\u200D\u{1F680}","\u{1F469}\u{1F3FC}\u200D\u{1F692}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FC}\u200D\u{1F9AF}","\u{1F469}\u{1F3FC}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FC}\u200D\u{1F9B0}","\u{1F469}\u{1F3FC}\u200D\u{1F9B1}","\u{1F469}\u{1F3FC}\u200D\u{1F9B2}","\u{1F469}\u{1F3FC}\u200D\u{1F9B3}","\u{1F469}\u{1F3FC}\u200D\u{1F9BC}","\u{1F469}\u{1F3FC}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FC}\u200D\u{1F9BD}","\u{1F469}\u{1F3FC}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FD}\u200D\u2695\uFE0F","\u{1F469}\u{1F3FD}\u200D\u2696\uFE0F","\u{1F469}\u{1F3FD}\u200D\u2708\uFE0F","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u{1F33E}","\u{1F469}\u{1F3FD}\u200D\u{1F373}","\u{1F469}\u{1F3FD}\u200D\u{1F37C}","\u{1F469}\u{1F3FD}\u200D\u{1F393}","\u{1F469}\u{1F3FD}\u200D\u{1F3A4}","\u{1F469}\u{1F3FD}\u200D\u{1F3A8}","\u{1F469}\u{1F3FD}\u200D\u{1F3EB}","\u{1F469}\u{1F3FD}\u200D\u{1F3ED}","\u{1F469}\u{1F3FD}\u200D\u{1F4BB}","\u{1F469}\u{1F3FD}\u200D\u{1F4BC}","\u{1F469}\u{1F3FD}\u200D\u{1F527}","\u{1F469}\u{1F3FD}\u200D\u{1F52C}","\u{1F469}\u{1F3FD}\u200D\u{1F680}","\u{1F469}\u{1F3FD}\u200D\u{1F692}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FD}\u200D\u{1F9AF}","\u{1F469}\u{1F3FD}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FD}\u200D\u{1F9B0}","\u{1F469}\u{1F3FD}\u200D\u{1F9B1}","\u{1F469}\u{1F3FD}\u200D\u{1F9B2}","\u{1F469}\u{1F3FD}\u200D\u{1F9B3}","\u{1F469}\u{1F3FD}\u200D\u{1F9BC}","\u{1F469}\u{1F3FD}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FD}\u200D\u{1F9BD}","\u{1F469}\u{1F3FD}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FE}\u200D\u2695\uFE0F","\u{1F469}\u{1F3FE}\u200D\u2696\uFE0F","\u{1F469}\u{1F3FE}\u200D\u2708\uFE0F","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u{1F33E}","\u{1F469}\u{1F3FE}\u200D\u{1F373}","\u{1F469}\u{1F3FE}\u200D\u{1F37C}","\u{1F469}\u{1F3FE}\u200D\u{1F393}","\u{1F469}\u{1F3FE}\u200D\u{1F3A4}","\u{1F469}\u{1F3FE}\u200D\u{1F3A8}","\u{1F469}\u{1F3FE}\u200D\u{1F3EB}","\u{1F469}\u{1F3FE}\u200D\u{1F3ED}","\u{1F469}\u{1F3FE}\u200D\u{1F4BB}","\u{1F469}\u{1F3FE}\u200D\u{1F4BC}","\u{1F469}\u{1F3FE}\u200D\u{1F527}","\u{1F469}\u{1F3FE}\u200D\u{1F52C}","\u{1F469}\u{1F3FE}\u200D\u{1F680}","\u{1F469}\u{1F3FE}\u200D\u{1F692}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FE}\u200D\u{1F9AF}","\u{1F469}\u{1F3FE}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FE}\u200D\u{1F9B0}","\u{1F469}\u{1F3FE}\u200D\u{1F9B1}","\u{1F469}\u{1F3FE}\u200D\u{1F9B2}","\u{1F469}\u{1F3FE}\u200D\u{1F9B3}","\u{1F469}\u{1F3FE}\u200D\u{1F9BC}","\u{1F469}\u{1F3FE}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FE}\u200D\u{1F9BD}","\u{1F469}\u{1F3FE}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FF}\u200D\u2695\uFE0F","\u{1F469}\u{1F3FF}\u200D\u2696\uFE0F","\u{1F469}\u{1F3FF}\u200D\u2708\uFE0F","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}","\u{1F469}\u{1F3FF}\u200D\u{1F33E}","\u{1F469}\u{1F3FF}\u200D\u{1F373}","\u{1F469}\u{1F3FF}\u200D\u{1F37C}","\u{1F469}\u{1F3FF}\u200D\u{1F393}","\u{1F469}\u{1F3FF}\u200D\u{1F3A4}","\u{1F469}\u{1F3FF}\u200D\u{1F3A8}","\u{1F469}\u{1F3FF}\u200D\u{1F3EB}","\u{1F469}\u{1F3FF}\u200D\u{1F3ED}","\u{1F469}\u{1F3FF}\u200D\u{1F4BB}","\u{1F469}\u{1F3FF}\u200D\u{1F4BC}","\u{1F469}\u{1F3FF}\u200D\u{1F527}","\u{1F469}\u{1F3FF}\u200D\u{1F52C}","\u{1F469}\u{1F3FF}\u200D\u{1F680}","\u{1F469}\u{1F3FF}\u200D\u{1F692}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F468}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FB}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FC}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FD}","\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F469}\u{1F3FE}","\u{1F469}\u{1F3FF}\u200D\u{1F9AF}","\u{1F469}\u{1F3FF}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FF}\u200D\u{1F9B0}","\u{1F469}\u{1F3FF}\u200D\u{1F9B1}","\u{1F469}\u{1F3FF}\u200D\u{1F9B2}","\u{1F469}\u{1F3FF}\u200D\u{1F9B3}","\u{1F469}\u{1F3FF}\u200D\u{1F9BC}","\u{1F469}\u{1F3FF}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F469}\u{1F3FF}\u200D\u{1F9BD}","\u{1F469}\u{1F3FF}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F46A}","\u{1F46B}","\u{1F46B}\u{1F3FB}","\u{1F46B}\u{1F3FC}","\u{1F46B}\u{1F3FD}","\u{1F46B}\u{1F3FE}","\u{1F46B}\u{1F3FF}","\u{1F46C}","\u{1F46C}\u{1F3FB}","\u{1F46C}\u{1F3FC}","\u{1F46C}\u{1F3FD}","\u{1F46C}\u{1F3FE}","\u{1F46C}\u{1F3FF}","\u{1F46D}","\u{1F46D}\u{1F3FB}","\u{1F46D}\u{1F3FC}","\u{1F46D}\u{1F3FD}","\u{1F46D}\u{1F3FE}","\u{1F46D}\u{1F3FF}","\u{1F46E}","\u{1F46E}\u200D\u2640\uFE0F","\u{1F46E}\u200D\u2642\uFE0F","\u{1F46E}\u{1F3FB}","\u{1F46E}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F46E}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F46E}\u{1F3FC}","\u{1F46E}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F46E}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F46E}\u{1F3FD}","\u{1F46E}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F46E}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F46E}\u{1F3FE}","\u{1F46E}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F46E}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F46E}\u{1F3FF}","\u{1F46E}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F46E}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F46F}","\u{1F46F}\u200D\u2640\uFE0F","\u{1F46F}\u200D\u2642\uFE0F","\u{1F470}","\u{1F470}\u200D\u2640\uFE0F","\u{1F470}\u200D\u2642\uFE0F","\u{1F470}\u{1F3FB}","\u{1F470}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F470}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F470}\u{1F3FC}","\u{1F470}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F470}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F470}\u{1F3FD}","\u{1F470}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F470}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F470}\u{1F3FE}","\u{1F470}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F470}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F470}\u{1F3FF}","\u{1F470}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F470}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F471}","\u{1F471}\u200D\u2640\uFE0F","\u{1F471}\u200D\u2642\uFE0F","\u{1F471}\u{1F3FB}","\u{1F471}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F471}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F471}\u{1F3FC}","\u{1F471}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F471}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F471}\u{1F3FD}","\u{1F471}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F471}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F471}\u{1F3FE}","\u{1F471}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F471}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F471}\u{1F3FF}","\u{1F471}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F471}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F472}","\u{1F472}\u{1F3FB}","\u{1F472}\u{1F3FC}","\u{1F472}\u{1F3FD}","\u{1F472}\u{1F3FE}","\u{1F472}\u{1F3FF}","\u{1F473}","\u{1F473}\u200D\u2640\uFE0F","\u{1F473}\u200D\u2642\uFE0F","\u{1F473}\u{1F3FB}","\u{1F473}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F473}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F473}\u{1F3FC}","\u{1F473}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F473}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F473}\u{1F3FD}","\u{1F473}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F473}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F473}\u{1F3FE}","\u{1F473}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F473}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F473}\u{1F3FF}","\u{1F473}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F473}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F474}","\u{1F474}\u{1F3FB}","\u{1F474}\u{1F3FC}","\u{1F474}\u{1F3FD}","\u{1F474}\u{1F3FE}","\u{1F474}\u{1F3FF}","\u{1F475}","\u{1F475}\u{1F3FB}","\u{1F475}\u{1F3FC}","\u{1F475}\u{1F3FD}","\u{1F475}\u{1F3FE}","\u{1F475}\u{1F3FF}","\u{1F476}","\u{1F476}\u{1F3FB}","\u{1F476}\u{1F3FC}","\u{1F476}\u{1F3FD}","\u{1F476}\u{1F3FE}","\u{1F476}\u{1F3FF}","\u{1F477}","\u{1F477}\u200D\u2640\uFE0F","\u{1F477}\u200D\u2642\uFE0F","\u{1F477}\u{1F3FB}","\u{1F477}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F477}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F477}\u{1F3FC}","\u{1F477}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F477}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F477}\u{1F3FD}","\u{1F477}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F477}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F477}\u{1F3FE}","\u{1F477}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F477}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F477}\u{1F3FF}","\u{1F477}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F477}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F478}","\u{1F478}\u{1F3FB}","\u{1F478}\u{1F3FC}","\u{1F478}\u{1F3FD}","\u{1F478}\u{1F3FE}","\u{1F478}\u{1F3FF}","\u{1F479}","\u{1F47A}","\u{1F47B}","\u{1F47C}","\u{1F47C}\u{1F3FB}","\u{1F47C}\u{1F3FC}","\u{1F47C}\u{1F3FD}","\u{1F47C}\u{1F3FE}","\u{1F47C}\u{1F3FF}","\u{1F47D}","\u{1F47E}","\u{1F47F}","\u{1F480}","\u{1F481}","\u{1F481}\u200D\u2640\uFE0F","\u{1F481}\u200D\u2642\uFE0F","\u{1F481}\u{1F3FB}","\u{1F481}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F481}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F481}\u{1F3FC}","\u{1F481}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F481}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F481}\u{1F3FD}","\u{1F481}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F481}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F481}\u{1F3FE}","\u{1F481}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F481}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F481}\u{1F3FF}","\u{1F481}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F481}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F482}","\u{1F482}\u200D\u2640\uFE0F","\u{1F482}\u200D\u2642\uFE0F","\u{1F482}\u{1F3FB}","\u{1F482}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F482}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F482}\u{1F3FC}","\u{1F482}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F482}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F482}\u{1F3FD}","\u{1F482}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F482}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F482}\u{1F3FE}","\u{1F482}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F482}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F482}\u{1F3FF}","\u{1F482}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F482}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F483}","\u{1F483}\u{1F3FB}","\u{1F483}\u{1F3FC}","\u{1F483}\u{1F3FD}","\u{1F483}\u{1F3FE}","\u{1F483}\u{1F3FF}","\u{1F485}","\u{1F485}\u{1F3FB}","\u{1F485}\u{1F3FC}","\u{1F485}\u{1F3FD}","\u{1F485}\u{1F3FE}","\u{1F485}\u{1F3FF}","\u{1F486}","\u{1F486}\u200D\u2640\uFE0F","\u{1F486}\u200D\u2642\uFE0F","\u{1F486}\u{1F3FB}","\u{1F486}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F486}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F486}\u{1F3FC}","\u{1F486}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F486}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F486}\u{1F3FD}","\u{1F486}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F486}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F486}\u{1F3FE}","\u{1F486}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F486}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F486}\u{1F3FF}","\u{1F486}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F486}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F487}","\u{1F487}\u200D\u2640\uFE0F","\u{1F487}\u200D\u2642\uFE0F","\u{1F487}\u{1F3FB}","\u{1F487}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F487}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F487}\u{1F3FC}","\u{1F487}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F487}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F487}\u{1F3FD}","\u{1F487}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F487}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F487}\u{1F3FE}","\u{1F487}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F487}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F487}\u{1F3FF}","\u{1F487}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F487}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F48B}","\u{1F48F}","\u{1F48F}\u{1F3FB}","\u{1F48F}\u{1F3FC}","\u{1F48F}\u{1F3FD}","\u{1F48F}\u{1F3FE}","\u{1F48F}\u{1F3FF}","\u{1F491}","\u{1F491}\u{1F3FB}","\u{1F491}\u{1F3FC}","\u{1F491}\u{1F3FD}","\u{1F491}\u{1F3FE}","\u{1F491}\u{1F3FF}","\u{1F4A2}","\u{1F4A4}","\u{1F4A5}","\u{1F4A6}","\u{1F4A8}","\u{1F4A9}","\u{1F4AA}","\u{1F4AA}\u{1F3FB}","\u{1F4AA}\u{1F3FC}","\u{1F4AA}\u{1F3FD}","\u{1F4AA}\u{1F3FE}","\u{1F4AA}\u{1F3FF}","\u{1F4AB}","\u{1F4AC}","\u{1F4AD}","\u{1F4AF}","\u{1F573}\uFE0F","\u{1F574}\uFE0F","\u{1F574}\u{1F3FB}","\u{1F574}\u{1F3FC}","\u{1F574}\u{1F3FD}","\u{1F574}\u{1F3FE}","\u{1F574}\u{1F3FF}","\u{1F575}\uFE0F","\u{1F575}\uFE0F\u200D\u2640\uFE0F","\u{1F575}\uFE0F\u200D\u2642\uFE0F","\u{1F575}\u{1F3FB}","\u{1F575}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F575}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F575}\u{1F3FC}","\u{1F575}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F575}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F575}\u{1F3FD}","\u{1F575}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F575}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F575}\u{1F3FE}","\u{1F575}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F575}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F575}\u{1F3FF}","\u{1F575}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F575}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F57A}","\u{1F57A}\u{1F3FB}","\u{1F57A}\u{1F3FC}","\u{1F57A}\u{1F3FD}","\u{1F57A}\u{1F3FE}","\u{1F57A}\u{1F3FF}","\u{1F590}\uFE0F","\u{1F590}\u{1F3FB}","\u{1F590}\u{1F3FC}","\u{1F590}\u{1F3FD}","\u{1F590}\u{1F3FE}","\u{1F590}\u{1F3FF}","\u{1F595}","\u{1F595}\u{1F3FB}","\u{1F595}\u{1F3FC}","\u{1F595}\u{1F3FD}","\u{1F595}\u{1F3FE}","\u{1F595}\u{1F3FF}","\u{1F596}","\u{1F596}\u{1F3FB}","\u{1F596}\u{1F3FC}","\u{1F596}\u{1F3FD}","\u{1F596}\u{1F3FE}","\u{1F596}\u{1F3FF}","\u{1F5E3}\uFE0F","\u{1F5E8}\uFE0F","\u{1F5EF}\uFE0F","\u{1F600}","\u{1F601}","\u{1F602}","\u{1F603}","\u{1F604}","\u{1F605}","\u{1F606}","\u{1F607}","\u{1F608}","\u{1F609}","\u{1F60A}","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F60E}","\u{1F60F}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F613}","\u{1F614}","\u{1F615}","\u{1F616}","\u{1F617}","\u{1F618}","\u{1F619}","\u{1F61A}","\u{1F61B}","\u{1F61C}","\u{1F61D}","\u{1F61E}","\u{1F61F}","\u{1F620}","\u{1F621}","\u{1F622}","\u{1F623}","\u{1F624}","\u{1F625}","\u{1F626}","\u{1F627}","\u{1F628}","\u{1F629}","\u{1F62A}","\u{1F62B}","\u{1F62C}","\u{1F62D}","\u{1F62E}","\u{1F62E}\u200D\u{1F4A8}","\u{1F62F}","\u{1F630}","\u{1F631}","\u{1F632}","\u{1F633}","\u{1F634}","\u{1F635}","\u{1F635}\u200D\u{1F4AB}","\u{1F636}","\u{1F636}\u200D\u{1F32B}\uFE0F","\u{1F637}","\u{1F638}","\u{1F639}","\u{1F63A}","\u{1F63B}","\u{1F63C}","\u{1F63D}","\u{1F63E}","\u{1F63F}","\u{1F640}","\u{1F641}","\u{1F642}","\u{1F642}\u200D\u2194\uFE0F","\u{1F642}\u200D\u2195\uFE0F","\u{1F643}","\u{1F644}","\u{1F645}","\u{1F645}\u200D\u2640\uFE0F","\u{1F645}\u200D\u2642\uFE0F","\u{1F645}\u{1F3FB}","\u{1F645}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F645}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F645}\u{1F3FC}","\u{1F645}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F645}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F645}\u{1F3FD}","\u{1F645}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F645}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F645}\u{1F3FE}","\u{1F645}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F645}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F645}\u{1F3FF}","\u{1F645}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F645}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F646}","\u{1F646}\u200D\u2640\uFE0F","\u{1F646}\u200D\u2642\uFE0F","\u{1F646}\u{1F3FB}","\u{1F646}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F646}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F646}\u{1F3FC}","\u{1F646}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F646}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F646}\u{1F3FD}","\u{1F646}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F646}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F646}\u{1F3FE}","\u{1F646}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F646}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F646}\u{1F3FF}","\u{1F646}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F646}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F647}","\u{1F647}\u200D\u2640\uFE0F","\u{1F647}\u200D\u2642\uFE0F","\u{1F647}\u{1F3FB}","\u{1F647}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F647}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F647}\u{1F3FC}","\u{1F647}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F647}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F647}\u{1F3FD}","\u{1F647}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F647}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F647}\u{1F3FE}","\u{1F647}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F647}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F647}\u{1F3FF}","\u{1F647}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F647}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F64B}","\u{1F64B}\u200D\u2640\uFE0F","\u{1F64B}\u200D\u2642\uFE0F","\u{1F64B}\u{1F3FB}","\u{1F64B}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F64B}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F64B}\u{1F3FC}","\u{1F64B}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F64B}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F64B}\u{1F3FD}","\u{1F64B}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F64B}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F64B}\u{1F3FE}","\u{1F64B}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F64B}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F64B}\u{1F3FF}","\u{1F64B}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F64B}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F64C}","\u{1F64C}\u{1F3FB}","\u{1F64C}\u{1F3FC}","\u{1F64C}\u{1F3FD}","\u{1F64C}\u{1F3FE}","\u{1F64C}\u{1F3FF}","\u{1F64D}","\u{1F64D}\u200D\u2640\uFE0F","\u{1F64D}\u200D\u2642\uFE0F","\u{1F64D}\u{1F3FB}","\u{1F64D}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F64D}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F64D}\u{1F3FC}","\u{1F64D}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F64D}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F64D}\u{1F3FD}","\u{1F64D}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F64D}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F64D}\u{1F3FE}","\u{1F64D}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F64D}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F64D}\u{1F3FF}","\u{1F64D}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F64D}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F64E}","\u{1F64E}\u200D\u2640\uFE0F","\u{1F64E}\u200D\u2642\uFE0F","\u{1F64E}\u{1F3FB}","\u{1F64E}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F64E}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F64E}\u{1F3FC}","\u{1F64E}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F64E}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F64E}\u{1F3FD}","\u{1F64E}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F64E}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F64E}\u{1F3FE}","\u{1F64E}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F64E}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F64E}\u{1F3FF}","\u{1F64E}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F64E}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F64F}","\u{1F64F}\u{1F3FB}","\u{1F64F}\u{1F3FC}","\u{1F64F}\u{1F3FD}","\u{1F64F}\u{1F3FE}","\u{1F64F}\u{1F3FF}","\u{1F6A3}","\u{1F6A3}\u200D\u2640\uFE0F","\u{1F6A3}\u200D\u2642\uFE0F","\u{1F6A3}\u{1F3FB}","\u{1F6A3}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F6A3}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F6A3}\u{1F3FC}","\u{1F6A3}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F6A3}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F6A3}\u{1F3FD}","\u{1F6A3}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F6A3}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F6A3}\u{1F3FE}","\u{1F6A3}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F6A3}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F6A3}\u{1F3FF}","\u{1F6A3}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F6A3}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F6B4}","\u{1F6B4}\u200D\u2640\uFE0F","\u{1F6B4}\u200D\u2642\uFE0F","\u{1F6B4}\u{1F3FB}","\u{1F6B4}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F6B4}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F6B4}\u{1F3FC}","\u{1F6B4}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F6B4}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F6B4}\u{1F3FD}","\u{1F6B4}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F6B4}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F6B4}\u{1F3FE}","\u{1F6B4}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F6B4}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F6B4}\u{1F3FF}","\u{1F6B4}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F6B4}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F6B5}","\u{1F6B5}\u200D\u2640\uFE0F","\u{1F6B5}\u200D\u2642\uFE0F","\u{1F6B5}\u{1F3FB}","\u{1F6B5}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F6B5}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F6B5}\u{1F3FC}","\u{1F6B5}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F6B5}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F6B5}\u{1F3FD}","\u{1F6B5}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F6B5}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F6B5}\u{1F3FE}","\u{1F6B5}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F6B5}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F6B5}\u{1F3FF}","\u{1F6B5}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F6B5}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F6B6}","\u{1F6B6}\u200D\u2640\uFE0F","\u{1F6B6}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u200D\u2642\uFE0F","\u{1F6B6}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FB}","\u{1F6B6}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F6B6}\u{1F3FB}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F6B6}\u{1F3FB}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FB}\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FC}","\u{1F6B6}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F6B6}\u{1F3FC}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F6B6}\u{1F3FC}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FC}\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FD}","\u{1F6B6}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F6B6}\u{1F3FD}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F6B6}\u{1F3FD}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FD}\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FE}","\u{1F6B6}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F6B6}\u{1F3FE}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F6B6}\u{1F3FE}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FE}\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FF}","\u{1F6B6}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F6B6}\u{1F3FF}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F6B6}\u{1F3FF}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F6B6}\u{1F3FF}\u200D\u27A1\uFE0F","\u{1F6C0}","\u{1F6C0}\u{1F3FB}","\u{1F6C0}\u{1F3FC}","\u{1F6C0}\u{1F3FD}","\u{1F6C0}\u{1F3FE}","\u{1F6C0}\u{1F3FF}","\u{1F6CC}","\u{1F6CC}\u{1F3FB}","\u{1F6CC}\u{1F3FC}","\u{1F6CC}\u{1F3FD}","\u{1F6CC}\u{1F3FE}","\u{1F6CC}\u{1F3FF}","\u{1F90C}","\u{1F90C}\u{1F3FB}","\u{1F90C}\u{1F3FC}","\u{1F90C}\u{1F3FD}","\u{1F90C}\u{1F3FE}","\u{1F90C}\u{1F3FF}","\u{1F90F}","\u{1F90F}\u{1F3FB}","\u{1F90F}\u{1F3FC}","\u{1F90F}\u{1F3FD}","\u{1F90F}\u{1F3FE}","\u{1F90F}\u{1F3FF}","\u{1F910}","\u{1F911}","\u{1F912}","\u{1F913}","\u{1F914}","\u{1F915}","\u{1F916}","\u{1F917}","\u{1F918}","\u{1F918}\u{1F3FB}","\u{1F918}\u{1F3FC}","\u{1F918}\u{1F3FD}","\u{1F918}\u{1F3FE}","\u{1F918}\u{1F3FF}","\u{1F919}","\u{1F919}\u{1F3FB}","\u{1F919}\u{1F3FC}","\u{1F919}\u{1F3FD}","\u{1F919}\u{1F3FE}","\u{1F919}\u{1F3FF}","\u{1F91A}","\u{1F91A}\u{1F3FB}","\u{1F91A}\u{1F3FC}","\u{1F91A}\u{1F3FD}","\u{1F91A}\u{1F3FE}","\u{1F91A}\u{1F3FF}","\u{1F91B}","\u{1F91B}\u{1F3FB}","\u{1F91B}\u{1F3FC}","\u{1F91B}\u{1F3FD}","\u{1F91B}\u{1F3FE}","\u{1F91B}\u{1F3FF}","\u{1F91C}","\u{1F91C}\u{1F3FB}","\u{1F91C}\u{1F3FC}","\u{1F91C}\u{1F3FD}","\u{1F91C}\u{1F3FE}","\u{1F91C}\u{1F3FF}","\u{1F91D}","\u{1F91D}\u{1F3FB}","\u{1F91D}\u{1F3FC}","\u{1F91D}\u{1F3FD}","\u{1F91D}\u{1F3FE}","\u{1F91D}\u{1F3FF}","\u{1F91E}","\u{1F91E}\u{1F3FB}","\u{1F91E}\u{1F3FC}","\u{1F91E}\u{1F3FD}","\u{1F91E}\u{1F3FE}","\u{1F91E}\u{1F3FF}","\u{1F91F}","\u{1F91F}\u{1F3FB}","\u{1F91F}\u{1F3FC}","\u{1F91F}\u{1F3FD}","\u{1F91F}\u{1F3FE}","\u{1F91F}\u{1F3FF}","\u{1F920}","\u{1F921}","\u{1F922}","\u{1F923}","\u{1F924}","\u{1F925}","\u{1F926}","\u{1F926}\u200D\u2640\uFE0F","\u{1F926}\u200D\u2642\uFE0F","\u{1F926}\u{1F3FB}","\u{1F926}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F926}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F926}\u{1F3FC}","\u{1F926}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F926}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F926}\u{1F3FD}","\u{1F926}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F926}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F926}\u{1F3FE}","\u{1F926}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F926}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F926}\u{1F3FF}","\u{1F926}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F926}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F927}","\u{1F928}","\u{1F929}","\u{1F92A}","\u{1F92B}","\u{1F92C}","\u{1F92D}","\u{1F92E}","\u{1F92F}","\u{1F930}","\u{1F930}\u{1F3FB}","\u{1F930}\u{1F3FC}","\u{1F930}\u{1F3FD}","\u{1F930}\u{1F3FE}","\u{1F930}\u{1F3FF}","\u{1F931}","\u{1F931}\u{1F3FB}","\u{1F931}\u{1F3FC}","\u{1F931}\u{1F3FD}","\u{1F931}\u{1F3FE}","\u{1F931}\u{1F3FF}","\u{1F932}","\u{1F932}\u{1F3FB}","\u{1F932}\u{1F3FC}","\u{1F932}\u{1F3FD}","\u{1F932}\u{1F3FE}","\u{1F932}\u{1F3FF}","\u{1F933}","\u{1F933}\u{1F3FB}","\u{1F933}\u{1F3FC}","\u{1F933}\u{1F3FD}","\u{1F933}\u{1F3FE}","\u{1F933}\u{1F3FF}","\u{1F934}","\u{1F934}\u{1F3FB}","\u{1F934}\u{1F3FC}","\u{1F934}\u{1F3FD}","\u{1F934}\u{1F3FE}","\u{1F934}\u{1F3FF}","\u{1F935}","\u{1F935}\u200D\u2640\uFE0F","\u{1F935}\u200D\u2642\uFE0F","\u{1F935}\u{1F3FB}","\u{1F935}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F935}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F935}\u{1F3FC}","\u{1F935}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F935}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F935}\u{1F3FD}","\u{1F935}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F935}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F935}\u{1F3FE}","\u{1F935}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F935}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F935}\u{1F3FF}","\u{1F935}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F935}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F936}","\u{1F936}\u{1F3FB}","\u{1F936}\u{1F3FC}","\u{1F936}\u{1F3FD}","\u{1F936}\u{1F3FE}","\u{1F936}\u{1F3FF}","\u{1F937}","\u{1F937}\u200D\u2640\uFE0F","\u{1F937}\u200D\u2642\uFE0F","\u{1F937}\u{1F3FB}","\u{1F937}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F937}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F937}\u{1F3FC}","\u{1F937}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F937}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F937}\u{1F3FD}","\u{1F937}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F937}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F937}\u{1F3FE}","\u{1F937}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F937}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F937}\u{1F3FF}","\u{1F937}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F937}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F938}","\u{1F938}\u200D\u2640\uFE0F","\u{1F938}\u200D\u2642\uFE0F","\u{1F938}\u{1F3FB}","\u{1F938}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F938}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F938}\u{1F3FC}","\u{1F938}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F938}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F938}\u{1F3FD}","\u{1F938}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F938}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F938}\u{1F3FE}","\u{1F938}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F938}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F938}\u{1F3FF}","\u{1F938}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F938}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F939}","\u{1F939}\u200D\u2640\uFE0F","\u{1F939}\u200D\u2642\uFE0F","\u{1F939}\u{1F3FB}","\u{1F939}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F939}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F939}\u{1F3FC}","\u{1F939}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F939}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F939}\u{1F3FD}","\u{1F939}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F939}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F939}\u{1F3FE}","\u{1F939}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F939}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F939}\u{1F3FF}","\u{1F939}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F939}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F93A}","\u{1F93C}","\u{1F93C}\u200D\u2640\uFE0F","\u{1F93C}\u200D\u2642\uFE0F","\u{1F93D}","\u{1F93D}\u200D\u2640\uFE0F","\u{1F93D}\u200D\u2642\uFE0F","\u{1F93D}\u{1F3FB}","\u{1F93D}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F93D}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F93D}\u{1F3FC}","\u{1F93D}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F93D}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F93D}\u{1F3FD}","\u{1F93D}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F93D}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F93D}\u{1F3FE}","\u{1F93D}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F93D}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F93D}\u{1F3FF}","\u{1F93D}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F93D}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F93E}","\u{1F93E}\u200D\u2640\uFE0F","\u{1F93E}\u200D\u2642\uFE0F","\u{1F93E}\u{1F3FB}","\u{1F93E}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F93E}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F93E}\u{1F3FC}","\u{1F93E}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F93E}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F93E}\u{1F3FD}","\u{1F93E}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F93E}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F93E}\u{1F3FE}","\u{1F93E}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F93E}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F93E}\u{1F3FF}","\u{1F93E}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F93E}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F970}","\u{1F971}","\u{1F972}","\u{1F973}","\u{1F974}","\u{1F975}","\u{1F976}","\u{1F977}","\u{1F977}\u{1F3FB}","\u{1F977}\u{1F3FC}","\u{1F977}\u{1F3FD}","\u{1F977}\u{1F3FE}","\u{1F977}\u{1F3FF}","\u{1F978}","\u{1F979}","\u{1F97A}","\u{1F9B4}","\u{1F9B5}","\u{1F9B5}\u{1F3FB}","\u{1F9B5}\u{1F3FC}","\u{1F9B5}\u{1F3FD}","\u{1F9B5}\u{1F3FE}","\u{1F9B5}\u{1F3FF}","\u{1F9B6}","\u{1F9B6}\u{1F3FB}","\u{1F9B6}\u{1F3FC}","\u{1F9B6}\u{1F3FD}","\u{1F9B6}\u{1F3FE}","\u{1F9B6}\u{1F3FF}","\u{1F9B7}","\u{1F9B8}","\u{1F9B8}\u200D\u2640\uFE0F","\u{1F9B8}\u200D\u2642\uFE0F","\u{1F9B8}\u{1F3FB}","\u{1F9B8}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9B8}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9B8}\u{1F3FC}","\u{1F9B8}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9B8}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9B8}\u{1F3FD}","\u{1F9B8}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9B8}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9B8}\u{1F3FE}","\u{1F9B8}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9B8}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9B8}\u{1F3FF}","\u{1F9B8}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9B8}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9B9}","\u{1F9B9}\u200D\u2640\uFE0F","\u{1F9B9}\u200D\u2642\uFE0F","\u{1F9B9}\u{1F3FB}","\u{1F9B9}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9B9}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9B9}\u{1F3FC}","\u{1F9B9}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9B9}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9B9}\u{1F3FD}","\u{1F9B9}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9B9}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9B9}\u{1F3FE}","\u{1F9B9}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9B9}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9B9}\u{1F3FF}","\u{1F9B9}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9B9}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9BB}","\u{1F9BB}\u{1F3FB}","\u{1F9BB}\u{1F3FC}","\u{1F9BB}\u{1F3FD}","\u{1F9BB}\u{1F3FE}","\u{1F9BB}\u{1F3FF}","\u{1F9BE}","\u{1F9BF}","\u{1F9CC}","\u{1F9CD}","\u{1F9CD}\u200D\u2640\uFE0F","\u{1F9CD}\u200D\u2642\uFE0F","\u{1F9CD}\u{1F3FB}","\u{1F9CD}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9CD}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9CD}\u{1F3FC}","\u{1F9CD}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9CD}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9CD}\u{1F3FD}","\u{1F9CD}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9CD}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9CD}\u{1F3FE}","\u{1F9CD}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9CD}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9CD}\u{1F3FF}","\u{1F9CD}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9CD}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9CE}","\u{1F9CE}\u200D\u2640\uFE0F","\u{1F9CE}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u200D\u2642\uFE0F","\u{1F9CE}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FB}","\u{1F9CE}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9CE}\u{1F3FB}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9CE}\u{1F3FB}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FB}\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FC}","\u{1F9CE}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9CE}\u{1F3FC}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9CE}\u{1F3FC}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FC}\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FD}","\u{1F9CE}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9CE}\u{1F3FD}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9CE}\u{1F3FD}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FD}\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FE}","\u{1F9CE}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9CE}\u{1F3FE}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9CE}\u{1F3FE}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FE}\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FF}","\u{1F9CE}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9CE}\u{1F3FF}\u200D\u2640\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9CE}\u{1F3FF}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F","\u{1F9CE}\u{1F3FF}\u200D\u27A1\uFE0F","\u{1F9CF}","\u{1F9CF}\u200D\u2640\uFE0F","\u{1F9CF}\u200D\u2642\uFE0F","\u{1F9CF}\u{1F3FB}","\u{1F9CF}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9CF}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9CF}\u{1F3FC}","\u{1F9CF}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9CF}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9CF}\u{1F3FD}","\u{1F9CF}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9CF}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9CF}\u{1F3FE}","\u{1F9CF}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9CF}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9CF}\u{1F3FF}","\u{1F9CF}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9CF}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9D0}","\u{1F9D1}","\u{1F9D1}\u200D\u2695\uFE0F","\u{1F9D1}\u200D\u2696\uFE0F","\u{1F9D1}\u200D\u2708\uFE0F","\u{1F9D1}\u200D\u{1F33E}","\u{1F9D1}\u200D\u{1F373}","\u{1F9D1}\u200D\u{1F37C}","\u{1F9D1}\u200D\u{1F384}","\u{1F9D1}\u200D\u{1F393}","\u{1F9D1}\u200D\u{1F3A4}","\u{1F9D1}\u200D\u{1F3A8}","\u{1F9D1}\u200D\u{1F3EB}","\u{1F9D1}\u200D\u{1F3ED}","\u{1F9D1}\u200D\u{1F4BB}","\u{1F9D1}\u200D\u{1F4BC}","\u{1F9D1}\u200D\u{1F527}","\u{1F9D1}\u200D\u{1F52C}","\u{1F9D1}\u200D\u{1F680}","\u{1F9D1}\u200D\u{1F692}","\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}","\u{1F9D1}\u200D\u{1F9AF}","\u{1F9D1}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u200D\u{1F9B0}","\u{1F9D1}\u200D\u{1F9B1}","\u{1F9D1}\u200D\u{1F9B2}","\u{1F9D1}\u200D\u{1F9B3}","\u{1F9D1}\u200D\u{1F9BC}","\u{1F9D1}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u200D\u{1F9BD}","\u{1F9D1}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D1}\u200D\u{1F9D1}\u200D\u{1F9D2}","\u{1F9D1}\u200D\u{1F9D1}\u200D\u{1F9D2}\u200D\u{1F9D2}","\u{1F9D1}\u200D\u{1F9D2}","\u{1F9D1}\u200D\u{1F9D2}\u200D\u{1F9D2}","\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FB}\u200D\u2695\uFE0F","\u{1F9D1}\u{1F3FB}\u200D\u2696\uFE0F","\u{1F9D1}\u{1F3FB}\u200D\u2708\uFE0F","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FB}\u200D\u{1F33E}","\u{1F9D1}\u{1F3FB}\u200D\u{1F373}","\u{1F9D1}\u{1F3FB}\u200D\u{1F37C}","\u{1F9D1}\u{1F3FB}\u200D\u{1F384}","\u{1F9D1}\u{1F3FB}\u200D\u{1F393}","\u{1F9D1}\u{1F3FB}\u200D\u{1F3A4}","\u{1F9D1}\u{1F3FB}\u200D\u{1F3A8}","\u{1F9D1}\u{1F3FB}\u200D\u{1F3EB}","\u{1F9D1}\u{1F3FB}\u200D\u{1F3ED}","\u{1F9D1}\u{1F3FB}\u200D\u{1F4BB}","\u{1F9D1}\u{1F3FB}\u200D\u{1F4BC}","\u{1F9D1}\u{1F3FB}\u200D\u{1F527}","\u{1F9D1}\u{1F3FB}\u200D\u{1F52C}","\u{1F9D1}\u{1F3FB}\u200D\u{1F680}","\u{1F9D1}\u{1F3FB}\u200D\u{1F692}","\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9AF}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FB}\u200D\u{1F9B0}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9B1}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9B2}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9B3}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9BC}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FB}\u200D\u{1F9BD}","\u{1F9D1}\u{1F3FB}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FC}\u200D\u2695\uFE0F","\u{1F9D1}\u{1F3FC}\u200D\u2696\uFE0F","\u{1F9D1}\u{1F3FC}\u200D\u2708\uFE0F","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FC}\u200D\u{1F33E}","\u{1F9D1}\u{1F3FC}\u200D\u{1F373}","\u{1F9D1}\u{1F3FC}\u200D\u{1F37C}","\u{1F9D1}\u{1F3FC}\u200D\u{1F384}","\u{1F9D1}\u{1F3FC}\u200D\u{1F393}","\u{1F9D1}\u{1F3FC}\u200D\u{1F3A4}","\u{1F9D1}\u{1F3FC}\u200D\u{1F3A8}","\u{1F9D1}\u{1F3FC}\u200D\u{1F3EB}","\u{1F9D1}\u{1F3FC}\u200D\u{1F3ED}","\u{1F9D1}\u{1F3FC}\u200D\u{1F4BB}","\u{1F9D1}\u{1F3FC}\u200D\u{1F4BC}","\u{1F9D1}\u{1F3FC}\u200D\u{1F527}","\u{1F9D1}\u{1F3FC}\u200D\u{1F52C}","\u{1F9D1}\u{1F3FC}\u200D\u{1F680}","\u{1F9D1}\u{1F3FC}\u200D\u{1F692}","\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9AF}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FC}\u200D\u{1F9B0}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9B1}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9B2}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9B3}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9BC}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FC}\u200D\u{1F9BD}","\u{1F9D1}\u{1F3FC}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FD}\u200D\u2695\uFE0F","\u{1F9D1}\u{1F3FD}\u200D\u2696\uFE0F","\u{1F9D1}\u{1F3FD}\u200D\u2708\uFE0F","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FD}\u200D\u{1F33E}","\u{1F9D1}\u{1F3FD}\u200D\u{1F373}","\u{1F9D1}\u{1F3FD}\u200D\u{1F37C}","\u{1F9D1}\u{1F3FD}\u200D\u{1F384}","\u{1F9D1}\u{1F3FD}\u200D\u{1F393}","\u{1F9D1}\u{1F3FD}\u200D\u{1F3A4}","\u{1F9D1}\u{1F3FD}\u200D\u{1F3A8}","\u{1F9D1}\u{1F3FD}\u200D\u{1F3EB}","\u{1F9D1}\u{1F3FD}\u200D\u{1F3ED}","\u{1F9D1}\u{1F3FD}\u200D\u{1F4BB}","\u{1F9D1}\u{1F3FD}\u200D\u{1F4BC}","\u{1F9D1}\u{1F3FD}\u200D\u{1F527}","\u{1F9D1}\u{1F3FD}\u200D\u{1F52C}","\u{1F9D1}\u{1F3FD}\u200D\u{1F680}","\u{1F9D1}\u{1F3FD}\u200D\u{1F692}","\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9AF}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FD}\u200D\u{1F9B0}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9B1}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9B2}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9B3}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9BC}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FD}\u200D\u{1F9BD}","\u{1F9D1}\u{1F3FD}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FE}\u200D\u2695\uFE0F","\u{1F9D1}\u{1F3FE}\u200D\u2696\uFE0F","\u{1F9D1}\u{1F3FE}\u200D\u2708\uFE0F","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FE}\u200D\u{1F33E}","\u{1F9D1}\u{1F3FE}\u200D\u{1F373}","\u{1F9D1}\u{1F3FE}\u200D\u{1F37C}","\u{1F9D1}\u{1F3FE}\u200D\u{1F384}","\u{1F9D1}\u{1F3FE}\u200D\u{1F393}","\u{1F9D1}\u{1F3FE}\u200D\u{1F3A4}","\u{1F9D1}\u{1F3FE}\u200D\u{1F3A8}","\u{1F9D1}\u{1F3FE}\u200D\u{1F3EB}","\u{1F9D1}\u{1F3FE}\u200D\u{1F3ED}","\u{1F9D1}\u{1F3FE}\u200D\u{1F4BB}","\u{1F9D1}\u{1F3FE}\u200D\u{1F4BC}","\u{1F9D1}\u{1F3FE}\u200D\u{1F527}","\u{1F9D1}\u{1F3FE}\u200D\u{1F52C}","\u{1F9D1}\u{1F3FE}\u200D\u{1F680}","\u{1F9D1}\u{1F3FE}\u200D\u{1F692}","\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9AF}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FE}\u200D\u{1F9B0}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9B1}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9B2}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9B3}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9BC}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FE}\u200D\u{1F9BD}","\u{1F9D1}\u{1F3FE}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FF}\u200D\u2695\uFE0F","\u{1F9D1}\u{1F3FF}\u200D\u2696\uFE0F","\u{1F9D1}\u{1F3FF}\u200D\u2708\uFE0F","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FF}\u200D\u{1F33E}","\u{1F9D1}\u{1F3FF}\u200D\u{1F373}","\u{1F9D1}\u{1F3FF}\u200D\u{1F37C}","\u{1F9D1}\u{1F3FF}\u200D\u{1F384}","\u{1F9D1}\u{1F3FF}\u200D\u{1F393}","\u{1F9D1}\u{1F3FF}\u200D\u{1F3A4}","\u{1F9D1}\u{1F3FF}\u200D\u{1F3A8}","\u{1F9D1}\u{1F3FF}\u200D\u{1F3EB}","\u{1F9D1}\u{1F3FF}\u200D\u{1F3ED}","\u{1F9D1}\u{1F3FF}\u200D\u{1F4BB}","\u{1F9D1}\u{1F3FF}\u200D\u{1F4BC}","\u{1F9D1}\u{1F3FF}\u200D\u{1F527}","\u{1F9D1}\u{1F3FF}\u200D\u{1F52C}","\u{1F9D1}\u{1F3FF}\u200D\u{1F680}","\u{1F9D1}\u{1F3FF}\u200D\u{1F692}","\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}","\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}","\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}","\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}","\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9AF}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9AF}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FF}\u200D\u{1F9B0}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9B1}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9B2}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9B3}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9BC}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9BC}\u200D\u27A1\uFE0F","\u{1F9D1}\u{1F3FF}\u200D\u{1F9BD}","\u{1F9D1}\u{1F3FF}\u200D\u{1F9BD}\u200D\u27A1\uFE0F","\u{1F9D2}","\u{1F9D2}\u{1F3FB}","\u{1F9D2}\u{1F3FC}","\u{1F9D2}\u{1F3FD}","\u{1F9D2}\u{1F3FE}","\u{1F9D2}\u{1F3FF}","\u{1F9D3}","\u{1F9D3}\u{1F3FB}","\u{1F9D3}\u{1F3FC}","\u{1F9D3}\u{1F3FD}","\u{1F9D3}\u{1F3FE}","\u{1F9D3}\u{1F3FF}","\u{1F9D4}","\u{1F9D4}\u200D\u2640\uFE0F","\u{1F9D4}\u200D\u2642\uFE0F","\u{1F9D4}\u{1F3FB}","\u{1F9D4}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9D4}\u{1F3FC}","\u{1F9D4}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9D4}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9D4}\u{1F3FD}","\u{1F9D4}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9D4}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9D4}\u{1F3FE}","\u{1F9D4}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9D4}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9D4}\u{1F3FF}","\u{1F9D4}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9D4}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9D5}","\u{1F9D5}\u{1F3FB}","\u{1F9D5}\u{1F3FC}","\u{1F9D5}\u{1F3FD}","\u{1F9D5}\u{1F3FE}","\u{1F9D5}\u{1F3FF}","\u{1F9D6}","\u{1F9D6}\u200D\u2640\uFE0F","\u{1F9D6}\u200D\u2642\uFE0F","\u{1F9D6}\u{1F3FB}","\u{1F9D6}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9D6}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9D6}\u{1F3FC}","\u{1F9D6}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9D6}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9D6}\u{1F3FD}","\u{1F9D6}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9D6}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9D6}\u{1F3FE}","\u{1F9D6}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9D6}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9D6}\u{1F3FF}","\u{1F9D6}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9D6}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9D7}","\u{1F9D7}\u200D\u2640\uFE0F","\u{1F9D7}\u200D\u2642\uFE0F","\u{1F9D7}\u{1F3FB}","\u{1F9D7}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9D7}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9D7}\u{1F3FC}","\u{1F9D7}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9D7}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9D7}\u{1F3FD}","\u{1F9D7}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9D7}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9D7}\u{1F3FE}","\u{1F9D7}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9D7}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9D7}\u{1F3FF}","\u{1F9D7}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9D7}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9D8}","\u{1F9D8}\u200D\u2640\uFE0F","\u{1F9D8}\u200D\u2642\uFE0F","\u{1F9D8}\u{1F3FB}","\u{1F9D8}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9D8}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9D8}\u{1F3FC}","\u{1F9D8}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9D8}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9D8}\u{1F3FD}","\u{1F9D8}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9D8}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9D8}\u{1F3FE}","\u{1F9D8}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9D8}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9D8}\u{1F3FF}","\u{1F9D8}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9D8}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9D9}","\u{1F9D9}\u200D\u2640\uFE0F","\u{1F9D9}\u200D\u2642\uFE0F","\u{1F9D9}\u{1F3FB}","\u{1F9D9}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9D9}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9D9}\u{1F3FC}","\u{1F9D9}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9D9}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9D9}\u{1F3FD}","\u{1F9D9}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9D9}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9D9}\u{1F3FE}","\u{1F9D9}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9D9}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9D9}\u{1F3FF}","\u{1F9D9}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9D9}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9DA}","\u{1F9DA}\u200D\u2640\uFE0F","\u{1F9DA}\u200D\u2642\uFE0F","\u{1F9DA}\u{1F3FB}","\u{1F9DA}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9DA}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9DA}\u{1F3FC}","\u{1F9DA}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9DA}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9DA}\u{1F3FD}","\u{1F9DA}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9DA}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9DA}\u{1F3FE}","\u{1F9DA}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9DA}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9DA}\u{1F3FF}","\u{1F9DA}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9DA}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9DB}","\u{1F9DB}\u200D\u2640\uFE0F","\u{1F9DB}\u200D\u2642\uFE0F","\u{1F9DB}\u{1F3FB}","\u{1F9DB}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9DB}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9DB}\u{1F3FC}","\u{1F9DB}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9DB}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9DB}\u{1F3FD}","\u{1F9DB}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9DB}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9DB}\u{1F3FE}","\u{1F9DB}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9DB}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9DB}\u{1F3FF}","\u{1F9DB}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9DB}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9DC}","\u{1F9DC}\u200D\u2640\uFE0F","\u{1F9DC}\u200D\u2642\uFE0F","\u{1F9DC}\u{1F3FB}","\u{1F9DC}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9DC}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9DC}\u{1F3FC}","\u{1F9DC}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9DC}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9DC}\u{1F3FD}","\u{1F9DC}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9DC}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9DC}\u{1F3FE}","\u{1F9DC}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9DC}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9DC}\u{1F3FF}","\u{1F9DC}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9DC}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9DD}","\u{1F9DD}\u200D\u2640\uFE0F","\u{1F9DD}\u200D\u2642\uFE0F","\u{1F9DD}\u{1F3FB}","\u{1F9DD}\u{1F3FB}\u200D\u2640\uFE0F","\u{1F9DD}\u{1F3FB}\u200D\u2642\uFE0F","\u{1F9DD}\u{1F3FC}","\u{1F9DD}\u{1F3FC}\u200D\u2640\uFE0F","\u{1F9DD}\u{1F3FC}\u200D\u2642\uFE0F","\u{1F9DD}\u{1F3FD}","\u{1F9DD}\u{1F3FD}\u200D\u2640\uFE0F","\u{1F9DD}\u{1F3FD}\u200D\u2642\uFE0F","\u{1F9DD}\u{1F3FE}","\u{1F9DD}\u{1F3FE}\u200D\u2640\uFE0F","\u{1F9DD}\u{1F3FE}\u200D\u2642\uFE0F","\u{1F9DD}\u{1F3FF}","\u{1F9DD}\u{1F3FF}\u200D\u2640\uFE0F","\u{1F9DD}\u{1F3FF}\u200D\u2642\uFE0F","\u{1F9DE}","\u{1F9DE}\u200D\u2640\uFE0F","\u{1F9DE}\u200D\u2642\uFE0F","\u{1F9DF}","\u{1F9DF}\u200D\u2640\uFE0F","\u{1F9DF}\u200D\u2642\uFE0F","\u{1F9E0}","\u{1FAC0}","\u{1FAC1}","\u{1FAC2}","\u{1FAC3}","\u{1FAC3}\u{1F3FB}","\u{1FAC3}\u{1F3FC}","\u{1FAC3}\u{1F3FD}","\u{1FAC3}\u{1F3FE}","\u{1FAC3}\u{1F3FF}","\u{1FAC4}","\u{1FAC4}\u{1F3FB}","\u{1FAC4}\u{1F3FC}","\u{1FAC4}\u{1F3FD}","\u{1FAC4}\u{1F3FE}","\u{1FAC4}\u{1F3FF}","\u{1FAC5}","\u{1FAC5}\u{1F3FB}","\u{1FAC5}\u{1F3FC}","\u{1FAC5}\u{1F3FD}","\u{1FAC5}\u{1F3FE}","\u{1FAC5}\u{1F3FF}","\u{1FAC6}","\u{1FAE0}","\u{1FAE1}","\u{1FAE2}","\u{1FAE3}","\u{1FAE4}","\u{1FAE5}","\u{1FAE6}","\u{1FAE8}","\u{1FAE9}","\u{1FAF0}","\u{1FAF0}\u{1F3FB}","\u{1FAF0}\u{1F3FC}","\u{1FAF0}\u{1F3FD}","\u{1FAF0}\u{1F3FE}","\u{1FAF0}\u{1F3FF}","\u{1FAF1}","\u{1FAF1}\u{1F3FB}","\u{1FAF1}\u{1F3FB}\u200D\u{1FAF2}\u{1F3FC}","\u{1FAF1}\u{1F3FB}\u200D\u{1FAF2}\u{1F3FD}","\u{1FAF1}\u{1F3FB}\u200D\u{1FAF2}\u{1F3FE}","\u{1FAF1}\u{1F3FB}\u200D\u{1FAF2}\u{1F3FF}","\u{1FAF1}\u{1F3FC}","\u{1FAF1}\u{1F3FC}\u200D\u{1FAF2}\u{1F3FB}","\u{1FAF1}\u{1F3FC}\u200D\u{1FAF2}\u{1F3FD}","\u{1FAF1}\u{1F3FC}\u200D\u{1FAF2}\u{1F3FE}","\u{1FAF1}\u{1F3FC}\u200D\u{1FAF2}\u{1F3FF}","\u{1FAF1}\u{1F3FD}","\u{1FAF1}\u{1F3FD}\u200D\u{1FAF2}\u{1F3FB}","\u{1FAF1}\u{1F3FD}\u200D\u{1FAF2}\u{1F3FC}","\u{1FAF1}\u{1F3FD}\u200D\u{1FAF2}\u{1F3FE}","\u{1FAF1}\u{1F3FD}\u200D\u{1FAF2}\u{1F3FF}","\u{1FAF1}\u{1F3FE}","\u{1FAF1}\u{1F3FE}\u200D\u{1FAF2}\u{1F3FB}","\u{1FAF1}\u{1F3FE}\u200D\u{1FAF2}\u{1F3FC}","\u{1FAF1}\u{1F3FE}\u200D\u{1FAF2}\u{1F3FD}","\u{1FAF1}\u{1F3FE}\u200D\u{1FAF2}\u{1F3FF}","\u{1FAF1}\u{1F3FF}","\u{1FAF1}\u{1F3FF}\u200D\u{1FAF2}\u{1F3FB}","\u{1FAF1}\u{1F3FF}\u200D\u{1FAF2}\u{1F3FC}","\u{1FAF1}\u{1F3FF}\u200D\u{1FAF2}\u{1F3FD}","\u{1FAF1}\u{1F3FF}\u200D\u{1FAF2}\u{1F3FE}","\u{1FAF2}","\u{1FAF2}\u{1F3FB}","\u{1FAF2}\u{1F3FC}","\u{1FAF2}\u{1F3FD}","\u{1FAF2}\u{1F3FE}","\u{1FAF2}\u{1F3FF}","\u{1FAF3}","\u{1FAF3}\u{1F3FB}","\u{1FAF3}\u{1F3FC}","\u{1FAF3}\u{1F3FD}","\u{1FAF3}\u{1F3FE}","\u{1FAF3}\u{1F3FF}","\u{1FAF4}","\u{1FAF4}\u{1F3FB}","\u{1FAF4}\u{1F3FC}","\u{1FAF4}\u{1F3FD}","\u{1FAF4}\u{1F3FE}","\u{1FAF4}\u{1F3FF}","\u{1FAF5}","\u{1FAF5}\u{1F3FB}","\u{1FAF5}\u{1F3FC}","\u{1FAF5}\u{1F3FD}","\u{1FAF5}\u{1F3FE}","\u{1FAF5}\u{1F3FF}","\u{1FAF6}","\u{1FAF6}\u{1F3FB}","\u{1FAF6}\u{1F3FC}","\u{1FAF6}\u{1F3FD}","\u{1FAF6}\u{1F3FE}","\u{1FAF6}\u{1F3FF}","\u{1FAF7}","\u{1FAF7}\u{1F3FB}","\u{1FAF7}\u{1F3FC}","\u{1FAF7}\u{1F3FD}","\u{1FAF7}\u{1F3FE}","\u{1FAF7}\u{1F3FF}","\u{1FAF8}","\u{1FAF8}\u{1F3FB}","\u{1FAF8}\u{1F3FC}","\u{1FAF8}\u{1F3FD}","\u{1FAF8}\u{1F3FE}","\u{1FAF8}\u{1F3FF}"],Animals:["\u{1F400}","\u{1F401}","\u{1F402}","\u{1F403}","\u{1F404}","\u{1F405}","\u{1F406}","\u{1F407}","\u{1F408}","\u{1F408}\u200D\u2B1B","\u{1F409}","\u{1F40A}","\u{1F40B}","\u{1F40C}","\u{1F40D}","\u{1F40E}","\u{1F40F}","\u{1F410}","\u{1F411}","\u{1F412}","\u{1F413}","\u{1F414}","\u{1F415}","\u{1F415}\u200D\u{1F9BA}","\u{1F416}","\u{1F417}","\u{1F418}","\u{1F419}","\u{1F41A}","\u{1F41B}","\u{1F41C}","\u{1F41D}","\u{1F41E}","\u{1F41F}","\u{1F420}","\u{1F421}","\u{1F422}","\u{1F423}","\u{1F424}","\u{1F425}","\u{1F426}","\u{1F426}\u200D\u2B1B","\u{1F426}\u200D\u{1F525}","\u{1F427}","\u{1F428}","\u{1F429}","\u{1F42A}","\u{1F42B}","\u{1F42C}","\u{1F42D}","\u{1F42E}","\u{1F42F}","\u{1F430}","\u{1F431}","\u{1F432}","\u{1F433}","\u{1F434}","\u{1F435}","\u{1F436}","\u{1F437}","\u{1F438}","\u{1F439}","\u{1F43A}","\u{1F43B}","\u{1F43B}\u200D\u2744\uFE0F","\u{1F43C}","\u{1F43D}","\u{1F43E}","\u{1F43F}\uFE0F","\u{1F54A}\uFE0F","\u{1F577}\uFE0F","\u{1F578}\uFE0F","\u{1F980}","\u{1F981}","\u{1F982}","\u{1F983}","\u{1F984}","\u{1F985}","\u{1F986}","\u{1F987}","\u{1F988}","\u{1F989}","\u{1F98A}","\u{1F98B}","\u{1F98C}","\u{1F98D}","\u{1F98E}","\u{1F98F}","\u{1F990}","\u{1F991}","\u{1F992}","\u{1F993}","\u{1F994}","\u{1F995}","\u{1F996}","\u{1F997}","\u{1F998}","\u{1F999}","\u{1F99A}","\u{1F99B}","\u{1F99C}","\u{1F99D}","\u{1F99E}","\u{1F99F}","\u{1F9A0}","\u{1F9A1}","\u{1F9A2}","\u{1F9A3}","\u{1F9A4}","\u{1F9A5}","\u{1F9A6}","\u{1F9A7}","\u{1F9A8}","\u{1F9A9}","\u{1F9AA}","\u{1F9AB}","\u{1F9AC}","\u{1F9AD}","\u{1F9AE}","\u{1FAB0}","\u{1FAB1}","\u{1FAB2}","\u{1FAB3}","\u{1FAB6}","\u{1FAB8}","\u{1FABC}","\u{1FABD}","\u{1FABF}","\u{1FACE}","\u{1FACF}"],Food:["\u2615","\u{1F32D}","\u{1F32E}","\u{1F32F}","\u{1F330}","\u{1F336}\uFE0F","\u{1F33D}","\u{1F344}\u200D\u{1F7EB}","\u{1F345}","\u{1F346}","\u{1F347}","\u{1F348}","\u{1F349}","\u{1F34A}","\u{1F34B}","\u{1F34B}\u200D\u{1F7E9}","\u{1F34C}","\u{1F34D}","\u{1F34E}","\u{1F34F}","\u{1F350}","\u{1F351}","\u{1F352}","\u{1F353}","\u{1F354}","\u{1F355}","\u{1F356}","\u{1F357}","\u{1F358}","\u{1F359}","\u{1F35A}","\u{1F35B}","\u{1F35C}","\u{1F35D}","\u{1F35E}","\u{1F35F}","\u{1F360}","\u{1F361}","\u{1F362}","\u{1F363}","\u{1F364}","\u{1F365}","\u{1F366}","\u{1F367}","\u{1F368}","\u{1F369}","\u{1F36A}","\u{1F36B}","\u{1F36C}","\u{1F36D}","\u{1F36E}","\u{1F36F}","\u{1F370}","\u{1F371}","\u{1F372}","\u{1F373}","\u{1F374}","\u{1F375}","\u{1F376}","\u{1F377}","\u{1F378}","\u{1F379}","\u{1F37A}","\u{1F37B}","\u{1F37C}","\u{1F37D}\uFE0F","\u{1F37E}","\u{1F37F}","\u{1F382}","\u{1F3FA}","\u{1F52A}","\u{1F942}","\u{1F943}","\u{1F944}","\u{1F950}","\u{1F951}","\u{1F952}","\u{1F953}","\u{1F954}","\u{1F955}","\u{1F956}","\u{1F957}","\u{1F958}","\u{1F959}","\u{1F95A}","\u{1F95B}","\u{1F95C}","\u{1F95D}","\u{1F95E}","\u{1F95F}","\u{1F960}","\u{1F961}","\u{1F962}","\u{1F963}","\u{1F964}","\u{1F965}","\u{1F966}","\u{1F967}","\u{1F968}","\u{1F969}","\u{1F96A}","\u{1F96B}","\u{1F96C}","\u{1F96D}","\u{1F96E}","\u{1F96F}","\u{1F9C0}","\u{1F9C1}","\u{1F9C2}","\u{1F9C3}","\u{1F9C4}","\u{1F9C5}","\u{1F9C6}","\u{1F9C7}","\u{1F9C8}","\u{1F9C9}","\u{1F9CA}","\u{1F9CB}","\u{1FAD0}","\u{1FAD1}","\u{1FAD2}","\u{1FAD3}","\u{1FAD4}","\u{1FAD5}","\u{1FAD6}","\u{1FAD7}","\u{1FAD8}","\u{1FAD9}","\u{1FADA}","\u{1FADB}","\u{1FADC}"],Transport:["\u2693","\u26F4\uFE0F","\u26F5","\u26FD","\u2708\uFE0F","\u{1F3CD}\uFE0F","\u{1F3CE}\uFE0F","\u{1F4BA}","\u{1F680}","\u{1F681}","\u{1F682}","\u{1F683}","\u{1F684}","\u{1F685}","\u{1F686}","\u{1F687}","\u{1F688}","\u{1F689}","\u{1F68A}","\u{1F68B}","\u{1F68C}","\u{1F68D}","\u{1F68E}","\u{1F68F}","\u{1F690}","\u{1F691}","\u{1F692}","\u{1F693}","\u{1F694}","\u{1F695}","\u{1F696}","\u{1F697}","\u{1F698}","\u{1F699}","\u{1F69A}","\u{1F69B}","\u{1F69C}","\u{1F69D}","\u{1F69E}","\u{1F69F}","\u{1F6A0}","\u{1F6A1}","\u{1F6A2}","\u{1F6A4}","\u{1F6A5}","\u{1F6A6}","\u{1F6A7}","\u{1F6A8}","\u{1F6B2}","\u{1F6D1}","\u{1F6DE}","\u{1F6DF}","\u{1F6E2}\uFE0F","\u{1F6E3}\uFE0F","\u{1F6E4}\uFE0F","\u{1F6E5}\uFE0F","\u{1F6E9}\uFE0F","\u{1F6EB}","\u{1F6EC}","\u{1F6F0}\uFE0F","\u{1F6F3}\uFE0F","\u{1F6F4}","\u{1F6F5}","\u{1F6F6}","\u{1F6F8}","\u{1F6F9}","\u{1F6FA}","\u{1F6FB}","\u{1F6FC}","\u{1F9BC}","\u{1F9BD}","\u{1FA82}"],Places:["\u2668\uFE0F","\u26E9\uFE0F","\u26EA","\u26F0\uFE0F","\u26F2","\u26FA","\u{1F301}","\u{1F303}","\u{1F304}","\u{1F305}","\u{1F306}","\u{1F307}","\u{1F309}","\u{1F30B}","\u{1F30D}","\u{1F30E}","\u{1F30F}","\u{1F310}","\u{1F3A0}","\u{1F3A1}","\u{1F3A2}","\u{1F3AA}","\u{1F3D4}\uFE0F","\u{1F3D5}\uFE0F","\u{1F3D6}\uFE0F","\u{1F3D7}\uFE0F","\u{1F3D8}\uFE0F","\u{1F3D9}\uFE0F","\u{1F3DA}\uFE0F","\u{1F3DB}\uFE0F","\u{1F3DC}\uFE0F","\u{1F3DD}\uFE0F","\u{1F3DE}\uFE0F","\u{1F3DF}\uFE0F","\u{1F3E0}","\u{1F3E1}","\u{1F3E2}","\u{1F3E3}","\u{1F3E4}","\u{1F3E5}","\u{1F3E6}","\u{1F3E8}","\u{1F3E9}","\u{1F3EA}","\u{1F3EB}","\u{1F3EC}","\u{1F3ED}","\u{1F3EF}","\u{1F3F0}","\u{1F488}","\u{1F492}","\u{1F54B}","\u{1F54C}","\u{1F54D}","\u{1F5FA}\uFE0F","\u{1F5FB}","\u{1F5FC}","\u{1F5FD}","\u{1F5FE}","\u{1F6D5}","\u{1F6D6}","\u{1F6DD}","\u{1F9ED}","\u{1F9F1}","\u{1FAA8}","\u{1FAB5}"],Activities:["\u265F\uFE0F","\u2660\uFE0F","\u2663\uFE0F","\u2665\uFE0F","\u2666\uFE0F","\u26BD","\u26BE","\u26F3","\u26F8\uFE0F","\u2728","\u{1F004}","\u{1F0CF}","\u{1F380}","\u{1F381}","\u{1F383}","\u{1F384}","\u{1F386}","\u{1F387}","\u{1F388}","\u{1F389}","\u{1F38A}","\u{1F38B}","\u{1F38D}","\u{1F38E}","\u{1F38F}","\u{1F390}","\u{1F391}","\u{1F396}\uFE0F","\u{1F397}\uFE0F","\u{1F39F}\uFE0F","\u{1F3A3}","\u{1F3AB}","\u{1F3AE}","\u{1F3AF}","\u{1F3B0}","\u{1F3B1}","\u{1F3B2}","\u{1F3B3}","\u{1F3B4}","\u{1F3BD}","\u{1F3BE}","\u{1F3BF}","\u{1F3C0}","\u{1F3C5}","\u{1F3C6}","\u{1F3C8}","\u{1F3C9}","\u{1F3CF}","\u{1F3D0}","\u{1F3D1}","\u{1F3D2}","\u{1F3D3}","\u{1F3F8}","\u{1F52B}","\u{1F52E}","\u{1F579}\uFE0F","\u{1F6F7}","\u{1F93F}","\u{1F945}","\u{1F947}","\u{1F948}","\u{1F949}","\u{1F94A}","\u{1F94B}","\u{1F94C}","\u{1F94D}","\u{1F94E}","\u{1F94F}","\u{1F9E7}","\u{1F9E8}","\u{1F9E9}","\u{1F9F8}","\u{1FA80}","\u{1FA81}","\u{1FA84}","\u{1FA85}","\u{1FA86}","\u{1FAA9}"],Flags:["\u{1F1E6}\u{1F1E8}","\u{1F1E6}\u{1F1E9}","\u{1F1E6}\u{1F1EA}","\u{1F1E6}\u{1F1EB}","\u{1F1E6}\u{1F1EC}","\u{1F1E6}\u{1F1EE}","\u{1F1E6}\u{1F1F1}","\u{1F1E6}\u{1F1F2}","\u{1F1E6}\u{1F1F4}","\u{1F1E6}\u{1F1F6}","\u{1F1E6}\u{1F1F7}","\u{1F1E6}\u{1F1F8}","\u{1F1E6}\u{1F1F9}","\u{1F1E6}\u{1F1FA}","\u{1F1E6}\u{1F1FC}","\u{1F1E6}\u{1F1FD}","\u{1F1E6}\u{1F1FF}","\u{1F1E7}\u{1F1E6}","\u{1F1E7}\u{1F1E7}","\u{1F1E7}\u{1F1E9}","\u{1F1E7}\u{1F1EA}","\u{1F1E7}\u{1F1EB}","\u{1F1E7}\u{1F1EC}","\u{1F1E7}\u{1F1ED}","\u{1F1E7}\u{1F1EE}","\u{1F1E7}\u{1F1EF}","\u{1F1E7}\u{1F1F1}","\u{1F1E7}\u{1F1F2}","\u{1F1E7}\u{1F1F3}","\u{1F1E7}\u{1F1F4}","\u{1F1E7}\u{1F1F6}","\u{1F1E7}\u{1F1F7}","\u{1F1E7}\u{1F1F8}","\u{1F1E7}\u{1F1F9}","\u{1F1E7}\u{1F1FB}","\u{1F1E7}\u{1F1FC}","\u{1F1E7}\u{1F1FE}","\u{1F1E7}\u{1F1FF}","\u{1F1E8}\u{1F1E6}","\u{1F1E8}\u{1F1E8}","\u{1F1E8}\u{1F1E9}","\u{1F1E8}\u{1F1EB}","\u{1F1E8}\u{1F1EC}","\u{1F1E8}\u{1F1ED}","\u{1F1E8}\u{1F1EE}","\u{1F1E8}\u{1F1F0}","\u{1F1E8}\u{1F1F1}","\u{1F1E8}\u{1F1F2}","\u{1F1E8}\u{1F1F3}","\u{1F1E8}\u{1F1F4}","\u{1F1E8}\u{1F1F5}","\u{1F1E8}\u{1F1F6}","\u{1F1E8}\u{1F1F7}","\u{1F1E8}\u{1F1FA}","\u{1F1E8}\u{1F1FB}","\u{1F1E8}\u{1F1FC}","\u{1F1E8}\u{1F1FD}","\u{1F1E8}\u{1F1FE}","\u{1F1E8}\u{1F1FF}","\u{1F1E9}\u{1F1EA}","\u{1F1E9}\u{1F1EC}","\u{1F1E9}\u{1F1EF}","\u{1F1E9}\u{1F1F0}","\u{1F1E9}\u{1F1F2}","\u{1F1E9}\u{1F1F4}","\u{1F1E9}\u{1F1FF}","\u{1F1EA}\u{1F1E6}","\u{1F1EA}\u{1F1E8}","\u{1F1EA}\u{1F1EA}","\u{1F1EA}\u{1F1EC}","\u{1F1EA}\u{1F1ED}","\u{1F1EA}\u{1F1F7}","\u{1F1EA}\u{1F1F8}","\u{1F1EA}\u{1F1F9}","\u{1F1EA}\u{1F1FA}","\u{1F1EB}\u{1F1EE}","\u{1F1EB}\u{1F1EF}","\u{1F1EB}\u{1F1F0}","\u{1F1EB}\u{1F1F2}","\u{1F1EB}\u{1F1F4}","\u{1F1EB}\u{1F1F7}","\u{1F1EC}\u{1F1E6}","\u{1F1EC}\u{1F1E7}","\u{1F1EC}\u{1F1E9}","\u{1F1EC}\u{1F1EA}","\u{1F1EC}\u{1F1EB}","\u{1F1EC}\u{1F1EC}","\u{1F1EC}\u{1F1ED}","\u{1F1EC}\u{1F1EE}","\u{1F1EC}\u{1F1F1}","\u{1F1EC}\u{1F1F2}","\u{1F1EC}\u{1F1F3}","\u{1F1EC}\u{1F1F5}","\u{1F1EC}\u{1F1F6}","\u{1F1EC}\u{1F1F7}","\u{1F1EC}\u{1F1F8}","\u{1F1EC}\u{1F1F9}","\u{1F1EC}\u{1F1FA}","\u{1F1EC}\u{1F1FC}","\u{1F1EC}\u{1F1FE}","\u{1F1ED}\u{1F1F0}","\u{1F1ED}\u{1F1F2}","\u{1F1ED}\u{1F1F3}","\u{1F1ED}\u{1F1F7}","\u{1F1ED}\u{1F1F9}","\u{1F1ED}\u{1F1FA}","\u{1F1EE}\u{1F1E8}","\u{1F1EE}\u{1F1E9}","\u{1F1EE}\u{1F1EA}","\u{1F1EE}\u{1F1F1}","\u{1F1EE}\u{1F1F2}","\u{1F1EE}\u{1F1F3}","\u{1F1EE}\u{1F1F4}","\u{1F1EE}\u{1F1F6}","\u{1F1EE}\u{1F1F7}","\u{1F1EE}\u{1F1F8}","\u{1F1EE}\u{1F1F9}","\u{1F1EF}\u{1F1EA}","\u{1F1EF}\u{1F1F2}","\u{1F1EF}\u{1F1F4}","\u{1F1EF}\u{1F1F5}","\u{1F1F0}\u{1F1EA}","\u{1F1F0}\u{1F1EC}","\u{1F1F0}\u{1F1ED}","\u{1F1F0}\u{1F1EE}","\u{1F1F0}\u{1F1F2}","\u{1F1F0}\u{1F1F3}","\u{1F1F0}\u{1F1F5}","\u{1F1F0}\u{1F1F7}","\u{1F1F0}\u{1F1FC}","\u{1F1F0}\u{1F1FE}","\u{1F1F0}\u{1F1FF}","\u{1F1F1}\u{1F1E6}","\u{1F1F1}\u{1F1E7}","\u{1F1F1}\u{1F1E8}","\u{1F1F1}\u{1F1EE}","\u{1F1F1}\u{1F1F0}","\u{1F1F1}\u{1F1F7}","\u{1F1F1}\u{1F1F8}","\u{1F1F1}\u{1F1F9}","\u{1F1F1}\u{1F1FA}","\u{1F1F1}\u{1F1FB}","\u{1F1F1}\u{1F1FE}","\u{1F1F2}\u{1F1E6}","\u{1F1F2}\u{1F1E8}","\u{1F1F2}\u{1F1E9}","\u{1F1F2}\u{1F1EA}","\u{1F1F2}\u{1F1EB}","\u{1F1F2}\u{1F1EC}","\u{1F1F2}\u{1F1ED}","\u{1F1F2}\u{1F1F0}","\u{1F1F2}\u{1F1F1}","\u{1F1F2}\u{1F1F2}","\u{1F1F2}\u{1F1F3}","\u{1F1F2}\u{1F1F4}","\u{1F1F2}\u{1F1F5}","\u{1F1F2}\u{1F1F6}","\u{1F1F2}\u{1F1F7}","\u{1F1F2}\u{1F1F8}","\u{1F1F2}\u{1F1F9}","\u{1F1F2}\u{1F1FA}","\u{1F1F2}\u{1F1FB}","\u{1F1F2}\u{1F1FC}","\u{1F1F2}\u{1F1FD}","\u{1F1F2}\u{1F1FE}","\u{1F1F2}\u{1F1FF}","\u{1F1F3}\u{1F1E6}","\u{1F1F3}\u{1F1E8}","\u{1F1F3}\u{1F1EA}","\u{1F1F3}\u{1F1EB}","\u{1F1F3}\u{1F1EC}","\u{1F1F3}\u{1F1EE}","\u{1F1F3}\u{1F1F1}","\u{1F1F3}\u{1F1F4}","\u{1F1F3}\u{1F1F5}","\u{1F1F3}\u{1F1F7}","\u{1F1F3}\u{1F1FA}","\u{1F1F3}\u{1F1FF}","\u{1F1F4}\u{1F1F2}","\u{1F1F5}\u{1F1E6}","\u{1F1F5}\u{1F1EA}","\u{1F1F5}\u{1F1EB}","\u{1F1F5}\u{1F1EC}","\u{1F1F5}\u{1F1ED}","\u{1F1F5}\u{1F1F0}","\u{1F1F5}\u{1F1F1}","\u{1F1F5}\u{1F1F2}","\u{1F1F5}\u{1F1F3}","\u{1F1F5}\u{1F1F7}","\u{1F1F5}\u{1F1F8}","\u{1F1F5}\u{1F1F9}","\u{1F1F5}\u{1F1FC}","\u{1F1F5}\u{1F1FE}","\u{1F1F6}\u{1F1E6}","\u{1F1F7}\u{1F1EA}","\u{1F1F7}\u{1F1F4}","\u{1F1F7}\u{1F1F8}","\u{1F1F7}\u{1F1FA}","\u{1F1F7}\u{1F1FC}","\u{1F1F8}\u{1F1E6}","\u{1F1F8}\u{1F1E7}","\u{1F1F8}\u{1F1E8}","\u{1F1F8}\u{1F1E9}","\u{1F1F8}\u{1F1EA}","\u{1F1F8}\u{1F1EC}","\u{1F1F8}\u{1F1ED}","\u{1F1F8}\u{1F1EE}","\u{1F1F8}\u{1F1EF}","\u{1F1F8}\u{1F1F0}","\u{1F1F8}\u{1F1F1}","\u{1F1F8}\u{1F1F2}","\u{1F1F8}\u{1F1F3}","\u{1F1F8}\u{1F1F4}","\u{1F1F8}\u{1F1F7}","\u{1F1F8}\u{1F1F8}","\u{1F1F8}\u{1F1F9}","\u{1F1F8}\u{1F1FB}","\u{1F1F8}\u{1F1FD}","\u{1F1F8}\u{1F1FE}","\u{1F1F8}\u{1F1FF}","\u{1F1F9}\u{1F1E6}","\u{1F1F9}\u{1F1E8}","\u{1F1F9}\u{1F1E9}","\u{1F1F9}\u{1F1EB}","\u{1F1F9}\u{1F1EC}","\u{1F1F9}\u{1F1ED}","\u{1F1F9}\u{1F1EF}","\u{1F1F9}\u{1F1F0}","\u{1F1F9}\u{1F1F1}","\u{1F1F9}\u{1F1F2}","\u{1F1F9}\u{1F1F3}","\u{1F1F9}\u{1F1F4}","\u{1F1F9}\u{1F1F7}","\u{1F1F9}\u{1F1F9}","\u{1F1F9}\u{1F1FB}","\u{1F1F9}\u{1F1FC}","\u{1F1F9}\u{1F1FF}","\u{1F1FA}\u{1F1E6}","\u{1F1FA}\u{1F1EC}","\u{1F1FA}\u{1F1F2}","\u{1F1FA}\u{1F1F3}","\u{1F1FA}\u{1F1F8}","\u{1F1FA}\u{1F1FE}","\u{1F1FA}\u{1F1FF}","\u{1F1FB}\u{1F1E6}","\u{1F1FB}\u{1F1E8}","\u{1F1FB}\u{1F1EA}","\u{1F1FB}\u{1F1EC}","\u{1F1FB}\u{1F1EE}","\u{1F1FB}\u{1F1F3}","\u{1F1FB}\u{1F1FA}","\u{1F1FC}\u{1F1EB}","\u{1F1FC}\u{1F1F8}","\u{1F1FD}\u{1F1F0}","\u{1F1FE}\u{1F1EA}","\u{1F1FE}\u{1F1F9}","\u{1F1FF}\u{1F1E6}","\u{1F1FF}\u{1F1F2}","\u{1F1FF}\u{1F1FC}","\u{1F38C}","\u{1F3C1}","\u{1F3F3}\uFE0F","\u{1F3F3}\uFE0F\u200D\u26A7\uFE0F","\u{1F3F3}\uFE0F\u200D\u{1F308}","\u{1F3F4}","\u{1F3F4}\u200D\u2620\uFE0F","\u{1F3F4}\u{E0067}\u{E0062}\u{E0065}\u{E006E}\u{E0067}\u{E007F}","\u{1F3F4}\u{E0067}\u{E0062}\u{E0073}\u{E0063}\u{E0074}\u{E007F}","\u{1F3F4}\u{E0067}\u{E0062}\u{E0077}\u{E006C}\u{E0073}\u{E007F}","\u{1F6A9}"],Games:[]};var Zt=class{constructor(e){this.inventory=e,this.container=e.container,this.previewPane=e.previewPane,this.containerEventListenerAdded=!1}async render(){await this.inventory.firebase.checkRemoteStatus();let e=this.container.querySelector(".inventory-container");if(!this.inventory.selectedItem&&this.previewPane&&this.showEmptyPreview(),Object.keys(this.inventory.items).length===0&&Object.keys(this.inventory.folders).length===0){this.renderEmptyState(e);return}let t=Object.keys(this.inventory.items).length,n=this.inventory.getCurrentFolderPath(),i=this.renderMakeRemoteBtn();e.innerHTML=`
            <div class="inventory-header">
                <h2>${n?`\u{1F4C1} ${n}`:`Saved Items (${t})`}</h2>
                <div class="inventory-sorting">
                    <select id="sortDropdown" class="sort-dropdown">
                        <option value="alphabetical" ${this.inventory.sortBy==="alphabetical"?"selected":""}>Alphabetical</option>
                        <option value="date" ${this.inventory.sortBy==="date"?"selected":""}>Creation Date</option>
                        <option value="last_used" ${this.inventory.sortBy==="last_used"?"selected":""}>Last Used</option>
                    </select>
                    <button id="sortDirectionBtn" class="sort-direction-btn" title="${this.inventory.sortDirection==="asc"?"Ascending":"Descending"}">
                        ${this.inventory.sortDirection==="asc"?"\u2191":"\u2193"}
                    </button>
                </div>
                <div class="inventory-actions">
                    ${this.inventory.selectedItem?`
                        <button class="export-button" id="exportBtn">
                            <span class="export-icon">\u2B06\uFE0F</span>
                            Export
                        </button>
                    `:""}
                    <button class="new-folder-button" id="newFolderBtn">
                        <span class="folder-icon">\u{1F4C1}</span>
                        New Folder
                    </button>
                    <button class="new-script-button" id="newScriptBtn">
                        <span class="new-icon">\u{1F4DC}</span>
                        New Script
                    </button>
                    <button class="upload-button" id="uploadFileBtn">
                        <span class="upload-icon">\u2B07\uFE0F</span>
                        Import
                    </button>
                    <button class="import-firebase-button" id="importFirebaseBtn" title="Import from Firebase">
                        <span class="import-firebase-icon">\u2601\uFE0F\u2B07\uFE0F</span>
                        Import Remote
                    </button>
                    ${i}
                    <input type="file" id="fileInput" accept=".js,.md,.json,.png,.jpg,.jpeg,.bmp,.gif" style="display: none;">
                </div>
            </div>
            ${this.inventory.currentFolder?`
                <div class="folder-breadcrumb">
                    <span class="breadcrumb-item" data-folder="">Home</span>
                    ${this.renderBreadcrumb()}
                </div>
            `:""}
            <div class="inventory-grid">
                ${this.renderFoldersAndItems()}
            </div>
        `,this.attachEventListeners(e)}trailName(e){return e.length>15?e.slice(0,14)+"...":e}renderMakeRemoteBtn(){return this.inventory.currentFolder?this.inventory.isRemote?`<button class="make-remote-button remote-status" id="remoteStatusBtn" disabled>
                <span class="remote-icon">\u2601\uFE0F</span>
                Remote
            </button>
            <button class="force-sync-button" id="forceSyncBtn" title="Force sync all items to Firebase">
                <span class="sync-icon">\u{1F504}</span>
                Force Sync
            </button>
            <button class="link-button" id="copyLinkBtn" title="Copy Firebase path">
                <span class="link-icon">\u{1F517}</span>
            </button>`:`
            <button class="make-remote-button" id="makeRemoteBtn">
                <span class="remote-icon">\u2601\uFE0F</span>
                Make Remote
            </button>
        `:""}renderEmptyState(e){e.innerHTML=`
            <div class="inventory-header">
                <h2>Saved Items (0)</h2>
                <div class="inventory-sorting">
                    <select id="sortDropdown" class="sort-dropdown">
                        <option value="alphabetical" ${this.inventory.sortBy==="alphabetical"?"selected":""}>Alphabetical</option>
                        <option value="date" ${this.inventory.sortBy==="date"?"selected":""}>Creation Date</option>
                        <option value="last_used" ${this.inventory.sortBy==="last_used"?"selected":""}>Last Used</option>
                    </select>
                    <button id="sortDirectionBtn" class="sort-direction-btn" title="${this.inventory.sortDirection==="asc"?"Ascending":"Descending"}">
                        ${this.inventory.sortDirection==="asc"?"\u2191":"\u2193"}
                    </button>
                </div>
                <div class="inventory-actions">
                    <button class="upload-button" id="uploadFileBtn">
                        <span class="upload-icon">\u2B07\uFE0F</span>
                        Import
                    </button>
                    <input type="file" id="fileInput" accept=".js,.md,.json,.png,.jpg,.jpeg,.bmp,.gif" style="display: none;">
                </div>
            </div>
            <div class="inventory-empty">
                <div class="empty-icon">\u{1F4E6}</div>
                <h3>Your inventory is empty</h3>
                <p>Drag entities from the World Inspector or upload files to save them here</p>
            </div>
        `;let t=e.querySelector("#uploadFileBtn"),n=e.querySelector("#fileInput"),i=e.querySelector("#sortDropdown"),s=e.querySelector("#newFolderBtn"),o=e.querySelector("#sortDirectionBtn");t&&n&&(t.addEventListener("mousedown",()=>n.click()),n.addEventListener("change",r=>this.inventory.fileHandler.handleFileUpload(r))),s&&s.addEventListener("mousedown",()=>this.createNewFolder()),i&&i.addEventListener("change",r=>{this.inventory.sortBy=r.target.value,this.render()}),o&&o.addEventListener("mousedown",()=>{this.inventory.sortDirection=this.inventory.sortDirection==="asc"?"desc":"asc",this.render()})}attachEventListeners(e){let t=e.querySelector("#sortDropdown"),n=e.querySelector("#sortDirectionBtn"),i=this.container.querySelector(".inventory-container");!this.containerEventListenerAdded&&i&&(this.containerEventListenerAdded=!0,i.addEventListener("mousedown",m=>{let f=m.target.closest(".inventory-item"),v=m.target.closest(".folder-item"),b=m.target.closest("button"),S=m.target.closest("input, select"),E=m.target.closest(".folder-breadcrumb"),x=m.target.closest(".inventory-preview-pane");!f&&!v&&!b&&!S&&!E&&!x&&this.inventory.selectedItem&&(this.inventory.selectedItem=null,this.showEmptyPreview(),this.render())})),t&&t.addEventListener("change",m=>{this.inventory.sortBy=m.target.value,this.render()}),n&&n.addEventListener("mousedown",()=>{this.inventory.sortDirection=this.inventory.sortDirection==="asc"?"desc":"asc",this.render()}),i.querySelectorAll(".breadcrumb-item").forEach(m=>{m.addEventListener("mousedown",()=>{let f=m.dataset.folder;this.inventory.navigateToFolder(f)})}),i.querySelectorAll(".inventory-item").forEach(m=>{m.addEventListener("mousedown",f=>{!f.target.closest(".remove-item-btn")&&!f.target.closest(".action-btn")&&this.inventory.selectItem(m.dataset.itemName)})}),i.querySelectorAll(".remove-item-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName;this.inventory.removeItem(v)})}),i.querySelectorAll(".remove-folder-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.folderName;this.inventory.removeFolder(v)})}),i.querySelectorAll(".edit-script-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName,b=this.inventory.items[v];b&&b.itemType==="markdown"?this.inventory.openMarkdownEditor(v):this.inventory.openScriptEditor(v)})}),i.querySelectorAll(".load-script-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName;window.LoadScript(v)})}),i.querySelectorAll(".add-to-scene-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName;this.inventory.loadEntityToSceneByName(v)})}),i.querySelectorAll(".view-image-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName;this.inventory.selectItem(v)})}),i.querySelectorAll(".copy-url-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.itemName,b=this.inventory.items[v];b&&b.itemType==="image"&&b.data.url&&navigator.clipboard.writeText(b.data.url).then(()=>{showNotification("Image URL copied to clipboard")}).catch(S=>{console.error("Failed to copy URL:",S),showNotification("Failed to copy URL")})})}),i.querySelectorAll(".import-folderref-btn").forEach(m=>{m.addEventListener("mousedown",async f=>{f.stopPropagation();let v=m.dataset.itemName,b=this.inventory.items[v];if(b&&b.itemType==="folderRef"&&b.importedFrom){m.disabled=!0,m.textContent="\u23F3";try{await this.inventory.firebase.importFromFirebase(b.importedFrom,b.folder)?(delete this.inventory.items[v],localStorage.removeItem(`inventory_${v}`),this.render(),showNotification(`Imported folder "${b.name}"`)):(m.disabled=!1,m.textContent="\u{1F4E5}",showNotification("Failed to import folder"))}catch(S){console.error("Error importing folderRef:",S),m.disabled=!1,m.textContent="\u{1F4E5}",showNotification("Error importing folder")}}})});let s=i.querySelector("#uploadFileBtn"),o=i.querySelector("#fileInput");s&&o&&(s.addEventListener("mousedown",()=>o.click()),o.addEventListener("change",m=>this.inventory.fileHandler.handleFileUpload(m)));let r=i.querySelector("#exportBtn");r&&r.addEventListener("mousedown",()=>this.inventory.downloadSelectedItem());let a=i.querySelector("#newScriptBtn");a&&a.addEventListener("mousedown",()=>this.inventory.createNewScript());let l=i.querySelector("#newFolderBtn");l&&l.addEventListener("mousedown",()=>this.inventory.createNewFolder());let d=i.querySelector("#makeRemoteBtn");d&&d.addEventListener("mousedown",()=>this.inventory.firebase.makeRemote());let p=i.querySelector("#copyLinkBtn");p&&p.addEventListener("mousedown",()=>this.inventory.firebase.copyFirebaseRef());let h=i.querySelector("#forceSyncBtn");h&&h.addEventListener("mousedown",()=>this.inventory.firebase.forceSyncAll());let u=i.querySelector("#importFirebaseBtn");u&&u.addEventListener("mousedown",()=>this.showImportFirebaseModal()),i.querySelectorAll(".folder-item").forEach(m=>{let f=m.dataset.folderName;m.addEventListener("dragstart",b=>{b.stopPropagation(),this.draggedFolder=f,b.dataTransfer.setData("text/inventory-folder",f),b.dataTransfer.effectAllowed="move",m.classList.add("dragging")}),m.addEventListener("dragend",b=>{b.stopPropagation(),m.classList.remove("dragging"),this.draggedFolder=null});let v=m.querySelector(".folder-header");v&&v.addEventListener("mousedown",b=>{if(!b.target.closest(".folder-expand-btn")&&!b.target.closest(".remove-folder-btn")){let S=m.dataset.folderName;this.inventory.openFolder(S)}}),v&&(v.addEventListener("dragover",b=>{(this.draggedItem||this.draggedFolder)&&this.draggedFolder!==f&&(b.preventDefault(),b.stopPropagation(),b.dataTransfer.dropEffect="move",m.classList.add("drag-over"))}),v.addEventListener("dragleave",b=>{b.stopPropagation(),m.classList.remove("drag-over")}),v.addEventListener("drop",async b=>{if((this.draggedItem||this.draggedFolder)&&this.draggedFolder!==f){b.preventDefault(),b.stopPropagation(),m.classList.remove("drag-over");let S=b.dataTransfer.getData("text/inventory-item"),E=b.dataTransfer.getData("text/inventory-folder");S?await this.inventory.moveItemToFolder(S,f):E&&await this.inventory.moveFolderToFolder(E,f)}}))}),i.querySelectorAll(".folder-expand-btn").forEach(m=>{m.addEventListener("mousedown",f=>{f.stopPropagation();let v=m.dataset.folderName;this.inventory.toggleFolderExpansion(v)})}),i.querySelectorAll(".inventory-item").forEach(m=>{m.addEventListener("dragstart",f=>{f.stopPropagation(),this.draggedItem=m.dataset.itemName,f.dataTransfer.setData("text/inventory-item",this.draggedItem),f.dataTransfer.effectAllowed="move",m.classList.add("dragging")}),m.addEventListener("dragend",f=>{f.stopPropagation(),m.classList.remove("dragging"),this.draggedItem=null})});let y=i.querySelector(".inventory-grid");y&&(y.addEventListener("dragover",m=>{if(this.draggedItem||this.draggedFolder){let f=m.target.closest(".folder-header"),v=this.draggedFolder&&m.target.closest(`.folder-item[data-folder-name="${this.draggedFolder}"]`);!f&&!v?(m.preventDefault(),m.stopPropagation(),m.dataTransfer.dropEffect="move",y.classList.add("drag-over-grid")):y.classList.remove("drag-over-grid")}}),y.addEventListener("dragleave",m=>{y.contains(m.relatedTarget)||y.classList.remove("drag-over-grid")}),y.addEventListener("drop",async m=>{if(y.classList.remove("drag-over-grid"),this.draggedItem||this.draggedFolder){let f=m.target.closest(".folder-header"),v=this.draggedFolder&&m.target.closest(`.folder-item[data-folder-name="${this.draggedFolder}"]`);if(!f&&!v){m.preventDefault(),m.stopPropagation();let b=m.dataTransfer.getData("text/inventory-item"),S=m.dataTransfer.getData("text/inventory-folder");b?await this.inventory.moveItemToFolder(b,this.inventory.currentFolder):S&&await this.inventory.moveFolderToFolder(S,this.inventory.currentFolder)}}}))}renderBreadcrumb(){if(!this.inventory.currentFolder)return"";let e=this.inventory.currentFolder.split("/"),t="";return e.map((n,i)=>(t+=(i>0?"/":"")+n,`<span class="breadcrumb-separator">/</span><span class="breadcrumb-item" data-folder="${t}">${n}</span>`)).join("")}renderFoldersAndItems(){let e=[],t=[],n=Object.entries(this.inventory.folders).filter(([s,o])=>o.parent===this.inventory.currentFolder).map(([s,o])=>({key:s,...o}));n=this.inventory.sortItems(n,!0),n.forEach(s=>{e.push(this.renderFolder(s.key,s))});let i=Object.entries(this.inventory.items).filter(([s,o])=>(o.folder||null)===this.inventory.currentFolder).map(([s,o])=>({key:s,...o}));return i=this.inventory.sortItems(i,!1),i.forEach(s=>{t.push(this.renderItem(s.key,s))}),e.join("")+t.join("")}renderFolder(e,t){let n=this.inventory.getItemCountInFolder(e),i=this.inventory.expandedFolders.has(e);return`
            <div class="folder-item" data-folder-name="${e}" draggable="true">
                <div class="folder-header">
                    <button class="folder-expand-btn" data-folder-name="${e}">
                        ${i?"\u25BC":"\u25B6"}
                    </button>
                    <span class="folder-icon">\u{1F4C1}</span>
                    <h3 class="folder-name">${this.trailName(t.name)}</h3>
                    <button class="remove-folder-btn" data-folder-name="${e}">\xD7</button>
                </div>
                ${i?`
                    <div class="folder-contents">
                        ${this.renderFolderContents(e)}
                    </div>
                `:""}
            </div>
        `}renderFolderContents(e){let t=[],n=[];return Object.entries(this.inventory.folders).forEach(([i,s])=>{s.parent===e&&n.push(this.renderFolder(i,s))}),Object.entries(this.inventory.items).forEach(([i,s])=>{s.folder===e&&t.push(this.renderItem(i,s,!0))}),n.length===0&&t.length===0?'<div class="folder-empty">Empty folder</div>':n.join("")+t.join("")}renderItem(e,t,n=!1){let i=new Date(t.created).toLocaleDateString(),s=t.itemType||"entity",o=t.icon||(s==="script"?"\u{1F4DC}":s==="markdown"?"\u{1F4DD}":s==="image"?"\u{1F5BC}\uFE0F":"\u{1F4E6}"),r=this.inventory.selectedItem===e,a="";return s==="folderRef"?a=`
                <div class="item-actions">
                    <button class="action-btn import-folderref-btn" data-item-name="${e}" title="Import this folder">
                        \u{1F4E5}
                    </button>
                </div>
            `:s==="script"||s==="markdown"?a=`
                <div class="item-actions">
                    ${s==="script"?`
                    <button class="action-btn load-script-btn" data-item-name="${e}" title="Load script to scene">
                        \u2795
                    </button>`:""}
                    <button class="action-btn edit-script-btn" data-item-name="${e}">
                        \u270F\uFE0F
                    </button>
                </div>
            `:s==="image"?a=`
                <div class="item-actions">
                    <button class="action-btn copy-url-btn" data-item-name="${e}">
                        \u{1F4CB}
                    </button>
                </div>
            `:a=`
                <div class="item-actions">
                    <button class="action-btn add-to-scene-btn" data-item-name="${e}">
                        \u2795
                    </button>
                </div>
            `,`
        <div class="inventory-item ${r?"selected":""}" data-item-name="${e}" draggable="true">
            <div class="item-header">
                <div class="item-title">
                    <span class="item-type-icon" title="${s}">${o}</span>
                    <h3 class="item-name">${this.trailName(t.name)}</h3>
                </div>
                ${a}
                <button class="remove-item-btn" data-item-name="${e}">\xD7</button>
            </div>
        </div>
    `}showPreview(e){let t=this.inventory.items[e];if(!t||!this.previewPane)return;let n=this.generatePreviewContent(t,e);this.previewPane.innerHTML=n,this.previewPane.style.display="block",this.attachPreviewEventListeners(e,t)}attachPreviewEventListeners(e,t){let n=this.previewPane.querySelector(".move-here-btn");n&&n.addEventListener("mousedown",async()=>{await this.inventory.moveItemToFolder(e,this.inventory.currentFolder),this.showPreview(e)});let i=this.previewPane.querySelector(".preview-close-btn");i&&i.addEventListener("mousedown",()=>{this.inventory.selectedItem=null,this.showEmptyPreview(),this.render()});let s=this.previewPane.querySelector(".preview-icon-btn");s&&s.addEventListener("mousedown",()=>{this.showEmojiPicker(e,t)});let o=this.previewPane.querySelector(".edit-script-preview-btn");o&&o.addEventListener("mousedown",()=>{t.itemType==="markdown"?this.inventory.openMarkdownEditor(e):this.inventory.openScriptEditor(e)});let r=this.previewPane.querySelector(".copy-image-url-btn");r&&r.addEventListener("mousedown",()=>{let b=r.dataset.url;navigator.clipboard.writeText(b).then(()=>{this.notify("Image URL copied to clipboard")}).catch(S=>{console.error("Failed to copy URL:",S),this.notify("Failed to copy URL")})});let a=this.previewPane.querySelector(".open-image-btn");a&&a.addEventListener("mousedown",()=>{let b=a.dataset.url;window.open(b,"_blank")});let l=this.previewPane.querySelector(".script-startup-toggle");l&&l.addEventListener("change",()=>{let b=this.inventory.items[e];b&&(b.startup=l.checked,this.inventory.syncItem(e,b),showNotification(`Updated startup setting for "${e}"`),this.showPreview(e))});let d=this.previewPane.querySelector(".script-startup-sequence");d&&d.addEventListener("change",()=>{let b=this.inventory.items[e];if(!b)return;let S=d.value,E=this.previewPane.querySelector(".script-after-input");if(S==="after"){if(E){E.style.display="inline-block";let x=E.value||"ScriptName";b.startupSequence=`after:${x}`}}else E&&(E.style.display="none"),b.startupSequence=S;this.inventory.syncItem(e,b),showNotification(`Updated startup sequence for "${e}"`)});let p=this.previewPane.querySelector(".script-after-input");p&&(p.addEventListener("input",()=>{let b=this.inventory.items[e];if(!b)return;let S=p.value||"ScriptName";b.startupSequence=`after:${S}`,this.inventory.syncItem(e,b)}),p.addEventListener("blur",()=>{showNotification(`Updated startup sequence for "${e}"`)}));let h=this.previewPane.querySelector(".script-active-toggle");h&&h.addEventListener("change",()=>{let b=this.inventory.items[e];b&&(b.active=h.checked,this.inventory.syncItem(e,b),showNotification(`Updated active setting for "${e}"`))});let u=this.previewPane.querySelector(".script-global-toggle");u&&u.addEventListener("change",()=>{let b=this.inventory.items[e];b&&(b.global=u.checked,this.inventory.syncItem(e,b),showNotification(`Updated global setting for "${e}"`))});let y=this.previewPane.querySelector(".script-auto-update-toggle");y&&y.addEventListener("change",()=>{let b=this.inventory.items[e];b&&(b.autoUpdate=y.checked,this.inventory.syncItem(e,b),showNotification(`Updated auto update setting for "${e}"`))});let m=this.previewPane.querySelector(".description-textarea");m&&(m.addEventListener("blur",()=>{let b=this.inventory.items[e];b&&(b.description=m.value,this.inventory.syncItem(e,b),showNotification(`Updated description for "${e}"`))}),m.addEventListener("keydown",b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),m.blur())}));let f=this.previewPane.querySelector(".import-folderref-preview-btn");f&&f.addEventListener("click",async()=>{let b=t;if(b&&b.itemType==="folderRef"&&b.importedFrom){f.disabled=!0,f.textContent="\u23F3 Importing...";try{await this.inventory.firebase.importFromFirebase(b.importedFrom,b.folder)?(delete this.inventory.items[e],localStorage.removeItem(`inventory_${e}`),this.render(),this.showEmptyPreview(),showNotification(`Imported folder "${b.name}"`)):(f.disabled=!1,f.textContent="\u{1F4E5} Import Folder",showNotification("Failed to import folder"))}catch(S){console.error("Error importing folderRef from preview:",S),f.disabled=!1,f.textContent="\u{1F4E5} Import Folder",showNotification("Error importing folder")}}});let v=this.previewPane.querySelector(".editable-name");if(v){let b=e;v.addEventListener("keydown",S=>{S.key==="Enter"&&(S.preventDefault(),v.blur()),S.key==="Escape"&&(S.preventDefault(),v.textContent=b,v.blur())}),v.addEventListener("blur",()=>{let S=v.textContent.trim();if(S&&S!==b){let E=new dt(b,S,{source:"ui"});changeManager.applyChange(E)}else S||(v.textContent=b)}),v.addEventListener("focus",()=>{let S=document.createRange();S.selectNodeContents(v);let E=window.getSelection();E.removeAllRanges(),E.addRange(S)})}}hidePreview(){this.previewPane&&(this.previewPane.style.display="none",this.previewPane.innerHTML="")}showEmptyPreview(){if(this.previewPane){if(this.inventory.currentFolder){let e=this.inventory.folders[this.inventory.currentFolder];if(e){this.showFolderDetails(this.inventory.currentFolder,e);return}}this.showInventoryOverview()}}showInventoryOverview(){if(!this.previewPane)return;let e=Object.keys(this.inventory.items).length,t=Object.keys(this.inventory.folders).length,n=0,i=0,s=0,o=0;Object.values(this.inventory.items).forEach(a=>{switch(a.itemType){case"script":n++;break;case"image":s++;break;case"markdown":o++;break;default:i++;break}});let r=0;Object.values(this.inventory.items).forEach(a=>{this.inventory.firebase.isItemInRemoteLocation(a)&&r++}),this.previewPane.innerHTML=`
            <div class="preview-header">
                <div class="preview-title">
                    <span class="preview-icon-btn" style="cursor: default;">\u{1F4E6}</span>
                    <h2>Inventory Overview</h2>
                </div>
            </div>
            <div class="preview-meta">
                <div class="meta-item">
                    <span class="meta-label">Total Items:</span>
                    <span class="meta-value">${e}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Total Folders:</span>
                    <span class="meta-value">${t}</span>
                </div>
            </div>
            <div class="preview-content" style="padding: 20px;">
                <h3>Item Breakdown</h3>
                <div style="margin: 15px 0;">
                    ${i>0?`<div style="margin: 5px 0;">\u{1F4E6} Entities: ${i}</div>`:""}
                    ${n>0?`<div style="margin: 5px 0;">\u{1F4DC} Scripts: ${n}</div>`:""}
                    ${s>0?`<div style="margin: 5px 0;">\u{1F5BC}\uFE0F Images: ${s}</div>`:""}
                    ${o>0?`<div style="margin: 5px 0;">\u{1F4DD} Markdown: ${o}</div>`:""}
                </div>
                <h3>Storage</h3>
                <div style="margin: 15px 0;">
                    <div style="margin: 5px 0;">\u{1F4BE} Local Items: ${e-r}</div>
                    ${r>0?`<div style="margin: 5px 0;">\u2601\uFE0F Remote Items: ${r}</div>`:""}
                </div>
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #333;">
                    <p style="color: #888; font-size: 0.9em;">Select an item to view its details, or navigate into a folder to see folder information.</p>
                </div>
            </div>
        `,this.previewPane.style.display="block"}showFolderDetails(e,t){if(!this.previewPane)return;let n=this.inventory.getItemCountInFolder(e),i=t.created?new Date(t.created).toLocaleString():"Unknown",s=t.remote||!1,o=this.inventory.getCurrentFolderPath(),r=t._description||"",a=t.public||!1,l=0;Object.entries(this.inventory.folders).forEach(([d,p])=>{p.parent===e&&l++}),this.previewPane.innerHTML=`
            <div class="preview-header">
                <div class="preview-title">
                    <span class="preview-icon-btn" style="cursor: default;">\u{1F4C1}</span>
                    <h2 ${this.inventory.firebase.folderIsMine(t)?'contenteditable="true" class="editable-folder-name"':'class="folder-name-readonly"'} data-folder-key="${e}">${t.name}</h2>
                </div>
            </div>
            <div class="preview-meta">
                <div class="meta-item">
                    <span class="meta-label">Type:</span>
                    <span class="meta-value">Folder</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Path:</span>
                    <span class="meta-value">${o}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Items:</span>
                    <span class="meta-value">${n}</span>
                </div>
                ${l>0?`
                    <div class="meta-item">
                        <span class="meta-label">Subfolders:</span>
                        <span class="meta-value">${l}</span>
                    </div>
                `:""}
                <div class="meta-item">
                    <span class="meta-label">Storage:</span>
                    <span class="meta-value">${s?"\u2601\uFE0F Remote":"\u{1F4BE} Local"}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Created:</span>
                    <span class="meta-value">${i}</span>
                </div>
            </div>
            ${this.inventory.firebase.folderIsMine(t)?`
                <div class="preview-meta">
                    <div class="meta-item" style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="folder-public-checkbox" class="folder-public-checkbox" data-folder-key="${e}" 
                                ${a?"checked":""} style="cursor: pointer;">
                            <label for="folder-public-checkbox" style="cursor: pointer;">Public Folder</label>
                        </div>
                        <span style="color: #888; font-size: 0.9em;">${a?"Contents in this folder are public":"Contents in this folder are private"}</span>
                    </div>
                </div>
            `:""}
            <div class="preview-meta">
                <div class="meta-label">Description:</div>
                ${this.inventory.firebase.folderIsMine(t)?`<textarea class="description-textarea" data-folder-key="${e}" placeholder="Enter a description for this folder...">${this.escapeHtml(r)}</textarea>`:`<div class="description-readonly" style="padding: 8px; background: #2a2a2a; border: 1px solid #333; border-radius: 4px; color: #ccc; min-height: 60px; white-space: pre-wrap;">${this.escapeHtml(r)||'<span style="color: #666;">No description provided</span>'}</div>`}
            </div>
            <div class="preview-content" style="padding: 20px;">
                <h3>Folder Information</h3>
                <p style="color: #888; margin: 10px 0;">This folder contains ${n} item${n!==1?"s":""} and ${l} subfolder${l!==1?"s":""}.</p>
                ${s?`
                    <p style="color: #6bb6ff; margin: 10px 0;" onclick="inventory.firebase.copyFirebaseRef()">\u{1F517} Synced</p>
                `:`
                    <p style="color: #888; margin: 10px 0;">This folder is stored locally.</p>
                `}
            </div>
        `,this.previewPane.style.display="block",this.attachFolderPreviewEventListeners(e,t)}attachFolderPreviewEventListeners(e,t){if(this.inventory.firebase.folderIsMine(t)){let i=this.previewPane.querySelector(".editable-folder-name");if(i){let s=t.name;i.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),i.blur()),o.key==="Escape"&&(o.preventDefault(),i.textContent=s,i.blur())}),i.addEventListener("blur",()=>{let o=i.textContent.trim();if(o&&o!==s){let r=t.remote||!1,a="<strong>Warning:</strong> Renaming this folder may break existing references and scripts that depend on it.";r&&(a+="<br><br><strong>Important:</strong> This folder is currently synchronized with Firebase. After renaming, it will become a local-only folder and lose its remote connection."),a+=`<br><br>Are you sure you want to rename "${s}" to "${o}"?`,this.showWarningConfirm("Folder Rename Warning",a,()=>{this.inventory.handleFolderRename(e,o)},()=>{i.textContent=s})}else o||(i.textContent=s)}),i.addEventListener("focus",()=>{let o=document.createRange();o.selectNodeContents(i);let r=window.getSelection();r.removeAllRanges(),r.addRange(o)})}}if(this.inventory.firebase.folderIsMine(t)){let i=this.previewPane.querySelector(".description-textarea");i&&(i.addEventListener("blur",()=>{let s=this.inventory.folders[e];s&&(s._description=i.value,this.inventory.syncFolder(e,s),showNotification(`Updated description for folder "${t.name}"`))}),i.addEventListener("keydown",s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i.blur())}))}let n=this.previewPane.querySelector(".folder-public-checkbox");n&&n.addEventListener("change",()=>{let i=this.inventory.folders[e];if(i){i.public=n.checked,this.inventory.syncFolder(e,i);let s=n.parentElement.parentElement.querySelector("span");s&&(s.textContent=n.checked?"Contents in this folder are public":"Contents in this folder are private"),showNotification(`Folder "${t.name}" is now ${n.checked?"public":"private"}`)}})}generatePreviewContent(e,t){let n=new Date(e.created).toLocaleString(),i=e.itemType||"entity",s=e.description||"",o=e.icon||(i==="script"?"\u{1F4DC}":i==="image"?"\u{1F5BC}\uFE0F":"\u{1F4E6}"),l=`<div class="preview-header">
                    ${(e.folder||null)!==this.inventory.currentFolder?`
                        <button class="move-here-btn" data-item-name="${t}">
                            \u{1F4C1} Move
                        </button>
                    `:""}
                    <div class="preview-title">
                        <button class="preview-icon-btn" title="Click to change icon">${o}</button>
                        <h2 contenteditable="true" class="editable-name" data-item-name="${e.name}">${e.name}</h2>
                    </div>
                    <button class="preview-close-btn">\xD7</button>
                </div>`;if(i==="folderRef")return`
                ${l}
                <div class="preview-meta">
                    <div class="meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">Public Folder Reference</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Author:</span>
                        <span class="meta-value">${e.author||"Unknown"}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Source:</span>
                        <span class="meta-value" style="font-size: 0.9em; word-break: break-all;">${e.importedFrom||"Unknown"}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Created:</span>
                        <span class="meta-value">${n}</span>
                    </div>
                </div>
                ${e._description?`
                    <div class="preview-meta">
                        <div class="meta-label">Description:</div>
                        <div class="description-readonly" style="padding: 8px; background: #2a2a2a; border: 1px solid #333; border-radius: 4px; color: #ccc; min-height: 60px; white-space: pre-wrap;">
                            ${this.escapeHtml(e._description)}
                        </div>
                    </div>
                `:""}
                <div class="preview-content" style="padding: 20px;">
                    <h3>Public Folder</h3>
                    <p style="color: #888; margin: 10px 0;">This is a reference to a public folder shared by ${e.author}.</p>
                    <p style="color: #6bb6ff; margin: 10px 0;">Click the \u{1F4E5} import button to download this folder to your inventory.</p>
                    <div style="margin-top: 20px; padding: 15px; background: #2a2a2a; border-radius: 4px;">
                        <button class="import-folderref-preview-btn" data-item-name="${t}" style="
                            padding: 10px 20px;
                            background: #4CAF50;
                            color: white;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                            font-size: 14px;
                        ">
                            \u{1F4E5} Import Folder
                        </button>
                    </div>
                </div>
            `;if(i==="image"){let d=e.data.size?(e.data.size/1024).toFixed(2)+" KB":"Unknown",p=e.data.width&&e.data.height?`${e.data.width}\xD7${e.data.height}`:"Unknown";return`
                ${l}
                <div class="preview-meta">
                    <div class="meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">Image</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Size:</span>
                        <span class="meta-value">${d}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Dimensions:</span>
                        <span class="meta-value">${p}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Author:</span>
                        <span class="meta-value">${e.author}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Created:</span>
                        <span class="meta-value">${n}</span>
                    </div>
                </div>
                <div class="preview-meta">
                    <div class="meta-label">Description:</div>
                    <textarea class="description-textarea" data-item-name="${e.name}" placeholder="Enter a description...">${this.escapeHtml(s)}</textarea>
                </div>
                <div class="preview-content">
                    <h3>Image Preview</h3>
                    <div class="image-preview-container" style="text-align: center; margin: 20px 0;">
                        <img src="${e.data.url}" alt="${e.name}" style="max-width: 100%; max-height: 400px; border: 1px solid #333; border-radius: 4px;">
                    </div>
                    <div class="preview-actions">
                        <button class="action-btn copy-image-url-btn" data-url="${e.data.url}">
                            \u{1F4CB} Copy URL
                        </button>
                        <button class="action-btn open-image-btn" data-url="${e.data.url}">
                            \u{1F517} Open in New Tab
                        </button>
                    </div>
                </div>
            `}else if(i==="markdown"){let d=e.data||"";return`
                ${l}
                <div class="preview-meta">
                    <div class="meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">Markdown</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Author:</span>
                        <span class="meta-value">${e.author}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Created:</span>
                        <span class="meta-value">${n}</span>
                    </div>
                </div>
                <div class="preview-meta">
                    <div class="meta-label">Description:</div>
                    <textarea class="description-textarea" data-item-name="${e.name}" placeholder="Enter a description...">${this.escapeHtml(s)}</textarea>
                </div>
                <div class="preview-content">
                    <h3>Markdown Content</h3>
                    <pre class="script-preview"><code>${this.escapeHtml(e.data)}</code></pre>
                    <div class="preview-actions">
                        <button class="action-btn edit-script-preview-btn" data-item-name="${e.name}">
                            \u270F\uFE0F Edit Markdown
                        </button>
                    </div>
                </div>
            `}else if(i==="script"){let d=e.data||"",p=d.substring(0,500)+(d.length>500?"...":"");return`
                ${l}
                <div class="preview-meta">
                    <div class="meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">Script</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Author:</span>
                        <span class="meta-value">${e.author}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Created:</span>
                        <span class="meta-value">${n}</span>
                    </div>
                </div>
                <div class="preview-meta">
                    <div class="meta-label">Script Options:</div>
                    <div style="display: flex; gap: 20px; padding: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" class="script-global-toggle" data-item-name="${e.name}"
                                ${e.global?"checked":""} style="cursor: pointer;">
                            <span>Global</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" class="script-startup-toggle" data-item-name="${e.name}"
                                ${e.startup?"checked":""} style="cursor: pointer;">
                            <span>Startup</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" class="script-active-toggle" data-item-name="${e.name}"
                                ${e.active?"checked":""} style="cursor: pointer;">
                            <span>Active</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" class="script-auto-update-toggle" data-item-name="${e.name}"
                                ${e.autoUpdate?"checked":""} style="cursor: pointer;">
                            <span>Auto</span>
                        </label>
                    </div>
                    ${e.startup?`
                        <div style="padding: 10px; border-top: 1px solid #333;">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <span>Startup Sequence:</span>
                                <select class="script-startup-sequence" data-item-name="${t}" style="background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px;">
                                    <option value="onInspectorLoaded" ${!e.startupSequence||e.startupSequence==="onInspectorLoaded"?"selected":""}>onInspectorLoaded</option>
                                    <option value="onSceneLoaded" ${e.startupSequence==="onSceneLoaded"?"selected":""}>onSceneLoaded</option>
                                    <option value="after" ${e.startupSequence&&e.startupSequence.startsWith("after:")?"selected":""}>after</option>
                                </select>
                                ${e.startupSequence&&e.startupSequence.startsWith("after:")?`
                                    <input type="text" class="script-after-input" data-item-name="${t}"
                                        value="${e.startupSequence.split(":")[1]}"
                                        placeholder="ScriptName"
                                        style="background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px; margin-left: 8px;">
                                `:`
                                    <input type="text" class="script-after-input" data-item-name="${t}"
                                        value="ScriptName"
                                        placeholder="ScriptName"
                                        style="background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px; margin-left: 8px; display: none;">
                                `}
                            </label>
                        </div>
                    `:""}
                    <div style="padding: 5px 10px; font-size: 0.9em; color: #888;">
                        <em>Note: Both startup and active must be enabled for script to run on startup</em>
                        <em>Note: Global requires all other players to have the script in their inventory to run</em>
                    </div>
                </div>
                <div class="preview-meta">
                    <div class="meta-label">Description:</div>
                    <textarea class="description-textarea" data-item-name="${e.name}" placeholder="Enter a description...">${this.escapeHtml(s)}</textarea>
                </div>
                <div class="preview-content">
                    <h3>Script Content</h3>
                    <pre class="script-preview"><code>${this.escapeHtml(e.data)}</code></pre>
                    <div class="preview-actions">
                        <button class="action-btn edit-script-preview-btn" data-item-name="${e.name}">
                            \u270F\uFE0F Edit Script
                        </button>
                    </div>
                </div>
            `}else{let d=e.data.components?e.data.components.length:0,p=e.data.children?e.data.children.length:0;return`
                ${l}
                <div class="preview-meta">
                    <div class="meta-item">
                        <span class="meta-label">Type:</span>
                        <span class="meta-value">Entity</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Author:</span>
                        <span class="meta-value">${e.author}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Created:</span>
                        <span class="meta-value">${n}</span>
                    </div>
                    ${d>0?`
                        <div class="meta-item">
                            <span class="meta-label">Components:</span>
                            <span class="meta-value">${d}</span>
                        </div>
                    `:""}
                    ${p>0?`
                        <div class="meta-item">
                            <span class="meta-label">Children:</span>
                            <span class="meta-value">${p}</span>
                        </div>
                    `:""}
                </div>
                <div class="preview-meta">
                    <div class="meta-label">Description:</div>
                    <textarea class="description-textarea" data-item-name="${e.name}" placeholder="Enter a description...">${this.escapeHtml(s)}</textarea>
                </div>
                <div class="preview-content">
                    <h3>Entity</h3>
                    <div class="json-tree">
                        ${this.renderJsonTree(e.data)}
                    </div>
                </div>
            `}}renderJsonTree(e,t="",n=0){if(e==null)return'<span class="json-null">null</span>';if(typeof e!="object")return`<span class="json-value">${this.formatJsonValue(e)}</span>`;if(Array.isArray(e)){if(e.length===0)return'<span class="json-bracket">[]</span>';let r=`json-${t}-array`.replace(/[.\[\]]/g,"-");return`
                <span class="json-array">
                    <input type="checkbox" id="${r}" class="json-toggle" checked>
                    <label for="${r}" class="json-label">
                        <span class="json-arrow">\u25BC</span>
                        <span class="json-bracket">[</span>
                        <span class="json-preview">${e.length} items</span>
                    </label>
                    <div class="json-content">
                        ${e.map((a,l)=>`
                            <div class="json-item">
                                <span class="json-key">${l}:</span>
                                ${this.renderJsonTree(a,`${t}[${l}]`,n+1)}
                            </div>
                        `).join("")}
                    </div>
                    <span class="json-bracket">]</span>
                </span>
            `}let i=Object.keys(e);if(i.length===0)return'<span class="json-bracket">{}</span>';let s=`json-${t}-object`.replace(/[.\[\]]/g,"-"),o=n<2;return`
            <span class="json-object">
                <input type="checkbox" id="${s}" class="json-toggle" ${o?"checked":""}>
                <label for="${s}" class="json-label">
                    <span class="json-arrow">\u25BC</span>
                    <span class="json-bracket">{</span>
                    <span class="json-preview">${i.length} ${i.length===1?"property":"properties"}</span>
                </label>
                <div class="json-content">
                    ${i.map(r=>`
                        <div class="json-item">
                            <span class="json-key">"${r}":</span>
                            ${this.renderJsonTree(e[r],`${t}.${r}`,n+1)}
                        </div>
                    `).join("")}
                </div>
                <span class="json-bracket">}</span>
            </span>
        `}formatJsonValue(e){return typeof e=="string"?`<span class="json-string">"${this.escapeHtml(e)}"</span>`:typeof e=="boolean"?`<span class="json-boolean">${e}</span>`:typeof e=="number"?`<span class="json-number">${e}</span>`:String(e)}setupDropZone(){this.previewPane&&this.previewPane.addEventListener("mousedown",e=>{if(e.target===this.previewPane||e.target.classList.contains("preview-content")||e.target.classList.contains("preview-meta")){let t=e.target.closest("button"),n=e.target.closest("input, textarea, select"),i=e.target.closest("[contenteditable]"),s=e.target.closest(".inventory-preview-pane");log("inventory","clickedOn [dropZone]",e.target),!t&&!n&&!i&&!s&&this.inventory.selectedItem&&(this.inventory.selectedItem=null,this.showEmptyPreview(),this.inventory.ui.render())}}),this.container.addEventListener("dragover",e=>{this.inventory.draggedItem||(e.preventDefault(),e.dataTransfer.dropEffect="copy")}),this.container.addEventListener("dragleave",e=>{e.target,this.container}),this.container.addEventListener("drop",async e=>{if(!this.inventory.draggedItem){e.preventDefault();let t=e.dataTransfer.getData("text/plain"),n=new O(t,null,null,{source:"ui"});window.changeManager.applyChange(n)}})}showScriptNameModal(){let e=this.createModalOverlay(),t=this.createModalContent(`
            <div class="modal-header">
                <h3>Create New File</h3>
                <button class="modal-close-btn" id="modalCloseBtn">\xD7</button>
            </div>
            <div class="modal-body">
                <label for="fileTypeSelect">File Type:</label>
                <select id="fileTypeSelect" style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #333; background: #1e1e1e; color: #ccc; border-radius: 4px;">
                    <option value="script" selected>JavaScript (.js)</option>
                    <option value="markdown">Markdown (.md)</option>
                </select>
                
                <label for="scriptNameInput">File Name:</label>
                <input type="text" id="scriptNameInput" placeholder="MyScript" autocomplete="off">
                <div class="modal-hint" id="fileHint">Enter a name for your script (e.g., PlayerController)</div>
                <div class="modal-error" id="modalError" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-create-btn" id="modalCreateBtn">Create File</button>
            </div>
        `);e.appendChild(t),document.body.appendChild(e);let n=t.querySelector("#scriptNameInput"),i=t.querySelector("#fileTypeSelect"),s=t.querySelector("#fileHint"),o=t.querySelector("#modalCreateBtn");i.addEventListener("change",()=>{i.value==="markdown"?(s.textContent="Enter a name for your markdown file (e.g., README)",o.textContent="Create Markdown"):(s.textContent="Enter a name for your script (e.g., PlayerController)",o.textContent="Create Script")}),setTimeout(()=>n.focus(),100);let r=()=>e.remove(),a=()=>{let l=n.value.trim(),d=i.value,p=t.querySelector("#modalError");if(!l){p.textContent="Please enter a file name",p.style.display="block";return}let h;d==="markdown"?h=l.endsWith(".md")?l:l+".md":h=l.endsWith(".js")?l:l+".js",this.inventory.items[h]?this.showOverwriteModal(h,()=>{r(),this.inventory.finalizeScriptCreation(h,d)}):(r(),this.inventory.finalizeScriptCreation(h,d))};this.attachModalEventListeners(t,e,r,a)}showOverwriteModal(e,t){let n=this.createModalOverlay(),i=this.createModalContent(`
            <div class="modal-header">
                <h3>File Already Exists</h3>
            </div>
            <div class="modal-body">
                <p>A script named "<strong>${e}</strong>" already exists.</p>
                <p>Do you want to override the existing file?</p>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-overwrite-btn" id="modalOverwriteBtn">Overwrite</button>
            </div>
        `);n.appendChild(i),document.body.appendChild(n);let s=()=>n.remove();i.querySelector("#modalCancelBtn").addEventListener("mousedown",s),i.querySelector("#modalOverwriteBtn").addEventListener("mousedown",()=>{s(),t()}),n.addEventListener("mousedown",o=>{o.target===n&&s()})}showFolderNameModal(e){let t=this.createModalOverlay(),n=this.createModalContent(`
            <div class="modal-header">
                <h3>Create New Folder</h3>
                <button class="modal-close-btn" id="modalCloseBtn">\xD7</button>
            </div>
            <div class="modal-body">
                <label for="folderNameInput">Folder Name:</label>
                <input type="text" id="folderNameInput" placeholder="New Folder" autocomplete="off">
                <div class="modal-hint">Enter a name for your folder</div>
                <div class="modal-error" id="modalError" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-create-btn" id="modalCreateBtn">Create Folder</button>
            </div>
        `);t.appendChild(n),document.body.appendChild(t);let i=n.querySelector("#folderNameInput");setTimeout(()=>i.focus(),100);let s=()=>t.remove(),o=()=>{let r=i.value.trim(),a=n.querySelector("#modalError");if(!r){a.textContent="Please enter a folder name",a.style.display="block";return}s(),e(r)};this.attachModalEventListeners(n,t,s,o)}showWarningConfirm(e,t,n,i){let s=document.createElement("div");s.className="modal-overlay";let o=document.createElement("div");o.className="modal-content modal-warning",o.innerHTML=`
            <div class="modal-header">
                <h3>\u26A0\uFE0F ${e}</h3>
            </div>
            <div class="modal-body">
                <p>${t}</p>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-confirm-btn modal-warning-btn" id="modalConfirmBtn">Continue Anyway</button>
            </div>
        `,s.appendChild(o),document.body.appendChild(s);let r=o.querySelector("#modalCancelBtn"),a=o.querySelector("#modalConfirmBtn"),l=()=>{s.remove()};r.addEventListener("mousedown",()=>{l(),i&&i()}),a.addEventListener("mousedown",()=>{l(),n&&n()}),s.addEventListener("mousedown",p=>{p.target===s&&(l(),i&&i())});let d=p=>{p.key==="Escape"&&(l(),i&&i(),document.removeEventListener("keydown",d))};document.addEventListener("keydown",d)}showConfirmModal(e,t,n="Confirm"){let i=this.createModalOverlay(),s=this.createModalContent(`
            <div class="modal-header">
                <h3>${n}</h3>
            </div>
            <div class="modal-body">
                <p>${e}</p>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-confirm-btn" id="modalConfirmBtn">Confirm</button>
            </div>
        `);i.appendChild(s),document.body.appendChild(i);let o=()=>i.remove();s.querySelector("#modalCancelBtn").addEventListener("mousedown",o),s.querySelector("#modalConfirmBtn").addEventListener("mousedown",()=>{o(),t()}),i.addEventListener("mousedown",r=>{r.target===i&&o()})}showImportFirebaseModal(){let e=this.createModalOverlay(),t=this.createModalContent(`
            <div class="modal-header">
                <h3>Import from Firebase</h3>
                <button class="modal-close-btn" id="modalCloseBtn">\xD7</button>
            </div>
            <div class="modal-body">
                <label for="firebaseRefInput">Firebase Reference Path:</label>
                <input type="text" id="firebaseRefInput" placeholder="inventory/username/folder" autocomplete="off">
                <div class="modal-hint">Enter a Firebase inventory path (e.g., inventory/john_doe/scripts)</div>
                <div class="modal-error" id="modalError" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-cancel-btn" id="modalCancelBtn">Cancel</button>
                <button class="modal-import-btn" id="modalImportBtn">Import</button>
            </div>
        `);e.appendChild(t),document.body.appendChild(e);let n=t.querySelector("#firebaseRefInput");setTimeout(()=>n.focus(),100);let i=()=>e.remove(),s=async()=>{let o=n.value.trim(),r=t.querySelector("#modalError"),a=t.querySelector("#modalImportBtn");if(!o){r.textContent="Please enter a Firebase reference or username",r.style.display="block";return}if(!o.includes("/")){a.textContent="Checking user...",a.disabled=!0;try{await this.inventory.firebase.importPublicUserFolders(o)?(i(),this.inventory.ui.render(),showNotification(`Imported public folders from user "${o}"`)):(r.textContent=`User "${o}" not found or has no public folders`,r.style.display="block",a.textContent="Import",a.disabled=!1)}catch(l){r.textContent=`Error: ${l.message}`,r.style.display="block",a.textContent="Import",a.disabled=!1}return}if(o.startsWith("~/")){o=o.replace("~/","");let l=SM.myName();if(!l){r.textContent="Unable to get current username",r.style.display="block";return}o=`inventory/${l}/${o}`}a.textContent="Importing...",a.disabled=!0,log("inventory","importing from firebase",o);try{await this.inventory.firebase.importFromFirebase(o)?i():(r.textContent="No data found at this reference or import failed",r.style.display="block",a.textContent="Import",a.disabled=!1)}catch(l){r.textContent=`Import error: ${l.message}`,r.style.display="block",a.textContent="Import",a.disabled=!1}};this.attachModalEventListeners(t,e,i,s)}createModalOverlay(){let e=document.createElement("div");return e.className="modal-overlay",e}createModalContent(e){let t=document.createElement("div");return t.className="modal-content",t.innerHTML=e,t}showEmojiPicker(e,t){let n=this.createModalOverlay(),i=this.createModalContent(`
            <div class="modal-header">
                <h3>Choose an Icon</h3>
                <button class="modal-close-btn" id="modalCloseBtn">\xD7</button>
            </div>
            <div class="modal-body emoji-picker-body">
                <div class="emoji-categories">
                    ${Object.entries(Mn).map(([d,p])=>`
                        <div class="emoji-category">
                            <h4 class="emoji-category-title">${d}</h4>
                            <div class="emoji-grid">
                                ${p.map(h=>`
                                    <button class="emoji-btn" data-emoji="${h}" title="${h}">
                                        ${h}
                                    </button>
                                `).join("")}
                            </div>
                        </div>
                    `).join("")}
                </div>
                <div class="custom-emoji-container">
                    <label for="customEmojiInput">Or enter custom emoji:</label>
                    <div class="custom-emoji-row">
                        <input type="text" id="customEmojiInput" placeholder="Enter any emoji..." maxlength="2" autocomplete="off">
                        <button class="modal-apply-btn" id="applyCustomEmoji">Apply</button>
                    </div>
                </div>
            </div>
        `);n.appendChild(i),document.body.appendChild(n);let s=()=>n.remove(),o=async d=>{t.icon=d;let p=`inventory_${e}`;localStorage.setItem(p,JSON.stringify(t)),(this.inventory.isRemote||this.inventory.firebase.isItemInRemoteLocation(t))&&await this.inventory.firebase.syncToFirebase(t);let h=this.previewPane.querySelector(".preview-icon-btn");h&&(h.textContent=d),this.render(),s(),showNotification(`Icon updated to ${d}`)};i.querySelector("#modalCloseBtn").addEventListener("mousedown",s),i.querySelectorAll(".emoji-btn").forEach(d=>{d.addEventListener("mousedown",()=>{o(d.dataset.emoji)})});let r=i.querySelector("#customEmojiInput"),a=i.querySelector("#applyCustomEmoji"),l=()=>{let d=r.value.trim();d&&o(d)};a.addEventListener("mousedown",l),r.addEventListener("keydown",d=>{d.key==="Enter"?l():d.key==="Escape"&&s()}),n.addEventListener("mousedown",d=>{d.target===n&&s()})}attachModalEventListeners(e,t,n,i){let s=e.querySelector("#modalCloseBtn"),o=e.querySelector("#modalCancelBtn"),r=e.querySelector("#modalCreateBtn, #modalImportBtn, #modalRenameBtn"),a=e.querySelector("input");s&&s.addEventListener("mousedown",n),o&&o.addEventListener("mousedown",n),r&&r.addEventListener("mousedown",i),a&&a.addEventListener("keydown",l=>{l.key==="Enter"?i():l.key==="Escape"&&n()}),t.addEventListener("mousedown",l=>{l.target===t&&n()})}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,n=>t[n])}notify(e,t="info"){showNotification(e,t)}};var en=class{constructor(e){this.inventory=e}async handleFileUpload(e){let t=e.target.files[0];if(!t)return;let n=t.name,i=n.split(".").pop().toLowerCase();try{if(i==="js"){let s=await this.readFile(t);await this.handleScriptUpload(n,s,"script")}else if(i==="md"){let s=await this.readFile(t);await this.handleScriptUpload(n,s,"markdown")}else if(i==="json"){let s=await this.readFile(t);await this.handleJsonUpload(n,s)}else["png","jpg","jpeg","bmp","gif"].includes(i)?await this.handleImageUpload(t):showNotification("Please upload a .js, .md, .json, or image file (.png, .jpg, .jpeg, .bmp, .gif)")}catch(s){console.error("File upload error:",s),showNotification(`Error uploading file: ${s.message}`)}e.target.value=""}readFile(e){return new Promise((t,n)=>{let i=new FileReader;i.onload=s=>t(s.target.result),i.onerror=n,i.readAsText(e)})}async handleScriptUpload(e,t,n="script"){if(Object.keys(this.inventory.items).includes(e)){let s=n==="markdown"?"Markdown":"Script";this.inventory.ui.showConfirmModal(`An item named "${e}" already exists. Do you want to overwrite it?`,()=>{this.inventory.saveScriptFromUpload(e,t,n)},`Overwrite ${s}`);return}this.inventory.saveScriptFromUpload(e,t,n)}async handleJsonUpload(e,t){try{let n=JSON.parse(t);if(this.isInventoryEntityFormat(n)){let i=n.name;if(Object.keys(this.inventory.items).includes(i)){this.inventory.ui.showConfirmModal(`An item named "${i}" already exists. Do you want to overwrite it?`,()=>{this.inventory.saveItemFromUpload(i,n)},"Overwrite Item");return}this.inventory.saveItemFromUpload(i,n)}else this.inventory.ui.notify("The JSON file is not in the correct inventory entity format")}catch{this.inventory.ui.notify("Invalid JSON file")}}async handleImageUpload(e){let t=e.name;if(Object.keys(this.inventory.items).includes(t)){this.inventory.ui.showConfirmModal(`An item named "${t}" already exists. Do you want to overwrite it?`,()=>{this.inventory.firebase.uploadImageToFirebase(e)},"Overwrite Image");return}this.inventory.firebase.uploadImageToFirebase(e)}isInventoryEntityFormat(e){return e&&typeof e=="object"&&"author"in e&&"name"in e&&"created"in e&&"itemType"in e&&"data"in e}};var tn=class{constructor(){this.container=document.getElementById("inventory-page"),this.previewPane=document.getElementById("previewPane"),this.items=this.loadItems(),this.folders=this.loadFolders(),this.selectedItem=null,this.currentFolder=null,this.previewPane&&(this.previewPane.style.display="block"),window.addEventListener("page-switched",e=>{e.detail.pageId==="inventory"&&(this.previewPane&&(this.previewPane.style.display="block"),this.selectedItem||this.ui.showEmptyPreview(),this.ui.render())}),this.expandedFolders=new Set,this.draggedItem=null,this.isRemote=!1,this.sortBy="alphabetical",this.sortDirection="asc",this.firebase=new Yt(this),this.ui=new Zt(this),this.fileHandler=new en(this),this.ui.setupDropZone(),this.ui.render(),this.ui.showEmptyPreview()}reload(){this.items=this.loadItems(),this.folders=this.loadFolders(),this.ui.render()}loadItems(){let e={};for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);if(n.startsWith("inventory_")&&!n.startsWith("inventory_folder_"))try{let i=n.replace("inventory_",""),s=JSON.parse(localStorage.getItem(n));s.itemType==="script"&&(s.startup===void 0&&(s.startup=!1),s.active===void 0&&(s.active=!1)),e[i]=s}catch(i){console.error(`Failed to parse inventory item ${n}:`,i)}}return e}loadFolders(){let e={};for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);if(n.startsWith("inventory_folder_"))try{let i=n.replace("inventory_folder_","");e[i]=JSON.parse(localStorage.getItem(n))}catch(i){console.error(`Failed to parse folder ${n}:`,i)}}return e}removeItem(e){this.ui.showConfirmModal(`Are you sure you want to remove "${e}" from your inventory?`,()=>{let t=new X(e,{source:"ui"});changeManager.applyChange(t),this.ui.render(),showNotification(`Removed "${e}" from inventory`)},"Remove Item")}syncItem(e,t){this.items[e]=t,t.last_used=Date.now();let n=`inventory_${e}`;localStorage.setItem(n,JSON.stringify(t)),this.firebase.isItemInRemoteLocation(t)&&this.firebase.syncToFirebase(t),this.ui.render()}syncFolder(e,t){this.folders[e]=t;let n=`inventory_folder_${e}`;localStorage.setItem(n,JSON.stringify(t)),t.remote&&this.firebase.syncFolderToFirebase(e,t)}getAvailableScripts(){let e=[],t=n=>{let i=Object.values(this.items).filter(o=>n?o.itemType==="script"&&o.folder===n:!o.folder);e.push(...i);let s=Object.entries(this.folders).filter(([o,r])=>r.parent===n);for(let[o]of s)t(o)};return t(this.currentFolder),e}selectItem(e){this.selectedItem===e?(this.selectedItem=null,this.ui.showEmptyPreview()):(this.selectedItem=e,this.ui.showPreview(e)),this.ui.render()}downloadSelectedItem(){if(!this.selectedItem)return;let e=this.items[this.selectedItem];if(!e)return;let t,n,i;if(e.itemType==="script")t=new Blob([e.data],{type:"text/javascript"}),n=e.name,i=`Exported script "${e.name}"`;else if(e.itemType==="markdown")t=new Blob([e.data],{type:"text/markdown"}),n=e.name,i=`Exported markdown "${e.name}"`;else{let r=JSON.stringify(e,null,2);t=new Blob([r],{type:"application/json"}),n=`${e.name}.json`,i=`Exported "${e.name}" as JSON`}let s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),showNotification(i)}exportSelectedItem(){this.downloadSelectedItem()}updateLastUsed(e){let t=this.items[e];t&&(t.lastUsed=Date.now())}async loadEntityToSceneByName(e){this.updateLastUsed(e);let t=new ct(e,SM.selectedEntity,null,{source:"ui"});await window.changeManager.applyChange(t)}async loadByCMD(e){let t=localStorage.getItem("inventory_"+e);if(!t){log("inventory","NO ITEM NAMED: ",e);return}let n=JSON.parse(t);if(!n.history||!n.history.length){log("inventory","Item has no history");return}for(let i=0;i<n.history.length;i++){let s=n.history[i],o="";Object.entries(s).forEach(([r,a])=>{r!=="options"&&(typeof a=="object"?o+=JSON.stringify(a)+" ":o+=a+" ")}),o=o.trim(),window.RunCommand&&await window.RunCommand(o)}}openScriptEditor(e){let t=this.items[e];if(!t||t.itemType!=="script")return;this.updateLastUsed(e);let n=new CustomEvent("open-script-editor",{detail:{name:e,content:t.data,author:t.author,created:t.created}});window.dispatchEvent(n)}openMarkdownEditor(e){let t=this.items[e];if(!t||t.itemType!=="markdown")return;this.updateLastUsed(e);let n=new CustomEvent("open-script-editor",{detail:{name:e,content:t.data,author:t.author,created:t.created,isMarkdown:!0}});window.dispatchEvent(n)}async createNewScript(){this.ui.showScriptNameModal()}async finalizeScriptCreation(e,t="script"){let n=new ft(e,{source:"ui",fileType:t});window.changeManager.applyChange(n),this.ui.render();let i=t==="markdown"?"markdown file":"script";showNotification(`Created new ${i} "${e}"`),t==="markdown"?this.openMarkdownEditor(e):this.openScriptEditor(e)}saveScriptFromUpload(e,t,n="script"){let i=Date.now(),s={author:SM.scene?.localUser?.name||"Unknown",name:e,created:i,last_used:i,itemType:n,icon:n==="markdown"?"\u{1F4DD}":"\u{1F4DC}",description:"",data:t,startup:!1,startupSequence:"onSceneLoaded",active:!1,global:!1,autoUpdate:!1};this.currentFolder&&(s.folder=this.currentFolder),this.syncItem(e,s);let o=n==="markdown"?"markdown":"script";showNotification(`Added ${o} "${e}" to inventory`)}saveItemFromUpload(e,t){this.currentFolder&&!t.folder&&(t.folder=this.currentFolder);let n=`inventory_${e}`;localStorage.setItem(n,JSON.stringify(t)),this.items[e]=t,this.firebase.isItemInRemoteLocation()&&this.firebase.syncToFirebase(t),this.selectItem(e),this.ui.notify(`Imported "${e}" to inventory`)}saveImageItem(e,t){this.currentFolder&&(t.folder=this.currentFolder);let n=`inventory_${e}`;localStorage.setItem(n,JSON.stringify(t)),this.items[e]=t,this.firebase.isItemInRemoteLocation()&&this.firebase.syncToFirebase(t),this.ui.notify(`Image "${e}" added to inventory`),this.ui.render()}createNewFolder(){this.ui.showFolderNameModal(async e=>{if(!e||e.trim()==="")return;if(!this.firebase.isValidFirebasePath(e)){this.ui.notify("Folder name cannot contain: . $ # [ ] / or be empty");return}let t=this.firebase.sanitizeFirebasePath(e),n=new pt(t,this.currentFolder,{source:"ui"});window.changeManager.applyChange(n),this.ui.render(),this.ui.notify(`Created folder "${t}"`)})}openFolder(e){log("inventory","Opening folder: ",e),this.currentFolder=e,this.updateFolderLastUsed(e),this.ui.render(),this.selectedItem&&this.ui.showPreview(this.selectedItem)}updateFolderLastUsed(e){let t=this.folders[e];if(t){t.lastUsed=Date.now();let n=`inventory_folder_${e}`;localStorage.setItem(n,JSON.stringify(t))}}navigateToFolder(e){!e||e==="/"||e===""?this.currentFolder=null:this.currentFolder=e,log("inventory","Navigating to folder: ",e),this.ui.render(),this.selectedItem&&this.ui.showPreview(this.selectedItem)}toggleFolderExpansion(e){this.expandedFolders.has(e)?this.expandedFolders.delete(e):this.expandedFolders.add(e),this.ui.render()}async moveItemToFolder(e,t){let n=new mt(e,t,{source:"ui"});await window.changeManager.applyChange(n)&&(this.ui.render(),t?this.ui.notify(`Moved "${e}" to folder "${t}"`):this.ui.notify(`Moved "${e}" to root`))}async moveFolderToFolder(e,t){let n=this.folders[e];if(n&&e!==t){if(t&&this.isFolderDescendant(t,e)){this.ui.notify("Cannot move folder into its own subfolder");return}n.parent=t||null,this.folders[e]=n,this.ui.render(),t?showNotification(`Moved folder "${n.name}" to "${this.folders[t].name}"`):showNotification(`Moved folder "${n.name}" to root`)}}isFolderDescendant(e,t){let n=this.folders[e];for(;n&&n.parent;){if(n.parent===t)return!0;n=this.folders[n.parent]}return!1}handleFolderRename(e,t){let n=this.folders[e];if(!n||t===n.name)return;if(t=t.replace(/\s+/g,"_"),this.folders[t]){let s=1;for(;this.folders[`${t}_${s}`];)s++;t=`${t}_${s}`}let i=new ht(e,t,{source:"ui"});changeManager.applyChange(i)}_renameFolder(e,t){let n=this.folders[e];n&&(n.remote&&(n.remote=!1,showNotification("Warning: Renamed folder is no longer synchronized with Firebase","warning")),n.name=t,this.folders[t]=n,delete this.folders[e],localStorage.removeItem(`inventory_folder_${e}`),localStorage.setItem(`inventory_folder_${t}`,JSON.stringify(n)),Object.entries(this.items).forEach(([i,s])=>{s.folder===e&&(s.folder=t,localStorage.setItem(`inventory_${i}`,JSON.stringify(s)))}),Object.entries(this.folders).forEach(([i,s])=>{s.parent===e&&(s.parent=t,localStorage.setItem(`inventory_folder_${i}`,JSON.stringify(s)))}),this.currentFolder===e&&(this.currentFolder=t),this.expandedFolders.has(e)&&(this.expandedFolders.delete(e),this.expandedFolders.add(t)),this.ui.render(),showNotification(`Folder renamed to "${t}"`),this.currentFolder===t&&this.ui.showFolderDetails(t,this.folders[t]))}removeFolder(e){let t=this.folders[e];if(!t)return;let n=Object.values(this.items).some(s=>s.folder===e),i=Object.values(this.folders).some(s=>s.parent===e);if(n||i){this.ui.showConfirmModal(`Folder "${t.name}" contains ${n?"items":"subfolders"}. All contents will be permanently deleted. Are you sure?`,()=>{this.finalizeRemoveFolder(e,t)},"Delete Folder");return}this.finalizeRemoveFolder(e,t)}async finalizeRemoveFolder(e,t){let n=new ut(e,{source:"ui"});window.changeManager.applyChange(n),this.ui.render(),this.ui.notify(`Removed folder "${t.name}"`)}getCurrentFolderPath(){if(!this.currentFolder)return"/";let e=[],t=this.currentFolder;for(;t;)e.unshift(t),t=this.folders[t]?.parent;return"/"+e.join("/")}getItemCountInFolder(e){let t=0;return Object.values(this.items).forEach(n=>{n.folder===e&&t++}),Object.values(this.folders).forEach(n=>{n.parent===e&&t++}),t}sortItems(e,t=!1){return[...e].sort((i,s)=>{let o=0;switch(this.sortBy){case"alphabetical":o=(i.name||i.key).localeCompare(s.name||s.key);break;case"date":o=(i.created||0)-(s.created||0);break;case"last_used":let r=i.last_used||i.lastUsed||i.created||0,a=s.last_used||s.lastUsed||s.created||0;o=r-a;break}return this.sortDirection==="asc"?o:-o})}isInventoryEntityFormat(e){return this.fileHandler.isInventoryEntityFormat(e)}isItemInRemoteLocation(){return this.firebase.isItemInRemoteLocation()}calculateSize(e,t=!1){let n=0;if(t)Object.entries(this.items).forEach(([i,s])=>{if(s.folder===e){let o=JSON.stringify(s);n+=new Blob([o]).size}}),Object.entries(this.folders).forEach(([i,s])=>{s.parent===e&&(n+=this.calculateSize(i,!0))});else{let i=this.items[e];if(i){let s=JSON.stringify(i);n=new Blob([s]).size}}return n}getCurrentViewContents(){let e={folders:{},items:{}};return Object.entries(this.folders).forEach(([t,n])=>{n.parent===this.currentFolder&&(e.folders[t]=n)}),Object.entries(this.items).forEach(([t,n])=>{n.folder===this.currentFolder&&(e.items[t]=n)}),e}getFolderContentsRecursive(e){let t={items:{},folders:{}};return Object.entries(this.items).forEach(([n,i])=>{i.folder===e&&(t.items[n]=i)}),Object.entries(this.folders).forEach(([n,i])=>{if(i.parent===e){t.folders[n]=i;let s=this.getFolderContentsRecursive(n);Object.assign(t.items,s.items),Object.assign(t.folders,s.folders)}}),t}updateScriptSchema(){let e=0;return Object.entries(this.items).forEach(([t,n])=>{if(n.itemType==="script"){let i=!1;if(n.global===void 0&&(n.global=!1,i=!0),n.startup===void 0&&(n.startup=!1,i=!0),n.active===void 0&&(n.active=!1,i=!0),n.startupSequence===void 0&&(n.startupSequence="onSceneLoaded",i=!0),i){let s=`inventory_${t}`;localStorage.setItem(s,JSON.stringify(n)),e++}}}),e>0?(this.items=this.loadItems(),this.ui.render(),showNotification(`Updated ${e} script${e>1?"s":""} with new schema parameters`)):showNotification("All scripts are already up to date"),e}convertEntityToNewFormat(e){if(!e)return null;let t=i=>!i.components||!Array.isArray(i.components)?!1:i.components.some(s=>s.options!==void 0||s.type==="Transform"),n=i=>{if(t(i)){let o=i.components.find(a=>a.type==="Transform"),r=null;o&&(r={localPosition:o.properties?.localPosition||{x:0,y:0,z:0},localRotation:o.properties?.localRotation||{x:0,y:0,z:0,w:1},localScale:o.properties?.localScale||{x:1,y:1,z:1}}),i.components=i.components.filter(a=>a.type!=="Transform").map(a=>a),r&&(i.transform=r)}return i.children&&Array.isArray(i.children)&&(i.children=i.children.map(o=>n(o))),i};return n(JSON.parse(JSON.stringify(e)))}updateComponentNames(e){if(!e)return null;let t={BanterGeometry:"Geometry",BanterMaterial:"Material",BanterRigidbody:"Rigidbody",BanterAudioSource:"AudioSource",BanterVideoPlayer:"VideoPlayer",BanterText:"Text",BanterBillboard:"Billboard",BanterGrabHandle:"GrabHandle",BanterSyncedObject:"SyncedObject",BanterPhysicMaterial:"PhysicMaterial",BanterMirror:"Mirror",BanterBrowser:"Browser",BanterHeldEvents:"HeldEvents",BanterAttachedObject:"AttachedObject",BanterGLTF:"GLTF",BanterAssetBundle:"AssetBundle",BanterPortal:"Portal",BanterColliderEvents:"ColliderEvents",BanterBox:"Box",BanterCircle:"Circle",BanterCone:"Cone",BanterCylinder:"Cylinder",BanterPlane:"Plane",BanterRing:"Ring",BanterSphere:"Sphere",BanterTorus:"Torus",BanterInvertedMesh:"InvertedMesh",BanterKitItem:"KitItem",BanterStreetView:"StreetView",BanterWorldObject:"WorldObject",BanterGrabbable:"Grabbable",BanterUIPanel:"UIPanel",BanterAvatarPedestal:"AvatarPedestal",BanterTorusKnot:"TorusKnot",BanterApple:"Apple",BanterCatenoid:"Catenoid",BanterFermet:"Fermet",BanterHelicoid:"Helicoid",BanterHorn:"Horn",BanterKlein:"Klein",BanterMobius:"Mobius",BanterMobius3d:"Mobius3d",BanterNatica:"Natica",BanterPillow:"Pillow",BanterScherk:"Scherk",BanterSnail:"Snail",BanterSpiral:"Spiral",BanterSpring:"Spring"},n=i=>{let s=!1;return i.components&&Array.isArray(i.components)&&(i.components=i.components.map(o=>(t[o.type]&&(o.type=t[o.type],s=!0),o))),i.children&&Array.isArray(i.children)&&(i.children=i.children.map(o=>n(o))),i};return n(JSON.parse(JSON.stringify(e)))}updateItems(){let e=0,t=0;return Object.entries(this.items).forEach(([n,i])=>{if(i.itemType==="entity"){let s=!1,o=d=>!d||!d.components?!1:d.components.some(p=>p.options!==void 0||p.type==="Transform"),r=d=>{if(!d||!d.components)return!1;let p=h=>!!(h.components&&h.components.some(u=>u.type&&u.type.startsWith("Banter"))||h.children&&h.children.some(u=>p(u)));return p(d)},a=d=>{if(!d)return!1;let p=h=>!!(h.spaceProps!==void 0||h.children&&h.children.some(u=>p(u)));return p(d)},l=d=>{if(!d)return d;let p=h=>(h.spaceProps!==void 0&&delete h.spaceProps,h.children&&Array.isArray(h.children)&&(h.children=h.children.map(u=>p(u))),h);return p(JSON.parse(JSON.stringify(d)))};if(o(i.data)&&(i.data=this.convertEntityToNewFormat(i.data),s=!0),r(i.data)&&(i.data=this.updateComponentNames(i.data),s=!0),a(i.data)&&(i.data=l(i.data),s=!0),s){let d=`inventory_${n}`;localStorage.setItem(d,JSON.stringify(i)),e++,log("inventory",`Updated item "${n}"`)}else t++}}),e>0?(this.items=this.loadItems(),this.ui.render(),showNotification(`Updated ${e} entity item${e>1?"s":""}`)):showNotification(`All ${t} entity items are already up to date`),{updated:e,alreadyUpdated:t}}installAll(e,t){let n=`import\xB6${e}\xB6${t}`;net.sendOneShot(n)}};var nn=class{constructor(e){this.currentScript=e,this.editor=null,this.isModified=!1,this.scriptRunnerEntities=new Map,this.selectedEntities=new Set,this.codemirror=null,this.pageId=`script-editor-${e.name.replace(/[^a-zA-Z0-9]/g,"-")}-${Date.now()}`,this.pageElement=null,this.navElement=null,this.keydownHandler=null,this.eventListenersSetup=!1,this.saveBtnHandler=null,this.playBtnHandler=null,this.stopBtnHandler=null,this.closeBtnHandler=null,this.entityButtonHandlers=new Map,this.lastSave=e.created}async open(e){this.isModified=!1,await this.createEditorPage(),navigation.addDynamicPage(this.pageId,this.pageElement,this.navElement),e||navigation.switchPage(this.pageId),setTimeout(()=>{this.renderFooter()},0),this.pageSwitchHandler=t=>{t.detail.pageId===this.pageId&&(this.renderFooter(),this.codemirror&&setTimeout(()=>this.codemirror.refresh(),100))},window.addEventListener("page-switched",this.pageSwitchHandler)}renderFooter(){this.findScriptRunnerEntities();let e=this.pageElement?.querySelector(".script-editor-footer");e&&(e.innerHTML=`
                <div class="footer-info">
                    <span>Author: ${this.currentScript.author}</span>
                    <span>Created: ${new Date(this.currentScript.created).toLocaleString()}</span>
                </div>
                ${this.scriptRunnerEntities.size>0?`
                <div class="scriptrunner-controls">
                    <div class="entity-selector-panel">
                        <div class="entity-selector-title">ScriptRunner Instances:</div>
                        <div class="entity-selector-buttons" id="entitySelectorButtons-${this.pageId}">
                            ${Array.from(this.scriptRunnerEntities.entries()).map(([t,n])=>{let s=SM.getEntityById(t)?.name||"Unknown Entity";return`<button class="entity-selector-btn ${this.selectedEntities.has(t)?"selected":""}" data-entity-id="${t}">${s}</button>`}).join("")}
                        </div>
                    </div>
                    <div class="playback-controls">
                        <button class="control-btn play-btn" id="playBtn-${this.pageId}" title="Start" ${this.canRun()?"":"disabled"}>
                            \u25B6\uFE0F
                        </button>
                        
                        <button class="control-btn stop-btn" id="stopBtn-${this.pageId}" title="Stop" disabled>
                            \u23F9\uFE0F
                        </button>
                    </div>
                </div>
                `:""}
            `),this.setupEventListeners(),this.updatePlaybackButtons()}async createEditorPage(){this.pageElement=document.createElement("div"),this.pageElement.className="page",this.pageElement.id=`${this.pageId}-page`,this.pageElement.innerHTML=`
            <div class="script-editor-container">
                <div class="script-editor-header">
                    <div class="editor-title">
                        <span class="editor-icon">\u{1F4DC}</span>
                        <h2>Editing: ${this.currentScript.name}</h2>
                        <span class="last-save" id="lastSave-${this.pageId}">Last saved: ${new Date(this.lastSave).toLocaleString()}</span>
                        <span class="modified-indicator" id="modifiedIndicator-${this.pageId}" style="display: none;">\u25CF</span>
                    </div>
                    <div class="editor-controls">
                        <button class="save-btn" id="saveBtn-${this.pageId}">
                            \u{1F4BE} Save
                        </button>
                    </div>
                </div>
                <div class="script-editor-content">
                    <div class="code-editor-wrapper" id="codeEditorWrapper-${this.pageId}">
                        <textarea class="code-editor" id="codeEditor-${this.pageId}">${this.escapeHtml(this.currentScript.content)}</textarea>
                    </div>
                </div>
                <div class="script-editor-footer">
                    
                </div>
            </div>
        `,document.querySelector(".page-container").appendChild(this.pageElement),this.navElement=document.createElement("button"),this.navElement.className="nav-item closeable",this.navElement.setAttribute("data-page",this.pageId),this.navElement.innerHTML=`
            <span class="nav-icon">\u{1F4DC}</span>
            ${this.currentScript.name}
            <span class="close-tab-btn" data-close-script="${this.pageId}">\xD7</span>
        `,setTimeout(()=>{this.setupEventListeners(),this.initializeCodeMirror()},100)}async initializeCodeMirror(){let e=window.location.hostname!=="localhost",t="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13";[`${t}/codemirror.min.css`,`${t}/theme/monokai.min.css`,`${t}/addon/hint/show-hint.min.css`,`${t}/addon/dialog/dialog.min.css`].forEach(s=>{let o=document.createElement("link");o.rel="stylesheet",o.href=s,document.head.appendChild(o)}),await this.loadScript(`${t}/codemirror.min.js`),await Promise.all([this.loadScript(`${t}/mode/javascript/javascript.min.js`),this.loadScript(`${t}/addon/edit/closebrackets.min.js`),this.loadScript(`${t}/addon/edit/matchbrackets.min.js`),this.loadScript(`${t}/addon/comment/comment.min.js`),this.loadScript(`${t}/addon/hint/show-hint.min.js`),this.loadScript(`${t}/addon/hint/javascript-hint.min.js`),this.loadScript(`${t}/addon/search/searchcursor.min.js`),this.loadScript(`${t}/addon/search/search.min.js`),this.loadScript(`${t}/addon/dialog/dialog.min.js`),this.loadScript(`${t}/addon/selection/active-line.min.js`)]);let i=document.getElementById(`codeEditor-${this.pageId}`);i&&window.CodeMirror&&(this.codemirror=CodeMirror.fromTextArea(i,{mode:"javascript",theme:"monokai",lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,tabSize:4,indentWithTabs:!1,styleActiveLine:!0,extraKeys:{Tab:s=>{s.somethingSelected()?s.indentSelection("add"):s.replaceSelection(s.getOption("indentWithTabs")?"	":Array(s.getOption("indentUnit")+1).join(" "),"end")},"Shift-Tab":s=>s.indentSelection("subtract"),"Ctrl-Space":"autocomplete","Cmd-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Ctrl-F":"findPersistent","Cmd-F":"findPersistent"}}),this.codemirror.on("change",()=>{this.isModified=!0,document.getElementById(`modifiedIndicator-${this.pageId}`).style.display="inline"}),setTimeout(()=>{this.codemirror.refresh()},100))}loadScript(e){return new Promise((t,n)=>{let i=document.createElement("script");i.src=e,i.onload=t,i.onerror=n,document.head.appendChild(i)})}cleanupEventListeners(){if(this.saveBtnHandler){let e=document.getElementById(`saveBtn-${this.pageId}`);e&&e.removeEventListener("mousedown",this.saveBtnHandler),this.saveBtnHandler=null}if(this.playBtnHandler){let e=document.getElementById(`playBtn-${this.pageId}`);e&&e.removeEventListener("mousedown",this.playBtnHandler),this.playBtnHandler=null}if(this.stopBtnHandler){let e=document.getElementById(`stopBtn-${this.pageId}`);e&&e.removeEventListener("mousedown",this.stopBtnHandler),this.stopBtnHandler=null}if(this.closeBtnHandler&&this.navElement){let e=this.navElement.querySelector(`[data-close-script="${this.pageId}"]`);e&&e.removeEventListener("mousedown",this.closeBtnHandler),this.closeBtnHandler=null}this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null),this.entityButtonHandlers.forEach((e,t)=>{t.removeEventListener("mousedown",e)}),this.entityButtonHandlers.clear()}setupEventListeners(){this.cleanupEventListeners();let e=document.getElementById(`saveBtn-${this.pageId}`);e&&(this.saveBtnHandler=()=>this.save(),e.addEventListener("mousedown",this.saveBtnHandler));let t=document.getElementById(`playBtn-${this.pageId}`),n=document.getElementById(`stopBtn-${this.pageId}`);if(t&&(this.playBtnHandler=()=>this.play(),t.addEventListener("mousedown",this.playBtnHandler)),n&&(this.stopBtnHandler=()=>this.stop(),n.addEventListener("mousedown",this.stopBtnHandler)),this.navElement){let s=this.navElement.querySelector(`[data-close-script="${this.pageId}"]`);s&&(this.closeBtnHandler=o=>{o.stopPropagation(),this.close()},s.addEventListener("mousedown",this.closeBtnHandler))}this.keydownHandler||(this.keydownHandler=s=>{navigation.currentPage===this.pageId&&(s.ctrlKey||s.metaKey)&&s.key==="s"&&(s.preventDefault(),this.save())},document.addEventListener("keydown",this.keydownHandler)),this.pageElement.querySelectorAll(".entity-selector-btn").forEach(s=>{let o=()=>{let r=s.dataset.entityId;this.selectEntity(r)};this.entityButtonHandlers.set(s,o),s.addEventListener("mousedown",o)})}save(e="ui"){if(!this.codemirror)return;let t=this.codemirror.getValue(),n=new yt(this.currentScript.name,t,{source:e});changeManager.applyChange(n),this.currentScript.content=t,this.isModified=!1,this.lastSave=Date.now(),document.getElementById(`lastSave-${this.pageId}`).textContent=`Last saved: ${new Date(this.lastSave).toLocaleString()}`,document.getElementById(`modifiedIndicator-${this.pageId}`).style.display="none"}findScriptRunnerEntities(){return this.scriptRunnerEntities.clear(),SM.getAllEntities().forEach(e=>{e.components&&e.components.forEach(t=>{t.type==="ScriptRunner"&&t.properties?.file===this.currentScript.name&&this.scriptRunnerEntities.set(e.id,t)})}),this.selectedEntities=new Set(this.scriptRunnerEntities.keys()),this.scriptRunnerEntities}selectEntity(e){this.selectedEntities.has(e)?this.selectedEntities.delete(e):this.selectedEntities.add(e),this.pageElement.querySelectorAll(".entity-selector-btn").forEach(n=>{n.classList.toggle("selected",this.selectedEntities.has(n.dataset.entityId))});let t=document.getElementById(`playBtn-${this.pageId}`);t&&(t.disabled=!this.canRun())}canRun(){return Array.from(this.selectedEntities).filter(t=>!this.scriptRunnerEntities.get(t).ctx._running).length>0}canStop(){return Array.from(this.selectedEntities).filter(t=>this.scriptRunnerEntities.get(t).ctx._running).length>0}run(e){let t=Array.from(this.selectedEntities).map(n=>this.scriptRunnerEntities.get(n));e==="Start"?t=t.filter(n=>n&&n.ctx&&!n.ctx._running):e==="Stop"&&(t=t.filter(n=>n&&n.ctx&&n.ctx._running)),t.length!==0&&(t.forEach(n=>{let s=n._entity?.name||"Unknown";try{n[e]()}catch(o){this.log("error",`Script error: ${o.message}`,s)}}),setTimeout(()=>{this.updatePlaybackButtons()},100))}play(){this.run("Refresh")}stop(){this.run("Stop")}updatePlaybackButtons(){let e=document.getElementById(`playBtn-${this.pageId}`),t=document.getElementById(`stopBtn-${this.pageId}`);e&&(e.disabled=!this.canRun()),t&&(t.disabled=!this.canStop())}log(e,t,n){log("mono",e,t,n);let i=document.getElementById(`consoleContent-${this.pageId}`);if(!i)return;let s=document.createElement("div");s.className=`console-entry console-${e}`;let o=new Date().toLocaleTimeString(),r=n?`[${n}] `:"";s.innerHTML=`
            <span class="console-timestamp">[${o}]</span>
            <span class="console-entity">${r}</span>
            <span class="console-message">${t}</span>
        `,i.appendChild(s),i.scrollTop=i.scrollHeight}clearConsole(){let e=document.getElementById(`consoleContent-${this.pageId}`);e&&(e.innerHTML="")}async close(){this.isModified&&!await M("You have unsaved changes. Are you sure you want to close?")||(this.cleanupEventListeners(),this.codemirror&&(this.codemirror.toTextArea(),this.codemirror=null),this.pageSwitchHandler&&window.removeEventListener("page-switched",this.pageSwitchHandler),navigation.removeDynamicPage(this.pageId))}escapeHtml(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,n=>t[n])}};var sn=class{constructor(e={}){this.blocks=[],this.originalTranscript="",this.serviceUrl=e.serviceUrl||window.blockServiceUrl,this.onBlocksChanged=e.onBlocksChanged||(()=>{}),this.container=null,this.isProcessing=!1,this.mergeModalCreated=!1,this.pendingMerge=null}async processTranscript(e){if(!e||this.isProcessing)return[];this.isProcessing=!0,this.originalTranscript=e;try{let t=await fetch(this.serviceUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({intent:"The speaker is submitting in a feedback ticketing form for a VR creator tool project",text:e,existing_blocks:this.blocks}),signal:AbortSignal.timeout(1e4)});if(!t.ok)throw new Error(`Service error: ${t.status}`);let n=await t.json();return log("inspector","[block] result: ",n),this.blocks=n.blocks||[],this.onBlocksChanged(this.blocks),this.blocks}catch(t){throw err("inspector","Block processing failed:",t),t}finally{this.isProcessing=!1}}renderBlocks(e){if(!e)return;this.container=e;let t=e.querySelector("#blocksList")||e;if(this.blocks.length===0){t.innerHTML='<div class="empty-blocks">No blocks to display</div>';return}let n='<div class="block-drop-zone" data-drop-index="0"></div>';this.blocks.forEach((i,s)=>{n+=`
                <div class="statement-block" data-block-index="${s}">
                    <div class="block-content" contenteditable="true">${this.escapeHtml(i)}</div>
                    <div class="block-actions">
                        <button class="block-delete" aria-label="Delete block">\xD7</button>
                        <div class="block-drag" aria-label="Reorder block" role="button" tabindex="0">\u22EE\u22EE</div>
                    </div>
                </div>
                <div class="block-drop-zone" data-drop-index="${s+1}"></div>
            `}),t.innerHTML=n,this._createMergeModal(),this._attachBlockEventListeners(t)}addBlock(e){!e||typeof e!="string"||(this.blocks.push(e.trim()),this.onBlocksChanged(this.blocks),this.container&&this.renderBlocks(this.container))}updateBlock(e,t){e<0||e>=this.blocks.length||(this.blocks[e]=t.trim(),this.onBlocksChanged(this.blocks))}deleteBlock(e){e<0||e>=this.blocks.length||(this.blocks.splice(e,1),this.onBlocksChanged(this.blocks),this.container&&this.renderBlocks(this.container))}reorderBlocks(e,t){if(e<0||e>=this.blocks.length||t<0||t>this.blocks.length)return;let[n]=this.blocks.splice(e,1);t>e&&t--,this.blocks.splice(t,0,n),this.onBlocksChanged(this.blocks),this.container&&this.renderBlocks(this.container)}mergeBlocks(e,t){if(e<0||e>=this.blocks.length||t<0||t>=this.blocks.length||e===t)return;let n=this.blocks[t]+`

`+this.blocks[e];this.blocks[t]=n,this.blocks.splice(e,1),this.onBlocksChanged(this.blocks),this.container&&this.renderBlocks(this.container)}getBlocks(){return[...this.blocks]}getRawTranscript(){return this.originalTranscript}clear(){this.blocks=[],this.originalTranscript="",this.isProcessing=!1,this.onBlocksChanged(this.blocks),this.container&&this.renderBlocks(this.container)}escapeHtml(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}_createMergeModal(){if(this.mergeModalCreated)return;if(document.getElementById("blockMergeModal")){this.mergeModalCreated=!0;return}let e=document.createElement("div");e.id="blockMergeModal",e.className="block-merge-modal",e.style.display="none",e.innerHTML=`
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Merge Blocks?</h3>
                </div>
                <div class="modal-body">
                    <p>Do you want to merge these two blocks together?</p>
                    <div class="merge-preview">
                        <div class="merge-preview-block" id="mergeTargetPreview"></div>
                        <div class="merge-arrow">+</div>
                        <div class="merge-preview-block" id="mergeSourcePreview"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn modal-btn-primary" id="confirmMergeBtn">Merge</button>
                    <button class="modal-btn modal-btn-secondary" id="cancelMergeBtn">Cancel</button>
                </div>
            </div>
        `,document.body.appendChild(e),document.getElementById("confirmMergeBtn").addEventListener("mousedown",()=>{this._confirmMerge()}),document.getElementById("cancelMergeBtn").addEventListener("mousedown",()=>{this._cancelMerge()}),e.addEventListener("mousedown",t=>{t.target===e&&this._cancelMerge()}),this.mergeModalCreated=!0}_showMergeModal(e,t){this.pendingMerge={sourceIndex:e,targetIndex:t};let n=document.getElementById("blockMergeModal"),i=document.getElementById("mergeSourcePreview"),s=document.getElementById("mergeTargetPreview"),o=this.blocks[e],r=this.blocks[t];i.textContent=o.length>100?o.substring(0,100)+"...":o,s.textContent=r.length>100?r.substring(0,100)+"...":r,n.style.display="flex"}_confirmMerge(){this.pendingMerge&&(this.mergeBlocks(this.pendingMerge.sourceIndex,this.pendingMerge.targetIndex),this.pendingMerge=null),document.getElementById("blockMergeModal").style.display="none"}_cancelMerge(){this.pendingMerge=null,document.getElementById("blockMergeModal").style.display="none"}_attachBlockEventListeners(e){e.querySelectorAll(".block-content").forEach(t=>{t.addEventListener("blur",n=>{let i=parseInt(n.target.closest(".statement-block").dataset.blockIndex);this.updateBlock(i,n.target.textContent)}),t.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),n.target.blur())})}),e.querySelectorAll(".block-delete").forEach(t=>{t.addEventListener("mousedown",async n=>{let i=parseInt(n.target.closest(".statement-block").dataset.blockIndex);await M("Delete this block?")&&this.deleteBlock(i)})}),this._setupDragAndDrop(e)}_setupDragAndDrop(e){let t=null,n=null,i=null;e.querySelectorAll(".statement-block").forEach(s=>{let o=s.querySelector(".block-drag");s.draggable=!1,o.draggable=!0,o.addEventListener("dragstart",r=>{t=s,n=parseInt(s.dataset.blockIndex),s.classList.add("dragging"),r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("text/plain",n.toString()),e.querySelectorAll(".block-drop-zone").forEach(a=>{a.classList.add("active")}),r.stopPropagation()}),o.addEventListener("dragend",r=>{t&&t.classList.remove("dragging"),e.querySelectorAll(".drag-over").forEach(a=>{a.classList.remove("drag-over")}),e.querySelectorAll(".block-drop-zone").forEach(a=>{a.classList.remove("active","drag-over")}),t=null,n=null,i=null}),s.addEventListener("dragover",r=>{if(!(!t||s===t))return r.preventDefault(),r.dataTransfer.dropEffect="move",s.classList.add("drag-over"),i={type:"merge",element:s},!1}),s.addEventListener("drop",r=>{if(r.stopPropagation&&r.stopPropagation(),t&&s!==t){let a=parseInt(s.dataset.blockIndex);this._showMergeModal(n,a)}return!1}),s.addEventListener("dragleave",r=>{s.contains(r.relatedTarget)||(s.classList.remove("drag-over"),i&&i.element===s&&(i=null))})}),e.querySelectorAll(".block-drop-zone").forEach(s=>{s.addEventListener("dragover",o=>{if(t)return o.preventDefault(),o.dataTransfer.dropEffect="move",e.querySelectorAll(".drag-over").forEach(r=>{r!==s&&r.classList.remove("drag-over")}),s.classList.add("drag-over"),i={type:"reorder",element:s},!1}),s.addEventListener("drop",o=>{if(o.stopPropagation&&o.stopPropagation(),t){let r=parseInt(s.dataset.dropIndex);this.reorderBlocks(n,r)}return!1}),s.addEventListener("dragleave",o=>{s.classList.remove("drag-over"),i&&i.element===s&&(i=null)})}),document.addEventListener("dragover",s=>{t&&s.preventDefault()}),document.addEventListener("drop",s=>{t&&s.preventDefault()})}saveDraft(){let e={originalTranscript:this.originalTranscript,blocks:this.blocks,lastModified:Date.now(),mode:"blocks"};localStorage.setItem("feedback_block_draft",JSON.stringify(e))}loadDraft(){let e=localStorage.getItem("feedback_block_draft");if(!e)return null;try{let t=JSON.parse(e);return this.originalTranscript=t.originalTranscript||"",this.blocks=t.blocks||[],t}catch(t){return err("inspector","Failed to load draft:",t),null}}clearDraft(){localStorage.removeItem("feedback_block_draft")}};var on=class{constructor(e=null){e?this.baseUrl=e:this.baseUrl=window.location.hostname==="localhost"?"http://localhost:3303":"https://auth.tippy.dev",this.apiPath="/api/feedback",log("feedback-api",`Initialized FeedbackAPI with base URL: ${this.baseUrl}`)}async _request(e,t={}){let n=`${this.baseUrl}${this.apiPath}${e}`;try{let s=await(await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers}})).json();if(!s.success)throw new Error(s.error||"Request failed");return s}catch(i){throw err("feedback-api",`Request failed for ${e}:`,i),i}}async createTicket(e){return log("feedback-api","Creating ticket:",e.ticketId),(await this._request("/tickets",{method:"POST",body:JSON.stringify(e)})).ticket}async getTicket(e){return log("feedback-api","Fetching ticket:",e),(await this._request(`/tickets/${e}`,{method:"GET"})).ticket}async getAllTickets(e={}){log("feedback-api","Fetching all tickets with filters:",e);let t=new URLSearchParams;e.type&&t.append("type",e.type),e.status&&t.append("status",e.status),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset);let n=t.toString(),i=`/tickets${n?"?"+n:""}`;return(await this._request(i,{method:"GET"})).tickets}async updateTicket(e,t){return log("feedback-api","Updating ticket:",e,t),(await this._request(`/tickets/${e}`,{method:"PUT",body:JSON.stringify(t)})).ticket}async deleteTicket(e){log("feedback-api","Deleting ticket:",e),await this._request(`/tickets/${e}`,{method:"DELETE"})}async addComment(e,t){log("feedback-api","Adding comment to ticket:",e);let n=await this._request(`/tickets/${e}/comments`,{method:"POST",body:JSON.stringify(t)});return{comment:n.comment,commentIndex:n.commentIndex}}async updateComment(e,t,n){return log("feedback-api","Updating comment:",e,t),(await this._request(`/tickets/${e}/comments/${t}`,{method:"PUT",body:JSON.stringify({content:n})})).comment}async deleteComment(e,t){log("feedback-api","Deleting comment:",e,t),await this._request(`/tickets/${e}/comments/${t}`,{method:"DELETE"})}};var rn=class{constructor(){this.selectedType="feature",this.recording=!1,this.speechRecognizer=null,this.micInited=!1,this.speechBuffer="",this.rlen=0,this.timeoutId=null,this.tickets=[],this.currentTicket=null,this.editingTicket=null,this.statementBlockEditor=null,this.useBlockMode=!0,this.blockEditorContainer=null,this.isAddingToBlocks=!1,this.api=new on,this.init()}async init(){await this.get_key(),this.setupTypeButtons(),this.setupSubmitButton(),this.setupSpeechRecognition(),this.setupTicketLookup(),this.setupTicketsList(),this.setupBlockEditor(),window.addEventListener("page-switched",e=>{log("inspector","page-switched",e.detail.pageId),e.detail.pageId==="feedback"&&this.loadAllTickets()}),document.addEventListener("keydown",e=>{document.getElementById("ticketEditModal").style.display==="flex"?e.key==="Escape"?this.closeEditModal():e.key==="Enter"&&e.target.id!=="ticketEditContent"&&!e.shiftKey&&this.saveTicketEdit():document.getElementById("ticketDetailModal").style.display==="flex"&&e.key==="Escape"&&this.closeTicketDetailModal()}),document.getElementById("ticketDetailModal")?.addEventListener("mousedown",e=>{e.target.id==="ticketDetailModal"&&this.closeTicketDetailModal()})}async get_key(){let e=await fetch(`${window.repoUrl}/../something-for-the-time`);e=await e.text(),this.key=e}setupTypeButtons(){let e=document.querySelectorAll(".feedback-type-btn");e.forEach(t=>{t.addEventListener("mousedown",()=>{e.forEach(n=>n.classList.remove("active")),t.classList.add("active"),this.selectedType=t.getAttribute("data-type")})})}setupSubmitButton(){document.getElementById("submitFeedbackBtn").addEventListener("mousedown",()=>this.submitFeedback())}setupBlockEditor(){if(this.blockEditorContainer=document.getElementById("blockEditorContainer"),!this.blockEditorContainer){log("inspector","Block editor container not found in DOM");return}this.statementBlockEditor=new sn({serviceUrl:"https://app.tippy.dev/api/process-text",onBlocksChanged:s=>{this.statementBlockEditor&&this.statementBlockEditor.saveDraft()}});let e=this.statementBlockEditor.loadDraft();e&&e.blocks.length>0&&(this.showBlockEditor(e.blocks),this.showStatus("Draft restored from previous session","info"));let t=document.getElementById("submitOriginalBtn"),n=document.getElementById("submitRefinementBtn");t&&t.addEventListener("mousedown",()=>this.submitOriginal()),n&&n.addEventListener("mousedown",()=>this.submitRefinement());let i=document.getElementById("clearDraftBtn");i&&i.addEventListener("mousedown",()=>this.clearDraft())}setupSpeechRecognition(){let e=document.getElementById("micButton");e&&(this.originalMicHandler=()=>{this.micInited?this.toggleRecording():this.initializeMic()},e.addEventListener("mousedown",this.originalMicHandler))}initializeMic(){if(!this.micInited)try{if(log("inspector","[mic] initializing.."),!this.key){this.showSpeechStatus("Speech recognition not configured","error");return}let e=window.SpeechSDK.SpeechConfig.fromSubscription(this.key,"eastus");e.speechRecognitionLanguage="en-US";let t=window.SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();this.speechRecognizer=new window.SpeechSDK.SpeechRecognizer(e,t),this.speechRecognizer.recognizing=(n,i)=>{let s=i.result.text,o=s.length-this.rlen,r=s.slice(this.rlen);log("inspector","[mic] recognizing..",r),this.speechBuffer+=r,this.updateTextarea(),this.rlen=s.length,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.completeRecognition()},2e3)},this.speechRecognizer.recognized=(n,i)=>{i.result.reason===window.SpeechSDK.ResultReason.RecognizedSpeech&&(log("inspector","[mic] recognized: ",i.result.text),this.completeRecognition(),this.rlen=0)},this.speechRecognizer.canceled=(n,i)=>{err("inspector","Speech recognition canceled:",i.reason),i.reason===window.SpeechSDK.CancellationReason.Error&&this.showSpeechStatus("Speech recognition error: "+i.errorDetails,"error"),this.stopRecording()},this.speechRecognizer.sessionStopped=(n,i)=>{log("inspector","[mic] session stopped"),this.stopRecording()},this.micInited=!0,this.toggleRecording()}catch(e){err("inspector","Failed to initialize speech recognition:",e),this.showSpeechStatus("Failed to initialize microphone","error")}}toggleRecording(){this.recording?this.stopRecording():this.startRecording()}startRecording(){let e=document.getElementById("micButton"),t=document.getElementById("feedbackDetails"),n=document.getElementById("micButton").querySelector(".mic-status");this.speechBuffer=t.value?t.value+" ":"",this.rlen=0;let i=n.textContent;n.textContent="\u23F3",this.speechRecognizer.startContinuousRecognitionAsync(()=>{n.textContent=i,this.recording=!0,e.classList.add("recording"),this.showSpeechStatus("Listening...","recording"),this.disableSubmitButtons(),this.animateRecording()},s=>{err("inspector","Failed to start recording:",s),this.showSpeechStatus("Failed to start recording","error")})}stopRecording(){if(!this.recording)return;let e=document.getElementById("micButton");this.speechRecognizer.stopContinuousRecognitionAsync(async()=>{if(this.recording=!1,e.classList.remove("recording"),this.hideSpeechStatus(),clearTimeout(this.timeoutId),log("inspector","[mic] stopped recording"),this.enableSubmitButtons(),this.blockEditorContainer&&this.blockEditorContainer.style.display!=="none"){let t=e.querySelector(".mic-status");t&&(t.textContent="\u2795"),e.title="Add more content"}if(this.useBlockMode&&this.statementBlockEditor){let t=document.getElementById("feedbackDetails").value.trim();t&&(this.isAddingToBlocks?(await this.processAdditionalTranscript(t),this.isAddingToBlocks=!1):t.length>60&&await this.processTranscriptWithBlocks(t))}},t=>{err("inspector","Failed to stop recording:",t),this.enableSubmitButtons()})}completeRecognition(){this.updateTextarea(),this.speechBuffer=document.getElementById("feedbackDetails").value+`
`,this.rlen=0}updateTextarea(){let e=document.getElementById("feedbackDetails");e.value=this.speechBuffer,e.dispatchEvent(new Event("input"))}animateRecording(){let e=document.querySelector(".recording-indicator");if(!e||!this.recording)return;let t=1,n=()=>{this.recording&&(t=t===1?1.2:1,e.style.transform=`scale(${t})`,setTimeout(()=>n(),500))};n()}showSpeechStatus(e,t){let n=document.getElementById("speechStatus");n.textContent=e,n.className=`speech-status ${t}`,n.style.display="block"}hideSpeechStatus(){let e=document.getElementById("speechStatus");e.style.display="none"}async processTranscriptWithBlocks(e){log("inspector","[block] processing transcript..",e);try{this.showProcessingUI();let t=await this.statementBlockEditor.processTranscript(e);this.hideProcessingUI(),t&&t.length>0?this.showBlockEditor(t):this.showFallbackOption(e)}catch(t){err("inspector","Block processing failed:",t),this.hideProcessingUI(),this.showFallbackOption(e)}}async processAdditionalTranscript(e){log("inspector","[block] processing additional transcript..",e);try{this.showProcessingUI();let t=this.statementBlockEditor.getBlocks(),n=await this.statementBlockEditor.processTranscript(e);if(this.hideProcessingUI(),n&&n.length>0){this.showBlockEditor(n);let i=document.getElementById("feedbackDetails");i&&(i.readOnly=!0,i.style.opacity="0.7")}}catch(t){err("inspector","Failed to add additional content:",t),this.hideProcessingUI(),this.showStatus("Failed to process additional content","error")}}showProcessingUI(){let e=document.createElement("div");e.id="processingOverlay",e.className="processing-overlay",e.innerHTML=`
            <div class="processing-content">
                <div class="processing-spinner"></div>
                <p>Processing your feedback...</p>
            </div>
        `;let t=document.querySelector(".feedback-section");t&&t.appendChild(e)}hideProcessingUI(){let e=document.getElementById("processingOverlay");e&&e.remove()}showBlockEditor(e){if(!this.blockEditorContainer||!this.statementBlockEditor)return;let t=document.getElementById("feedbackDetails");t&&(t.readOnly=!0,t.style.opacity="0.7"),this.blockEditorContainer.style.display="block";let n=document.getElementById("clearDraftBtn");n&&(n.style.display="inline-flex"),this.statementBlockEditor.renderBlocks(this.blockEditorContainer),this.updateUIForBlockMode()}hideBlockEditor(){if(!this.blockEditorContainer)return;this.blockEditorContainer.style.display="none";let e=document.getElementById("clearDraftBtn");e&&(e.style.display="none");let t=document.getElementById("feedbackDetails");t&&(t.readOnly=!1,t.style.opacity="1"),this.resetUIFromBlockMode()}toggleTranscriptView(){let e=document.querySelector(".original-transcript"),t=document.getElementById("blocksList"),n=document.querySelector(".toggle-view-btn");if(!(!e||!t))if(e.style.display==="none"){e.style.display="block",t.style.display="none",n.textContent="View Blocks";let i=document.getElementById("originalText");i&&(i.textContent=this.statementBlockEditor.getRawTranscript())}else e.style.display="none",t.style.display="block",n.textContent="View Original"}showFallbackOption(e){this.showStatus(`
            <div>Unable to process into blocks. Would you like to:</div>
            <div class="fallback-options">
                <button onmousedown="feedback.useOriginalTranscript()">Use Original Text</button>
                <button onmousedown="feedback.retryBlockProcessing()">Try Again</button>
            </div>
        `,"warning"),document.getElementById("feedbackDetails").value=e}useOriginalTranscript(){this.useBlockMode=!1,this.hideBlockEditor(),this.hideSpeechStatus(),this.showStatus("Using original transcript","info")}retryBlockProcessing(){let e=document.getElementById("feedbackDetails").value.trim();e&&this.processTranscriptWithBlocks(e)}startAddingToBlocks(){if(this.recording){this.stopRecording();return}this.isAddingToBlocks=!0;let e=document.getElementById("feedbackDetails");e&&(e.value="",e.readOnly=!1,e.style.opacity="1",e.focus()),this.showStatus("Record additional content to add to your blocks","info"),this.micInited?this.startRecording():this.initializeMic()}updateUIForBlockMode(){let e=document.getElementById("submitFeedbackBtn"),t=document.getElementById("dualSubmitButtons"),n=document.getElementById("fixWithVoice");e&&(e.style.display="none"),t&&(t.style.display="flex"),n&&(n.style.display="flex");let i=document.getElementById("micButton");if(this.addMoreHandler=()=>this.startAddingToBlocks(),i){let s=i.querySelector(".mic-status");s&&!this.recording&&(s.textContent="\u2795"),i.title=this.recording?"Stop recording":"Add more content",i.removeEventListener("mousedown",this.originalMicHandler),i.addEventListener("mousedown",this.addMoreHandler)}n&&n.addEventListener("mousedown",this.addMoreHandler)}resetUIFromBlockMode(){let e=document.getElementById("submitFeedbackBtn"),t=document.getElementById("dualSubmitButtons"),n=document.getElementById("fixWithVoice");e&&(e.style.display="block"),t&&(t.style.display="none"),n&&(n.style.display="none");let i=document.getElementById("micButton");if(i){let s=i.querySelector(".mic-status");s&&(s.textContent=""),i.title="Click to record feedback",this.addMoreHandler&&i.removeEventListener("mousedown",this.addMoreHandler),i.addEventListener("mousedown",this.originalMicHandler)}this.statementBlockEditor&&this.statementBlockEditor.clear()}async submitOriginal(){if(!document.getElementById("feedbackDetails").value.trim()){this.showStatus("Please provide feedback details","error");return}await this.submitFeedback()}async submitRefinement(){if(!this.statementBlockEditor){this.showStatus("No refinement available","error");return}let e=this.statementBlockEditor.getBlocks();if(e.length===0){this.showStatus("Please add some feedback blocks","error");return}let t=e.map((s,o)=>`${o+1}. ${s}`).join(`

`),n=document.getElementById("feedbackDetails"),i=n.value;n.value=t,await this.submitFeedback(),document.getElementById("feedbackDetails").value===t&&(n.value=i)}async clearDraft(){if(await M("Are you sure you want to clear your draft and start over?")){this.statementBlockEditor&&(this.statementBlockEditor.clear(),this.statementBlockEditor.clearDraft()),this.hideBlockEditor();let e=document.getElementById("feedbackDetails");e&&(e.value="",e.readOnly=!1,e.style.opacity="1",e.focus()),this.isAddingToBlocks=!1,this.hideSpeechStatus(),this.showStatus("","info")}}async submitFeedback(){let e=document.getElementById("feedbackDetails").value.trim();if(!e){this.showStatus("Please provide feedback details","error");return}let t=e.split(`
`)[0].substring(0,50)+(e.length>50?"...":""),n={type:this.selectedType,title:t,details:e,timestamp:new Date().toISOString(),inspector_version:"1.0.0",user_agent:navigator.userAgent,createdBy:SM.myName()};try{let i=this.generateTicketId();n.ticketId=i,n.status="open",await this.saveFeedbackToFirebase(n),this.storeFeedbackLocally(n),this.showStatus(`Thank you for your feedback! Your ticket number is <strong>#${i}</strong><br>`,"success"),setTimeout(()=>{this.loadAllTickets()},250),document.getElementById("feedbackDetails").value="",this.useBlockMode&&this.statementBlockEditor&&(this.statementBlockEditor.clear(),this.hideBlockEditor())}catch(i){console.error("Failed to submit feedback:",i),this.showStatus("Failed to submit feedback. Please try again.","error")}}generateTicketId(){let t=new Date().toISOString().slice(0,10).replace(/-/g,""),n=Math.floor(Math.random()*1e4).toString().padStart(4,"0"),i="BUG";return this.selectedType==="feature"?i="FEAT":this.selectedType==="improvement"&&(i="IDEA"),`${i}_${t}_${n}`}async saveFeedbackToFirebase(e){log("net","saving feedback via API =>",e);try{await this.api.createTicket(e),log("net","Feedback saved via API:",e.ticketId)}catch(t){err("net","Error saving feedback:",t)}}async getFeedbackByTicket(e){try{return await this.api.getTicket(e)}catch(t){return err("net","Error fetching feedback:",t),null}}storeFeedbackLocally(e){let t=JSON.parse(localStorage.getItem("inspector_feedback")||"[]");t.push(e),localStorage.setItem("inspector_feedback",JSON.stringify(t))}showStatus(e,t){let n=document.getElementById("feedbackStatus");n.innerHTML=e,n.className=`feedback-status ${t}`,n.style.display="block",t==="success"&&setTimeout(()=>{n.style.display="none"},1e4)}setupTicketLookup(){let e=document.getElementById("lookupTicketBtn"),t=document.getElementById("ticketLookupInput");!e||!t||(e.addEventListener("mousedown",()=>this.lookupTicket()),t.addEventListener("keypress",n=>{n.key==="Enter"&&this.lookupTicket()}))}async lookupTicket(){let e=document.getElementById("ticketLookupInput").value.trim(),t=document.getElementById("ticketResult");if(!e){this.showTicketResult("Please enter a ticket ID","error");return}this.showTicketResult("Looking up ticket...","loading");try{let n=await this.getFeedbackByTicket(e);if(n){let i=`
                    <div class="ticket-found">
                        <h4>Ticket #${n.ticketId}</h4>
                        <div class="ticket-details">
                            <div class="ticket-field">
                                <span class="field-label">Type:</span>
                                <span class="field-value type-${n.type}">${n.type}</span>
                            </div>
                            <div class="ticket-field">
                                <span class="field-label">Status:</span>
                                <span class="field-value status-${n.status}">${n.status}</span>
                            </div>
                            <div class="ticket-field">
                                <span class="field-label">Submitted:</span>
                                <span class="field-value">${new Date(n.timestamp).toLocaleString()}</span>
                            </div>
                            <div class="ticket-field full-width">
                                <span class="field-label">Description:</span>
                                <div class="field-value description">${this.escapeHtml(n.details)}</div>
                            </div>
                        </div>
                    </div>
                `;this.showTicketResult(i,"success")}else this.showTicketResult("Ticket not found. Please check the ID and try again.","error")}catch(n){err("net","Error looking up ticket:",n),this.showTicketResult("Failed to lookup ticket. Please try again later.","error")}}showTicketResult(e,t){let n=document.getElementById("ticketResult");n.innerHTML=e,n.className=`ticket-result ${t}`,n.style.display="block"}escapeHtml(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}setupTicketsList(){let e=document.getElementById("refreshTicketsBtn"),t=document.getElementById("ticketFilterType"),n=document.getElementById("ticketFilterStatus");e&&e.addEventListener("mousedown",()=>this.loadAllTickets()),t&&t.addEventListener("change",()=>this.filterTickets()),n&&n.addEventListener("change",()=>this.filterTickets())}async loadAllTickets(){let e=document.getElementById("ticketsList");if(e){e.innerHTML='<div class="loading-tickets">Loading tickets...</div>';try{let t=await this.api.getAllTickets();this.tickets=t,this.displayTickets(t)}catch(t){err("net","Error loading tickets:",t),e.innerHTML='<div class="error-loading">Failed to load tickets</div>'}}}displayTickets(e){let t=document.getElementById("ticketsList");if(!t)return;if(e.length===0){t.innerHTML='<div class="empty-tickets">No tickets found</div>';return}let n=SM.myName(),i=e.map(s=>{let o=s.createdBy===n,r=new Date(s.timestamp||s.createdAt);return`
                <div class="ticket-item ${o?"ticket-item-owner":""}" data-ticket-id="${s.ticketId}">
                    <div class="ticket-item-header">
                        <span class="ticket-item-id">#${s.ticketId}</span>
                        <div class="ticket-item-meta">
                            <span class="ticket-type-badge ${s.type}">${s.type}</span>
                            <span class="ticket-status-badge ${s.status}">${s.status}</span>
                            ${s.comments&&s.comments.length>0?`
                                <span class="ticket-comments-badge" title="${s.comments.length} comment${s.comments.length!==1?"s":""}">
                                    \u{1F4AC} ${s.comments.length}
                                </span>
                            `:""}
                        </div>
                    </div>
                    <div class="ticket-item-title">${this.escapeHtml(s.details?s.details.length>100?s.details.substring(0,100)+"...":s.details:"No description")}</div>
                    <div class="ticket-item-author">
                        by ${s.createdBy} \u2022 ${r.toLocaleDateString()}
                    </div>
                    ${o?`
                        <div class="ticket-item-actions">
                            <button class="ticket-action-btn edit" onmousedown="feedback.editTicket('${s.ticketId}')">Edit</button>
                            <button class="ticket-action-btn delete" onmousedown="feedback.deleteTicket('${s.ticketId}')">Delete</button>
                        </div>
                    `:""}
                </div>
            `}).join("");t.innerHTML=i,t.querySelectorAll(".ticket-item").forEach(s=>{s.addEventListener("mousedown",o=>{if(!o.target.classList.contains("ticket-action-btn")){let r=s.getAttribute("data-ticket-id");this.openTicketDetail(r)}})})}filterTickets(){let e=document.getElementById("ticketFilterType").value,t=document.getElementById("ticketFilterStatus").value,n=this.tickets;e!=="all"&&(n=n.filter(i=>i.type===e)),t!=="all"&&(n=n.filter(i=>i.status===t)),this.displayTickets(n)}async openTicketDetail(e){let t=this.tickets.find(l=>l.ticketId===e);if(!t)return;try{let l=await this.api.getTicket(e);l&&Object.assign(t,l)}catch(l){err("net","Error fetching latest ticket data:",l)}this.currentTicket=t;let n=document.getElementById("ticketDetailModal"),i=document.getElementById("modalTicketId"),s=document.getElementById("modalTicketContent"),o=n.querySelector('[data-action="close-ticket-modal"]');o&&(o.onclick=()=>this.closeTicketDetailModal()),i.textContent=`Ticket #${t.ticketId}`;let r=new Date(t.timestamp||t.createdAt),a=t.createdBy===SM.myName();s.innerHTML=`
            <div class="ticket-detail-content">
                <div class="ticket-detail-field">
                    <div class="ticket-detail-label">Type</div>
                    <div class="ticket-detail-value">
                        <span class="ticket-type-badge ${t.type}">${t.type}</span>
                    </div>
                </div>
                <div class="ticket-detail-field">
                    <div class="ticket-detail-label">Status</div>
                    <div class="ticket-detail-value">
                        <span class="ticket-status-badge ${t.status}">${t.status}</span>
                    </div>
                </div>
                <div class="ticket-detail-field">
                    <div class="ticket-detail-label">Created By</div>
                    <div class="ticket-detail-value">${t.createdBy}</div>
                </div>
                <div class="ticket-detail-field">
                    <div class="ticket-detail-label">Created At</div>
                    <div class="ticket-detail-value">${r.toLocaleString()}</div>
                </div>
                ${t.editedAt?`
                    <div class="ticket-detail-field">
                        <div class="ticket-detail-label">Last Edited</div>
                        <div class="ticket-detail-value">${new Date(t.editedAt).toLocaleString()}</div>
                    </div>
                `:""}
                <div class="ticket-detail-field">
                    <div class="ticket-detail-label">Description</div>
                    <div class="ticket-detail-value">${this.escapeHtml(t.details)}</div>
                </div>
            </div>
            
            <div class="comments-section">
                <h3 class="comments-header">Comments</h3>
                <div id="commentsList" class="comments-list">
                    <div class="loading-comments">Loading comments...</div>
                </div>
                <div class="comment-form">
                    <div class="comment-input-container">
                        <textarea id="newCommentInput" class="comment-input" placeholder="Add a comment..."></textarea>
                        <button id="commentMicBtn" class="comment-mic-btn" title="Click to record comment">
                            <span class="mic-icon">\u{1F3A4}</span>
                        </button>
                    </div>
                    <button class="comment-submit-btn" onmousedown="feedback.addComment()">Post</button>
                </div>
            </div>
        `,n.style.display="flex",this.setupCommentMic(),await this.loadComments(t)}async loadComments(e){let t=document.getElementById("commentsList");try{let n=await this.api.getTicket(e.ticketId);n&&(e.comments=n.comments||[],this.currentTicket&&this.currentTicket.ticketId===e.ticketId&&(this.currentTicket.comments=e.comments));let i=e.comments||[];if(i.length===0){t.innerHTML='<div class="empty-comments">No comments yet. Be the first to comment!</div>';return}let s=SM.scene?.localUser?.name||SM.myName()||"Anonymous",o=i.map((r,a)=>{let l=new Date(r.timestamp),d=r.author===s;return`
                    <div class="comment-item" data-comment-index="${a}">
                        <div class="comment-header">
                            <span class="comment-author">${r.author}</span>
                            <span class="comment-time">${l.toLocaleString()}${r.editedAt?" (edited)":""}</span>
                            ${d?`
                                <div class="comment-actions">
                                    <button class="comment-edit-btn" onmousedown="feedback.editComment(${a})">Edit</button>
                                    <button class="comment-delete-btn" onmousedown="feedback.deleteComment(${a})">Delete</button>
                                </div>
                            `:""}
                        </div>
                        <div class="comment-content" id="comment-content-${a}">${this.escapeHtml(r.content)}</div>
                        <div class="comment-edit-form" id="comment-edit-${a}" style="display: none;">
                            <textarea class="comment-edit-textarea" id="comment-edit-textarea-${a}">${this.escapeHtml(r.content)}</textarea>
                            <div class="comment-edit-actions">
                                <button class="comment-save-btn" onmousedown="feedback.saveEditedComment(${a})">Save</button>
                                <button class="comment-cancel-btn" onmousedown="feedback.cancelEditComment(${a})">Cancel</button>
                            </div>
                        </div>
                    </div>
                `}).join("");t.innerHTML=o}catch(n){err("net","Error loading comments:",n),t.innerHTML='<div class="error-loading">Failed to load comments</div>'}}async addComment(){let e=document.getElementById("newCommentInput"),t=e.value.trim();if(!(!t||!this.currentTicket))try{let n={author:SM.scene?.localUser?.name||SM.myName()||"Anonymous",content:t},i=await this.api.addComment(this.currentTicket.ticketId,n);this.currentTicket.comments||(this.currentTicket.comments=[]),this.currentTicket.comments.push(i.comment);let s=this.tickets.findIndex(o=>o.ticketId===this.currentTicket.ticketId);s!==-1&&(this.tickets[s]=this.currentTicket),e.value="",await this.loadComments(this.currentTicket),this.updateTicketCommentCount(this.currentTicket.ticketId,this.currentTicket.comments.length)}catch(n){err("net","Error adding comment:",n),showNotification("Failed to add comment. Please try again.")}}async editTicket(e){let t=this.tickets.find(i=>i.ticketId===e);if(!t)return;this.editingTicket=t;let n=document.getElementById("ticketEditContent");n.value=t.details||"",document.getElementById("ticketEditModal").style.display="flex",setTimeout(()=>n.focus(),100)}closeEditModal(){document.getElementById("ticketEditModal").style.display="none",this.editingTicket=null}async saveTicketEdit(){if(!this.editingTicket)return;let t=document.getElementById("ticketEditContent").value.trim();if(!t){showNotification("Feedback content cannot be empty.");return}try{let n=await this.api.updateTicket(this.editingTicket.ticketId,{details:t});this.editingTicket.details=t,this.editingTicket.editedAt=n.editedAt,document.querySelectorAll(".ticket-item").forEach(s=>{if(s.getAttribute("data-ticket-id")===this.editingTicket.ticketId){let o=s.querySelector(".ticket-item-title");if(o){let r=t.length>100?t.substring(0,100)+"...":t;o.textContent=r}}}),this.closeEditModal(),this.currentTicket&&this.currentTicket.ticketId===this.editingTicket.ticketId&&(this.currentTicket.details=t,this.currentTicket.editedAt=this.editingTicket.editedAt,this.openTicketDetail(this.editingTicket.ticketId))}catch(n){console.error("Error updating ticket:",n),showNotification("Failed to update ticket. Please try again.")}}async deleteTicket(e){if(!(!await M("Are you sure you want to delete this ticket?")||!this.tickets.find(n=>n.ticketId===e)))try{await this.api.deleteTicket(e),this.tickets=this.tickets.filter(n=>n.ticketId!==e),this.displayTickets(this.tickets)}catch(n){console.error("Error deleting ticket:",n),showNotification("Failed to delete ticket. Please try again.")}}editComment(e){document.getElementById(`comment-content-${e}`).style.display="none",document.getElementById(`comment-edit-${e}`).style.display="block";let t=document.getElementById(`comment-edit-textarea-${e}`);t.focus(),t.setSelectionRange(t.value.length,t.value.length)}cancelEditComment(e){document.getElementById(`comment-edit-${e}`).style.display="none",document.getElementById(`comment-content-${e}`).style.display="block"}async saveEditedComment(e){let n=document.getElementById(`comment-edit-textarea-${e}`).value.trim();if(!(!n||!this.currentTicket))try{let i=await this.api.updateComment(this.currentTicket.ticketId,e,n);this.currentTicket.comments[e]=i;let s=this.tickets.findIndex(o=>o.ticketId===this.currentTicket.ticketId);s!==-1&&(this.tickets[s]=this.currentTicket),await this.loadComments(this.currentTicket),this.updateTicketCommentCount(this.currentTicket.ticketId,this.currentTicket.comments.length)}catch(i){console.error("Error saving edited comment:",i),showNotification("Failed to save comment. Please try again.")}}async deleteComment(e){if(await M("Are you sure you want to delete this comment?")&&this.currentTicket)try{await this.api.deleteComment(this.currentTicket.ticketId,e),this.currentTicket.comments=this.currentTicket.comments.filter((n,i)=>i!==e);let t=this.tickets.findIndex(n=>n.ticketId===this.currentTicket.ticketId);t!==-1&&(this.tickets[t]=this.currentTicket),await this.loadComments(this.currentTicket),this.updateTicketCommentCount(this.currentTicket.ticketId,this.currentTicket.comments.length)}catch(t){console.error("Error deleting comment:",t),showNotification("Failed to delete comment. Please try again.")}}updateTicketCommentCount(e,t){let n=document.querySelector(`.ticket-item[data-ticket-id="${e}"]`);if(!n)return;let i=n.querySelector(".ticket-item-meta");if(!i)return;let s=i.querySelector(".ticket-comments-badge");if(s&&s.remove(),t>0){let o=`<span class="ticket-comments-badge" title="${t} comment${t!==1?"s":""}">
                \u{1F4AC} ${t}
            </span>`;i.insertAdjacentHTML("beforeend",o)}}setupCommentMic(){let e=document.getElementById("commentMicBtn");if(!e)return;let t=!1;e.addEventListener("mousedown",()=>{if(!this.micInited){this.initializeMic();return}t?(this.stopCommentRecording(e),t=!1):(this.startCommentRecording(e),t=!0)})}startCommentRecording(e){let t=document.getElementById("newCommentInput");if(!t)return;this.commentSpeechBuffer=t.value?t.value+" ":"";let n=this.speechBuffer;this.speechBuffer=this.commentSpeechBuffer,this.speechRecognizer.recognizing=(i,s)=>{let o=s.result.text;this.commentSpeechBuffer=this.commentSpeechBuffer+o.slice(this.rlen),t.value=this.commentSpeechBuffer,this.rlen=o.length},this.speechRecognizer.recognized=(i,s)=>{s.result.reason===window.SpeechSDK.ResultReason.RecognizedSpeech&&(this.commentSpeechBuffer+=" ",t.value=this.commentSpeechBuffer,this.rlen=0)},this.speechRecognizer.startContinuousRecognitionAsync(()=>{e.classList.add("recording");let i=e.querySelector(".mic-icon");i&&(i.textContent="\u{1F534}")},i=>{console.error("Failed to start comment recording:",i),this.showStatus("Failed to start recording","error")}),this._originalSpeechBuffer=n}stopCommentRecording(e){this.speechRecognizer.stopContinuousRecognitionAsync(()=>{e.classList.remove("recording");let t=e.querySelector(".mic-icon");t&&(t.textContent="\u{1F3A4}"),this.speechBuffer=this._originalSpeechBuffer||"",this.rlen=0,this.setupMainRecognizer()},t=>{console.error("Failed to stop comment recording:",t)})}setupMainRecognizer(){this.speechRecognizer.recognizing=(e,t)=>{let n=t.result.text,i=n.length-this.rlen,s=n.slice(this.rlen);this.speechBuffer+=s,this.updateTextarea(),this.rlen=n.length,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.completeRecognition()},2e3)},this.speechRecognizer.recognized=(e,t)=>{t.result.reason===window.SpeechSDK.ResultReason.RecognizedSpeech&&(this.completeRecognition(),this.rlen=0)}}disableSubmitButtons(){let e=document.getElementById("submitFeedbackBtn");e&&(e.disabled=!0,e.style.opacity="0.5",e.style.cursor="not-allowed",e.innerHTML="Stop Recording to Submit");let t=document.getElementById("submitOriginalBtn"),n=document.getElementById("submitRefinementBtn");t&&(t.disabled=!0,t.style.opacity="0.5",t.style.cursor="not-allowed"),n&&(n.disabled=!0,n.style.opacity="0.5",n.style.cursor="not-allowed")}enableSubmitButtons(){let e=document.getElementById("submitFeedbackBtn");e&&(e.disabled=!1,e.style.opacity="1",e.style.cursor="pointer",e.innerHTML="Submit Feedback");let t=document.getElementById("submitOriginalBtn"),n=document.getElementById("submitRefinementBtn");t&&(t.disabled=!1,t.style.opacity="1",t.style.cursor="pointer"),n&&(n.disabled=!1,n.style.opacity="1",n.style.cursor="pointer")}closeTicketDetailModal(){let e=document.getElementById("ticketDetailModal");e&&(e.style.display="none"),this.currentTicket=null}};var Sn=class{constructor(){this.currentInput=null,this.initialized=!1,this.tolerance=1,this.setup=()=>{if(window.scene===void 0){setTimeout(this.setup,400);return}this.initialize||(this.initialized=!0,this.getRightControllerRot=()=>{let t=`People/${SM.myName()}/Trackers/RIGHT_HAND`,n=SM.getEntityById(t);if(!n)return T("Error: RIGHT_HAND Tracker not found"),{x:0,y:0,z:0};let i=n.transform.localRotation;return{x:i.x,y:i.y,z:i.z}},this.radialCrown=document.getElementById("radialCrown"),this.radialCrownTol=document.getElementById("radialCrownTol"),this.inputHelper=document.getElementById("inputHelper"),this.spacePanel=document.getElementById("spacePropsContent"),this.lifeCyclePanel=document.getElementById("lifecyclePanel"),this.inputHelperInfo=document.getElementById("inputHelperInfo"),this.inputHelperValue=document.getElementById("inputHelperValue"),this.inputHelperSubject=document.getElementById("inputHelperSubject"),this.radialCrownTolDisplay=document.getElementById("radialCrownTolDisplay"))},this.focusComponent="",this.focusProperty="",this.setup(),this.eventListeners=[]}addEventListeners(e,t,n){e&&(e.addEventListener(t,n),this.eventListeners.push({element:e,event:t,callback:n}))}clearEventListeners(){this.eventListeners.forEach(e=>{e.element.removeEventListener(e.event,e.callback)}),this.eventListeners=[]}setValue(e,t,n){let i=t.split("."),s=e.id+"_"+i[0],o=inspector.propertiesPanel?.scaleLockHandler;if(o?.isLocked(s)){let l;e.type==="Entity"?l=e.transformVal(i[0]):l=e.properties[i[0]];let d=o.handleProportionalScale(s,l,i[1],n);e.Set(i[0],d);return}if(!t.includes(".")){e.Set(t,n);return}let[r,a]=t.split(".");if(e.type==="Entity"){let l=N(e.transformVal(r));l[a]=n,e.Set(r,l)}else{let l=N(e.properties[r]);l[a]=n,e.Set(r,l)}}helpNumericInputElement(e,t,n){let i=null,s=null,o=0,r=0,a=0,l=0,d=t.type==="Entity"?t.name:t._entity.name,p=t.type==="Entity"?"":t.type;this.currentInput.style.backgroundColor="#1e3764",this.currentInput.style.borderColor="#326689",this.inputHelper.style.display="block",this.spacePanel.style.display="none",this.lifeCyclePanel.style.display="none",this.inputHelperSubject.innerHTML=`
            <span style="color:orange">${d}</span> 
            <span style="color:#8babd5">${p}</span> 
            <span >${n}</span>
        `,this.inputHelperValue.innerHTML=e.value,this.clearEventListeners(),this.addEventListeners(this.radialCrown,"mousedown",u=>{u.preventDefault(),u.stopPropagation();let y=this.getRightControllerRot(),m=parseFloat(e.value);(isNaN(m)||m===0)&&(m=1);let f=Math.abs(m/180*this.tolerance),v=1,b=-999999,S=()=>{let x=this.getRightControllerRot().x;b===-999999?b=x:Math.abs(x-b)>.8&&(v*=-1),b=x,x=x*v;let R=-(Math.round((x-y.x)*180*100)/100),J=R*f,L=m+J;e.value=L,this.inputHelperInfo.innerHTML=(J>0?"+":"")+`${J.toFixed(4)}`,this.radialCrown.style.transform=`rotateZ(${o+R}deg)`,r=o+R,this.inputHelperValue.innerHTML=L.toFixed(4),this.setValue(t,n,L)};i&&(clearInterval(i),i=null),i=setInterval(S,100),this.radialCrown.style.boxShadow="0px 0px 20px black"}),this.addEventListeners(this.radialCrownTol,"mousedown",u=>{u.preventDefault(),u.stopPropagation();let y=this.getRightControllerRot(),m=1,f=-999999,v=-270,b=270,S=()=>{let x=this.getRightControllerRot().x;f===-999999?f=x:Math.abs(x-f)>.8&&(m*=-1),f=x,x=x*m;let R=-(Math.round((x-y.x)*180*100)/100),J=R,L=a+R;L<v&&(L=v),L>b&&(L=b);let k=Math.exp(L/12),F=k.toFixed(12);k<1e-9?F=k.toFixed(11):k<1e-8?F=k.toFixed(10):k<1e-7?F=k.toFixed(9):k<1e-6?F=k.toFixed(8):k<1e-5?F=k.toFixed(7):k<1e-4?F=k.toFixed(6):k<.001?F=k.toFixed(5):k<.01?F=k.toFixed(4):k<.1?F=k.toFixed(3):k<1?F=k.toFixed(2):k<10?F=k.toFixed(1):F=k.toFixed(0),this.radialCrownTolDisplay.innerHTML=`Tol +/- ${F}`,this.radialCrownTol.style.transform=`rotateZ(${L}deg)`,this.tolerance=k,l=L};s&&(clearInterval(s),s=null),s=setInterval(S,100),this.radialCrownTol.style.boxShadow="0px 0px 20px black"});let h=()=>{this.inputHelperInfo.innerHTML="",o=r,a=l,clearInterval(i),clearInterval(s),i=null,s=null,this.radialCrown.style.boxShadow="none",this.radialCrownTol.style.boxShadow="none"};this.addEventListeners(this.inputHelper,"mouseleave",u=>{h()}),this.addEventListeners(this.inputHelper,"mouseup",u=>{u.preventDefault(),u.stopPropagation(),h()}),this.addEventListeners(document.body,"mouseup",u=>{h(),this.checkInputBlur()})}helpColorInputElement(e,t,n){this.clearEventListeners(),this.colorSelectorContainer||this.setupColorSelector(),this.currentInput.style.backgroundColor="#1e3764",this.currentInput.style.borderColor="#326689",this.inputHelper.style.display="block",this.spacePanel.style.display="none",this.lifeCyclePanel.style.display="none";let i=document.getElementById("radialCrown")?.parentElement;i&&(i.id="numericInputContainer",i.style.display="none"),this.colorSelectorContainer.style.display="block",this.inputHelperSubject.innerHTML=`
            <span style="color:orange">${t._entity.name}</span> 
            <span style="color:#8babd5">${t.type}</span> 
            <span >${n}</span>
        `;let s=this.getColorValue(t,n);this.initColorSelector(s,o=>{this.setColorValue(t,n,o),this.updateColorDisplay(o)}),this.addEventListeners(this.inputHelper,"mouseup",o=>{o.preventDefault(),o.stopPropagation()}),this.addEventListeners(document.body,"mouseup",()=>{this.checkInputBlur()})}setupColorSelector(){let e=document.createElement("div");e.className="color-selector-container",e.id="colorSelectorContainer",e.style.display="none";let t=document.createElement("div");t.className="color-preview-large",t.id="colorPreviewLarge",e.appendChild(t);let n=document.createElement("div");n.className="color-picker-area";let i=document.createElement("div");i.className="color-sb-square",i.id="colorSbSquare";let s=document.createElement("div");s.className="color-sb-cursor",s.id="sbCursor",i.appendChild(s),n.appendChild(i);let o=document.createElement("div");o.className="color-hue-bar",o.id="colorHueBar";let r=document.createElement("div");r.className="color-hue-slider",r.id="hueSlider",o.appendChild(r),n.appendChild(o),e.appendChild(n);let a=document.createElement("div");a.className="color-alpha-wrapper";let l=document.createElement("span");l.className="color-slider-label",l.textContent="Alpha",a.appendChild(l);let d=document.createElement("div");d.className="color-alpha-bar",d.id="colorAlphaBar";let p=document.createElement("div");p.className="color-alpha-slider",p.id="alphaSlider",d.appendChild(p),a.appendChild(d);let h=document.createElement("span");h.className="color-slider-value",h.id="alphaValue",h.textContent="100%",a.appendChild(h),e.appendChild(a);let u=document.createElement("div");u.className="color-values";let y=document.createElement("div");y.className="color-value-row",y.innerHTML='<span>RGB:</span><span id="rgbDisplay">255, 255, 255</span>',u.appendChild(y);let m=document.createElement("div");m.className="color-value-row";let f=document.createElement("span");f.textContent="Hex:",m.appendChild(f);let v=document.createElement("input");v.type="text",v.id="hexDisplay",v.className="hex-input",v.value="#FFFFFF",v.maxLength=7,v.style.cssText="background: #1a1a1a; border: 1px solid #444; color: #fff; padding: 2px 6px; font-family: monospace; width: 80px; cursor: pointer;",m.appendChild(v);let b=document.createElement("button");b.textContent="Copy",b.className="hex-copy-btn",b.style.cssText="margin-left: 8px; padding: 2px 8px; background: #2a2a2a; border: 1px solid #444; color: #8babd5; cursor: pointer; font-size: 11px;",m.appendChild(b),u.appendChild(m),e.appendChild(u),document.querySelector("#inputHelper .properties-content").appendChild(e),this.colorSelectorContainer=e}initColorSelector(e,t){this.colorChangeCallback=t,this.currentHSV=this.rgbToHsv(e.r*255,e.g*255,e.b*255),this.currentAlpha=e.a||1,this.updateColorDisplay(e),this.updatePickerVisuals(),this.setupSaturationBrightnessPicker(),this.setupHuePicker(),this.setupAlphaPicker(),this.setupHexInputHandlers()}setupSaturationBrightnessPicker(){let e=document.getElementById("colorSbSquare"),t=document.getElementById("sbCursor");if(!e||!t)return;let n=!1,i=a=>{let l=e.getBoundingClientRect(),d=Math.max(0,Math.min(l.width,a.clientX-l.left)),p=Math.max(0,Math.min(l.height,a.clientY-l.top));this.currentHSV.s=d/l.width,this.currentHSV.v=1-p/l.height,t.style.left=`${d}px`,t.style.top=`${p}px`,this.updateFromHSV()},s=a=>{a.preventDefault(),a.stopPropagation(),n=!0,i(a)},o=a=>{},r=a=>{};this.addEventListeners(e,"mousedown",s),this.addEventListeners(document,"mousemove",o),this.addEventListeners(document,"mouseup",r)}setupHuePicker(){let e=document.getElementById("colorHueBar"),t=document.getElementById("hueSlider");if(!e||!t){console.error("Hue picker elements not found");return}let n=!1,i=s=>{let o=e.getBoundingClientRect(),r=Math.max(0,Math.min(o.height,s.clientY-o.top));this.currentHSV.h=r/o.height*360,t.style.top=`${r-2}px`,this.updateFromHSV(),this.updatePickerVisuals()};this.addEventListeners(e,"mousedown",s=>{s.preventDefault(),s.stopPropagation(),n=!0,i(s)}),this.addEventListeners(document,"mousemove",s=>{}),this.addEventListeners(document,"mouseup",s=>{})}setupAlphaPicker(){let e=document.getElementById("colorAlphaBar"),t=document.getElementById("alphaSlider"),n=document.getElementById("alphaValue");if(!e||!t||!n){console.error("Alpha picker elements not found");return}let i=!1,s=o=>{let r=e.getBoundingClientRect(),a=Math.max(0,Math.min(r.width,o.clientX-r.left));this.currentAlpha=a/r.width,t.style.left=`${a-2}px`,n.textContent=`${Math.round(this.currentAlpha*100)}%`,this.updateFromHSV()};this.addEventListeners(e,"mousedown",o=>{o.preventDefault(),o.stopPropagation(),i=!0,s(o)}),this.addEventListeners(document,"mousemove",o=>{}),this.addEventListeners(document,"mouseup",o=>{})}setupHexInputHandlers(){let e=document.getElementById("hexDisplay"),t=document.querySelector(".hex-copy-btn");if(!e||!t){console.error("Hex input elements not found");return}this.addEventListeners(t,"click",async n=>{n.preventDefault(),n.stopPropagation();try{await navigator.clipboard.writeText(e.value);let i=t.textContent,s=t.style.background;t.textContent="Copied!",t.style.background="#2d5016",setTimeout(()=>{t.textContent=i,t.style.background=s},1e3)}catch(i){console.error("Failed to copy:",i),T("Failed to copy hex value")}}),this.addEventListeners(e,"input",n=>{let i=e.value.trim();if(i.length>0&&!i.startsWith("#")&&(i="#"+i,e.value=i),i.length===7){let s=this.hexToRgb(i);s?(this.currentHSV=this.rgbToHsv(s.r,s.g,s.b),this.updateFromHSV(),this.updatePickerVisuals(),e.style.borderColor="#4a7c29",setTimeout(()=>{e.style.borderColor="#444"},500)):e.style.borderColor="#a02020"}}),this.addEventListeners(e,"click",n=>{n.stopPropagation(),e.select()}),this.addEventListeners(e,"paste",n=>{n.stopPropagation()})}updatePickerVisuals(){let e=document.getElementById("colorSbSquare");if(e){let s=this.hsvToRgb(this.currentHSV.h,1,1);e.style.background=`
                linear-gradient(to bottom, 
                    rgba(0,0,0,0) 0%, 
                    rgba(0,0,0,1) 100%
                ),
                linear-gradient(to right, 
                    rgba(255,255,255,1) 0%, 
                    rgb(${s.r}, ${s.g}, ${s.b}) 100%
                )
            `;let o=document.getElementById("sbCursor");o&&(o.style.left=`${this.currentHSV.s*200}px`,o.style.top=`${(1-this.currentHSV.v)*200}px`)}let t=document.getElementById("hueSlider");t&&(t.style.top=`${this.currentHSV.h/360*200-2}px`);let n=document.getElementById("alphaSlider"),i=document.getElementById("alphaValue");n&&(n.style.left=`${this.currentAlpha*160-2}px`),i&&(i.textContent=`${Math.round(this.currentAlpha*100)}%`)}updateFromHSV(){let e=this.hsvToRgb(this.currentHSV.h,this.currentHSV.s,this.currentHSV.v),t={r:e.r/255,g:e.g/255,b:e.b/255,a:this.currentAlpha};this.colorChangeCallback&&this.colorChangeCallback(t),this.updateColorDisplay(t)}updateColorDisplay(e){let t=Math.round(e.r*255),n=Math.round(e.g*255),i=Math.round(e.b*255),s=e.a||1,o=document.getElementById("colorPreviewLarge");o&&(o.style.backgroundColor=`rgba(${t}, ${n}, ${i}, ${s})`);let r=document.getElementById("rgbDisplay");r&&(r.textContent=`${t}, ${n}, ${i}`);let a=document.getElementById("hexDisplay");a&&(a.value=this.rgbToHex(t,n,i)),this.inputHelperValue.innerHTML=""}getColorValue(e,t){if(this.contextType==="scriptrunner")return e.vars?.[t]?.value||{r:1,g:1,b:1,a:1};if(!t.includes("."))return e.properties[t]||{r:1,g:1,b:1,a:1};let[n,i]=t.split(".");return e.properties[n]||{r:1,g:1,b:1,a:1}}setColorValue(e,t,n){if(this.contextType==="scriptrunner"){let r=new at(e.id,t,{type:"color",value:n},{source:"ui"});window.changeManager.applyChange(r);return}if(!t.includes(".")){e.Set(t,n);return}let[i,s]=t.split("."),o=N(e.properties[i]);s?o[s]=n[s]:o=n,e.Set(i,o)}rgbToHsv(e,t,n){e/=255,t/=255,n/=255;let i=Math.max(e,t,n),s=Math.min(e,t,n),o=i-s,r=0,a=i===0?0:o/i,l=i;return o!==0&&(i===e?r=((t-n)/o+(t<n?6:0))*60:i===t?r=((n-e)/o+2)*60:r=((e-t)/o+4)*60),{h:r,s:a,v:l}}hsvToRgb(e,t,n){let i=n*t,s=i*(1-Math.abs(e/60%2-1)),o=n-i,r,a,l;return e>=0&&e<60?[r,a,l]=[i,s,0]:e>=60&&e<120?[r,a,l]=[s,i,0]:e>=120&&e<180?[r,a,l]=[0,i,s]:e>=180&&e<240?[r,a,l]=[0,s,i]:e>=240&&e<300?[r,a,l]=[s,0,i]:[r,a,l]=[i,0,s],{r:Math.round((r+o)*255),g:Math.round((a+o)*255),b:Math.round((l+o)*255)}}rgbToHex(e,t,n){return"#"+[e,t,n].map(i=>{let s=i.toString(16);return s.length===1?"0"+s:s}).join("").toUpperCase()}hexToRgb(e){return e=e.replace("#",""),/^[0-9A-Fa-f]{6}$/.test(e)?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}:null}getDeepActiveElement(e=document){let t=e.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}isInputElement(e){return e?e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e.isContentEditable===!0||e.contentEditable==="true":!1}syncWithActiveElement(){let e=this.getDeepActiveElement();this.currentInput=this.isInputElement(e)?e:null}clearHighlight(){this.inputHelper.style.display="none",this.spacePanel.style.display="block",this.lifeCyclePanel.style.display="block";let e=document.getElementById("numericInputContainer");e&&(e.style.display="block"),this.colorSelectorContainer&&(this.colorSelectorContainer.style.display="none"),this.currentInput&&this.currentInput.style&&(this.currentInput.style.backgroundColor="#0f0f0f",this.currentInput.style.borderColor="#2a2a2a"),this.currentInput=null,this.clearEventListeners()}checkInputBlur(){this.getDeepActiveElement()===document.body&&(this.clearHighlight(),this.focusComponent=null,this.focusProperty=null,inspector.propertiesPanel.render(SM.selectedEntity))}inputFocusChanged(e,t,n,i=null){this.initialized&&this.currentInput!==e&&(this.focusComponent=t,this.focusProperty=n,this.contextType=i,this.clearHighlight(),this.currentInput=e,e.type==="number"&&this.helpNumericInputElement(e,t,n),e.type==="color"&&this.helpColorInputElement(e,t,n))}},oi=new Sn;window.inputHandler=oi;window.loadingScreen=q;var En=class{constructor(){this.navigation=null,this.hierarchyPanel=null,this.propertiesPanel=null,this.spacePropsPanel=null,this.componentMenu=null,this.inventory=null,this.scriptEditors=null,this.lifecyclePanel=null,this.feedback=null,this.initialized=!1}async initialize(){if(log("init","File Server: "+window.fileServer),log("init","Ngrok URL: "+window.ngrokUrl),log("init","Repo URL: "+window.repoUrl),log("init","Block Service URL: "+window.blockServiceUrl),document.body.style.height="100vh",!this.initialized){log("init","Initializing Unity Scene Inspector...");try{q.updateStage("ui-panels",10,"Initializing navigation..."),this.navigation=new Kt,q.updateStage("scene-connect",0,"Connecting to Unity scene..."),await SM.initialize(),C.addChangeListener(async i=>{this.spacePropsPanel.render("changeManager"),this.propertiesPanel.render(SM.selectedEntity)}),this.hierarchyPanel=new Ft,this.propertiesPanel=new qt,this.spacePropsPanel=new Jt,this.componentMenu=new Gt,this.lifecyclePanel=new wt,this.inventory=new tn,window.inventoryInstance=this.inventory,this.feedback=new rn,this.scriptEditors=new Map,window.spacePropsPanel=this.spacePropsPanel,window.inventory=this.inventory,window.navigation=this.navigation,window.scriptEditors=this.scriptEditors,window.lifecyclePanel=this.lifecyclePanel,window.feedback=this.feedback,this.hierarchyPanel.render(),this.spacePropsPanel.render("initialization"),this.lifecyclePanel.render(),this.setupGlobalEventHandlers(),document.querySelectorAll(".console-toggle").forEach(i=>{i.addEventListener("mousedown",()=>{let s=i.dataset.toggle;window.logger.include[s]=!window.logger.include[s],i.classList.toggle("active",window.logger.include[s])})});let t=document.getElementById("clearShellBtn2");t&&t.addEventListener("mousedown",()=>{this.lifecyclePanel.clearShell()});let n=document.getElementById("refreshPanelBtn");n&&n.addEventListener("mousedown",()=>{this.lifecyclePanel.render()}),this.setupHistoryNotifications(),this.setupResizeHandlers(),this.loadOldTabs(),this.initialized=!0,log("init","Inspector initialized successfully"),await SM.executeStartupScripts("onInspectorLoaded")}catch(e){err("init","Failed to initialize inspector:",e),q.element?q.setError(e.message||"Failed to initialize the Scene Inspector"):this.showInitError(e)}}}setupHistoryNotifications(){let e=document.getElementById("historyNotifications");e||(e=document.createElement("div"),e.id="historyNotifications",document.body.appendChild(e));let t=document.getElementById("undoBtn"),n=document.getElementById("redoBtn");t&&t.addEventListener("mousedown",()=>{C&&C.undo()}),n&&n.addEventListener("mousedown",()=>{C&&C.redo()});let i=document.getElementById("saveBtn");i&&i.addEventListener("mousedown",()=>{SM.saveScene(),this.showNotification("Scene saved","success"),i.style.opacity=.5,i.style.pointerEvents="none"}),document.addEventListener("historyNotification",s=>{let{message:o,type:r}=s.detail;this.showNotification(o,r)}),document.addEventListener("historyChangeApplied",s=>{let o=s.detail.change;o.type==="spaceProperty"?this.spacePropsPanel.render("historyChangeApplied"):o.type==="component"||o.type==="entity"||o.type==="componentAdd"||o.type==="componentRemove"?this.propertiesPanel.render(SM.selectedEntity):(o.type==="entityAdd"||o.type==="entityRemove"||o.type==="entityMove")&&(this.hierarchyPanel.render(),this.propertiesPanel.render(SM.selectedEntity))})}showNotification(e,t="info"){let n=document.createElement("div");n.className=`history-notification ${t}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),10),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},3e3)}setupGlobalEventHandlers(){if(log("init","setting up global event handlers"),C.addChangeListener(e=>{(e.type==="entity"&&(e.property==="name"||e.property==="active")).length>0&&this.hierarchyPanel.render()}),document.addEventListener("entityPropertiesChanged",()=>{this.hierarchyPanel.render()}),window.addEventListener("open-script-editor",e=>{let t=e.detail,n=t.name,i=null;for(let[a,l]of this.scriptEditors)if(l.currentScript.name===t.name){i=l,e.detail.openInBackground||navigation.switchPage(l.pageId);return}let s=new nn(t);this.scriptEditors.set(n,s);let o=()=>{localStorage.setItem("openedEditors",Array.from(this.scriptEditors.keys()).join(","))};o(),s.open(e.detail.openInBackground);let r=s.close.bind(s);s.close=()=>{r(),this.scriptEditors.delete(n),o()}}),SM.scene){let e=async()=>{log("init","onLoad()"),window.isLocalHost&&(SM.scene.localUser={name:"Technocrat",uid:"abcdefghi",id:"abcdefghi",isLocal:!0,color:"#000000"},SM.scene.users={[SM.scene.localUser.id]:SM.scene.localUser}),await Ln(SM.scene.localUser),SM.setup(),q.updateStage("scene-connect",100,"Scene connected"),q.hide()};SM.scene.addEventListener("space-state-changed",n=>{}),SM.scene.On("loaded",async()=>{e()}),SM.scene.On("one-shot",async n=>{Pt.handleOneShot(n),document.dispatchEvent(new CustomEvent("oneshotReceived",{detail:n}))}),SM.scene.On("user-left",n=>{log("scene-event","[USER LEFT] fired",n)}),SM.scene.On("user-joined",n=>{SM.handleUserJoined(n)}),scene.On("button-released",n=>{SM.getAllScriptRunners().forEach(i=>{i.ctx.buttonReleased&&i.ctx.buttonReleased(n)})}),scene.On("button-pressed",n=>{SM.getAllScriptRunners().forEach(i=>{i.ctx.buttonPressed&&i.ctx.buttonPressed(n)})});let t=()=>{SM.scene.unityLoaded?(log("init","localUser =>",SM.scene.localUser),SM.scene.localUser||(log("init","No local user found, loading from localStorage"),ri(SM.scene)),e()):setTimeout(t,500)};t()}document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key==="f"){e.preventDefault();let t=document.getElementById("searchInput");t&&(t.focus(),t.select())}if(e.key==="Delete"&&SM.selectedEntity){let t=document.getElementById("deleteEntityBtn");t&&!e.target.matches("input, textarea")&&t.click()}if((e.ctrlKey||e.metaKey)&&e.key==="n"){e.preventDefault();let t=document.getElementById("addChildEntityBtn");t&&t.click()}})}loadOldTabs(){let e=localStorage.getItem("openedEditors");e&&e.split(",").forEach(t=>{let n=window.inventory.items[t];if(n&&n.itemType==="script"){let i=new CustomEvent("open-script-editor",{detail:{name:t,content:n.data,author:n.author,created:n.created,openInBackground:!0}});window.dispatchEvent(i)}})}setupResizeHandlers(){let e=document.querySelector(".hierarchy-panel"),t=document.querySelector(".properties-panel"),n=document.querySelector(".space-props-panel-container");e&&t&&this.makeResizable(e,"right",200,500),n&&t&&this.makeResizable(n,"left",300,600)}makeResizable(e,t,n,i){let s=document.createElement("div");s.className="panel-resizer",s.style.position="absolute",s.style[t]="0",s.style.top="0",s.style.bottom="0",s.style.width="4px",s.style.cursor="ew-resize",s.style.zIndex="100",e.style.position="relative",e.appendChild(s);let o=!1,r=0,a=0;s.addEventListener("mousedown",l=>{o=!0,r=l.clientX,a=e.offsetWidth,document.body.style.cursor="ew-resize",l.preventDefault()}),document.addEventListener("mousemove",l=>{if(!o)return;let d=t==="right"?l.clientX-r:r-l.clientX,p=Math.max(n,Math.min(i,a+d));e.style.width=p+"px",e.style.flexShrink="0"}),document.addEventListener("mouseup",()=>{o&&(o=!1,document.body.style.cursor="")})}showInitError(e){let t=document.querySelector(".inspector-container");t&&(t.innerHTML=`
                <div class="init-error" style="
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    height: 100%;
                    padding: 40px;
                    text-align: center;
                ">
                    <h2 style="color: #ff6b6b; margin-bottom: 20px;">Initialization Error</h2>
                    <p style="color: #888; margin-bottom: 10px;">Failed to initialize the Scene Inspector</p>
                    <p style="color: #666; font-size: 14px; max-width: 600px;">${e.message}</p>
                    <button onmousedown="location.reload()" style="
                        margin-top: 30px;
                        padding: 10px 20px;
                        background: #2a2a2a;
                        border: 1px solid #3a3a3a;
                        border-radius: 4px;
                        color: #e8e8e8;
                        cursor: pointer;
                    ">Reload</button>
                </div>
            `)}},Cn=new En;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Cn.initialize()):Cn.initialize();window.inspector=Cn;var ri=c=>{var e=JSON.parse(localStorage.getItem("localUser"));e&&(c.localUser=e,c.users={[e.uid]:e})},Ln=async c=>{if(!c)return await new Promise(e=>setTimeout(e,1e3)),await Ln(SM.scene.localUser);localStorage.setItem("localUser",JSON.stringify({name:c.name,uid:c.uid,isLocal:c.isLocal,color:c.color}))};})();
//# sourceMappingURL=tippy.min.js.map
