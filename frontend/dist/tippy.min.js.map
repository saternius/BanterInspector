{
  "version": 3,
  "sources": ["../js/utils.js", "../js/pages/world-inspector/loading-screen.js", "../js/entity-components/entity-component.js", "../js/entity-components/transform.js", "../js/entity.js", "../js/entity-components/scriptrunner.js", "../js/entity-components/script.js", "../js/entity-components/meshes/mesh-component.js", "../js/entity-components/meshes/geometry.js", "../js/entity-components/materials/material.js", "../js/entity-components/physics/rigidbody.js", "../js/entity-components/media/audio-source.js", "../js/entity-components/media/video-player.js", "../js/entity-components/meshes/text.js", "../js/entity-components/physics/box-collider.js", "../js/entity-components/physics/sphere-collider.js", "../js/entity-components/physics/capsule-collider.js", "../js/entity-components/physics/mesh-collider.js", "../js/entity-components/misc/billboard.js", "../js/entity-components/behaviors/grab-handle.js", "../js/entity-components/behaviors/synced-object.js", "../js/entity-components/materials/physic-material.js", "../js/entity-components/misc/mirror.js", "../js/entity-components/misc/browser.js", "../js/entity-components/behaviors/held-events.js", "../js/entity-components/behaviors/attached-object.js", "../js/entity-components/media/gltf.js", "../js/entity-components/misc/asset-bundle.js", "../js/entity-components/misc/portal.js", "../js/entity-components/behaviors/collider-events.js", "../js/entity-components/meshes/box.js", "../js/entity-components/meshes/circle.js", "../js/entity-components/meshes/cone.js", "../js/entity-components/meshes/cylinder.js", "../js/entity-components/meshes/plane.js", "../js/entity-components/meshes/ring.js", "../js/entity-components/meshes/sphere.js", "../js/entity-components/meshes/torus.js", "../js/entity-components/meshes/inverted-mesh.js", "../js/entity-components/misc/kit-item.js", "../js/entity-components/misc/street-view.js", "../js/entity-components/misc/world-object.js", "../js/entity-components/physics/configurable-joint.js", "../js/entity-components/physics/joint-component.js", "../js/entity-components/physics/character-joint.js", "../js/entity-components/physics/fixed-joint.js", "../js/entity-components/physics/hinge-joint.js", "../js/entity-components/physics/spring-joint.js", "../js/entity-components/behaviors/grabbable.js", "../js/entity-components/misc/ui-panel.js", "../js/entity-components/misc/avatar-pedestal.js", "../js/entity-components/meshes/torus-knot.js", "../js/entity-components/meshes/parametric-surface.js", "../js/entity-components/meshes/apple.js", "../js/entity-components/meshes/catenoid.js", "../js/entity-components/meshes/fermet.js", "../js/entity-components/meshes/helicoid.js", "../js/entity-components/meshes/horn.js", "../js/entity-components/meshes/klein.js", "../js/entity-components/meshes/mobius.js", "../js/entity-components/meshes/mobius3d.js", "../js/entity-components/meshes/natica.js", "../js/entity-components/meshes/pillow.js", "../js/entity-components/meshes/scherk.js", "../js/entity-components/meshes/snail.js", "../js/entity-components/meshes/spiral.js", "../js/entity-components/meshes/spring.js", "../js/entity-components/misc/light.js", "../js/entity-components/index.js", "../js/scene-manager.js", "../js/firebase-auth-helper.js", "../js/networking.js", "../js/change-manager.js", "../js/lifecycle-manager.js", "../js/change-types.js", "../js/pages/world-inspector/hierarchy-panel.js", "../js/pages/world-inspector/properties-panel/scale-lock-handler.js", "../js/pages/world-inspector/properties-panel/transform-handler.js", "../js/pages/world-inspector/properties-panel/property-updater.js", "../js/pages/world-inspector/properties-panel/vector-color-inputs.js", "../js/pages/world-inspector/properties-panel/property-input-renderer.js", "../js/pages/world-inspector/properties-panel/entity-properties-renderer.js", "../js/pages/world-inspector/properties-panel/component-renderer.js", "../js/pages/world-inspector/properties-panel/scriptrunner-renderer.js", "../js/pages/world-inspector/properties-panel/scriptasset-renderer.js", "../js/pages/world-inspector/properties-panel/index.js", "../js/pages/world-inspector/sync-status-comparator.js", "../js/pages/world-inspector/space-props-panel.js", "../js/pages/world-inspector/component-menu.js", "../js/pages/world-inspector/lifecycle-panel.js", "../js/navigation.js", "../js/pages/inventory/inventory-api.js", "../js/pages/inventory/inventory-websocket.js", "../js/pages/inventory/inventory-firebase.js", "../js/pages/inventory/emoji_categories.js", "../js/pages/inventory/inventory-ui.js", "../js/pages/inventory/inventory-file-handler.js", "../js/pages/inventory/inventory.js", "../js/pages/script-editor/script-editor.js", "../js/pages/feedback/statement-block-editor.js", "../js/pages/feedback/feedback-api.js", "../js/pages/feedback/feedback.js", "../js/input-handler.js", "../js/bundle-entry.js"],
  "sourcesContent": ["/**\n * Utility Functions\n * Common helper functions used across the inspector\n */\n\n/**\n * Format property name for display\n * Converts camelCase to Title Case\n */\nexport function formatPropertyName(name) {\n    return name\n        .replace(/([A-Z])/g, ' $1')\n        .replace(/^./, str => str.toUpperCase())\n        .trim();\n}\n\n/**\n * Convert RGB values to hex color\n */\nexport function rgbToHex(r, g, b) {\n    const toHex = (n) => {\n        const hex = Math.round(Math.max(0, Math.min(255, n))).toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    };\n    return '#' + toHex(r) + toHex(g) + toHex(b);\n}\n\n/**\n * Convert hex color to RGB values\n */\nexport function hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : { r: 0, g: 0, b: 0 };\n}\n\n/**\n * Check if value is a Vector3-like object\n */\nexport function isVector3Object(value) {\n    return value && \n           typeof value === 'object' && \n           'x' in value && \n           'y' in value && \n           'z' in value &&\n           Object.keys(value).length === 3;\n}\n\n/**\n * Check if value is a Vector4-like object\n */\nexport function isVector4Object(value) {\n    return value && \n           typeof value === 'object' && \n           'x' in value && \n           'y' in value && \n           'z' in value &&\n           'w' in value &&\n           Object.keys(value).length === 4;\n}\n\n/**\n * Check if value is a Quaternion (used for rotations)\n */\nexport function isQuaternion(value) {\n    return value && \n           typeof value === 'object' && \n           'x' in value && \n           'y' in value && \n           'z' in value &&\n           'w' in value &&\n           typeof value.x === 'number' &&\n           typeof value.y === 'number' &&\n           typeof value.z === 'number' &&\n           typeof value.w === 'number';\n}\n\n/**\n * Convert Quaternion to Euler angles (in degrees)\n */\nexport function quaternionToEuler(q) {\n    // Normalize quaternion\n    const norm = Math.sqrt(q.x * q.x + q.y * q.y + q.z * q.z + q.w * q.w);\n    const x = q.x / norm;\n    const y = q.y / norm;\n    const z = q.z / norm;\n    const w = q.w / norm;\n    \n    // Convert to Euler angles using ZYX order (Unity's default)\n    const sinr_cosp = 2 * (w * x + y * z);\n    const cosr_cosp = 1 - 2 * (x * x + y * y);\n    const roll = Math.atan2(sinr_cosp, cosr_cosp);\n    \n    const sinp = 2 * (w * y - z * x);\n    let pitch;\n    if (Math.abs(sinp) >= 1) {\n        pitch = Math.sign(sinp) * Math.PI / 2; // Use 90 degrees if out of range\n    } else {\n        pitch = Math.asin(sinp);\n    }\n    \n    const siny_cosp = 2 * (w * z + x * y);\n    const cosy_cosp = 1 - 2 * (y * y + z * z);\n    const yaw = Math.atan2(siny_cosp, cosy_cosp);\n    \n    // Convert radians to degrees\n    return {\n        x: pitch * 180 / Math.PI,\n        y: yaw * 180 / Math.PI,\n        z: roll * 180 / Math.PI\n    };\n}\nwindow.quaternionToEuler = quaternionToEuler;\n/**\n * Convert Euler angles (in degrees) to Quaternion\n */\nexport function eulerToQuaternion(euler) {\n    // Convert degrees to radians\n    const pitch = euler.x * Math.PI / 180;\n    const yaw = euler.y * Math.PI / 180;\n    const roll = euler.z * Math.PI / 180;\n    \n    // Calculate quaternion using ZYX order (Unity's default)\n    const cy = Math.cos(yaw * 0.5);\n    const sy = Math.sin(yaw * 0.5);\n    const cp = Math.cos(pitch * 0.5);\n    const sp = Math.sin(pitch * 0.5);\n    const cr = Math.cos(roll * 0.5);\n    const sr = Math.sin(roll * 0.5);\n    \n    return {\n        w: cr * cp * cy + sr * sp * sy,\n        x: sr * cp * cy - cr * sp * sy,\n        y: cr * sp * cy + sr * cp * sy,\n        z: cr * cp * sy - sr * sp * cy\n    };\n}\nwindow.eulerToQuaternion = eulerToQuaternion;\n/**\n * Check if value is a Color object (RGBA)\n */\nexport function isColorObject(value) {\n    return value && \n           typeof value === 'object' && \n           'r' in value && \n           'g' in value && \n           'b' in value;\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone(obj, exclude=[], remove_all_underscores=true) {\n    if (obj === null || typeof obj !== 'object') {\n        return obj;\n    }\n    \n    if (obj instanceof Date) {\n        return new Date(obj.getTime());\n    }\n    \n    if (obj instanceof Array) {\n        return obj.map(item => deepClone(item, exclude));\n    }\n    \n    const clonedObj = {};\n    for (const key in obj) {\n        if(exclude.includes(key)) continue;\n        if(remove_all_underscores && key.startsWith(\"_\")) continue;\n        if (obj.hasOwnProperty(key)) {\n            clonedObj[key] = deepClone(obj[key], exclude);\n        }\n    }\n    \n    return clonedObj;\n}\n\n/**\n * Debounce function execution\n */\nexport function debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n        const later = () => {\n            clearTimeout(timeout);\n            func(...args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\n/**\n * Generate unique ID\n */\nexport function generateId(prefix = 'id') {\n    return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Clamp a number between min and max\n */\nexport function clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Linear interpolation\n */\nexport function lerp(start, end, t) {\n    return start + (end - start) * clamp(t, 0, 1);\n}\n\n/**\n * Format number with fixed decimal places\n */\nexport function formatNumber(value, decimals = 3) {\n    return parseFloat(value.toFixed(decimals));\n}\n\n/**\n * Parse string value to appropriate type\n */\nexport function parseValue(value) {\n    if (typeof value !== 'string') return value;\n    \n    value = value.trim();\n    \n    // Boolean\n    if (value === 'true') return true;\n    if (value === 'false') return false;\n    \n    // Number\n    if (!isNaN(value) && value !== '') {\n        return parseFloat(value);\n    }\n    \n    // JSON\n    if (value.startsWith('{') || value.startsWith('[')) {\n        try {\n            return JSON.parse(value);\n        } catch (e) {\n            // Return as string if parse fails\n        }\n    }\n    \n    return value;\n}\n\n/**\n * Get nested property value from object\n */\nexport function getNestedProperty(obj, path) {\n    return path.split('.').reduce((current, key) => current?.[key], obj);\n}\n\n/**\n * Set nested property value in object\n */\nexport function setNestedProperty(obj, path, value) {\n    const keys = path.split('.');\n    const lastKey = keys.pop();\n    const target = keys.reduce((current, key) => {\n        if (!current[key]) current[key] = {};\n        return current[key];\n    }, obj);\n    target[lastKey] = value;\n}\n\n/**\n * Compare two objects for equality\n */\nexport function deepEqual(obj1, obj2) {\n    if (obj1 === obj2) return true;\n    \n    if (obj1 == null || obj2 == null) return false;\n    \n    if (typeof obj1 !== typeof obj2) return false;\n    \n    if (typeof obj1 !== 'object') return obj1 === obj2;\n    \n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    \n    if (keys1.length !== keys2.length) return false;\n    \n    for (const key of keys1) {\n        if (!keys2.includes(key)) return false;\n        if (!deepEqual(obj1[key], obj2[key])) return false;\n    }\n    \n    return true;\n}\n\n/**\n * Throttle function execution\n */\nexport function throttle(func, limit) {\n    let inThrottle;\n    return function(...args) {\n        if (!inThrottle) {\n            func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => inThrottle = false, limit);\n        }\n    };\n}\n\n/**\n * Create a safe function name from a string\n */\nexport function toSafeName(str) {\n    return str\n        .replace(/[^a-zA-Z0-9_]/g, '_')\n        .replace(/^(\\d)/, '_$1')\n        .replace(/_+/g, '_')\n        .replace(/^_|_$/g, '');\n}\n\n/**\n * Get component icon based on type\n */\nexport function getComponentIcon(componentType) {\n    const icons = {\n        'Transform': '\u22B9',\n        'Rigidbody': '\u269B',\n        'BoxCollider': '\u25A1',\n        'SphereCollider': '\u25CB',\n        'CapsuleCollider': '\u25EF',\n        'MeshCollider': '\u25A3',\n        'Geometry': '\u25C6',\n        'Material': '\uD83C\uDFA8',\n        'Text': 'T',\n        'AudioSource': '\uD83D\uDD0A',\n        'VideoPlayer': '\u25B6',\n        'Browser': '\uD83C\uDF10',\n        'GLTF': '\uD83D\uDCE6',\n        'AssetBundle': '\uD83D\uDCC1',\n        'GrabHandle': '\u270B',\n        'HeldEvents': '\uD83D\uDC46',\n        'AttachedObject': '\uD83D\uDCCC',\n        'SyncedObject': '\uD83D\uDD04',\n        'Billboard': '\uD83D\uDC41',\n        'Mirror': '\uD83E\uDE9E',\n        'Portal': '\uD83C\uDF00'\n    };\n    \n    return icons[componentType] || '\u25CF';\n}\n\nexport function parseBest(str) {\n    if (typeof str !== 'string') return str; // Already not a string\n\n    // Trim whitespace\n    const trimmed = str.trim();\n\n    // Handle booleans\n    if (trimmed.toLowerCase() === \"true\") return true;\n    if (trimmed.toLowerCase() === \"false\") return false;\n\n    // Handle null\n    if (trimmed.toLowerCase() === \"null\") return null;\n\n    // Handle undefined\n    if (trimmed.toLowerCase() === \"undefined\") return undefined;\n\n    // Handle numbers (int, float, negative, exponential)\n    if (!isNaN(trimmed) && trimmed !== '') {\n        return Number(trimmed);\n    }\n\n    // Handle JSON objects/arrays\n    if ((trimmed.startsWith(\"{\") && trimmed.endsWith(\"}\")) ||\n        (trimmed.startsWith(\"[\") && trimmed.endsWith(\"]\"))) {\n        try {\n            return JSON.parse(trimmed);\n        } catch (e) {\n            // If invalid JSON, just return as string\n        }\n    }\n\n    // Default: return the original string\n    return str;\n}\n\n/**\n * Custom confirm modal to replace browser's confirm()\n * Returns a promise that resolves to true/false based on user choice\n */\nexport function confirm(message) {\n    return new Promise((resolve) => {\n        // Create modal container\n        const modal = document.createElement('div');\n        modal.className = 'custom-confirm-modal';\n        modal.style.cssText = `\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.7);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 100000;\n        `;\n        \n        // Create modal content\n        const modalContent = document.createElement('div');\n        modalContent.style.cssText = `\n            background: #2a2a2a;\n            border: 1px solid #444;\n            border-radius: 8px;\n            padding: 20px;\n            max-width: 400px;\n            width: 90%;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\n        `;\n        \n        // Add message\n        const messageDiv = document.createElement('div');\n        messageDiv.textContent = message;\n        messageDiv.style.cssText = `\n            color: #fff;\n            margin-bottom: 20px;\n            font-size: 14px;\n            line-height: 1.5;\n        `;\n        modalContent.appendChild(messageDiv);\n        \n        // Create button container\n        const buttonContainer = document.createElement('div');\n        buttonContainer.style.cssText = `\n            display: flex;\n            gap: 10px;\n            justify-content: flex-end;\n        `;\n        \n        // Create Cancel button\n        const cancelBtn = document.createElement('button');\n        cancelBtn.textContent = 'Cancel';\n        cancelBtn.style.cssText = `\n            padding: 8px 16px;\n            background: #444;\n            color: #fff;\n            border: 1px solid #555;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 13px;\n        `;\n        cancelBtn.onmouseover = () => cancelBtn.style.background = '#555';\n        cancelBtn.onmouseout = () => cancelBtn.style.background = '#444';\n        \n        // Create OK button\n        const okBtn = document.createElement('button');\n        okBtn.textContent = 'OK';\n        okBtn.style.cssText = `\n            padding: 8px 16px;\n            background: #0066cc;\n            color: #fff;\n            border: 1px solid #0077dd;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 13px;\n        `;\n        okBtn.onmouseover = () => okBtn.style.background = '#0077dd';\n        okBtn.onmouseout = () => okBtn.style.background = '#0066cc';\n        \n        // Add click handlers\n        cancelBtn.onmousedown = () => {\n            document.body.removeChild(modal);\n            resolve(false);\n        };\n        \n        okBtn.onmousedown = () => {\n            document.body.removeChild(modal);\n            resolve(true);\n        };\n        \n        // Handle Escape key\n        const handleEscape = (e) => {\n            if (e.key === 'Escape') {\n                document.body.removeChild(modal);\n                document.removeEventListener('keydown', handleEscape);\n                resolve(false);\n            }\n        };\n        document.addEventListener('keydown', handleEscape);\n        \n        // Assemble modal\n        buttonContainer.appendChild(cancelBtn);\n        buttonContainer.appendChild(okBtn);\n        modalContent.appendChild(buttonContainer);\n        modal.appendChild(modalContent);\n        document.body.appendChild(modal);\n        \n        // Focus OK button for keyboard navigation\n        okBtn.focus();\n    });\n}\n\nexport function showNotification(message) {\n    const notification = document.createElement('div');\n    notification.className = 'editor-notification';\n    notification.textContent = message;\n    document.body.appendChild(notification);\n    \n    setTimeout(() => {\n        notification.classList.add('show');\n    }, 10);\n    \n    setTimeout(() => {\n        notification.classList.remove('show');\n        setTimeout(() => {\n            notification.remove();\n        }, 300);\n    }, 2000);\n}\n\n\n\nexport function appendToShell(tag, id, str){\n    if(!window.logger || !window.logger.include[tag]) return;\n    \n    let shellEl = document.getElementById(\"lifecycleShell\");\n    if(!shellEl) return;\n\n    const children = shellEl.children;\n    if (children.length >= 500) {\n        shellEl.removeChild(children[0]);\n    }\n\n\n    const div = document.createElement('div');\n    div.className = 'change-item';\n    div.style.whiteSpace = 'pre-wrap';\n    div.style.fontFamily = 'monospace';\n\n    let color = \"white\";\n    let subject = tag.toUpperCase();\n    \n    if(tag === \"command\"){\n        color = window.logger.getTagColor(tag);\n        div.id = id\n        subject = \"COMMAND\";\n        div.innerHTML = `${new Date().toTimeString().split(' ')[0].slice(3, 8)} <span style=\"color: ${color}; font-weight: bold\">[${subject}]:</span> ${str}`;\n    }\n\n    if(tag === \"oneShot\"){\n        color = getUserColor(id);\n        subject = id;\n        let innerHTML = `${new Date().toTimeString().split(' ')[0].slice(3, 8)} <span style=\"color: ${color}; font-weight: bold\">[${subject}] </span> `;\n        let items = str.split(\"\u00B6\");\n        let color_arr = [\"#ffaa00\", \"#88ddff\", \"#ff88ff\", \"#ff4444\", \"#4488ff\", \"#ff44ff\", \"#ffff44\", \"#444444\", \"#ffffff\"];\n        let style_arr = [\"font-weight: bold\", \"font-weight: normal\", \"font-weight: italic\", \"font-weight: bold italic\", \"font-weight: bold normal\", \"font-weight: normal bold\", \"font-weight: bold normal italic\", \"font-weight: normal bold italic\"];\n        let i = 0;\n        items.forEach(item=>{\n            innerHTML += `<span style=\"color: ${color_arr[i]}; ${style_arr[i]}\">${item} </span>`;\n            i++;\n        });\n        div.innerHTML = innerHTML;\n    }\n    \n    \n\n    shellEl.appendChild(div);\n    shellEl.scrollTop = shellEl.scrollHeight;\n    \n}\nexport class Logger{\n    constructor(){\n        this.include = {\n            error: false,\n            command: false,\n            script: false,\n            oneShot: true,\n            spaceProps: false\n        }\n        this.broadcastTags = [];\n        this.remoteTagsExcluded = [];\n        this.tagColors = {};\n        // Store original console methods\n        this.originalLog = console.log.bind(console);\n        this.originalError = console.error.bind(console);\n        this.active = true;\n    }\n\n    hashStringToColor(str) {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            hash = str.charCodeAt(i) + ((hash << 5) - hash);\n        }\n        \n        const hue = Math.abs(hash % 360);\n        const saturation = 60 + (Math.abs(hash >> 8) % 30);\n        const lightness = 50 + (Math.abs(hash >> 16) % 30);\n        \n        return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n    }\n\n    getTagColor(tag) {\n        if (!this.tagColors[tag]) {\n            this.tagColors[tag] = this.hashStringToColor(tag);\n        }\n        return this.tagColors[tag];\n    }\n\n    getCallerInfo() {\n        const stack = new Error().stack;\n        const stackLines = stack.split('\\n');\n        // Skip lines until we find one that's not part of the logger\n        for (let i = 2; i < stackLines.length; i++) {\n            const line = stackLines[i];\n            // Skip internal logger methods, window.log/err bindings, and getCallerInfo\n            if (!line.includes('Logger.') && \n                !line.includes('bound ') && \n                !line.includes('getCallerInfo') &&\n                !line.includes('window.log') &&\n                !line.includes('window.err')) {\n                // Extract file path and line number\n                const match = line.match(/(?:at\\s+)?(?:.*?\\s+\\()?(.+?):(\\d+):(\\d+)\\)?$/);\n                if (match) {\n                    const filePath = match[1];\n                    const lineNum = match[2];\n                    const colNum = match[3];\n                    // Get just the filename from the path\n                    const fileName = filePath.split('/').pop();\n                    return { fileName, lineNum, colNum, fullPath: filePath };\n                }\n            }\n        }\n        return null;\n    }\n\n    // Create a proxy function that preserves the caller's stack\n    createLogProxy(tag, isError = false) {\n        const color = this.getTagColor(tag);\n        const logger = this;\n        \n        // Return a function that will be called directly from the caller's context\n        return function(...args) {\n            // Direct console call preserves the stack trace\n            if (isError) {\n                console.error(`%c[${tag.toUpperCase()}]:%c`, `color: ${color}; font-weight: bold`, 'color: inherit', ...args);\n            } else {\n                console.log(`%c[${tag.toUpperCase()}]:%c`, `color: ${color}; font-weight: bold`, 'color: inherit', ...args);\n            }\n            \n            // Handle lifecycle shell separately\n            if(logger.include[tag]){\n                const callerInfo = logger.getCallerInfo();\n                const message = args.map(a=>(typeof a === \"object\" ? JSON.stringify(a) : a)).join(\" \");\n                const locationInfo = callerInfo ? ` (${callerInfo.fileName}:${callerInfo.lineNum})` : '';\n                appendToShell(isError ? \"error\" : tag, generateId(isError ? 'error' : 'log'), message + locationInfo);\n            }\n        };\n    }\n\n    log(tag, ...args){\n        // Create and immediately call the proxy to preserve stack\n        this.createLogProxy(tag, false)(...args);\n    }\n\n    err(tag, ...args){\n        // Create and immediately call the proxy to preserve stack\n        this.createLogProxy(tag, true)(...args);\n    }\n}\n\nwindow.logger = new Logger();\n\n// Store original console methods\nconst _originalLog = console.log;\nconst _originalError = console.error;\n\n// Create custom log that shows correct source location\nwindow.logFrequency = {};\nwindow.log = function(tag, ...args) {\n    if(!window.logger.active) return;\n    const color = window.logger.getTagColor(tag);\n    if(!window.logFrequency[tag]){\n        window.logFrequency[tag] = 0;\n    }\n    window.logFrequency[tag]++;\n    const callerInfo = window.logger.getCallerInfo();\n\n    // Truncate excessively long arguments for console display\n    const MAX_ARG_LENGTH = 1000;\n    const truncatedArgs = args.map(arg => {\n        if (typeof arg === 'string' && arg.length > MAX_ARG_LENGTH) {\n            return arg.substring(0, MAX_ARG_LENGTH) + '... [truncated]';\n        }\n        return arg;\n    });\n\n    // Create nicely formatted output with inline location\n    if (callerInfo) {\n        console.groupCollapsed(\n            `%c[${tag.toUpperCase()}]%c @ ${callerInfo.fileName}:${callerInfo.lineNum}%c`,\n            `color: ${color}; font-weight: bold`,\n            'color: #888; font-size: 0.9em',\n            'color: inherit',\n            ...truncatedArgs\n        );\n        console.trace('Stack trace');\n        console.groupEnd();\n    } else {\n        _originalLog.apply(console, [`%c[${tag.toUpperCase()}]:%c`, `color: ${color}; font-weight: bold`, 'color: inherit', ...truncatedArgs]);\n    }\n\n    if(window.logger.broadcastEvent && window.logger.broadcastTags.includes(tag)){\n        let msg = {\n            tag: tag,\n            color: color,\n            truncatedArgs: truncatedArgs,\n            fileName: callerInfo.fileName,\n            lineNum: callerInfo.lineNum\n        }\n        window.dispatchEvent(new CustomEvent('log-event', {detail: msg}));\n        if(window.logger.remote && !window.logger.remoteTagsExcluded.includes(tag)){\n            net.sendOneShot(\"log_event\u00B6\"+JSON.stringify(msg));\n        }\n    }\n\n    // Handle lifecycle shell\n    if(window.logger.include[tag]){\n        const MAX_MESSAGE_LENGTH = 5000;\n        let message = args.map(a=>{\n            if(typeof a === \"object\") {\n                try {\n                    const str = JSON.stringify(a);\n                    return str && str.length > MAX_ARG_LENGTH ? str.substring(0, MAX_ARG_LENGTH) + '...[truncated]' : str;\n                } catch(e) {\n                    return '[circular object]';\n                }\n            }\n            const str = String(a);\n            return str.length > MAX_ARG_LENGTH ? str.substring(0, MAX_ARG_LENGTH) + '...[truncated]' : str;\n        }).join(\" \");\n\n        // Final truncation check for complete message\n        if (message.length > MAX_MESSAGE_LENGTH) {\n            message = message.substring(0, MAX_MESSAGE_LENGTH) + '... [message truncated]';\n        }\n\n        const locationInfo = callerInfo ? ` (${callerInfo.fileName}:${callerInfo.lineNum})` : '';\n        appendToShell(tag, generateId('log'), message + locationInfo);\n    }\n};\n\nwindow.err = function(tag, ...args) {\n    const color = window.logger.getTagColor(tag);\n    const callerInfo = window.logger.getCallerInfo();\n\n    // Truncate excessively long arguments for console display\n    const MAX_ARG_LENGTH = 1000;\n    const truncatedArgs = args.map(arg => {\n        if (typeof arg === 'string' && arg.length > MAX_ARG_LENGTH) {\n            return arg.substring(0, MAX_ARG_LENGTH) + '... [truncated]';\n        } else if (typeof arg === 'object') {\n            try {\n                const str = JSON.stringify(arg);\n                if (str && str.length > MAX_ARG_LENGTH) {\n                    return str.substring(0, MAX_ARG_LENGTH) + '... [truncated object]';\n                }\n                return arg;\n            } catch(e) {\n                return '[circular or complex object]';\n            }\n        }\n        return arg;\n    });\n\n    // Create nicely formatted output with inline location\n    if (callerInfo) {\n        console.groupCollapsed(\n            `%c[${tag.toUpperCase()}]%c @ ${callerInfo.fileName}:${callerInfo.lineNum}%c`,\n            `color: ${color}; font-weight: bold`,\n            'color: #f88; font-size: 0.9em',\n            'color: inherit',\n            ...truncatedArgs\n        );\n        console.trace('Stack trace');\n        console.groupEnd();\n    } else {\n        _originalError.apply(console, [`%c[${tag.toUpperCase()}]:%c`, `color: ${color}; font-weight: bold`, 'color: inherit', ...truncatedArgs]);\n    }\n\n    // Handle lifecycle shell\n    if(window.logger.include[tag]){\n        const MAX_MESSAGE_LENGTH = 5000;\n        let message = args.map(a=>{\n            if(typeof a === \"object\") {\n                try {\n                    const str = JSON.stringify(a);\n                    return str && str.length > MAX_ARG_LENGTH ? str.substring(0, MAX_ARG_LENGTH) + '...[truncated]' : str;\n                } catch(e) {\n                    return '[circular object]';\n                }\n            }\n            const str = String(a);\n            return str.length > MAX_ARG_LENGTH ? str.substring(0, MAX_ARG_LENGTH) + '...[truncated]' : str;\n        }).join(\" \");\n\n        // Final truncation check for complete message\n        if (message.length > MAX_MESSAGE_LENGTH) {\n            message = message.substring(0, MAX_MESSAGE_LENGTH) + '... [message truncated]';\n        }\n\n        const locationInfo = callerInfo ? ` (${callerInfo.fileName}:${callerInfo.lineNum})` : '';\n        appendToShell(\"error\", generateId('error'), message + locationInfo);\n    }\n};\n\nwindow.showNotification = showNotification;\n\nwindow.TransformOps = {\n    Add: (vec1, vec2)=>{\n        return {\n            x: vec1.x + vec2.x,\n            y: vec1.y + vec2.y,\n            z: vec1.z + vec2.z\n        }\n    },\n    Subtract: (vec1, vec2)=>{\n        return {\n            x: vec1.x - vec2.x,\n            y: vec1.y - vec2.y,\n            z: vec1.z - vec2.z\n        }\n    },\n    Multiply: (vec1, vec2)=>{\n        if(typeof vec2 === \"number\"){\n            return {\n                x: vec1.x * vec2,\n                y: vec1.y * vec2,\n                z: vec1.z * vec2\n            }\n        }\n        if(typeof vec1 === \"number\"){\n            return {\n                x: vec1 * vec2.x,\n                y: vec1 * vec2.y,\n                z: vec1 * vec2.z\n            }\n        }\n        \n        return {\n            x: vec1.x * vec2.x,\n            y: vec1.y * vec2.y,\n            z: vec1.z * vec2.z\n        }\n    },\n    Divide: (vec1, vec2)=>{\n        if(typeof vec2 === \"number\"){\n            return {\n                x: vec1.x / vec2,\n                y: vec1.y / vec2,\n                z: vec1.z / vec2\n            }\n        }\n        if(typeof vec1 === \"number\"){\n            return {\n                x: vec1 / vec2.x,\n                y: vec1 / vec2.y,\n                z: vec1 / vec2.z\n            }\n        }\n        return {\n            x: vec1.x / vec2.x,\n            y: vec1.y / vec2.y,\n            z: vec1.z / vec2.z\n        }\n    }\n}\n\n\n\nfunction qNormalize(q) {\n    const n = Math.hypot(q.x, q.y, q.z, q.w) || 1;\n    return { x: q.x / n, y: q.y / n, z: q.z / n, w: q.w / n };\n}\nfunction qConjugate(q) {\n    return { x: -q.x, y: -q.y, z: -q.z, w: q.w };\n}\nfunction qMul(a, b) {\n    return {\n        w: a.w*b.w - a.x*b.x - a.y*b.y - a.z*b.z,\n        x: a.w*b.x + a.x*b.w + a.y*b.z - a.z*b.y,\n        y: a.w*b.y - a.x*b.z + a.y*b.w + a.z*b.x,\n        z: a.w*b.z + a.x*b.y - a.y*b.x + a.z*b.w,\n    };\n}\n\nfunction normalizeVec3(v){\n    const n = Math.hypot(v.x, v.y, v.z) || 1;\n    return { x: v.x/n, y: v.y/n, z: v.z/n };\n}\n\nfunction qTwistAroundAxis(qIn, axis) {\n    const q = qNormalize(qIn);\n    const a = normalizeVec3(axis);\n    // project vector part of q onto axis\n    const dot = q.x*a.x + q.y*a.y + q.z*a.z;\n    const vProj = { x: a.x*dot, y: a.y*dot, z: a.z*dot };\n    const twist = qNormalize({ x: vProj.x, y: vProj.y, z: vProj.z, w: q.w });\n    // If twist became degenerate (can happen for 180\u00B0 with opposite sign), fix sign\n    // so it represents the shortest-arc rotation about axis:\n    if (twist.w < 0) {\n      return { x: -twist.x, y: -twist.y, z: -twist.z, w: -twist.w };\n    }\n    return twist;\n}\n\nfunction qLockAxis(qIn, axis) {\n    const twist = qTwistAroundAxis(qIn, axis);\n    return qNormalize(qMul(qIn, qConjugate(twist)));\n}\n\nfunction qKeepOnlyAxis(qIn, axis) {\n    return qTwistAroundAxis(qIn, axis);\n}\n\nconst X_AXIS = { x: 1, y: 0, z: 0 };\nconst Y_AXIS = { x: 0, y: 1, z: 0 };\nconst Z_AXIS = { x: 0, y: 0, z: 1 };\n\nwindow.lockQuaternionAxes = (q, lockX = false, lockY = false, lockZ = false) =>{\n    q = qNormalize(q);\n    if (lockX) q = qLockAxis(q, X_AXIS);\n    if (lockY) q = qLockAxis(q, Y_AXIS);\n    if (lockZ) q = qLockAxis(q, Z_AXIS);\n    return qNormalize(q);\n}\n\n/**\n * Decode encoded space property key\n * Space properties use special encoding for component-specific state:\n * Pattern: __<EntityName>/<PropertyPath>:<ComponentId>\n *\n * Examples:\n *   \"__BanterMaterial_9677/color:component\"\n *   \"__ScriptRunner_2905/file:component\"\n *   \"__Gravestone/Transform/localScale:50546_Transform\"\n *\n * @param {string} encodedKey - The encoded space property key\n * @returns {Object|null} Decoded object with { entityName, propertyPath, componentId, isEncoded }\n *                        Returns null if key is not in encoded format\n */\nexport function decodeSpacePropertyKey(encodedKey) {\n    if (typeof encodedKey !== 'string') {\n        return null;\n    }\n\n    // Check if key starts with double underscore (encoded format)\n    if (!encodedKey.startsWith('__')) {\n        return {\n            isEncoded: false,\n            raw: encodedKey\n        };\n    }\n\n    // Pattern: __<EntityName>/<PropertyPath>:<ComponentId>\n    // We need to find the last ':' to split componentId\n    // and the first '/' to split entityName from propertyPath\n\n    const withoutPrefix = encodedKey.substring(2); // Remove '__'\n\n    // Find the last ':' which separates componentId\n    const lastColonIndex = withoutPrefix.lastIndexOf(':');\n\n    if (lastColonIndex === -1) {\n        // No colon found, might be malformed\n        return {\n            isEncoded: true,\n            raw: encodedKey,\n            entityName: withoutPrefix,\n            propertyPath: null,\n            componentId: null,\n            malformed: true\n        };\n    }\n\n    const componentId = withoutPrefix.substring(lastColonIndex + 1);\n    const entityAndProperty = withoutPrefix.substring(0, lastColonIndex);\n\n    // Find the first '/' which separates entity name from property path\n    const firstSlashIndex = entityAndProperty.indexOf('/');\n\n    if (firstSlashIndex === -1) {\n        // No slash found, might be malformed\n        return {\n            isEncoded: true,\n            raw: encodedKey,\n            entityName: entityAndProperty,\n            propertyPath: null,\n            componentId: componentId,\n            malformed: true\n        };\n    }\n\n    const entityName = entityAndProperty.substring(0, firstSlashIndex);\n    const propertyPath = entityAndProperty.substring(firstSlashIndex + 1);\n\n    return {\n        isEncoded: true,\n        raw: encodedKey,\n        entityName: entityName,\n        propertyPath: propertyPath,\n        componentId: componentId,\n        malformed: false\n    };\n}\n\n/**\n * Encode a space property key for component-specific state\n * Creates the special encoding format: __<EntityName>/<PropertyPath>:<ComponentId>\n *\n * @param {string} entityName - Name of the entity\n * @param {string} propertyPath - Path to the property (e.g., \"Transform/localScale\" or \"color\")\n * @param {string} componentId - Component ID (or \"component\" for generic component reference)\n * @returns {string} Encoded space property key\n */\nexport function encodeSpacePropertyKey(entityName, propertyPath, componentId) {\n    return `__${entityName}/${propertyPath}:${componentId}`;\n}\n\n/**\n * Check if a space property key is in encoded format\n * @param {string} key - The space property key to check\n * @returns {boolean} True if key is in encoded format (starts with __)\n */\nexport function isEncodedSpacePropertyKey(key) {\n    return typeof key === 'string' && key.startsWith('__');\n}\n\n// Expose globally for runtime inspection\nwindow.decodeSpacePropertyKey = decodeSpacePropertyKey;\nwindow.encodeSpacePropertyKey = encodeSpacePropertyKey;\nwindow.isEncodedSpacePropertyKey = isEncodedSpacePropertyKey;", "/**\n * Loading Screen Module\n * Provides visual feedback during Unity Scene Inspector initialization\n */\n\nexport class LoadingScreen {\n    constructor() {\n        this.stages = [\n            { id: 'banterScene', label: 'Initializing BS Library...', weight: 25 },\n            { id: 'modules', label: 'Loading modules...', weight: 30 },\n            { id: 'scene-connect', label: 'Connecting to Unity scene...', weight: 20 },\n            { id: 'hierarchy', label: 'Gathering scene hierarchy...', weight: 5 },\n            { id: 'entities', label: 'Generating entities...', weight: 20 },\n        ];\n        \n        this.currentStageIndex = -1;\n        this.subProgress = 0;\n        this.element = null;\n        this.progressFillElement = null;\n        this.percentageElement = null;\n        this.statusElement = null;\n        this.substatusElement = null;\n        this.errorState = false;\n        this.startTime = Date.now();\n        this.stageStartTime = Date.now();\n    }\n    \n    /**\n     * Create and display the loading screen\n     */\n    show() {\n        // Create loading screen element\n        this.element = document.createElement('div');\n        this.element.id = 'loadingScreen';\n        this.element.className = 'loading-screen';\n        \n        this.element.innerHTML = `\n            <div class=\"loading-container\">\n                <div class=\"loading-logo\">\n                    <div class=\"loading-spinner\"></div>\n                </div>\n                <h2 class=\"loading-title\">Banter Scene Inspector</h2>\n                <div class=\"loading-progress-container\">\n                    <div class=\"loading-progress-bar\">\n                        <div class=\"loading-progress-fill\" style=\"width: 0%\"></div>\n                    </div>\n                    <div class=\"loading-percentage\">0%</div>\n                </div>\n                <div class=\"loading-status\">Initializing...</div>\n                <div class=\"loading-substatus\"></div>\n                <div class=\"loading-error-container\" style=\"display: none;\">\n                    <div class=\"loading-error-message\"></div>\n                    <div class=\"loading-error-actions\">\n                        <button class=\"loading-retry-btn\">Retry</button>\n                    </div>\n                </div>\n            </div>\n        `;\n        \n        // Cache element references\n        this.progressFillElement = this.element.querySelector('.loading-progress-fill');\n        this.percentageElement = this.element.querySelector('.loading-percentage');\n        this.statusElement = this.element.querySelector('.loading-status');\n        this.substatusElement = this.element.querySelector('.loading-substatus');\n        this.errorContainer = this.element.querySelector('.loading-error-container');\n        this.errorMessage = this.element.querySelector('.loading-error-message');\n        \n        // Add to DOM\n        document.body.appendChild(this.element);\n        \n        // Force reflow for animation\n        this.element.offsetHeight;\n        this.element.classList.add('visible');\n        \n        // Setup error button handlers\n        const retryBtn = this.element.querySelector('.loading-retry-btn');\n        \n        if (retryBtn) {\n            retryBtn.addEventListener('mousedown', () => {\n                this.clearError();\n                window.location.reload();\n            });\n        }\n    }\n    \n    /**\n     * Hide and remove the loading screen\n     */\n    hide() {\n        if (!this.element) return;\n        \n        const totalTime = Date.now() - this.startTime;\n        log(\"init\", `Total load time: ${(totalTime / 1000).toFixed(2)}s`);\n        \n        // Animate out\n        this.element.classList.add('hiding');\n        \n        // Remove after animation\n        setTimeout(() => {\n            if (this.element && this.element.parentNode) {\n                this.element.parentNode.removeChild(this.element);\n                this.element = null;\n            }\n        }, 500);\n    }\n    \n    /**\n     * Update the current loading stage\n     * @param {string} stageId - The stage identifier\n     * @param {number} subProgress - Progress within the stage (0-100)\n     * @param {string} subText - Additional detail text\n     */\n    updateStage(stageId, subProgress = 0, subText = '') {\n        const stageIndex = this.stages.findIndex(s => s.id === stageId);\n        if (stageIndex === -1) {\n            log(\"init\", `Unknown loading stage: ${stageId}`);\n            return;\n        }\n        \n        // Log stage timing\n        if (stageIndex !== this.currentStageIndex) {\n            if (this.currentStageIndex >= 0) {\n                const stageDuration = Date.now() - this.stageStartTime;\n                log(\"init\", `Stage '${this.stages[this.currentStageIndex].id}' completed in ${(stageDuration / 1000).toFixed(2)}s`);\n            }\n            this.stageStartTime = Date.now();\n            this.currentStageIndex = stageIndex;\n        }\n        \n        this.subProgress = Math.max(0, Math.min(100, subProgress));\n        \n        // Update UI\n        const stage = this.stages[stageIndex];\n        if (this.statusElement) {\n            this.statusElement.textContent = stage.label;\n        }\n        \n        if (this.substatusElement) {\n            this.substatusElement.textContent = subText || '';\n        }\n        \n        // Calculate and update progress\n        const progress = this.calculateProgress();\n        this.updateProgressBar(progress);\n    }\n    \n    /**\n     * Calculate weighted progress percentage\n     */\n    calculateProgress() {\n        if (this.currentStageIndex < 0) return 0;\n        \n        const totalWeight = this.stages.reduce((sum, stage) => sum + stage.weight, 0);\n        let completedWeight = 0;\n        \n        // Add weight of all completed stages\n        for (let i = 0; i < this.currentStageIndex; i++) {\n            completedWeight += this.stages[i].weight;\n        }\n        \n        // Add partial weight of current stage\n        const currentStage = this.stages[this.currentStageIndex];\n        completedWeight += (currentStage.weight * this.subProgress / 100);\n        \n        return (completedWeight / totalWeight) * 100;\n    }\n    \n    /**\n     * Update the progress bar UI\n     */\n    updateProgressBar(progress) {\n        const roundedProgress = Math.round(progress);\n        \n        if (this.progressFillElement) {\n            this.progressFillElement.style.width = `${progress}%`;\n        }\n        \n        if (this.percentageElement) {\n            this.percentageElement.textContent = `${roundedProgress}%`;\n        }\n    }\n    \n    /**\n     * Show error state\n     * @param {string} message - Error message to display\n     */\n    setError(message) {\n        this.errorState = true;\n        \n        if (this.errorContainer) {\n            this.errorContainer.style.display = 'block';\n        }\n        \n        if (this.errorMessage) {\n            this.errorMessage.textContent = message;\n        }\n        \n        if (this.statusElement) {\n            this.statusElement.textContent = 'Initialization Error';\n            this.statusElement.classList.add('error');\n        }\n        \n        // Hide progress elements during error\n        if (this.progressFillElement) {\n            this.progressFillElement.style.background = 'linear-gradient(90deg, #ff4444, #cc0000)';\n        }\n    }\n    \n    /**\n     * Clear error state\n     */\n    clearError() {\n        this.errorState = false;\n        \n        if (this.errorContainer) {\n            this.errorContainer.style.display = 'none';\n        }\n        \n        if (this.statusElement) {\n            this.statusElement.classList.remove('error');\n        }\n        \n        if (this.progressFillElement) {\n            this.progressFillElement.style.background = '';\n        }\n    }\n    \n    /**\n     * Helper to create module loading progress tracker\n     */\n    createModuleTracker(totalModules) {\n        let loadedModules = 0;\n        \n        return () => {\n            loadedModules++;\n            const progress = (loadedModules / totalModules) * 100;\n            this.updateStage('modules', progress, `Loading module ${loadedModules} of ${totalModules}`);\n            return loadedModules === totalModules;\n        };\n    }\n    \n    /**\n     * Helper to create timeout promise for BS library\n     */\n    createBSLibraryTimeout(timeoutMs = 10000) {\n        return new Promise((resolve, reject) => {\n            let checkInterval;\n            let elapsed = 0;\n            const checkFrequency = 100;\n            \n            checkInterval = setInterval(() => {\n                elapsed += checkFrequency;\n                \n                // Update progress based on time elapsed\n                const progress = Math.min(90, (elapsed / timeoutMs) * 100);\n                this.updateStage('bs-wait', progress, `Waiting... ${(elapsed / 1000).toFixed(1)}s`);\n                \n                // Check if BS library is available\n                if (typeof window.BS !== 'undefined' && window.BS.BanterScene) {\n                    clearInterval(checkInterval);\n                    this.updateStage('bs-wait', 100, 'BanterScript library loaded');\n                    resolve();\n                } else if (elapsed >= timeoutMs) {\n                    clearInterval(checkInterval);\n                    reject(new Error('BanterScript library failed to load after ' + (timeoutMs / 1000) + ' seconds'));\n                }\n            }, checkFrequency);\n        });\n    }\n}\n\n// Export singleton instance\nexport const loadingScreen = new LoadingScreen();", "import { parseBest } from '../utils.js';\n\nexport class EntityComponent{\n    constructor(){\n        this._bsRef = null;\n        this._lastUpdate = new Map();\n        this._initialized = false;\n        this.options = {};\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        this.id = properties?.id || `${this.type}_${Math.floor(Math.random()*99999)}`;\n        this._entity = entity;\n        this.properties = (properties) ? this.fillProperties(properties) : this.defaultProperties();\n        this.options = options || {};\n        this.loadAsync = options?.loadAsync || false;\n      //\n        if(sceneComponent){\n            this.properties = this.extractProperties(sceneComponent);\n            this._bs = sceneComponent;\n        }else{\n            if(this._bsRef){\n                let newComponent = await entity._bs.AddComponent(new this._bsRef());\n                this._bs = newComponent;\n            }\n            await this._setMany(this.properties)\n        }\n        window.SM.entityData.componentMap[this.id] = this;\n        delete this.properties.id;\n        this._initialized = true;\n\n\n        //link db\n        this.ref = net.db.ref(`space/${net.spaceId}/components/${this.id}`);\n        \n\n        this.ref.on(\"value\", (snapshot)=>{\n            let data = snapshot.val();\n            if(data === null) return;\n            delete data.id;\n            for(let p in data){\n                let v1 = JSON.stringify(this.properties[p]);\n                let v2 = JSON.stringify(data[p]);\n                if(v1 !== v2){\n                    //log(\"component\", `${this.id} is setting ${p} from ${v1} to ${v2}`)\n                    this._set(p, data[p]);\n                }else{\n                    //log(\"component\", `${v1} is the same as ${v2}`)\n                }\n            }\n\n            let defaultProperties = this.defaultProperties();\n\n            // Handle properties that were deleted from Firebase\n            for(let p in defaultProperties){\n                if(!(p in data)){\n                    this._set(p, defaultProperties[p]);\n                }\n            }\n        })\n\n        if(this.options.context === \"crawl\" || this.options.context === \"spawn\"){\n            await this.ref.set(this.properties);\n        }\n        return this;\n    }\n\n    \n\n    enums(){\n        return {};\n    }\n\n    setId(id){\n        delete window.SM.entityData.componentMap[this.id];\n        this.id = id;\n        window.SM.entityData.componentMap[this.id] = this;\n    }\n\n    async defaultProperties(){\n        return {};\n    }\n\n    fillProperties(properties){\n        let newProps = this.defaultProperties();\n        for(let p in properties){\n            if(newProps[p] !== undefined){\n                newProps[p] = properties[p];\n            }\n        }\n        return newProps;\n    }\n\n    async extractProperties(sceneComponent){\n        return {};\n    }\n\n    async _setMany(properties){\n        for(let property in properties){\n            await this._set(property, properties[property]);\n        }\n    }\n \n    async _set(property, value){\n        value = parseBest(value);\n        this.properties[property] = value;\n        this._bs[property] = value;\n    }\n\n    async _destroy(){\n        this.ref.remove();\n        if(this._bs){\n            this._bs.Destroy();\n        }\n        let idx = this._entity.components.indexOf(this);\n        if(idx !== -1){\n            this._entity.components.splice(idx, 1);\n            delete SM.entityData.componentMap[this.id];\n            inspector.propertiesPanel.render(this._entity.id);\n        }\n    }\n    \n    async Set(property, value){\n        // Firebase will delete the property if value is null\n        if (value === null) {\n            // Use remove() for null values to ensure Firebase deletes the field\n            await this.ref.child(property).remove();\n        } else {\n            await this.ref.update({[property]: value});\n        }\n    }\n\n    WatchProperties(properties, callback){\n        let bs_props = properties.map(p=>BS.PropertyName[p]);\n        log(\"WatchProperties\", this.id, properties)\n        this._bs.WatchProperties(bs_props, ()=>{\n            log(\"WatchProperties\", this.id, properties)\n            for(let p of properties){\n                this.properties[p] = this._bs[p];\n                if(SM.selectedEntity === this._entity.id){\n                    inspector.propertiesPanel.updateProperty(this.id, p, this._bs[p])\n                }\n            }\n            if(callback){\n                callback({'target': this, 'properties': this.properties});\n            }\n        });\n        return this;\n    }\n}", "import { EntityComponent } from './entity-component.js';\nimport { eulerToQuaternion, parseBest } from '../utils.js';\n\n\nlet getScale = async (entID) =>{\n    if(entID === \"Scene\" || entID === \"People\" || !entID){\n        return {x:1, y:1, z:1}\n    }\n    let x = SM.getEntityById(entID)\n    if(!x){\n        return {x:1,y:1,z:1}\n    }\n    let scale = await x.getTransform().Get(\"localScale\")\n    let parentScale = await getScale(x.parentId)\n    return {\n        x:scale.x * parentScale.x,\n        y:scale.y * parentScale.y,\n        z:scale.z * parentScale.z\n    }\n}\n\nexport class TransformComponent extends EntityComponent {\n    constructor(){\n        super();\n        this._bsRef = BS.Transform;\n        this.type = \"Transform\";\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        await super.init(entity, sceneComponent, properties, options);\n        return this;\n    }\n\n    async _update(property, value){\n        value = parseBest(value);\n        this.properties[property] = value;\n        inspector.propertiesPanel.updateProperty(this.id, property, value);\n    }\n\n    async _set(property, value){\n        value = parseBest(value);\n        this.properties[property] = value;\n        value.x = parseFloat(value.x || 0);\n        value.y = parseFloat(value.y || 0);\n        value.z = parseFloat(value.z || 0);\n        if (property === 'localPosition' || property === 'localScale' || property === \"position\" || property === \"scale\") {\n            this._bs[property] = new BS.Vector3(value.x,value.y, value.z);\n        } else if (property === 'localRotation' || property === \"rotation\") {\n            if ('w' in value) {\n                value.w = parseFloat(value.w || 1);\n                this._bs[property] = new BS.Vector4( value.x, value.y, value.z, value.w);\n            } else {\n                value = eulerToQuaternion(value);\n                this._bs[property] = new BS.Vector4(value.x, value.y, value.z, value.w);\n            }\n        }\n    }\n\n    extractProperties(sceneComponent) {\n        return {\n            localPosition: sceneComponent.localPosition || { x: 0, y: 0, z: 0 },\n            localRotation: sceneComponent.localRotation || { x: 0, y: 0, z: 0, w: 1 },\n            localScale: sceneComponent.localScale || { x: 1, y: 1, z: 1 }\n        };\n    }\n\n    defaultProperties(){\n        return {\n            localPosition: { x: 0, y: 0, z: 0 },\n            localRotation: { x: 0, y: 0, z: 0, w: 1 },\n            localScale: { x: 1, y: 1, z: 1 }\n        }\n    }\n\n    async Add(property, vector3){\n        let addX = vector3.x || 0;\n        let addY = vector3.y || 0;\n        let addZ = vector3.z || 0;\n        let curVec = this.properties[property];\n        let newVec = {\n            x: curVec.x + addX,\n            y: curVec.y + addY,\n            z: curVec.z + addZ\n        }\n        await this.Set(property, newVec);\n        return this\n    }\n\n    async Multiply(property, vector3){\n        let multX = vector3.x || 1;\n        let multY = vector3.y || 1;\n        let multZ = vector3.z || 1;\n        let curVec = this.properties[property];\n        let newVec = {\n            x: curVec.x * multX,\n            y: curVec.y * multY,\n            z: curVec.z * multZ\n        }\n        await this.Set(property, newVec);\n        return this\n    }\n\n    async Get(property){\n        await this._bs.Q([13])\n        if(property === \"transform\"){\n            return {\n                position: this._bs._position,\n                rotation: this._bs._rotation,\n                scale: await getScale(this._entity.id),\n                localPosition: this._bs._localPosition,\n                localRotation: this._bs._localRotation,\n                localScale: this._bs._localScale\n            }\n        }\n        if(property === \"scale\"){\n            return await getScale(this._entity.id)\n        }\n        return this._bs[`_${property}`];\n    }\n\n}", "import { TransformComponent } from './entity-components/transform.js';\nimport { deepClone, parseBest, eulerToQuaternion } from './utils.js';\n\nexport class Entity{\n    async init(entityData, options){\n        this.name = entityData.name || `New_Entity_${Math.floor(Math.random()*99999)}`;\n        //log(\"init\", \"entity\", this.name, entityData)\n        this.parentId = entityData.parentId;\n        this.components = entityData.components || [];\n        this.children = entityData.children || [];\n        this._bs = entityData._bs;\n        this.loadAsync = entityData.loadAsync || false;\n        this.active = true;\n        this.layer = parseInt(entityData.layer) || 0;\n        this.persistent = true;\n        this.identifiers = new Set();\n        this.initialized = false;\n        this.type = \"Entity\";\n        this.keepPositionOnParenting = false;\n        this.options = options || {};\n        this.uuid = entityData.uuid || Math.floor(Math.random() * 10000000000000);\n        SM.entityData.entityUUIDMap[this.uuid] = this;\n        let parentEntity = SM.getEntityOrScene(this.parentId);\n        if(!entityData._bs){\n            let params = {name: this.name};\n            let lp = entityData.localPosition;\n            let lr = entityData.localRotation;\n            let ls = entityData.localScale;\n            // let p = entityData.position;\n            // let r = entityData.rotation;\n            // if(p){ params.position = new BS.Vector3(p.x, p.y, p.z) }\n            // if(r){ params.rotation = new BS.Vector4(r.x, r.y, r.z, r.w) }\n            if(lp){ params.localPosition = new BS.Vector3(lp.x, lp.y, lp.z) }\n            if(lr){ params.localRotation = new BS.Vector4(lr.x, lr.y, lr.z, lr.w) }\n            if(ls){ params.localScale = new BS.Vector3(ls.x, ls.y, ls.z) }\n            if(parentEntity){ params.parent = parentEntity._bs; }\n            params.layer = this.layer;\n            params.active = this.active;\n            let newGameObject = new BS.GameObject(params);\n            if(params.parent){ //complain that this is needed\n                setTimeout(async () => {\n                    if(params.localPosition){ newGameObject.transform.localPosition = params.localPosition; }\n                    if(params.localRotation){ newGameObject.transform.localRotation = params.localRotation; }\n                    if(params.localScale){ newGameObject.transform.localScale = params.localScale; }\n                }, 150);\n            }\n            this._bs = newGameObject;\n        }\n\n       \n\n        this._bs.networkId = entityData.networkId;\n        this.id = (this.parentId) ? this.parentId + \"/\" + this.name : this.name;\n        this.identifiers.add(this.id);\n        window.SM.entityData.entityMap[this.id] = this;\n        this.initialized = true;\n        this.transform = this._bs.transform;\n\n        if(this.parentId){\n            // Only set parent if the parent entity actually exists and is initialized\n            if(parentEntity && parentEntity !== \"building..\" && parentEntity.initialized){\n                this._setParent(parentEntity, true);\n            }\n            // Otherwise, the parent will claim this child when it processes the child_added event\n        }\n        this.setupRefs();\n        \n     \n        \n        if(this.options.context === \"crawl\"){\n            //log(\"entity\", \"crawling\", this.id)\n            await this.meta_ref.set({\n                active: this.active,\n                layer: this.layer,\n                localPosition: this.localPosition,\n                localRotation: this.localRotation,\n                localScale: this.localScale,\n                position: this.position,\n                rotation: this.rotation,\n                uuid: this.uuid\n            });\n        }\n        inspector.hierarchyPanel.render();\n        return this;\n    }\n\n    setupRefs(){\n         //setup db link\n         this.ref = net.db.ref(`space/${net.spaceId}/${this.id}`);\n         this.meta_ref = this.ref.child(\"__meta\");\n         this.meta_ref.child(\"active\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(data === null) return;\n             this.active = data;\n             this._bs.SetActive(this.active);\n             inspector.hierarchyPanel.render();\n         })\n \n         this.meta_ref.child(\"layer\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             this.layer = data;\n             this._bs.SetLayer(this.layer);\n         })\n \n         this.meta_ref.child(\"localPosition\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             if(data.x === this.transform.localPosition.x && data.y === this.transform.localPosition.y && data.z === this.transform.localPosition.z){\n                return;\n             }\n             this.transform.localPosition = new BS.Vector3(data.x, data.y, data.z);\n         })\n \n         this.meta_ref.child(\"localRotation\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             if(data.x === this.transform.localRotation.x && data.y === this.transform.localRotation.y && data.z === this.transform.localRotation.z && data.w === this.transform.localRotation.w){\n                return;\n             }\n             this.transform.localRotation = new BS.Vector4(data.x, data.y, data.z, data.w);\n         })\n \n         this.meta_ref.child(\"localScale\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             if(data.x === this.transform.localScale.x && data.y === this.transform.localScale.y && data.z === this.transform.localScale.z){\n                return;\n             }\n             this.transform.localScale = new BS.Vector3(data.x, data.y, data.z);\n         })\n \n         this.meta_ref.child(\"position\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             if(data.x === this.transform.position.x && data.y === this.transform.position.y && data.z === this.transform.position.z){\n                return;\n             }\n             this.transform.position = new BS.Vector3(data.x, data.y, data.z);\n         })\n \n         this.meta_ref.child(\"rotation\").on(\"value\", (snapshot)=>{\n             let data = snapshot.val();\n             if(!data) return;\n             if(data.x === this.transform.rotation.x && data.y === this.transform.rotation.y && data.z === this.transform.rotation.z && data.w === this.transform.rotation.w){\n                return;\n             }\n             this.transform.rotation = new BS.Vector4(data.x, data.y, data.z, data.w);\n         })\n \n \n \n         // handle component changes\n         this.meta_ref.child(\"components\").on(\"child_added\", async (snapshot)=>{\n             let data = snapshot.val();\n             let component = SM.getEntityComponentById(snapshot.key, false);\n             log(`Entity[${this.id}]`, `${!component ? \"new\" : \"existing\"} component added`, snapshot.key, data)\n             if(!component){\n                let data = await net.db.ref(`space/${net.spaceId}/components/${snapshot.key}`).once('value');\n                data = data.val();\n                data.id = snapshot.key;\n                let componentClass = componentTypeMap[snapshot.key.split(\"_\")[0]];\n                component = await new componentClass().init(this, null, data);\n             }\n             let hasComponent = this.components.find(c=>c.id === snapshot.key);\n             if(!hasComponent){\n                log(`Entity[${this.id}]`, `does not have ${snapshot.key} => adding`)\n                await this._addComponent(component);\n             }\n         })\n\n         this.meta_ref.child(\"components\").on(\"child_removed\", async (snapshot)=>{\n             let data = snapshot.val();\n             //log(\"entity\", \"component removed\", snapshot.key, data)\n             let component = SM.getEntityComponentById(snapshot.key);\n             if(component){\n                log(`Entity[${this.id}]`, \"removing component\", snapshot.key)\n                await this._removeComponent(component);\n             }\n         })\n \n         this.startListeningForChildChanges = ()=>{\n              // handle children changes\n             this.ref.on(\"child_added\", async (snapshot)=>{\n                 let key = snapshot.key;\n                 if(key === \"__meta\"){\n                     return;\n                 }\n \n                 window.lastAddedChild = snapshot;\n                 let data = snapshot.val();\n                 let targetEntity = SM.entityData.entityUUIDMap[data.__meta.uuid];\n                \n                 if(targetEntity){\n                    log(\"ENTITY_REF_REDUNDANT\", key, this.id, data, targetEntity)\n                    if(targetEntity === \"building..\"){\n                       // Entity is still being built, wait for it to complete then establish parent relationship\n                       const checkInterval = setInterval(() => {\n                           const builtEntity = SM.entityData.entityUUIDMap[data.__meta.uuid];\n                           log(\"ENTITY_REF_REDUNDANT_CHECK\", key, this.id, data, builtEntity)\n                           if(builtEntity && builtEntity !== \"building..\" && builtEntity.initialized){\n                               clearInterval(checkInterval);\n                               // Only set parent if not already correctly parented\n                               if(!this.children.includes(builtEntity)){\n                                   this._addChild(builtEntity);\n                               }\n                           }\n                       }, 50);\n                       // Set a timeout to prevent infinite waiting\n                       setTimeout(() => clearInterval(checkInterval), 5000);\n                       return;\n                    }\n\n                    if(this.id === targetEntity.parentId){\n                        //log( `Renaming in place  [${targetEntity.id}] => [${key}]`)\n                        targetEntity._rename(key);\n                    }else{\n                        targetEntity._setParent(this);\n                    }\n                 }else{ \n                     SM.entityData.entityUUIDMap[data.__meta.uuid] = \"building..\"\n                     log(\"ENTITY_REF_NEW\", key, this.id, data)\n                     data.parentId = this.id;\n                     data.name = key;\n                     let expected_id = this.id + \"/\" + key;\n                     let existingEntity = SM.getEntityById(expected_id);\n                     if(existingEntity){\n                        log(\"ENTITY_REF_REDUNDANT\", key, this.id, data, existingEntity)\n                        return;\n                     }\n                     let newEntity = new Entity()\n                     await newEntity.init(data);\n                     SM.entityData.entityUUIDMap[data.__meta.uuid] = newEntity;\n                 }\n               \n                 inspector.hierarchyPanel.render();\n             })\n \n             this.ref.on(\"child_removed\", async (snapshot)=>{ // handles conditions where child is deleted or moved to a different parent.\n                let key = snapshot.key;\n                 if(key === \"__meta\"){\n                     return;\n                 }\n                 let data = snapshot.val();\n                 //log(\"ENTITY_REF_REMOVED\", key, this.id, data)\n                 let targetID = this.id + \"/\" + key;\n                 let targetEntity = SM.getEntityById(targetID);\n                 if(targetEntity){\n                    SM.garbage.push(targetEntity);\n                    this.children = this.children.filter(child => child !== targetEntity);\n                    setTimeout(()=>{\n                        //check if still orphaned, if so destroy it\n                        let claimedParent = SM.getEntityById(targetEntity.parentId);\n                        if(!claimedParent || !claimedParent.children.includes(targetEntity)){\n                            targetEntity._destroy();\n                        }\n                    }, 500);\n                }\n                if(data.__meta.destroyed){\n                    await targetEntity._destroy();\n                }\n                 inspector.hierarchyPanel.render();\n                 \n             })\n         }\n\n         if(SM.loaded){\n            this.startListeningForChildChanges();\n        }\n    }\n\n    get localPosition(){\n        if(!this.transform) return {x:0,y:0,z:0};\n        return this.transform.localPosition;\n    }\n    get localRotation(){\n        if(!this.transform) return {x:0,y:0,z:0,w:1};\n        return this.transform.localRotation;\n    }\n    get localScale(){\n        if(!this.transform) return {x:1,y:1,z:1};\n        return this.transform.localScale;\n    }\n    get position(){\n        if(!this.transform) return {x:0,y:0,z:0};\n        return this.transform.position;\n    }\n    get rotation(){\n        if(!this.transform) return {x:0,y:0,z:0,w:1};\n        return this.transform.rotation;\n    }\n    get scale(){\n        if(!this.transform) return {x:1,y:1,z:1};\n        return this.transform.scale;\n    }\n\n    GetComponent(componentType, index = 0){\n        return this.components.filter(component => component.type === componentType)[index];\n    }\n\n    AddComponent(component){\n        this.meta_ref.child(\"components\").child(component.id).set(true);\n        this._addComponent(component);\n    }\n\n    async _addComponent(component){\n        if(this.components.includes(component)){\n            return;\n        }\n        this.components.push(component);\n        SM.entityData.componentMap[component.id] = component;\n        component._entity = this;\n        inspector.propertiesPanel.render();\n    }\n\n    RemoveComponent(component){\n        this.meta_ref.child(\"components\").child(component.id).remove();\n        this._removeComponent(component);\n    }\n\n    async _removeComponent(component){ //This should deref instead of destroy in the future.\n        await component._destroy();\n    }\n\n    getComponent(componentType, index = 0){\n        return this.components.filter(component => component.type === componentType)[index];\n    }\n\n    getComponents(componentType){\n        return this.components.filter(component => component.type === componentType);\n    }\n    \n    reorderComponent(fromIndex, toIndex){\n        if (fromIndex < 0 || fromIndex >= this.components.length ||\n            toIndex < 0 || toIndex >= this.components.length) {\n            err(\"entity\", \"Invalid component indices for reorder\")\n            return false;\n        }\n\n        const [movedComponent] = this.components.splice(fromIndex, 1);\n        this.components.splice(toIndex, 0, movedComponent);\n        return true;\n    }\n\n    _loaded(){\n        this._finished_loading = true;\n        let scripts = this.components.filter(c=>c.type === \"ScriptRunner\");\n        scripts.forEach(async script=>{\n            await script.ctx.onLoaded();\n        })\n    }\n\n    // async _checkForGhostComponents(id){\n    //     let visible_components = this.components.map(x=>x._bs)\n    //     Object.values(this._bs.components).forEach(async bs_comp => {\n    //         if(!visible_components.includes(bs_comp)){\n    //             log(\"entity\", this.id, \"ghost component found: \", bs_comp.type, componentTextMap[bs_comp.type])\n    //             if(bs_comp.type === 34){\n    //                 //This is UI\n    //                 return;\n    //             }\n    //             let component_ref = `${componentTextMap[bs_comp.type]}_${id}`\n    //             let props = {\n    //                 id: component_ref\n    //             }\n    //             let componentClass = componentBSTypeMap[bs_comp.componentType];\n    //             let entityComponent = await new componentClass().init(this, bs_comp, props, {context: \"ghost\"});\n    //             this.AddComponent(entityComponent);\n    //             SM.entityData.componentMap[component_ref] = entityComponent;\n    //             inspector.propertiesPanel.render(this.id);\n    //         }\n    //     })\n    // }\n\n    _addChild(child){\n        log(\"ENTITY_ADD_CHILD\", child.id, this.id)\n        child.parentId = this.id;\n        if(this.children.includes(child)){\n            return;\n        }\n        this.children.push(child);\n        child._bs.SetParent(this._bs, this.keepPositionOnParenting);\n        return child;\n    }\n\n    async _setParent(newParent, firstAttempt){\n        // Always validate parent exists\n        if(!newParent || newParent === \"building..\") return;\n\n        if(!firstAttempt){\n            if (newParent === this) return;\n            if (this.parentId) {\n                const oldParent = SM.getEntityById(this.parentId);\n                if(oldParent === newParent){\n                    this._rename(this.name);\n                    return;\n                }\n                if(oldParent){\n                    oldParent.children = oldParent.children.filter(child => child.id !== this.id);\n                }\n            }\n        }\n\n        newParent._addChild(this);\n        this._rename(this.name);\n    }\n\n    async Rename(newName){\n        await this._rename(newName);\n    }\n\n    _renameDownwards(){\n        this.identifiers.add(this.id);\n        delete SM.entityData.entityMap[this.id]\n        this.id = this.parentId+\"/\"+this.name;\n        SM.entityData.entityMap[this.id] = this;\n        this._bs.SetName(this.id);\n        this.children.forEach(child=>{\n            child._renameDownwards();\n        })\n        if(this.meta_ref){\n            this.meta_ref.child(\"components\").off();\n            this.meta_ref.child(\"active\").off();\n            this.meta_ref.child(\"layer\").off();\n            this.meta_ref.child(\"localPosition\").off();\n            this.meta_ref.child(\"localRotation\").off();\n            this.meta_ref.child(\"localScale\").off();\n            this.meta_ref.child(\"position\").off();\n            this.meta_ref.child(\"rotation\").off();\n            this.meta_ref.off();\n        }\n        if(this.ref){\n            this.ref.off();\n        }\n        this.setupRefs();\n    }\n\n    async _rename(newName){\n        log(\"RENAMING ENTITY\", this.id, \"=>\", newName)\n        let newId = this.parentId+\"/\"+newName;\n        if(this.id === newId){\n            log(\"RENAMING ENTITY\", this.id, \"=>\", newName, \"=> same name, skipping\")\n            return;\n        }\n        this.name = newName;\n        let origRef = this.ref;\n        const snapshot = await origRef.once('value');\n        let parentRef = net.db.ref(`space/${net.spaceId}/${this.parentId}`);\n        this._renameDownwards();\n        let newSnapshot = snapshot.val();\n        log('entity', 'renaming', this.id, '=>', newId, 'with snapshot', newSnapshot)\n        await parentRef.child(newName).set(newSnapshot);\n        origRef.remove();\n    }\n\n\n    async Destroy(){\n        await this.meta_ref.child(\"destroyed\").set(true);\n        this.ref.remove();\n    }\n\n    async _destroy(){\n        this._stagedForDestruction = true;\n        \n        let scriptrunners = [...this.components.filter(component => component.type === \"ScriptRunner\")];\n        for(let scriptrunner of scriptrunners){\n            await scriptrunner._destroy();\n        }\n\n        let children = [...this.children];\n        for(let child of children){\n            await child._destroy();\n        }\n\n        let components = [...this.components];\n        for(let component of components){\n            if(component.type === \"ScriptRunner\") continue;\n            await component._destroy();\n        }\n\n        await this._bs.Destroy();\n        \n        delete SM.entityData.entityMap[this.id];\n        if(this.parentId){\n            const parent = SM.getEntityById(this.parentId);\n            if (parent) {\n                parent.children = parent.children.filter(child => child.id !== this.id);\n            }\n        }\n        if(SM.garbage.includes(this)){\n            SM.garbage = SM.garbage.filter(entity => entity.id !== this.id);\n        }\n    }\n\n    transformVal(property){\n        let prop = this.transform[property];\n        let base = {\n            x: prop.x,\n            y: prop.y,\n            z: prop.z\n        }\n        if(prop.w){\n            base.w = prop.w;\n        }\n        return base;\n    }\n\n \n   \n\n    _set(prop, newValue){\n        newValue = parseBest(newValue);\n        if(prop == \"active\"){\n            if(newValue === this.active) return;\n            this.active = newValue;\n            this._bs.SetActive(newValue);\n            this.components.forEach(component => {\n                if(component.type === \"ScriptRunner\"){\n                    if(newValue){\n                        component._refresh();\n                    }else{\n                        component._stop();\n                    }\n                }\n            });\n        }else if(prop == \"persistent\"){\n            if(newValue === this.persistent) return;\n            this.persistent = newValue;\n        }else if(prop == \"layer\"){\n            if(newValue === this.layer) return;\n            this.layer = newValue;\n            this._bs.SetLayer(newValue);\n        }else if(prop == \"localPosition\"){\n            if(newValue === this.localPosition) return;\n            this.transform.localPosition = new BS.Vector3(newValue.x,newValue.y, newValue.z)\n        }else if(prop == \"localRotation\"){\n            if(newValue === this.localRotation) return;\n            if ('w' in newValue) {\n                newValue.w = parseFloat(newValue.w || 1);\n            } else {\n                newValue = eulerToQuaternion(newValue);\n            }\n            this.transform.localRotation = new BS.Vector4(newValue.x, newValue.y, newValue.z, newValue.w);\n        }else if(prop == \"localScale\"){\n            if(newValue === this.localScale) return;\n            this.transform.localScale = new BS.Vector3(newValue.x,newValue.y, newValue.z)\n        }else if(prop == \"position\"){\n            if(newValue === this.position) return;\n            this.transform.position = new BS.Vector3(newValue.x,newValue.y, newValue.z)\n        }else if(prop == \"rotation\"){\n            if(newValue === this.rotation) return;\n            this.transform.rotation = new BS.Vector4(newValue.x,newValue.y, newValue.z, newValue.w)\n        }\n        // if(prop == \"scale\"){\n        //     this.transform.scale = new BS.Vector3(newValue.x,newValue.y, newValue.z)\n        // }\n    }\n\n    async export(){\n        const snapshot = await this.ref.once('value');\n        let entityData = snapshot.val();\n        const componentsData = {};\n        \n\n        // Collect components from this entity\n        for (const x of this.components) {\n            componentsData[x.id] = x.properties;\n        }\n\n        // Collect components from all descendants\n        const descendants = this.getAllDescendants();\n        for (const descendant of descendants) {\n            for (const x of descendant.components) {\n                componentsData[x.id] = x.properties;\n            }\n        }\n\n        return {\n            Entity: { [this.name]: entityData },\n            Components: componentsData\n        }\n    }\n\n   \n\n    async Set(property, value){\n        let newValue = parseBest(value);\n        if(property == \"name\"){\n            this.Rename(value);\n        }else{\n            log(\"entity\", \"Set =>\", this.id, property, newValue)\n            this.meta_ref.update({[property]: newValue});\n        }\n    }\n    \n    Get(property){\n        // Handle directional vectors\n        const directions = {\n            'forward': () => {\n                // Forward is local +Z axis rotated by entity's rotation\n                const rot = this.transform.rotation;\n                return new BS.Vector3(\n                    2 * (rot.x * rot.z + rot.w * rot.y),\n                    2 * (rot.y * rot.z - rot.w * rot.x),\n                    1 - 2 * (rot.x * rot.x + rot.y * rot.y)\n                );\n            },\n            'backward': () => {\n                const forward = this.Get('forward');\n                return new BS.Vector3(-forward.x, -forward.y, -forward.z);\n            },\n            'right': () => {\n                // Right is local +X axis rotated by entity's rotation\n                const rot = this.transform.rotation;\n                return new BS.Vector3(\n                    1 - 2 * (rot.y * rot.y + rot.z * rot.z),\n                    2 * (rot.x * rot.y + rot.w * rot.z),\n                    2 * (rot.x * rot.z - rot.w * rot.y)\n                );\n            },\n            'left': () => {\n                const right = this.Get('right');\n                return new BS.Vector3(-right.x, -right.y, -right.z);\n            },\n            'up': () => {\n                // Up is local +Y axis rotated by entity's rotation\n                const rot = this.transform.rotation;\n                return new BS.Vector3(\n                    2 * (rot.x * rot.y - rot.w * rot.z),\n                    1 - 2 * (rot.x * rot.x + rot.z * rot.z),\n                    2 * (rot.y * rot.z + rot.w * rot.x)\n                );\n            },\n            'down': () => {\n                const up = this.Get('up');\n                return new BS.Vector3(-up.x, -up.y, -up.z);\n            }\n        };\n\n        // Check if it's a directional property\n        if(directions[property]){\n            return directions[property]();\n        }\n\n        // Original logic for transform and entity properties\n        let transformProperty = this.transform[property]\n        if(transformProperty){\n            return transformProperty;\n        }\n        return this[property];\n    }\n\n    async SetParent(newParentId){\n        let newParent = SM.getEntityById(newParentId);\n        if(!newParent){\n            err(\"entity\", \"SetParent\", \"New parent not found\", newParentId)\n            return;\n        }\n        let origRef = this.ref;\n        const snapshot = await this.ref.once('value');\n        await newParent.ref.child(this.name).set(snapshot.val());\n        origRef.remove();\n    }\n\n    WatchTransform(properties, callback){\n        log(\"watch\", this.id, \"transform\", properties)\n        let bs_props = properties.map(p=>BS.PropertyName[p]);\n        log(\"watch\", this.id, \"bs_props\", bs_props)\n        this._bs.WatchTransform(bs_props, (e)=>{\n            log(\"WatchTransform\")\n            if(SM.selectedEntity === this.id){\n                inspector.propertiesPanel.updateTransform()\n            }\n            if(callback){\n                callback({'target': this, 'transform': this.transform});\n            }\n        });\n    }\n\n    GetScript(scriptName){\n        let scripts = this.components.filter(x=>x.type === \"ScriptRunner\" && x.properties.name === scriptName).map(x=>x.ctx);\n        if(scripts.length === 0){\n            return null;\n        }\n        return scripts[0];\n    }\n\n    GetChild(childName){\n        let children = this.children.filter(x=>x.name === childName);\n        if(children.length === 0){\n            return null;\n        }\n        return children[0];\n    }\n\n    getAllDescendants(){\n        let descendants = [];\n\n        // Recursive helper function to collect all descendants\n        const collectDescendants = (entity) => {\n            for(let child of entity.children){\n                descendants.push(child);\n                collectDescendants(child);\n            }\n        };\n\n        collectDescendants(this);\n        return descendants;\n    }\n}", "import { EntityComponent } from './entity-component.js';\nimport { parseBest } from '../utils.js';\n\nexport class ScriptRunnerComponent extends EntityComponent {\n    constructor(){\n        super();\n        this._bsRef = null;\n        this.inventoryItem = null;\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        await super.init(entity, sceneComponent, properties, options);\n        if(options?.owner){\n            this.properties.owner = options.owner;\n        }\n        this.ctx = (this.ctx) ? this.ctx : this.newScriptContext();\n        this._scriptFunction = (this._scriptFunction) ? this._scriptFunction : null;\n        this.type = \"ScriptRunner\";\n        this.setId(this.id.replace(\"undefined\",\"ScriptRunner\"));\n        return this;\n    }\n\n    async _setMany(properties){\n        //ensures file is last prop set\n        for(let property in properties){\n            if(property === \"file\") continue;\n            await this._set(property, properties[property]);\n        }\n        await this._set(\"file\", properties.file);\n    }\n\n    async _set(property, value){\n        log(\"mono\", \"[MONO] updating property =>\", property, value)\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        if(property === 'file'){\n            if (value && value.length > 0) {\n                await this.LoadScript(value);\n            } else {\n                // File cleared - stop script and clear vars\n                if(this.ctx){\n                    if (this.ctx._running) {\n                        await this._stop();\n                    }\n                    this.ctx.vars = {};\n                    this.properties.vars = {};\n                }\n            }\n        }\n\n        \n        if(property === \"vars\" && this.ctx && this.ctx.vars){\n            Object.entries(value).forEach(([varName, varValue]) => {\n                if(this.ctx.vars[varName]){\n                    if(varValue.value !== this.ctx.vars[varName].value){\n                        this._setVar(varName, varValue);\n                    }\n                }\n            });\n        }\n    }\n\n    extractProperties(sceneComponent) {\n        return {\n            name: sceneComponent.name || \"myScript\",\n            file: sceneComponent.file || null,\n            vars: sceneComponent.vars || {},\n            owner: 'global',\n            hotreload: true\n        };\n    }\n\n    defaultProperties(){\n        return {\n            name: \"myScript\",\n            file: null,\n            vars: {},\n            owner: 'global',\n            hotreload: true\n        }\n    }\n\n    amOwner(){\n        return this.properties.owner === SM.myName()\n    }\n\n    async getScriptAsset(fileName){\n        const scriptAsset = SM.getScriptAsset(fileName);\n        if(!scriptAsset){\n            if (window.inventory && window.inventory.items[fileName]) {\n                const inventoryItem = window.inventory.items[fileName];\n                if (inventoryItem.itemType === 'script') {\n                    log(\"mono\", `Found \"${fileName}\" in inventory, loading to scene...`);\n                    await window.LoadScript(fileName);\n                    return SM.getScriptAsset(fileName);\n                } else {\n                    log(\"mono\", `Item \"${fileName}\" in inventory is not a script`);\n                }\n            } else {\n                log(\"mono\", `Script \"${fileName}\" not found in inventory either`);\n            }\n        }\n        return scriptAsset;\n    }\n\n    async LoadScript(fileName) {\n        if (!fileName || fileName.length === 0) {\n            this.ctx._running = false;\n            return;\n        }\n\n        // Find the ScriptAsset component by name\n        const scriptAsset = await this.getScriptAsset(fileName);\n\n        if (!scriptAsset) {\n            log(\"mono\", `ScriptAsset \"${fileName}\" not found`);\n            return;\n        }\n\n        await this._loadScript(fileName, scriptAsset);\n    }\n\n    async _loadScript(fileName, scriptAsset) {\n        if (!scriptAsset) {\n            log(\"mono\", `ScriptAsset \"${fileName}\" not found`);\n            return;\n        }\n\n        const scriptContent = scriptAsset.properties.data;\n        if (!scriptContent) {\n            log(\"mono\", `Script \"${fileName}\" has no data`);\n            return;\n        }\n\n        // Stop current script if running\n        if (this.ctx && this.ctx._running) {\n            await this.ctx.onDestroy();\n        }\n\n        // Create new context\n        this.ctx = this.newScriptContext();\n        this._scriptFunction = new Function(scriptContent);\n\n        // Initialize vars from ScriptAsset specification\n        if (scriptAsset.properties.vars) {\n            const varSpecs = scriptAsset.properties.vars;\n            const historicalVars = SM.props[`__${this.id}/vars:component`] || {};\n            const initializedVars = {};\n\n            log(\"mono\", \"ScriptAsset varSpecs:\", varSpecs);\n            log(\"mono\", \"Historical vars:\", historicalVars);\n            log(\"mono\", \"Properties vars:\", this.properties.vars);\n\n            for (const [varName, varSpec] of Object.entries(varSpecs)) {\n                // Priority: 1. Historical values, 2. Current properties, 3. ScriptAsset default\n                if (historicalVars[varName] !== undefined) {\n                    // Preserve existing value from space state\n                    initializedVars[varName] = historicalVars[varName];\n                    log(\"mono\", `$${varName} =>`, JSON.stringify(historicalVars[varName]), \"via historicalVars\");\n                } else if (this.properties.vars?.[varName] !== undefined) {\n                    // Use value from properties\n                    initializedVars[varName] = this.properties.vars[varName];\n                    log(\"mono\", `$${varName} =>`, JSON.stringify(this.properties.vars[varName]), \"via properties\");\n                } else {\n                    // Use ScriptAsset default\n                    initializedVars[varName] = {\n                        type: varSpec.type,\n                        value: varSpec.value\n                    };\n                    log(\"mono\", `$${varName} =>`, JSON.stringify(varSpec.value), \"via ScriptAsset default\");\n                }\n            }\n\n            this.ctx.vars = initializedVars;\n            this.properties.vars = initializedVars; // Update properties for persistence\n        } else {\n            // No vars defined in ScriptAsset\n            this.ctx.vars = {};\n            this.properties.vars = {};\n        }\n\n        // Execute the script function\n        this._scriptFunction.call(this.ctx);\n\n        await lifecycle.registerScriptRunner(this);\n        this._start();\n\n        log(\"mono\", `Script \"${fileName}\" loaded successfully for ${this.properties.name} with ctx.vars:`, this.ctx.vars);\n\n        // Update UI if this component is currently selected\n        let selEnt = SM.getEntityById(SM.selectedEntity);\n        if (selEnt) {\n            let onPage = selEnt.components.filter(x => (x.type === \"ScriptRunner\" && x.properties.file === fileName)).length > 0;\n            if (onPage) {\n                inspector.propertiesPanel.render(SM.selectedEntity);\n            }\n        }\n\n        // Dispatch event for UI refresh\n        const event = new CustomEvent('script-refreshed', {\n            detail: {\n                componentId: this.id,\n                name: this.properties.name,\n                file: this.properties.file\n            }\n        });\n        window.dispatchEvent(event);\n\n        if (this._entity._finished_loading) {\n            await this.ctx.onLoaded();\n        }\n    }\n\n    async _start(){\n        if(this.ctx._running) return;\n        if(!this._entity.active) return;\n\n        this.ctx._running = true;\n        await this.ctx.onStart();\n\n        if(this._entity._finished_loading){\n            await this.ctx.onLoaded();\n        }\n\n        inspector.lifecyclePanel.render();\n        log(\"mono\", \"started\", this.id);\n    }\n\n    async _stop(){\n        if(!this.ctx._running) return;\n        if(!this._entity.active) return;\n\n        this.ctx._running = false;\n        await this.ctx.onDestroy();\n\n        inspector.lifecyclePanel.render();\n        log(\"mono\", \"stopped\", this.id);\n    }\n\n    async _update(){\n        // if(!this.hasOwnership()) return;\n        if(!this.ctx._running) return;\n        if(!this._entity.active) return;\n        await this.ctx.onUpdate();\n        // log(\"mono\", \"updated\", this.id)\n    }\n\n    async _refresh(){\n        if(!this._entity.active) return;\n\n        const fileName = this.properties.file;\n        if (!fileName || fileName.length === 0) {\n            log(\"mono\", \"No script file to refresh\");\n            return;\n        }\n\n        log(\"mono\", \"refreshing script [\", this.ctx._running, \"]..\");\n\n        if(this.ctx._running){\n            this.ctx._running = false;\n            await this.ctx.onDestroy();\n        }\n\n        // Look up ScriptAsset and reload\n        const scriptAsset = await this.getScriptAsset(fileName);\n        if (scriptAsset) {\n            await this._loadScript(fileName, scriptAsset);\n        } else {\n            log(\"mono\", `ScriptAsset \"${fileName}\" not found for refresh`);\n        }\n\n        log(\"mono\", \"refreshed\", this.id);\n    }\n\n    Start(){\n        log(\"mono\", `Starting ${this.properties.file} on ${this.id}`)\n        const oneShot = 'scriptrunner_start\u00B6' + this.id;\n        net.sendOneShot(oneShot);\n    }\n\n    Stop(){\n        log(\"mono\", `Stopping ${this.properties.file} on ${this.id}`)\n        const oneShot = 'scriptrunner_stop\u00B6' + this.id;\n        net.sendOneShot(oneShot);\n    }\n\n    Refresh(){\n        log(\"mono\", `Refreshing ${this.properties.file} on ${this.id}`)\n        const oneShot = 'scriptrunner_refresh\u00B6' + this.id;\n        net.sendOneShot(oneShot);\n    }\n\n\n\n    newScriptContext(){\n        let newContext =  {\n            vars: SM.props[`__${this.id}/vars:component`] || this.properties.vars || {},\n            _running: false, // Initialize _running to prevent undefined\n            onStart: async ()=>{},\n            onLoaded: async ()=>{},\n            onUpdate: async ()=>{},\n            onDestroy: async ()=>{},\n            onVarChange: async (d,v)=>{},\n            onKeyDown: ()=>{},\n            onKeyUp: ()=>{},\n            keyDown: ()=>{},\n            keyUp: ()=>{},\n            keyPress: ()=>{},\n            log: (...args)=>{ console.log(...args)},\n            _entity: this._entity, // Reference to the entity\n            _scene: window.scene, // Reference to the scene\n            _BS: window.BS, // Reference to BanterScript library\n            _component: this\n        }\n        lifecycle.recordContext(newContext);\n        return newContext;\n    }\n\n    async SetVar(varName, value) {\n        if (!this.ctx || !this.ctx.vars) return;\n        this.ref.child(\"vars\").child(varName).child(\"value\").set(value);\n\n        // // Update locally first\n        // await this._updateVar(varName, value);\n\n        // Note: Network sync would go here if needed\n        // For now, changes are local only\n        // log(\"mono\", \"updated ctx.vars and properties.vars =>\", varName, value);\n    }\n\n    async _setVar(varName, value) {\n        log(\"mono\", \"[MONO] updating var =>\", varName, value)\n        if (!this.ctx || !this.ctx.vars) return;\n        let newValue = value;\n        if(typeof value !== \"object\"){\n            newValue = this.properties.vars[varName];\n            newValue.value = value;\n        }\n\n        this.properties.vars[varName] = newValue;\n        this.ctx.vars[varName] = newValue;\n        await this.ctx.onVarChange(varName, newValue);\n    }\n\n    // loadVarsFromSpaceState(){\n    //     let key = \"__\" + this.id + \"/vars:component\";\n    //     this.ctx.vars = SM.props[key] || {};\n    // }\n\n    async _destroy(){\n        await super._destroy();\n        this._stop();\n        await lifecycle.unregisterScriptRunner(this);\n        inspector.lifecyclePanel.render()\n    }\n}", "import { EntityComponent } from './entity-component.js';\nimport { parseBest } from '../utils.js';\n\nexport class ScriptAssetComponent extends EntityComponent {\n    constructor(){\n        super();\n        this._bsRef = null;\n        this.inventoryItem = null;\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        await super.init(entity, sceneComponent, properties, options);\n        this.type = \"ScriptAsset\";\n        this.setId(this.id.replace(\"undefined\",\"ScriptAsset\"));\n        this.updateRunners();\n        return this;\n    }\n\n    \n    extractProperties(sceneComponent) {\n        return {\n            name: sceneComponent.name || \"myScript\",\n            data: sceneComponent.data || \"\",\n            vars: sceneComponent.vars !== undefined ? sceneComponent.vars : null\n        };\n    }\n\n    defaultProperties(){\n        return {\n            name: \"myScript\",\n            data: \"\",\n            vars: null\n        }\n    }\n\n    async _set(property, value){\n        value = parseBest(value);\n        if(property === \"data\" && value !== this.properties.data){\n            console.log(\"scriptasset\", \"set\", property, value);\n            this.properties[property] = value;\n            this.updateRunners();\n        }else{\n            this.properties[property] = value;\n        }\n    }\n\n    updateRunners(){\n        this.getAllAttachedRunners().forEach(runner => {\n            if(runner.properties.hotreload){\n                runner.Refresh();\n            }\n        });\n    }\n\n    getAllAttachedRunners(){\n        return SM.getAllScriptRunners().filter(x=>x.properties.file === this.properties.name);\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nexport class MeshComponent extends EntityComponent {\n    constructor() {\n        super();\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        await super.init(entity, sceneComponent, properties, options);\n        if(this.options.source === \"ui\"){\n            this.initGrabbable();\n        }\n        return this;\n    }\n\n    async initGrabbable(){\n        let material = this._entity?.getComponent(\"Material\");\n        if(!material){\n            setTimeout(this.initGrabbable.bind(this), 50);\n            return;\n        }\n        material.Set(\"shaderName\", \"Standard\");\n        material.Set(\"color\", material.properties.color);\n        AddComponent(this._entity.id, \"MeshCollider\");\n        AddComponent(this._entity.id, \"ScriptRunner\",{\n            componentProperties:{\n                file: \"Grabbable.js\"\n            }\n        })\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class GeometryComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterGeometry;\n        this.type = 'Geometry';\n    }\n\n    defaultProperties() {\n        return {\n            geometryType: 0,\n            parametricType: 0,\n            width: 1,\n            height: 1,\n            depth: 1,\n            radius: 0.5,\n            radiusTop: 0.5,\n            radiusBottom: 0.5,\n            radialSegments: 32,\n            heightSegments: 1,\n            openEnded: false,\n            thetaStart: 0,\n            thetaLength: 6.283185307179586,\n            phiStart: 0,\n            phiLength: 6.283185307179586,\n            widthSegments: 1,\n            depthSegments: 1,\n            tube: 0.4,\n            tubularSegments: 64,\n            arc: 6.283185307179586,\n            p: 2,\n            q: 3,\n            segments: 64,\n            innerRadius: 0.2,\n            outerRadius: 0.5,\n            phiSegments: 8,\n            thetaSegments: 6\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {\n            geometryType: parseBest(sceneComponent.geometryType) || 0,\n            parametricType: parseBest(sceneComponent.parametricType) || 0\n        };\n\n        const floatProps = [\n            'width', 'height', 'depth', 'radius', 'radiusTop', 'radiusBottom',\n            'radialSegments', 'heightSegments', 'thetaStart', 'thetaLength',\n            'phiStart', 'phiLength', 'widthSegments', 'depthSegments',\n            'tube', 'tubularSegments', 'arc', 'p', 'q', 'segments',\n            'innerRadius', 'outerRadius', 'phiSegments', 'thetaSegments'\n        ];\n\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        if (sceneComponent.openEnded !== undefined) {\n            properties.openEnded = parseBest(sceneComponent.openEnded);\n        }\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Geometry:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class MaterialComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterMaterial;\n        this.type = 'Material';\n    }\n\n    defaultProperties() {\n        return {\n            shaderName: 'Standard',\n            texture: '',\n            color: { r: 1, g: 1, b: 1, a: 1 },\n            side: 0,\n            generateMipMaps: true\n        };\n    }\n\n    enums(){\n        return {\n            shaderName: {\n                'Standard': 'Standard',\n                'Unlit/Diffuse': 'Unlit/Diffuse',\n                'Unlit/DiffuseTransparent': 'Unlit/DiffuseTransparent'\n            }\n        }\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.shaderName !== undefined) {\n            properties.shaderName = parseBest(sceneComponent.shaderName);\n        }\n        \n        if (sceneComponent.texture !== undefined) {\n            properties.texture = parseBest(sceneComponent.texture);\n        }\n        \n        if (sceneComponent.color !== undefined) {\n            // Convert from Vector4 {x,y,z,w} to color {r,g,b,a} format\n            properties.color = {\n                r: sceneComponent.color.x || 1,\n                g: sceneComponent.color.y || 1,\n                b: sceneComponent.color.z || 1,\n                a: sceneComponent.color.w || 1\n            };\n        }\n        \n        if (sceneComponent.side !== undefined) {\n            properties.side = parseBest(sceneComponent.side);\n        }\n        \n        if (sceneComponent.generateMipMaps !== undefined) {\n            properties.generateMipMaps = parseBest(sceneComponent.generateMipMaps);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'color' && typeof value === 'object') {\n                // Convert from color {r,g,b,a} format to Vector4 {x,y,z,w}\n                this._bs.color = new BS.Vector4(value.r || 0, value.g || 0, value.b || 0, value.a || 1);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Material:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class RigidbodyComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterRigidbody;\n        this.type = 'Rigidbody';\n    }\n\n    defaultProperties() {\n        return {\n            velocity: { x: 0, y: 0, z: 0 },\n            angularVelocity: { x: 0, y: 0, z: 0 },\n            mass: 1,\n            drag: 0,\n            angularDrag: 0.05,\n            isKinematic: false,\n            useGravity: true,\n            centerOfMass: { x: 0, y: 0, z: 0 },\n            collisionDetectionMode: 0,\n            freezePositionX: false,\n            freezePositionY: false,\n            freezePositionZ: false,\n            freezeRotationX: false,\n            freezeRotationY: false,\n            freezeRotationZ: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const vector3Props = ['velocity', 'angularVelocity', 'centerOfMass'];\n        vector3Props.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = {\n                    x: sceneComponent[prop].x || 0,\n                    y: sceneComponent[prop].y || 0,\n                    z: sceneComponent[prop].z || 0\n                };\n            }\n        });\n        \n        const floatProps = ['mass', 'drag', 'angularDrag'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        const boolProps = ['isKinematic', 'useGravity', 'freezePositionX', 'freezePositionY', \n                          'freezePositionZ', 'freezeRotationX', 'freezeRotationY', 'freezeRotationZ'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        if (sceneComponent.collisionDetectionMode !== undefined) {\n            properties.collisionDetectionMode = parseBest(sceneComponent.collisionDetectionMode);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (['velocity', 'angularVelocity', 'centerOfMass'].includes(property) && typeof value === 'object') {\n                this._bs[property] = new BS.Vector3(value.x || 0, value.y || 0, value.z || 0);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Rigidbody:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class AudioSourceComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterAudioSource;\n        this.type = 'AudioSource';\n    }\n\n    defaultProperties() {\n        return {\n            volume: 1,\n            pitch: 1,\n            mute: false,\n            loop: false,\n            bypassEffects: false,\n            bypassListenerEffects: false,\n            bypassReverbZones: false,\n            playOnAwake: true,\n            spatialBlend: 1\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['volume', 'pitch', 'spatialBlend'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        const boolProps = ['mute', 'loop', 'bypassEffects', 'bypassListenerEffects', \n                          'bypassReverbZones', 'playOnAwake'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on AudioSource:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class VideoPlayerComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterVideoPlayer;\n        this.type = 'VideoPlayer';\n    }\n\n    defaultProperties() {\n        return {\n            url: '',\n            volume: 1,\n            loop: false,\n            playOnAwake: true,\n            skipOnDrop: false,\n            waitForFirstFrame: false,\n            time: 0\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        if (sceneComponent.url !== undefined) {\n            properties.url = parseBest(sceneComponent.url);\n        }\n\n        const floatProps = ['volume', 'time'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        const boolProps = ['loop', 'playOnAwake', 'skipOnDrop', 'waitForFirstFrame'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        // Read-only properties\n        const readOnlyBoolProps = ['isPlaying', 'isLooping', 'isPrepared', 'isMuted'];\n        readOnlyBoolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        const readOnlyFloatProps = ['duration'];\n        readOnlyFloatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            // Don't try to set read-only properties\n            const readOnlyProps = ['isPlaying', 'isLooping', 'isPrepared', 'isMuted', 'duration'];\n            if (!readOnlyProps.includes(property) && this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on VideoPlayer:`, e);\n        }\n\n    }\n\n    // Control methods\n    PlayToggle() {\n        if (this._bs && typeof this._bs.PlayToggle === 'function') {\n            this._bs.PlayToggle();\n        }\n    }\n\n    MuteToggle() {\n        if (this._bs && typeof this._bs.MuteToggle === 'function') {\n            this._bs.MuteToggle();\n        }\n    }\n\n    Stop() {\n        if (this._bs && typeof this._bs.Stop === 'function') {\n            this._bs.Stop();\n        }\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class TextComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterText;\n        this.type = 'Text';\n    }\n\n    defaultProperties() {\n        return {\n            text: 'New Text',\n            color: { r: 1, g: 1, b: 1, a: 1 },\n            horizontalAlignment: 1,\n            verticalAlignment: 1,\n            fontSize: 0.1,\n            richText: false,\n            enableWordWrapping: true,\n            // rectTransformSizeDelta: { x: 2, y: 1 }\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.text !== undefined) {\n            properties.text = parseBest(sceneComponent.text);\n        }\n        \n        if (sceneComponent.color !== undefined) {\n            // Convert from Vector4 {x,y,z,w} to color {r,g,b,a} format\n            properties.color = {\n                r: sceneComponent.color.x || 1,\n                g: sceneComponent.color.y || 1,\n                b: sceneComponent.color.z || 1,\n                a: sceneComponent.color.w || 1\n            };\n        }\n        \n        const intProps = ['horizontalAlignment', 'verticalAlignment'];\n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        if (sceneComponent.fontSize !== undefined) {\n            properties.fontSize = parseBest(sceneComponent.fontSize);\n        }\n        \n        const boolProps = ['richText', 'enableWordWrapping'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        // if (sceneComponent.rectTransformSizeDelta !== undefined) {\n        //     properties.rectTransformSizeDelta = {\n        //         x: sceneComponent.rectTransformSizeDelta.x || 2,\n        //         y: sceneComponent.rectTransformSizeDelta.y || 1\n        //     };\n        // }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'color' && typeof value === 'object') {\n                // Convert from color {r,g,b,a} format to Vector4 {x,y,z,w}\n                this._bs.color = new BS.Vector4(value.r || 0, value.g || 0, value.b || 0, value.a || 1);\n            } else if (property === 'rectTransformSizeDelta' && typeof value === 'object') {\n                this._bs.rectTransformSizeDelta = new BS.Vector2(value.x || 0, value.y || 0);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Text:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class BoxColliderControls{\n    constructor(component){\n        this.component = component;\n        this.visible = false;\n        this.visual = null;\n        this.visualTransform = null;\n        this.type = 'BoxCollider';\n        this.controls = {\n            'view': {\n                'input': 'button',\n                'callback': this.view.bind(this),\n                'label': 'View',\n                'id': 'view'\n            }\n        }\n    }\n\n    updateVisual(){\n        if(!this.visual) return;\n        if(!this.visualTransform) return;\n\n        this.visualTransform.localScale = new BS.Vector3(this.component.properties.size.x, this.component.properties.size.y, this.component.properties.size.z);\n        this.visualTransform.localPosition = new BS.Vector3(this.component.properties.center.x, this.component.properties.center.y, this.component.properties.center.z);\n\n\n    }\n\n    async view(){\n        this.visible = !this.visible;\n            \n        if(this.visible){\n            this.visual = new BS.GameObject(this.name);\n\n            this.visualTransform = this.visual.transform;\n            this.visualTransform.localScale = new BS.Vector3(this.component.properties.size.x, this.component.properties.size.y, this.component.properties.size.z);\n            this.visualTransform.localPosition = new BS.Vector3(this.component.properties.center.x, this.component.properties.center.y, this.component.properties.center.z);\n\n            \n            this.visual.AddComponent(new BS.BanterGeometry());\n            let material = new BS.BanterMaterial()\n            material.color = new BS.Vector4(0, 1, 0, .25);\n            material.shaderName = 'Unlit/DiffuseTransparent';\n            this.visual.AddComponent(material);\n            await this.visual.SetParent(this.component._entity._bs, true);\n            this.controls['view'].label = \"Hide\";\n        }else{\n            if(this.visual){\n                this.visual.Destroy();\n                this.visual = null;\n            }\n            this.controls['view'].label = \"View\";\n        }\n\n        let buttonEl = document.getElementById(`${this.component.id}_view`);\n        buttonEl.innerHTML = this.controls['view'].label\n\n    }\n}\n\nexport class BoxColliderComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BoxCollider;\n        this.type = 'BoxCollider';\n        this._controls = new BoxColliderControls(this);\n    }\n\n    defaultProperties() {\n        return {\n            isTrigger: false,\n            center: { x: 0, y: 0, z: 0 },\n            size: { x: 1, y: 1, z: 1 }\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.isTrigger !== undefined) {\n            properties.isTrigger = parseBest(sceneComponent.isTrigger);\n        }\n        \n        if (sceneComponent.center !== undefined) {\n            properties.center = {\n                x: sceneComponent.center.x || 0,\n                y: sceneComponent.center.y || 0,\n                z: sceneComponent.center.z || 0\n            };\n        }\n        \n        if (sceneComponent.size !== undefined) {\n            properties.size = {\n                x: sceneComponent.size.x || 1,\n                y: sceneComponent.size.y || 1,\n                z: sceneComponent.size.z || 1\n            };\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if ((property === 'center' || property === 'size') && typeof value === 'object') {\n                this._bs[property] = new BS.Vector3(value.x || 0, value.y || 0, value.z || 0);\n                this._controls.updateVisual();\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on BoxCollider:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class SphereColliderComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.SphereCollider;\n        this.type = 'SphereCollider';\n    }\n\n    defaultProperties() {\n        return {\n            isTrigger: false,\n            center: { x: 0, y: 0, z: 0 },\n            radius: 0.5\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.isTrigger !== undefined) {\n            properties.isTrigger = parseBest(sceneComponent.isTrigger);\n        }\n        \n        if (sceneComponent.center !== undefined) {\n            properties.center = {\n                x: sceneComponent.center.x || 0,\n                y: sceneComponent.center.y || 0,\n                z: sceneComponent.center.z || 0\n            };\n        }\n        \n        if (sceneComponent.radius !== undefined) {\n            properties.radius = parseBest(sceneComponent.radius);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'center' && typeof value === 'object') {\n                this._bs.center = new BS.Vector3(value.x || 0, value.y || 0, value.z || 0);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on SphereCollider:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class CapsuleColliderComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.CapsuleCollider;\n        this.type = 'CapsuleCollider';\n    }\n\n    defaultProperties() {\n        return {\n            isTrigger: false,\n            center: { x: 0, y: 0, z: 0 },\n            radius: 0.5,\n            height: 2,\n            direction: 1\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.isTrigger !== undefined) {\n            properties.isTrigger = parseBest(sceneComponent.isTrigger);\n        }\n        \n        if (sceneComponent.center !== undefined) {\n            properties.center = {\n                x: sceneComponent.center.x || 0,\n                y: sceneComponent.center.y || 0,\n                z: sceneComponent.center.z || 0\n            };\n        }\n        \n        if (sceneComponent.radius !== undefined) {\n            properties.radius = parseBest(sceneComponent.radius);\n        }\n        \n        if (sceneComponent.height !== undefined) {\n            properties.height = parseBest(sceneComponent.height);\n        }\n        \n        if (sceneComponent.direction !== undefined) {\n            properties.direction = parseBest(sceneComponent.direction);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'center' && typeof value === 'object') {\n                this._bs.center = new BS.Vector3(value.x || 0, value.y || 0, value.z || 0);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on CapsuleCollider:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class MeshColliderComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.MeshCollider;\n        this.type = 'MeshCollider';\n    }\n\n    defaultProperties() {\n        return {\n            isTrigger: false,\n            convex: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.isTrigger !== undefined) {\n            properties.isTrigger = parseBest(sceneComponent.isTrigger);\n        }\n        \n        if (sceneComponent.convex !== undefined) {\n            properties.convex = parseBest(sceneComponent.convex);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on MeshCollider:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class BillboardComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterBillboard;\n        this.type = 'Billboard';\n    }\n\n    defaultProperties() {\n        return {\n            smoothing: 0.1,\n            enableXAxis: true,\n            enableYAxis: true,\n            enableZAxis: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.smoothing !== undefined) {\n            properties.smoothing = parseBest(sceneComponent.smoothing);\n        }\n        \n        const boolProps = ['enableXAxis', 'enableYAxis', 'enableZAxis'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Billboard:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class GrabHandleComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterGrabHandle;\n        this.type = 'GrabHandle';\n    }\n\n    enums(){\n        return {\n            grabType: {\n                0: 'POINT',\n                1: 'CYLINDER',\n                2: 'BALL',\n                3: 'SOFT'\n            }\n        }\n    }\n\n    defaultProperties() {\n        return {\n            grabType: 0,\n            grabRadius: 0.1\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.grabType !== undefined) {\n            properties.grabType = parseBest(sceneComponent.grabType);\n        }\n        \n        if (sceneComponent.grabRadius !== undefined) {\n            properties.grabRadius = parseBest(sceneComponent.grabRadius);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on GrabHandle:`, e);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class SyncedObjectComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterSyncedObject;\n        this.type = 'SyncedObject';\n    }\n\n    defaultProperties() {\n        return {\n            syncPosition: true,\n            syncRotation: true,\n            takeOwnershipOnCollision: false,\n            takeOwnershipOnGrab: true,\n            kinematicIfNotOwned: true\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const boolProps = ['syncPosition', 'syncRotation', 'takeOwnershipOnCollision', \n                          'takeOwnershipOnGrab', 'kinematicIfNotOwned'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on SyncedObject:`, e);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class PhysicMaterialComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterPhysicMaterial;\n        this.type = 'PhysicMaterial';\n    }\n\n    defaultProperties() {\n        return {\n            dynamicFriction: 0.6,\n            staticFriction: 0.6\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.dynamicFriction !== undefined) {\n            properties.dynamicFriction = parseBest(sceneComponent.dynamicFriction);\n        }\n        \n        if (sceneComponent.staticFriction !== undefined) {\n            properties.staticFriction = parseBest(sceneComponent.staticFriction);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on PhysicMaterial:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class MirrorComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterMirror;\n        this.type = 'Mirror';\n    }\n\n    defaultProperties() {\n        return {\n            renderTextureSize: 1024,\n            cameraClear: 1,\n            backgroundColor: '#000000'\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.renderTextureSize !== undefined) {\n            properties.renderTextureSize = parseBest(sceneComponent.renderTextureSize);\n        }\n        \n        if (sceneComponent.cameraClear !== undefined) {\n            properties.cameraClear = parseBest(sceneComponent.cameraClear);\n        }\n        \n        if (sceneComponent.backgroundColor !== undefined) {\n            properties.backgroundColor = parseBest(sceneComponent.backgroundColor);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Mirror:`, e);\n        }\n\n    }\n\n    // Culling layer methods\n    SetCullingLayer(layer) {\n        if (this._bs && typeof this._bs.SetCullingLayer === 'function') {\n            this._bs.SetCullingLayer(layer);\n        }\n    }\n\n    AddCullingLayer(layer) {\n        if (this._bs && typeof this._bs.AddCullingLayer === 'function') {\n            this._bs.AddCullingLayer(layer);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class BrowserComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterBrowser;\n        this.type = 'Browser';\n    }\n\n    defaultProperties() {\n        return {\n            url: '',\n            mipMaps: 4,\n            pixelsPerUnit: 1200,\n            pageWidth: 1024,\n            pageHeight: 576,\n            actions: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.url !== undefined) {\n            properties.url = parseBest(sceneComponent.url);\n        }\n        \n        const intProps = ['mipMaps', 'pixelsPerUnit', 'pageWidth', 'pageHeight'];\n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        if (sceneComponent.actions !== undefined) {\n            properties.actions = parseBest(sceneComponent.actions);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Browser:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class HeldEventsComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterHeldEvents;\n        this.type = 'HeldEvents';\n    }\n\n    defaultProperties() {\n        return {\n            sensitivity: 1,\n            fireRate: 0.1,\n            auto: false,\n            blockLeftPrimary: false,\n            blockLeftSecondary: false,\n            blockRightPrimary: false,\n            blockRightSecondary: false,\n            blockLeftThumbstick: false,\n            blockLeftThumbstickClick: false,\n            blockRightThumbstick: false,\n            blockRightThumbstickClick: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['sensitivity', 'fireRate'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        const boolProps = [\n            'auto', 'blockLeftPrimary', 'blockLeftSecondary', \n            'blockRightPrimary', 'blockRightSecondary',\n            'blockLeftThumbstick', 'blockLeftThumbstickClick',\n            'blockRightThumbstick', 'blockRightThumbstickClick'\n        ];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on HeldEvents:`, e);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class AttachedObjectComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterAttachedObject;\n        this.type = 'AttachedObject';\n    }\n\n    defaultProperties() {\n        return {\n            uid: '',\n            // attachmentPosition: { x: 0, y: 0, z: 0 },\n            // attachmentRotation: { x: 0, y: 0, z: 0, w: 1 },\n            // attachmentType: 0,\n            // avatarAttachmentType: 0,\n            // avatarAttachmentPoint: 0,\n            attachmentPoint: 0\n        };\n    }\n\n    enums(){\n        return {\n            attachmentPoint: {\n                0: 'HEAD',\n                1: 'BODY',\n                2: 'LEFT_HAND',\n                3: 'RIGHT_HAND',\n                4: 'COCKPIT'\n            }\n        }\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.uid !== undefined) {\n            properties.uid = parseBest(sceneComponent.uid);\n        }\n        \n        if (sceneComponent.attachmentPosition !== undefined) {\n            properties.attachmentPosition = {\n                x: sceneComponent.attachmentPosition.x || 0,\n                y: sceneComponent.attachmentPosition.y || 0,\n                z: sceneComponent.attachmentPosition.z || 0\n            };\n        }\n        \n        if (sceneComponent.attachmentRotation !== undefined) {\n            properties.attachmentRotation = {\n                x: sceneComponent.attachmentRotation.x || 0,\n                y: sceneComponent.attachmentRotation.y || 0,\n                z: sceneComponent.attachmentRotation.z || 0,\n                w: sceneComponent.attachmentRotation.w || 1\n            };\n        }\n        \n        const enumProps = ['attachmentType', 'avatarAttachmentType', 'avatarAttachmentPoint', 'attachmentPoint'];\n        enumProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n\n        if(property === \"uid\" && value === \"\" && this.properties.uid !== \"\"){\n            log(\"scene\", \"Detaching Object\", this.properties)\n            SM.scene.LegacyAttachObject(this._entity._bs, null, null);\n        }\n\n        this.properties[property] = value;\n\n        try {\n            if (property === 'attachmentPosition' && typeof value === 'object') {\n                this._bs[property] = new BS.Vector3(\n                    parseFloat(value.x || 0),\n                    parseFloat(value.y || 0),\n                    parseFloat(value.z || 0)\n                );\n            } else if (property === 'attachmentRotation' && typeof value === 'object') {\n                value.x = parseFloat(value.x || 0);\n                value.y = parseFloat(value.y || 0);\n                value.z = parseFloat(value.z || 0);\n                if( 'w' in value ){\n                    value.w = parseFloat(value.w || 1);\n                    this._bs[property] = new BS.Vector4(value.x,value.y,value.z,value.w);\n                }else{\n                    value = eulerToQuaternion(value);\n                    this._bs[property] = new BS.Vector4(value.x,value.y,value.z,value.w);\n                }\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            err(\"scene\", `Failed to update ${property} on AttachedObject:`, e);\n        }\n        \n        if(this.properties.uid){\n            log(\"scene\", \"Attaching Object\", this._entity._bs, this.properties.uid, this.properties.attachmentPoint)\n            SM.scene.LegacyAttachObject(this._entity._bs, this.properties.uid, this.properties.attachmentPoint);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\n\n// Reference code for the gltf component via pure BanterScript code\n// const go = new BS.GameObject();\n// const glb = new BS.BanterGLTF('https://cdn.sidequestvr.com/file/2309817/christmas_tree_polycraft.glb');\n// await go.AddComponent(glb);\n// const transform = await go.AddComponent(new BS.Transform());\n// transform.localScale = new BS.Vector3(0.01, 0.01, 0.01);    \n\nexport class GLTFComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = false;\n        this.type = 'GLTF';\n        this._generationTimeout = null;\n        // this._gltfObject = null;\n        this._gltfComponent = null;\n        this._gltfTransform = null;\n    }\n\n    defaultProperties() {\n        return {\n            url: '',\n            generateMipMaps: true,\n            addColliders: false,\n            nonConvexColliders: false,\n            slippery: false,\n            climbable: false,\n            legacyRotate: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.url !== undefined) {\n            properties.url = parseBest(sceneComponent.url);\n        }\n        \n        const boolProps = [\n            'generateMipMaps', 'addColliders', 'nonConvexColliders',\n            'slippery', 'climbable', 'legacyRotate'\n        ];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    async generate(){\n        if(!this.properties.url || this.properties.url === ''){\n            log('gltf', 'no url provided, skipping generation..')\n            return;\n        }\n\n        log('gltf', 'generating', this.properties)\n        if(this._gltfComponent){\n            log('gltf', 'destroying old gltf component..')\n            await this._gltfComponent.Destroy();\n        }\n\n        log('gltf', 'creating new gltf object..')\n        this._gltfComponent = new BS.BanterGLTF(this.properties.url, this.properties.generateMipMaps, this.properties.addColliders, this.properties.nonConvexColliders, this.properties.slippery, this.properties.climbable, this.properties.legacyRotate);\n        await this._entity._bs.AddComponent(this._gltfComponent);\n    }\n\n    async _set(property, value) {\n        value = parseBest(value);\n        this.properties[property] = value;\n        if(this._generationTimeout){\n            clearTimeout(this._generationTimeout);\n        }\n        this._generationTimeout = setTimeout(this.generate.bind(this), 500)\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class AssetBundleComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterAssetBundle;\n        this.type = 'AssetBundle';\n    }\n\n    defaultProperties() {\n        return {\n            windowsUrl: '',\n            osxUrl: '',\n            linuxUrl: '',\n            androidUrl: '',\n            iosUrl: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const urlProps = ['windowsUrl', 'osxUrl', 'linuxUrl', 'androidUrl', 'iosUrl'];\n        urlProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on AssetBundle:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class PortalComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterPortal;\n        this.type = 'Portal';\n    }\n\n    defaultProperties() {\n        return {\n            url: '',\n            instance: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.url !== undefined) {\n            properties.url = parseBest(sceneComponent.url);\n        }\n        \n        if (sceneComponent.instance !== undefined) {\n            properties.instance = parseBest(sceneComponent.instance);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Portal:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\n\nexport class ColliderEventsComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterColliderEvents;\n        this.type = 'ColliderEvents';\n    }\n\n    defaultProperties() {\n        return {};\n    }\n\n    extractProperties(sceneComponent) {\n        return {};\n    }\n\n    _set(property, value) {\n        // BanterColliderEvents has no properties to update\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class BoxComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterGeometry;\n        this.type = 'Box';\n    }\n\n    defaultProperties() {\n        return {\n            width: 1,\n            height: 1,\n            depth: 1,\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        const floatProps = ['width', 'height', 'depth'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        }); \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        \n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Box:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class CircleComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterCircle;\n        this.type = 'Circle';\n    }\n\n    defaultProperties() {\n        return {\n            radius: 1,\n            segments: 1,\n            thetaStart: 0,\n            thetaLength: 6.283185307179586\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['radius', 'thetaStart', 'thetaLength'];\n        const intProps = ['segments'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Circle:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class ConeComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterCone;\n        this.type = 'Cone';\n    }\n\n    defaultProperties() {\n        return {\n            radius: 1,\n            height: 1,\n            radialSegments: 32,\n            heightSegments: 1,\n            openEnded: false,\n            thetaStart: 0,\n            thetaLength: 6.283185307179586\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['radius', 'height', 'thetaStart', 'thetaLength'];\n        const intProps = ['radialSegments', 'heightSegments'];\n        const boolProps = ['openEnded'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Cone:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class CylinderComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterGeometry;\n        this.type = 'Cylinder';\n    }\n\n    async init(entity, sceneComponent, properties, options){\n        await super.init(entity, sceneComponent, properties, options);\n        this._bs['geometryType'] = 2;\n        return this;\n    }\n\n\n    defaultProperties() {\n        return {\n             height: 1,\n             radialSegments: 32,\n             radius: 1,\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        const props = ['height','radius', 'radialSegments'];\n        props.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                if(property === 'radius'){\n                    this._bs['radiusTop'] = value;\n                    this._bs['radiusBottom'] = value;\n                }else{\n                    this._bs[property] = value;\n                }\n                \n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Cylinder:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class PlaneComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterPlane;\n        this.type = 'Plane';\n    }\n\n    defaultProperties() {\n        return {\n            width: 1,\n            height: 1,\n            widthSegments: 1,\n            heightSegments: 1\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['width', 'height'];\n        const intProps = ['widthSegments', 'heightSegments'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Plane:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class RingComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterRing;\n        this.type = 'Ring';\n    }\n\n    defaultProperties() {\n        return {\n            innerRadius: 1,\n            outerRadius: 2,\n            thetaSegments: 32,\n            phiSegments: 1,\n            thetaStart: 0,\n            thetaLength: 6.283185307179586\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['innerRadius', 'outerRadius', 'thetaStart', 'thetaLength'];\n        const intProps = ['thetaSegments', 'phiSegments'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Ring:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class SphereComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterSphere;\n        this.type = 'Sphere';\n    }\n\n    defaultProperties() {\n        return {\n            radius: 1,\n            widthSegments: 16,\n            heightSegments: 16,\n            phiStart: 0,\n            phiLength: 6.283185307179586,\n            thetaStart: 0,\n            thetaLength: 3.141592653589793\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['radius', 'phiStart', 'phiLength', 'thetaStart', 'thetaLength'];\n        const intProps = ['widthSegments', 'heightSegments'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Sphere:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class TorusComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterTorus;\n        this.type = 'Torus';\n    }\n\n    defaultProperties() {\n        return {\n            tube: 1,\n            radialSegments: 8,\n            tubularSegments: 6,\n            arc: 6.283185307179586\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        const floatProps = ['tube', 'arc'];\n        const intProps = ['radialSegments', 'tubularSegments'];\n        \n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Torus:`, e);\n        }\n\n    }\n}", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class InvertedMeshComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterInvertedMesh;\n        this.type = 'InvertedMesh';\n    }\n\n    defaultProperties() {\n        return {};\n    }\n\n    extractProperties(sceneComponent) {\n        return {};\n    }\n\n    _set(property, value) {\n        // BanterInvertedMesh has no properties to update\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class KitItemComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterKitItem;\n        this.type = 'KitItem';\n    }\n\n    defaultProperties() {\n        return {\n            path: '',\n            resetTransform: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.path !== undefined) {\n            properties.path = sceneComponent.path;\n        }\n        \n        if (sceneComponent.resetTransform !== undefined) {\n            properties.resetTransform = sceneComponent.resetTransform;\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on KitItem:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class StreetViewComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterStreetView;\n        this.type = 'StreetView';\n    }\n\n    defaultProperties() {\n        return {\n            panoId: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n        \n        if (sceneComponent.panoId !== undefined) {\n            properties.panoId = parseBest(sceneComponent.panoId);\n        }\n        \n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on StreetView:`, e);\n        }\n\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class WorldObjectComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterWorldObject;\n        this.type = 'WorldObject';\n    }\n\n    defaultProperties() {\n        return {};\n    }\n\n    extractProperties(sceneComponent) {\n        return {};\n    }\n\n    _set(property, value) {\n        // BanterWorldObject has no properties to update\n    }\n}", "import { EntityComponent } from '../entity-component.js';\n\nlet noInf = (value)=>{\n    if(value === Infinity) return 999999;\n    return value;\n}\n\nexport class ConfigurableJointComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.ConfigurableJoint;\n        this.type = 'ConfigurableJoint';\n    }\n\n    defaultProperties() {\n        return {\n            targetPosition: { x: 0, y: 0, z: 0 },\n            autoConfigureConnectedAnchor: false,\n            xMotion: 0,\n            yMotion: 0,\n            zMotion: 0,\n            angularXMotion: 0,\n            angularYMotion: 0,\n            angularZMotion: 0,\n            anchor: { x: 0, y: 0, z: 0 },\n            axis: { x: 1, y: 0, z: 0 },\n            secondaryAxis: { x: 0, y: 1, z: 0 },\n            connectedAnchor: { x: 0, y: 0, z: 0 },\n            targetRotation: { x: 0, y: 0, z: 0, w: 1 },\n            targetVelocity: { x: 0, y: 0, z: 0 },\n            targetAngularVelocity: { x: 0, y: 0, z: 0 },\n            enableCollision: false,\n            enablePreprocessing: true,\n            breakForce: 999999,\n            breakTorque: 999999,\n            connectedMassScale: 1,\n            massScale: 1,\n            rotationDriveMode: 0,\n            configuredInWorldSpace: false,\n            swapBodies: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        // Vector3 properties\n        const vector3Props = ['targetPosition', 'anchor', 'axis', 'secondaryAxis', 'connectedAnchor', 'targetVelocity', 'targetAngularVelocity'];\n        vector3Props.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = {\n                    x: noInf(sceneComponent[prop].x) || 0,\n                    y: noInf(sceneComponent[prop].y) || 0,\n                    z: noInf(sceneComponent[prop].z) || 0\n                };\n            }\n        });\n\n        // Quaternion property\n        if (sceneComponent.targetRotation !== undefined) {\n            properties.targetRotation = {\n                x: noInf(sceneComponent.targetRotation.x) || 0,\n                y: noInf(sceneComponent.targetRotation.y) || 0,\n                z: noInf(sceneComponent.targetRotation.z) || 0,\n                w: noInf(sceneComponent.targetRotation.w) || 1\n            };\n        }\n\n        // Motion constraint properties\n        const motionProps = ['xMotion', 'yMotion', 'zMotion', 'angularXMotion', 'angularYMotion', 'angularZMotion'];\n        motionProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = noInf(sceneComponent[prop]);\n            }\n        });\n\n        // Boolean properties\n        const boolProps = ['autoConfigureConnectedAnchor', 'enableCollision', 'enablePreprocessing', 'configuredInWorldSpace', 'swapBodies'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = noInf(sceneComponent[prop]);\n            }\n        });\n\n        // Numeric properties\n        const numericProps = ['breakForce', 'breakTorque', 'connectedMassScale', 'massScale', 'rotationDriveMode'];\n        numericProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {   \n                properties[prop] = noInf(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        this.properties[property] = value;\n\n        try {\n            const vector3Props = ['targetPosition', 'anchor', 'axis', 'secondaryAxis', 'connectedAnchor', 'targetVelocity', 'targetAngularVelocity'];\n\n            if (vector3Props.includes(property) && typeof value === 'object') {\n                this._bs[property] = new BS.Vector3(noInf(value.x) || 0, noInf(value.y) || 0, noInf(value.z) || 0);\n            } else if (property === 'targetRotation' && typeof value === 'object') {\n                this._bs.targetRotation = new BS.Quaternion(noInf(value.x) || 0, noInf(value.y) || 0, noInf(value.z) || 0, noInf(value.w) || 1);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on ConfigurableJoint:`, e);\n        }\n    }\n}", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nlet noInf = (value)=>{\n    if(value === Infinity) return 999999;\n    return value;\n}\n\n\n/**\n * Base class for all Unity joint components\n * Provides common properties and methods shared by all joint types\n */\nexport class JointComponent extends EntityComponent {\n    constructor() {\n        super();\n    }\n\n    /**\n     * Default properties common to all joints\n     */\n    defaultJointProperties() {\n        return {\n            anchor: { x: 0, y: 0, z: 0 },\n            connectedAnchor: { x: 0, y: 0, z: 0 },\n            autoConfigureConnectedAnchor: true,\n            breakForce: 999999,\n            breakTorque: 999999,\n            enableCollision: false,\n            enablePreprocessing: true,\n            connectedMassScale: 1,\n            massScale: 1\n        };\n    }\n\n\n    /**\n     * Extract common joint properties from scene component\n     */\n    extractJointProperties(sceneComponent) {\n        const properties = {};\n\n        // Vector3 properties\n        const vector3Props = ['anchor', 'connectedAnchor'];\n        vector3Props.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = {\n                    x: noInf(sceneComponent[prop].x) || 0,\n                    y: noInf(sceneComponent[prop].y) || 0,\n                    z: noInf(sceneComponent[prop].z) || 0\n                };\n            }\n        });\n\n        // Boolean and numeric properties\n        const simpleProps = [\n            'autoConfigureConnectedAnchor',\n            'breakForce',\n            'breakTorque',\n            'enableCollision',\n            'enablePreprocessing',\n            'connectedMassScale',\n            'massScale'\n        ];\n        simpleProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    /**\n     * Set a joint property with appropriate type handling\n     */\n    _setJointProperty(property, value) {\n        if (!this._bs) return;\n\n        const vector3Props = ['anchor', 'connectedAnchor', 'axis', 'swingAxis', 'secondaryAxis'];\n\n        try {\n            if (vector3Props.includes(property) && typeof value === 'object') {\n                this._bs[property] = new BS.Vector3(noInf(value.x) || 0, noInf(value.y) || 0, noInf(value.z) || 0);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on ${this.type}:`, e);\n        }\n    }\n}\n", "import { JointComponent } from './joint-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class CharacterJointComponent extends JointComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.CharacterJoint;\n        this.type = 'CharacterJoint';\n    }\n\n    defaultProperties() {\n        return {\n            ...this.defaultJointProperties(),\n            axis: { x: 1, y: 0, z: 0 },\n            swingAxis: { x: 0, y: 1, z: 0 },\n            enableProjection: false,\n            projectionDistance: 0.1,\n            projectionAngle: 180\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = this.extractJointProperties(sceneComponent);\n\n        // Vector3 properties specific to CharacterJoint\n        const vector3Props = ['axis', 'swingAxis'];\n        vector3Props.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = {\n                    x: sceneComponent[prop].x || 0,\n                    y: sceneComponent[prop].y || 0,\n                    z: sceneComponent[prop].z || 0\n                };\n            }\n        });\n\n        // Projection properties\n        if (sceneComponent.enableProjection !== undefined) {\n            properties.enableProjection = parseBest(sceneComponent.enableProjection);\n        }\n        if (sceneComponent.projectionDistance !== undefined) {\n            properties.projectionDistance = parseBest(sceneComponent.projectionDistance);\n        }\n        if (sceneComponent.projectionAngle !== undefined) {\n            properties.projectionAngle = parseBest(sceneComponent.projectionAngle);\n        }\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        this._setJointProperty(property, value);\n\n    }\n}\n", "import { JointComponent } from './joint-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class FixedJointComponent extends JointComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.FixedJoint;\n        this.type = 'FixedJoint';\n    }\n\n    defaultProperties() {\n        return this.defaultJointProperties();\n    }\n\n    extractProperties(sceneComponent) {\n        return this.extractJointProperties(sceneComponent);\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        this._setJointProperty(property, value);\n\n    }\n}\n", "import { JointComponent } from './joint-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class HingeJointComponent extends JointComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.HingeJoint;\n        this.type = 'HingeJoint';\n    }\n\n    defaultProperties() {\n        return {\n            ...this.defaultJointProperties(),\n            axis: { x: 0, y: 1, z: 0 },\n            useLimits: false,\n            useMotor: false,\n            useSpring: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = this.extractJointProperties(sceneComponent);\n\n        // Vector3 property specific to HingeJoint\n        if (sceneComponent.axis !== undefined) {\n            properties.axis = {\n                x: sceneComponent.axis.x || 0,\n                y: sceneComponent.axis.y || 0,\n                z: sceneComponent.axis.z || 0\n            };\n        }\n\n        // Hinge-specific boolean properties\n        const boolProps = ['useLimits', 'useMotor', 'useSpring'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        this._setJointProperty(property, value);\n\n    }\n}\n", "import { JointComponent } from './joint-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class SpringJointComponent extends JointComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.SpringJoint;\n        this.type = 'SpringJoint';\n    }\n\n    defaultProperties() {\n        return {\n            ...this.defaultJointProperties(),\n            spring: 0,\n            damper: 0,\n            minDistance: 0,\n            maxDistance: 0,\n            tolerance: 0.025\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = this.extractJointProperties(sceneComponent);\n\n        // Spring-specific properties\n        const springProps = ['spring', 'damper', 'minDistance', 'maxDistance', 'tolerance'];\n        springProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        this._setJointProperty(property, value);\n\n    }\n}\n", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class GrabbableComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterGrababble;  // Note: BS library has typo \"Grababble\"\n        this.type = 'Grabbable';\n    }\n\n    defaultProperties() {\n        return {\n            grabType: 0,\n            grabRadius: 0.1,\n            gunTriggerSensitivity: 0.5,\n            gunTriggerFireRate: 0.1,\n            gunTriggerAutoFire: false,\n            blockLeftPrimary: false,\n            blockLeftSecondary: false,\n            blockRightPrimary: false,\n            blockRightSecondary: false,\n            blockLeftThumbstick: false,\n            blockLeftThumbstickClick: false,\n            blockRightThumbstick: false,\n            blockRightThumbstickClick: false,\n            blockLeftTrigger: false,\n            blockRightTrigger: false\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        // Numeric properties\n        const numericProps = ['grabType', 'grabRadius', 'gunTriggerSensitivity', 'gunTriggerFireRate'];\n        numericProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        // Boolean properties\n        const boolProps = [\n            'gunTriggerAutoFire',\n            'blockLeftPrimary',\n            'blockLeftSecondary',\n            'blockRightPrimary',\n            'blockRightSecondary',\n            'blockLeftThumbstick',\n            'blockLeftThumbstickClick',\n            'blockRightThumbstick',\n            'blockRightThumbstickClick',\n            'blockLeftTrigger',\n            'blockRightTrigger'\n        ];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Grabbable:`, e);\n        }\n    }\n}\n", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class UIPanelComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterUIPanel;\n        this.type = 'UIPanel';\n    }\n\n    defaultProperties() {\n        return {\n            resolution: { x: 1024, y: 1024 },\n            screenSpace: false,\n            enableHaptics: true,\n            clickHaptic: 0.5,\n            enterHaptic: 0.2,\n            exitHaptic: 0.1,\n            enableSounds: true,\n            clickSoundUrl: '',\n            enterSoundUrl: '',\n            exitSoundUrl: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        // Vector2 property (resolution)\n        if (sceneComponent.resolution !== undefined) {\n            properties.resolution = {\n                x: sceneComponent.resolution.x || 1024,\n                y: sceneComponent.resolution.y || 1024\n            };\n        }\n\n        // Boolean properties\n        const boolProps = ['screenSpace', 'enableHaptics', 'enableSounds'];\n        boolProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        // Float properties\n        const floatProps = ['clickHaptic', 'enterHaptic', 'exitHaptic'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        // String properties\n        const stringProps = ['clickSoundUrl', 'enterSoundUrl', 'exitSoundUrl'];\n        stringProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'resolution' && typeof value === 'object') {\n                this._bs.resolution = new BS.Vector2(value.x || 1024, value.y || 1024);\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on UIPanel:`, e);\n        }\n\n    }\n\n    // Methods\n    SetBackgroundColor(color) {\n        if (this._bs && typeof this._bs.SetBackgroundColor === 'function') {\n            this._bs.SetBackgroundColor(color);\n        }\n    }\n}\n", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class AvatarPedestalComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterAvatarPedestal;\n        this.type = 'AvatarPedestal';\n    }\n\n    defaultProperties() {\n        return {\n            avatarId: ''\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        if (sceneComponent.avatarId !== undefined) {\n            properties.avatarId = parseBest(sceneComponent.avatarId);\n        }\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on AvatarPedestal:`, e);\n        }\n\n    }\n}\n", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class TorusKnotComponent extends MeshComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterTorusKnot;\n        this.type = 'TorusKnot';\n    }\n\n    defaultProperties() {\n        return {\n            radius: 0.5,\n            tube: 0.2,\n            radialSegments: 64,\n            tubularSegments: 128,\n            p: 2,\n            q: 3\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        const floatProps = ['radius', 'tube', 'radialSegments', 'tubularSegments', 'p', 'q'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on TorusKnot:`, e);\n        }\n\n    }\n}\n", "import { MeshComponent } from './mesh-component.js';\nimport { parseBest } from '../../utils.js';\n\n/**\n * Base class for parametric surface mesh components\n * All parametric surfaces share the same stacks/slices properties\n */\nexport class ParametricSurfaceComponent extends MeshComponent {\n    constructor() {\n        super();\n    }\n\n    defaultProperties() {\n        return {\n            stacks: 20,\n            slices: 20\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        if (sceneComponent.stacks !== undefined) {\n            properties.stacks = parseBest(sceneComponent.stacks);\n        }\n        if (sceneComponent.slices !== undefined) {\n            properties.slices = parseBest(sceneComponent.slices);\n        }\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on ${this.type}:`, e);\n        }\n\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class AppleComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterApple;\n        this.type = 'Apple';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class CatenoidComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterCatenoid;\n        this.type = 'Catenoid';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class FermetComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterFermet;\n        this.type = 'Fermet';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class HelicoidComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterHelicoid;\n        this.type = 'Helicoid';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class HornComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterHorn;\n        this.type = 'Horn';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class KleinComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterKlein;\n        this.type = 'Klein';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class MobiusComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterMobius;\n        this.type = 'Mobius';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class Mobius3dComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterMobius3d;\n        this.type = 'Mobius3d';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class NaticaComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterNatica;\n        this.type = 'Natica';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class PillowComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterPillow;\n        this.type = 'Pillow';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class ScherkComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterScherk;\n        this.type = 'Scherk';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class SnailComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterSnail;\n        this.type = 'Snail';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class SpiralComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterSpiral;\n        this.type = 'Spiral';\n    }\n}\n", "import { ParametricSurfaceComponent } from './parametric-surface.js';\n\nexport class SpringComponent extends ParametricSurfaceComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.BanterSpring;\n        this.type = 'Spring';\n    }\n}\n", "import { EntityComponent } from '../entity-component.js';\nimport { parseBest } from '../../utils.js';\n\nexport class LightComponent extends EntityComponent {\n    constructor() {\n        super();\n        this._bsRef = BS.Light;\n        this.type = 'Light';\n    }\n\n    enums(){\n        return {\n            type: {\n                0: 'SPOT',\n                1: 'DIRECTIONAL',\n                2: 'POINT',\n                3: 'RECTANGLE',\n                4: 'DISC',\n                5: 'PYRAMID',\n                6: 'BOX',\n                7: 'TUBE'\n            }\n        }\n    }\n\n    defaultProperties() {\n        return {\n            type: 1,              // LightType: Directional=0, Point=1, Spot=2, Area=3\n            color: { r: 1, g: 1, b: 1, a: 1 },  // White light\n            intensity: 1,         // Light intensity\n            range: 10,            // Range for Point and Spot lights\n            spotAngle: 30,        // Outer cone angle for Spot lights (degrees)\n            innerSpotAngle: 21.8, // Inner cone angle for Spot lights (degrees)\n            shadows: 0,           // ShadowType: None=0, Hard=1, Soft=2\n            shadowStrength: 1,    // Shadow intensity (0-1)\n            bounceIntensity: 1,   // Indirect lighting intensity\n            cookieSize: 10,       // Cookie texture size for directional lights\n            renderMode: 0,        // Auto=0, Important=1, NotImportant=2\n            cullingMask: -1       // Layers to illuminate (-1 = everything)\n        };\n    }\n\n    extractProperties(sceneComponent) {\n        const properties = {};\n\n        // Color property\n        if (sceneComponent.color !== undefined) {\n            properties.color = {\n                r: sceneComponent.color.r || 1,\n                g: sceneComponent.color.g || 1,\n                b: sceneComponent.color.b || 1,\n                a: sceneComponent.color.a || 1\n            };\n        }\n\n        // Float properties\n        const floatProps = ['intensity', 'range', 'spotAngle', 'innerSpotAngle',\n                           'shadowStrength', 'bounceIntensity', 'cookieSize'];\n        floatProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        // Integer/enum properties\n        const intProps = ['type', 'shadows', 'renderMode', 'cullingMask'];\n        intProps.forEach(prop => {\n            if (sceneComponent[prop] !== undefined) {\n                properties[prop] = parseBest(sceneComponent[prop]);\n            }\n        });\n\n        return properties;\n    }\n\n    _set(property, value) {\n        if (!this._bs) return;\n\n        value = parseBest(value);\n        this.properties[property] = value;\n\n        try {\n            if (property === 'color' && typeof value === 'object') {\n                // Handle color as Color object\n                if (BS.Color) {\n                    this._bs[property] = new BS.Color(\n                        value.r || 0,\n                        value.g || 0,\n                        value.b || 0,\n                        value.a || 1\n                    );\n                }\n            } else if (this._bs[property] !== undefined) {\n                this._bs[property] = value;\n            }\n        } catch (e) {\n            console.error(`Failed to update ${property} on Light:`, e);\n        }\n\n    }\n}\n", "import { EntityComponent } from './entity-component.js';\nimport { Entity } from '../entity.js';\nimport { TransformComponent } from './transform.js';\nimport { ScriptRunnerComponent } from './scriptrunner.js';\nimport { ScriptAssetComponent } from './script.js';\nimport { GeometryComponent } from './meshes/geometry.js';\nimport { MaterialComponent } from './materials/material.js';\nimport { RigidbodyComponent } from './physics/rigidbody.js';\nimport { AudioSourceComponent } from './media/audio-source.js';\nimport { VideoPlayerComponent } from './media/video-player.js';\nimport { TextComponent } from './meshes/text.js';\nimport { BoxColliderComponent } from './physics/box-collider.js';\nimport { SphereColliderComponent } from './physics/sphere-collider.js';\nimport { CapsuleColliderComponent } from './physics/capsule-collider.js';\nimport { MeshColliderComponent } from './physics/mesh-collider.js';\nimport { BillboardComponent } from './misc/billboard.js';\nimport { GrabHandleComponent } from './behaviors/grab-handle.js';\nimport { SyncedObjectComponent } from './behaviors/synced-object.js';\nimport { PhysicMaterialComponent } from './materials/physic-material.js';\nimport { MirrorComponent } from './misc/mirror.js';\nimport { BrowserComponent } from './misc/browser.js';\nimport { HeldEventsComponent } from './behaviors/held-events.js';\nimport { AttachedObjectComponent } from './behaviors/attached-object.js';\nimport { GLTFComponent } from './media/gltf.js';\nimport { AssetBundleComponent } from './misc/asset-bundle.js';\nimport { PortalComponent } from './misc/portal.js';\nimport { ColliderEventsComponent } from './behaviors/collider-events.js';\nimport { BoxComponent } from './meshes/box.js';\nimport { CircleComponent } from './meshes/circle.js';\nimport { ConeComponent } from './meshes/cone.js';\nimport { CylinderComponent } from './meshes/cylinder.js';\nimport { PlaneComponent } from './meshes/plane.js';\nimport { RingComponent } from './meshes/ring.js';\nimport { SphereComponent } from './meshes/sphere.js';\nimport { TorusComponent } from './meshes/torus.js';\nimport { InvertedMeshComponent } from './meshes/inverted-mesh.js';\nimport { KitItemComponent } from './misc/kit-item.js';\nimport { StreetViewComponent } from './misc/street-view.js';\nimport { WorldObjectComponent } from './misc/world-object.js';\nimport { ConfigurableJointComponent } from './physics/configurable-joint.js';\nimport { CharacterJointComponent } from './physics/character-joint.js';\nimport { FixedJointComponent } from './physics/fixed-joint.js';\nimport { HingeJointComponent } from './physics/hinge-joint.js';\nimport { SpringJointComponent } from './physics/spring-joint.js';\nimport { GrabbableComponent } from './behaviors/grabbable.js';\nimport { UIPanelComponent } from './misc/ui-panel.js';\nimport { AvatarPedestalComponent } from './misc/avatar-pedestal.js';\nimport { TorusKnotComponent } from './meshes/torus-knot.js';\nimport { AppleComponent } from './meshes/apple.js';\nimport { CatenoidComponent } from './meshes/catenoid.js';\nimport { FermetComponent } from './meshes/fermet.js';\nimport { HelicoidComponent } from './meshes/helicoid.js';\nimport { HornComponent } from './meshes/horn.js';\nimport { KleinComponent } from './meshes/klein.js';\nimport { MobiusComponent } from './meshes/mobius.js';\nimport { Mobius3dComponent } from './meshes/mobius3d.js';\nimport { NaticaComponent } from './meshes/natica.js';\nimport { PillowComponent } from './meshes/pillow.js';\nimport { ScherkComponent } from './meshes/scherk.js';\nimport { SnailComponent } from './meshes/snail.js';\nimport { SpiralComponent } from './meshes/spiral.js';\nimport { SpringComponent } from './meshes/spring.js';\nimport { LightComponent } from './misc/light.js';\n\nexport const BanterLayers = {\n    Default: 0,\n    TransparentFX: 1,\n    IgnoreRaycast: 2,\n    UserLayer1: 3,\n    Water: 4,\n    UI: 5,\n    UserLayer2: 6,\n    UserLayer3: 7,\n    UserLayer4: 8,\n    UserLayer5: 9,\n    UserLayer6: 10,\n    UserLayer7: 11,\n    UserLayer8: 12,\n    UserLayer9: 13,\n    UserLayer10: 14,\n    UserLayer11: 15,\n    UserLayer12: 16,\n    NetworkPlayer: 17,\n    RPMAvatarHead: 18,\n    RPMAvatarBody: 19,\n    Grabbable: 20,\n    HandColliders: 21,\n    WalkingLegs: 22,\n    PhysicsPlayer: 23,\n }\n\nexport const SUPPORTED_COMPONENTS = new Set([\n    BS.ComponentType.Transform,\n    BS.ComponentType.BanterGeometry,\n    BS.ComponentType.BanterMaterial,\n    BS.ComponentType.BanterRigidbody,\n    BS.ComponentType.BanterAudioSource,\n    BS.ComponentType.BanterVideoPlayer,\n    BS.ComponentType.BanterText,\n    BS.ComponentType.BoxCollider,\n    BS.ComponentType.SphereCollider,\n    BS.ComponentType.CapsuleCollider,\n    BS.ComponentType.MeshCollider,\n    BS.ComponentType.BanterBillboard,\n    BS.ComponentType.BanterGrabHandle,\n    BS.ComponentType.BanterSyncedObject,\n    BS.ComponentType.BanterPhysicMaterial,\n    BS.ComponentType.BanterMirror,\n    BS.ComponentType.BanterBrowser,\n    BS.ComponentType.BanterHeldEvents,\n    BS.ComponentType.BanterAttachedObject,\n    BS.ComponentType.BanterGLTF,\n    BS.ComponentType.BanterAssetBundle,\n    BS.ComponentType.BanterPortal,\n    BS.ComponentType.BanterColliderEvents,\n    BS.ComponentType.BanterBox,\n    BS.ComponentType.BanterCircle,\n    BS.ComponentType.BanterCone,\n    BS.ComponentType.BanterCylinder,\n    BS.ComponentType.BanterPlane,\n    BS.ComponentType.BanterRing,\n    BS.ComponentType.BanterSphere,\n    BS.ComponentType.BanterTorus,\n    BS.ComponentType.BanterInvertedMesh,\n    BS.ComponentType.BanterKitItem,\n    BS.ComponentType.BanterStreetView,\n    BS.ComponentType.BanterWorldObject,\n    BS.ComponentType.ConfigurableJoint,\n    BS.ComponentType.CharacterJoint,\n    BS.ComponentType.FixedJoint,\n    BS.ComponentType.HingeJoint,\n    BS.ComponentType.SpringJoint,\n    BS.ComponentType.BanterGrabbable,\n    BS.ComponentType.BanterUIPanel,\n    BS.ComponentType.BanterAvatarPedestal,\n    BS.ComponentType.BanterTorusKnot,\n    BS.ComponentType.BanterApple,\n    BS.ComponentType.BanterCatenoid,\n    BS.ComponentType.BanterFermet,\n    BS.ComponentType.BanterHelicoid,\n    BS.ComponentType.BanterHorn,\n    BS.ComponentType.BanterKlein,\n    BS.ComponentType.BanterMobius,\n    BS.ComponentType.BanterMobius3d,\n    BS.ComponentType.BanterNatica,\n    BS.ComponentType.BanterPillow,\n    BS.ComponentType.BanterScherk,\n    BS.ComponentType.BanterSnail,\n    BS.ComponentType.BanterSpiral,\n    BS.ComponentType.BanterSpring,\n    BS.ComponentType.Light\n]);\n\nexport const componentTypeMap = {\n    \"Transform\": TransformComponent,\n    \"Geometry\": GeometryComponent,\n    \"Material\": MaterialComponent,\n    \"Rigidbody\": RigidbodyComponent,\n    \"AudioSource\": AudioSourceComponent,\n    \"VideoPlayer\": VideoPlayerComponent,\n    \"Text\": TextComponent,\n    \"BoxCollider\": BoxColliderComponent,\n    \"SphereCollider\": SphereColliderComponent,\n    \"CapsuleCollider\": CapsuleColliderComponent,\n    \"MeshCollider\": MeshColliderComponent,\n    \"Billboard\": BillboardComponent,\n    \"GrabHandle\": GrabHandleComponent,\n    \"SyncedObject\": SyncedObjectComponent,\n    \"PhysicMaterial\": PhysicMaterialComponent,\n    \"Mirror\": MirrorComponent,\n    \"Browser\": BrowserComponent,\n    \"HeldEvents\": HeldEventsComponent,\n    \"AttachedObject\": AttachedObjectComponent,\n    \"GLTF\": GLTFComponent,\n    \"AssetBundle\": AssetBundleComponent,\n    \"Portal\": PortalComponent,\n    \"ColliderEvents\": ColliderEventsComponent,\n    \"Box\": BoxComponent,\n    \"Circle\": CircleComponent,\n    \"Cone\": ConeComponent,\n    \"Cylinder\": CylinderComponent,\n    \"Plane\": PlaneComponent,\n    \"Ring\": RingComponent,\n    \"Sphere\": SphereComponent,\n    \"Torus\": TorusComponent,\n    \"InvertedMesh\": InvertedMeshComponent,\n    \"KitItem\": KitItemComponent,\n    \"StreetView\": StreetViewComponent,\n    \"WorldObject\": WorldObjectComponent,\n    \"ConfigurableJoint\": ConfigurableJointComponent,\n    \"CharacterJoint\": CharacterJointComponent,\n    \"FixedJoint\": FixedJointComponent,\n    \"HingeJoint\": HingeJointComponent,\n    \"SpringJoint\": SpringJointComponent,\n    \"Grabbable\": GrabbableComponent,\n    \"UIPanel\": UIPanelComponent,\n    \"AvatarPedestal\": AvatarPedestalComponent,\n    \"TorusKnot\": TorusKnotComponent,\n    \"Apple\": AppleComponent,\n    \"Catenoid\": CatenoidComponent,\n    \"Fermet\": FermetComponent,\n    \"Helicoid\": HelicoidComponent,\n    \"Horn\": HornComponent,\n    \"Klein\": KleinComponent,\n    \"Mobius\": MobiusComponent,\n    \"Mobius3d\": Mobius3dComponent,\n    \"Natica\": NaticaComponent,\n    \"Pillow\": PillowComponent,\n    \"Scherk\": ScherkComponent,\n    \"Snail\": SnailComponent,\n    \"Spiral\": SpiralComponent,\n    \"Spring\": SpringComponent,\n    \"Light\": LightComponent,\n    \"ScriptRunner\": ScriptRunnerComponent,\n    \"ScriptAsset\": ScriptAssetComponent\n}\n\nwindow.componentTypeMap = componentTypeMap;\n\nexport const componentBSTypeMap = {\n    [BS.ComponentType.Transform]: TransformComponent,\n    [BS.ComponentType.BanterGeometry]: GeometryComponent,\n    [BS.ComponentType.BanterMaterial]: MaterialComponent,\n    [BS.ComponentType.BanterRigidbody]: RigidbodyComponent,\n    [BS.ComponentType.BanterAudioSource]: AudioSourceComponent,\n    [BS.ComponentType.BanterVideoPlayer]: VideoPlayerComponent,\n    [BS.ComponentType.BanterText]: TextComponent,\n    [BS.ComponentType.BoxCollider]: BoxColliderComponent,\n    [BS.ComponentType.SphereCollider]: SphereColliderComponent,\n    [BS.ComponentType.CapsuleCollider]: CapsuleColliderComponent,\n    [BS.ComponentType.MeshCollider]: MeshColliderComponent,\n    [BS.ComponentType.BanterBillboard]: BillboardComponent,\n    [BS.ComponentType.BanterGrabHandle]: GrabHandleComponent,\n    [BS.ComponentType.BanterSyncedObject]: SyncedObjectComponent,\n    [BS.ComponentType.BanterPhysicMaterial]: PhysicMaterialComponent,\n    [BS.ComponentType.BanterMirror]: MirrorComponent,\n    [BS.ComponentType.BanterBrowser]: BrowserComponent,\n    [BS.ComponentType.BanterHeldEvents]: HeldEventsComponent,\n    [BS.ComponentType.BanterAttachedObject]: AttachedObjectComponent,\n    [BS.ComponentType.BanterGLTF]: GLTFComponent,\n    [BS.ComponentType.BanterAssetBundle]: AssetBundleComponent,\n    [BS.ComponentType.BanterPortal]: PortalComponent,\n    [BS.ComponentType.BanterColliderEvents]: ColliderEventsComponent,\n    [BS.ComponentType.BanterBox]: BoxComponent,\n    [BS.ComponentType.BanterCircle]: CircleComponent,\n    [BS.ComponentType.BanterCone]: ConeComponent,\n    [BS.ComponentType.BanterCylinder]: CylinderComponent,\n    [BS.ComponentType.BanterPlane]: PlaneComponent,\n    [BS.ComponentType.BanterRing]: RingComponent,\n    [BS.ComponentType.BanterSphere]: SphereComponent,\n    [BS.ComponentType.BanterTorus]: TorusComponent,\n    [BS.ComponentType.BanterInvertedMesh]: InvertedMeshComponent,\n    [BS.ComponentType.BanterKitItem]: KitItemComponent,\n    [BS.ComponentType.BanterStreetView]: StreetViewComponent,\n    [BS.ComponentType.BanterWorldObject]: WorldObjectComponent,\n    [BS.ComponentType.ConfigurableJoint]: ConfigurableJointComponent,\n    [BS.ComponentType.CharacterJoint]: CharacterJointComponent,\n    [BS.ComponentType.FixedJoint]: FixedJointComponent,\n    [BS.ComponentType.HingeJoint]: HingeJointComponent,\n    [BS.ComponentType.SpringJoint]: SpringJointComponent,\n    [BS.ComponentType.BanterGrabbable]: GrabbableComponent,\n    [BS.ComponentType.BanterUIPanel]: UIPanelComponent,\n    [BS.ComponentType.BanterAvatarPedestal]: AvatarPedestalComponent,\n    [BS.ComponentType.BanterTorusKnot]: TorusKnotComponent,\n    [BS.ComponentType.BanterApple]: AppleComponent,\n    [BS.ComponentType.BanterCatenoid]: CatenoidComponent,\n    [BS.ComponentType.BanterFermet]: FermetComponent,\n    [BS.ComponentType.BanterHelicoid]: HelicoidComponent,\n    [BS.ComponentType.BanterHorn]: HornComponent,\n    [BS.ComponentType.BanterKlein]: KleinComponent,\n    [BS.ComponentType.BanterMobius]: MobiusComponent,\n    [BS.ComponentType.BanterMobius3d]: Mobius3dComponent,\n    [BS.ComponentType.BanterNatica]: NaticaComponent,\n    [BS.ComponentType.BanterPillow]: PillowComponent,\n    [BS.ComponentType.BanterScherk]: ScherkComponent,\n    [BS.ComponentType.BanterSnail]: SnailComponent,\n    [BS.ComponentType.BanterSpiral]: SpiralComponent,\n    [BS.ComponentType.BanterSpring]: SpringComponent,\n    [BS.ComponentType.Light]: LightComponent,\n    [ScriptRunnerComponent]: ScriptRunnerComponent,\n    [ScriptAssetComponent]: ScriptAssetComponent\n}\n\nexport const componentTextMap = {\n    [BS.ComponentType.Transform]: \"Transform\",\n    [BS.ComponentType.BanterGeometry]: \"Geometry\",\n    [BS.ComponentType.BanterMaterial]: \"Material\",\n    [BS.ComponentType.BanterRigidbody]: \"Rigidbody\",\n    [BS.ComponentType.BanterAudioSource]: \"AudioSource\",\n    [BS.ComponentType.BanterVideoPlayer]: \"VideoPlayer\",\n    [BS.ComponentType.BanterText]: \"Text\",\n    [BS.ComponentType.BoxCollider]: \"BoxCollider\",\n    [BS.ComponentType.SphereCollider]: \"SphereCollider\",\n    [BS.ComponentType.CapsuleCollider]: \"CapsuleCollider\",\n    [BS.ComponentType.MeshCollider]: \"MeshCollider\",\n    [BS.ComponentType.BanterBillboard]: \"Billboard\",\n    [BS.ComponentType.BanterGrabHandle]: \"GrabHandle\",\n    [BS.ComponentType.BanterSyncedObject]: \"SyncedObject\",\n    [BS.ComponentType.BanterPhysicMaterial]: \"PhysicMaterial\",\n    [BS.ComponentType.BanterMirror]: \"Mirror\",\n    [BS.ComponentType.BanterBrowser]: \"Browser\",\n    [BS.ComponentType.BanterHeldEvents]: \"HeldEvents\",\n    [BS.ComponentType.BanterAttachedObject]: \"AttachedObject\",\n    [BS.ComponentType.BanterGLTF]: \"GLTF\",\n    [BS.ComponentType.BanterAssetBundle]: \"AssetBundle\",\n    [BS.ComponentType.BanterPortal]: \"Portal\",\n    [BS.ComponentType.BanterColliderEvents]: \"ColliderEvents\",\n    [BS.ComponentType.BanterBox]: \"Box\",\n    [BS.ComponentType.BanterCircle]: \"Circle\",\n    [BS.ComponentType.BanterCone]: \"Cone\",\n    [BS.ComponentType.BanterCylinder]: \"Cylinder\",\n    [BS.ComponentType.BanterPlane]: \"Plane\",\n    [BS.ComponentType.BanterRing]: \"Ring\",\n    [BS.ComponentType.BanterSphere]: \"Sphere\",\n    [BS.ComponentType.BanterTorus]: \"Torus\",\n    [BS.ComponentType.BanterInvertedMesh]: \"InvertedMesh\",\n    [BS.ComponentType.BanterKitItem]: \"KitItem\",\n    [BS.ComponentType.BanterStreetView]: \"StreetView\",\n    [BS.ComponentType.BanterWorldObject]: \"WorldObject\",\n    [BS.ComponentType.ConfigurableJoint]: \"ConfigurableJoint\",\n    [BS.ComponentType.CharacterJoint]: \"CharacterJoint\",\n    [BS.ComponentType.FixedJoint]: \"FixedJoint\",\n    [BS.ComponentType.HingeJoint]: \"HingeJoint\",\n    [BS.ComponentType.SpringJoint]: \"SpringJoint\",\n    [BS.ComponentType.BanterGrabbable]: \"Grabbable\",\n    [BS.ComponentType.BanterUIPanel]: \"UIPanel\",\n    [BS.ComponentType.BanterAvatarPedestal]: \"AvatarPedestal\",\n    [BS.ComponentType.BanterTorusKnot]: \"TorusKnot\",\n    [BS.ComponentType.BanterApple]: \"Apple\",\n    [BS.ComponentType.BanterCatenoid]: \"Catenoid\",\n    [BS.ComponentType.BanterFermet]: \"Fermet\",\n    [BS.ComponentType.BanterHelicoid]: \"Helicoid\",\n    [BS.ComponentType.BanterHorn]: \"Horn\",\n    [BS.ComponentType.BanterKlein]: \"Klein\",\n    [BS.ComponentType.BanterMobius]: \"Mobius\",\n    [BS.ComponentType.BanterMobius3d]: \"Mobius3d\",\n    [BS.ComponentType.BanterNatica]: \"Natica\",\n    [BS.ComponentType.BanterPillow]: \"Pillow\",\n    [BS.ComponentType.BanterScherk]: \"Scherk\",\n    [BS.ComponentType.BanterSnail]: \"Snail\",\n    [BS.ComponentType.BanterSpiral]: \"Spiral\",\n    [BS.ComponentType.BanterSpring]: \"Spring\",\n    [BS.ComponentType.Light]: \"Light\",\n    [ScriptRunnerComponent]: \"ScriptRunner\",\n    [ScriptAssetComponent]: \"ScriptAsset\"\n}\n\n\nexport const componentBundleMap = {\n    \"Geometry\": ['Material'],\n    \"BoxCollider\": ['ColliderEvents'],\n    \"SphereCollider\": ['ColliderEvents'],\n    \"CapsuleCollider\": ['ColliderEvents'],\n    \"MeshCollider\": ['ColliderEvents'],\n    \"Box\": ['Material'],\n    \"Cylinder\": ['Material'],\n    // \"Circle\": ['Material'],\n    // \"Cone\": ['Material'],\n    // \"Plane\": ['Material'],\n    // \"Ring\": ['Material'],\n    // \"Sphere\": ['Material'],\n    // \"Torus\": ['Material']\n}\n\n\n// Legacy global exports (kept for backwards compatibility)\nwindow.componentBSTypeMap = componentBSTypeMap;\nwindow.componentTextMap = componentTextMap;\n\n// ============================================================================\n// EXPOSE COMPONENT REGISTRY FOR RUNTIME INSPECTION\n// ============================================================================\n\n/**\n * Global registry of all Component types and metadata for runtime inspection and debugging.\n * Accessible via window.ComponentRegistry in the browser console.\n *\n * Usage:\n *   - List all components: ComponentRegistry.list()\n *   - Get component by name: ComponentRegistry.getByName('Box')\n *   - Get components by category: ComponentRegistry.getByCategory('meshes')\n *   - Check layer definitions: ComponentRegistry.layers\n */\nwindow.ComponentRegistry = {\n    // All component class constructors\n    classes: {\n        Entity,\n        EntityComponent,\n        TransformComponent,\n        ScriptRunnerComponent,\n        // Meshes/Geometry\n        GeometryComponent,\n        BoxComponent,\n        CircleComponent,\n        ConeComponent,\n        CylinderComponent,\n        PlaneComponent,\n        RingComponent,\n        SphereComponent,\n        TorusComponent,\n        TorusKnotComponent,\n        InvertedMeshComponent,\n        TextComponent,\n        AppleComponent,\n        CatenoidComponent,\n        FermetComponent,\n        HelicoidComponent,\n        HornComponent,\n        KleinComponent,\n        MobiusComponent,\n        Mobius3dComponent,\n        NaticaComponent,\n        PillowComponent,\n        ScherkComponent,\n        SnailComponent,\n        SpiralComponent,\n        SpringComponent,\n        // Materials\n        MaterialComponent,\n        PhysicMaterialComponent,\n        // Physics\n        RigidbodyComponent,\n        BoxColliderComponent,\n        SphereColliderComponent,\n        CapsuleColliderComponent,\n        MeshColliderComponent,\n        ConfigurableJointComponent,\n        CharacterJointComponent,\n        FixedJointComponent,\n        HingeJointComponent,\n        SpringJointComponent,\n        // Media\n        AudioSourceComponent,\n        VideoPlayerComponent,\n        GLTFComponent,\n        // Behaviors\n        GrabHandleComponent,\n        GrabbableComponent,\n        SyncedObjectComponent,\n        HeldEventsComponent,\n        AttachedObjectComponent,\n        ColliderEventsComponent,\n        // Misc\n        BillboardComponent,\n        MirrorComponent,\n        BrowserComponent,\n        AssetBundleComponent,\n        PortalComponent,\n        KitItemComponent,\n        StreetViewComponent,\n        WorldObjectComponent,\n        UIPanelComponent,\n        AvatarPedestalComponent,\n        LightComponent\n    },\n\n    // Component metadata organized by category\n    metadata: {\n        // Core\n        Entity: { category: 'core', description: 'Entity/GameObject class', icon: '\uD83D\uDCE6' },\n        EntityComponent: { category: 'core', description: 'Base component class', icon: '\uD83E\uDDE9' },\n        TransformComponent: { category: 'core', description: 'Position, rotation, scale', icon: '\uD83D\uDCD0' },\n        ScriptRunnerComponent: { category: 'scripting', description: 'Script execution component', icon: '\uD83D\uDCDC' },\n\n        // Meshes/Geometry\n        GeometryComponent: { category: 'meshes', description: 'Generic geometry component', icon: '\uD83D\uDD37' },\n        BoxComponent: { category: 'meshes', description: 'Box/cube primitive', icon: '\u25FC\uFE0F' },\n        CircleComponent: { category: 'meshes', description: 'Circle primitive', icon: '\u2B55' },\n        ConeComponent: { category: 'meshes', description: 'Cone primitive', icon: '\uD83D\uDD3A' },\n        CylinderComponent: { category: 'meshes', description: 'Cylinder primitive', icon: '\uD83E\uDD6B' },\n        PlaneComponent: { category: 'meshes', description: 'Flat plane primitive', icon: '\u25AC' },\n        RingComponent: { category: 'meshes', description: 'Ring/torus primitive', icon: '\u2B55' },\n        SphereComponent: { category: 'meshes', description: 'Sphere primitive', icon: '\u26AA' },\n        TorusComponent: { category: 'meshes', description: 'Torus/donut primitive', icon: '\uD83C\uDF69' },\n        TorusKnotComponent: { category: 'meshes', description: 'Torus knot geometry', icon: '\uD83C\uDF69' },\n        InvertedMeshComponent: { category: 'meshes', description: 'Inverted mesh (inside-out)', icon: '\uD83D\uDD04' },\n        TextComponent: { category: 'meshes', description: '3D text mesh', icon: '\uD83D\uDCDD' },\n        AppleComponent: { category: 'meshes', description: 'Apple parametric surface', icon: '\uD83C\uDF4E' },\n        CatenoidComponent: { category: 'meshes', description: 'Catenoid minimal surface', icon: '\uD83C\uDF00' },\n        FermetComponent: { category: 'meshes', description: 'Fermat spiral surface', icon: '\uD83C\uDF00' },\n        HelicoidComponent: { category: 'meshes', description: 'Helicoid minimal surface', icon: '\uD83C\uDF00' },\n        HornComponent: { category: 'meshes', description: 'Horn/trumpet surface', icon: '\uD83D\uDCEF' },\n        KleinComponent: { category: 'meshes', description: 'Klein bottle surface', icon: '\uD83C\uDF00' },\n        MobiusComponent: { category: 'meshes', description: 'M\u00F6bius strip', icon: '\u267E\uFE0F' },\n        Mobius3dComponent: { category: 'meshes', description: '3D M\u00F6bius surface', icon: '\u267E\uFE0F' },\n        NaticaComponent: { category: 'meshes', description: 'Seashell-like surface', icon: '\uD83D\uDC1A' },\n        PillowComponent: { category: 'meshes', description: 'Pillow-shaped surface', icon: '\uD83D\uDECF\uFE0F' },\n        ScherkComponent: { category: 'meshes', description: 'Scherk minimal surface', icon: '\uD83C\uDF00' },\n        SnailComponent: { category: 'meshes', description: 'Snail shell surface', icon: '\uD83D\uDC0C' },\n        SpiralComponent: { category: 'meshes', description: 'Spiral surface', icon: '\uD83C\uDF00' },\n        SpringComponent: { category: 'meshes', description: 'Spring/helix surface', icon: '\uD83D\uDD29' },\n\n        // Materials\n        MaterialComponent: { category: 'materials', description: 'Material properties (color, texture)', icon: '\uD83C\uDFA8' },\n        PhysicMaterialComponent: { category: 'materials', description: 'Physics material (friction, bounce)', icon: '\u2699\uFE0F' },\n\n        // Physics\n        RigidbodyComponent: { category: 'physics', description: 'Physics simulation', icon: '\uD83D\uDCAB' },\n        BoxColliderComponent: { category: 'physics', description: 'Box collision shape', icon: '\uD83D\uDCE6' },\n        SphereColliderComponent: { category: 'physics', description: 'Sphere collision shape', icon: '\u26AA' },\n        CapsuleColliderComponent: { category: 'physics', description: 'Capsule collision shape', icon: '\uD83D\uDC8A' },\n        MeshColliderComponent: { category: 'physics', description: 'Mesh-based collision', icon: '\uD83D\uDD37' },\n        ConfigurableJointComponent: { category: 'physics', description: 'Configurable physics joint', icon: '\uD83D\uDD17' },\n        CharacterJointComponent: { category: 'physics', description: 'Character ragdoll joint', icon: '\uD83E\uDDB4' },\n        FixedJointComponent: { category: 'physics', description: 'Fixed connection between rigidbodies', icon: '\uD83D\uDD17' },\n        HingeJointComponent: { category: 'physics', description: 'Rotational joint around axis', icon: '\uD83D\uDEAA' },\n        SpringJointComponent: { category: 'physics', description: 'Elastic spring connection', icon: '\uD83E\uDE83' },\n\n        // Media\n        AudioSourceComponent: { category: 'media', description: 'Audio playback', icon: '\uD83D\uDD0A' },\n        VideoPlayerComponent: { category: 'media', description: 'Video playback', icon: '\uD83D\uDCF9' },\n        GLTFComponent: { category: 'media', description: 'GLTF 3D model loader', icon: '\uD83C\uDFAD' },\n\n        // Behaviors\n        GrabHandleComponent: { category: 'behaviors', description: 'Grabbable object', icon: '\u270B' },\n        GrabbableComponent: { category: 'behaviors', description: 'Advanced grab mechanics with VR controller integration', icon: '\uD83E\uDD32' },\n        SyncedObjectComponent: { category: 'behaviors', description: 'Multi-user synchronization', icon: '\uD83D\uDD04' },\n        HeldEventsComponent: { category: 'behaviors', description: 'Events when object is held', icon: '\uD83E\uDD1D' },\n        AttachedObjectComponent: { category: 'behaviors', description: 'Attach to player or object', icon: '\uD83D\uDCCC' },\n        ColliderEventsComponent: { category: 'behaviors', description: 'Collision/trigger events', icon: '\uD83D\uDCA5' },\n\n        // Misc\n        BillboardComponent: { category: 'misc', description: 'Always face camera', icon: '\uD83D\uDC41\uFE0F' },\n        MirrorComponent: { category: 'misc', description: 'Reflective mirror surface', icon: '\uD83E\uDE9E' },\n        BrowserComponent: { category: 'misc', description: 'Embedded web browser', icon: '\uD83C\uDF10' },\n        AssetBundleComponent: { category: 'misc', description: 'Load Unity asset bundles', icon: '\uD83D\uDCE6' },\n        PortalComponent: { category: 'misc', description: 'Portal to another space', icon: '\uD83D\uDEAA' },\n        KitItemComponent: { category: 'misc', description: 'Kit item reference', icon: '\uD83C\uDF81' },\n        StreetViewComponent: { category: 'misc', description: 'Google Street View integration', icon: '\uD83D\uDDFA\uFE0F' },\n        WorldObjectComponent: { category: 'misc', description: 'World object reference', icon: '\uD83C\uDF0D' },\n        UIPanelComponent: { category: 'misc', description: 'UI panel with haptics and sounds', icon: '\uD83D\uDCF1' },\n        AvatarPedestalComponent: { category: 'misc', description: 'Ready Player Me avatar display', icon: '\uD83E\uDDCD' },\n        LightComponent: { category: 'misc', description: 'Light source (directional, point, spot)', icon: '\uD83D\uDCA1' }\n    },\n\n    // Unity layer definitions\n    layers: BanterLayers,\n\n    // Component type mappings (for compatibility)\n    typeMap: componentTypeMap,\n    bsTypeMap: componentBSTypeMap,\n    textMap: componentTextMap,\n    bundleMap: componentBundleMap,\n    supportedComponents: SUPPORTED_COMPONENTS,\n\n    // Helper methods for runtime inspection\n\n    /**\n     * Get component class by name\n     * @param {string} name - Component name (e.g., 'Box')\n     * @returns {Function|null} Component class constructor\n     */\n    getByName(name) {\n        return this.classes[name] || this.typeMap[name] || null;\n    },\n\n    /**\n     * Get all components in a category\n     * @param {string} category - Category name (core, meshes, materials, physics, media, behaviors, misc, scripting)\n     * @returns {Array<string>} Array of component names\n     */\n    getByCategory(category) {\n        return Object.entries(this.metadata)\n            .filter(([_, meta]) => meta.category === category)\n            .map(([name, _]) => name);\n    },\n\n    /**\n     * Get all categories\n     * @returns {Array<string>} Array of unique category names\n     */\n    getCategories() {\n        return [...new Set(Object.values(this.metadata).map(meta => meta.category))];\n    },\n\n    /**\n     * Get metadata for a specific component\n     * @param {string} name - Component name\n     * @returns {Object|null} Metadata object\n     */\n    getInfo(name) {\n        return this.metadata[name] || null;\n    },\n\n    /**\n     * List all components with their metadata\n     * @returns {Array<Object>} Array of {name, category, description, icon} objects\n     */\n    list() {\n        return Object.entries(this.metadata).map(([name, meta]) => ({\n            name,\n            category: meta.category,\n            description: meta.description,\n            icon: meta.icon\n        }));\n    },\n\n    /**\n     * Get statistics about components\n     * @returns {Object} Statistics object\n     */\n    getStats() {\n        const categories = this.getCategories();\n        const stats = {\n            total: Object.keys(this.classes).length,\n            byCategory: {},\n            layers: Object.keys(this.layers).length\n        };\n\n        categories.forEach(cat => {\n            stats.byCategory[cat] = this.getByCategory(cat).length;\n        });\n\n        return stats;\n    },\n\n    /**\n     * Check if a component is supported\n     * @param {string|number} componentType - Component type (string name or BS.ComponentType enum)\n     * @returns {boolean} True if supported\n     */\n    isSupported(componentType) {\n        if (typeof componentType === 'string') {\n            // Convert string name to BS.ComponentType\n            const bsType = Object.keys(this.textMap).find(key =>\n                this.textMap[key] === componentType\n            );\n            return this.supportedComponents.has(parseInt(bsType));\n        }\n        return this.supportedComponents.has(componentType);\n    },\n\n    /**\n     * Get layer name by layer number\n     * @param {number} layerNum - Layer number (0-23)\n     * @returns {string|null} Layer name\n     */\n    getLayerName(layerNum) {\n        return Object.keys(this.layers).find(name =>\n            this.layers[name] === layerNum\n        ) || null;\n    },\n\n    /**\n     * Get layer number by layer name\n     * @param {string} layerName - Layer name\n     * @returns {number|null} Layer number\n     */\n    getLayerNumber(layerName) {\n        return this.layers[layerName] ?? null;\n    },\n\n    /**\n     * Get components that this component auto-includes (bundles)\n     * @param {string} componentName - Component name\n     * @returns {Array<string>} Array of bundled component names\n     */\n    getBundledComponents(componentName) {\n        return this.bundleMap[componentName] || [];\n    }\n};\n\n// Log availability for debugging\nconsole.log('[ComponentRegistry] Exposed globally with', Object.keys(window.ComponentRegistry.classes).length, 'component types');\nconsole.log('[ComponentRegistry] Usage: ComponentRegistry.list() or ComponentRegistry.getByCategory(\"meshes\")');\nconsole.log('[ComponentRegistry] Categories:', window.ComponentRegistry.getCategories().join(', '));\n\nexport {\n    Entity,\n    EntityComponent,\n    TransformComponent,\n    GeometryComponent,\n    MaterialComponent,\n    RigidbodyComponent,\n    AudioSourceComponent,\n    VideoPlayerComponent,\n    TextComponent,\n    BoxColliderComponent,\n    SphereColliderComponent,\n    CapsuleColliderComponent,\n    MeshColliderComponent,\n    BillboardComponent,\n    GrabHandleComponent,\n    SyncedObjectComponent,\n    PhysicMaterialComponent,\n    MirrorComponent,\n    BrowserComponent,\n    HeldEventsComponent,\n    AttachedObjectComponent,\n    GLTFComponent,\n    AssetBundleComponent,\n    PortalComponent,\n    ColliderEventsComponent,\n    BoxComponent,\n    CircleComponent,\n    ConeComponent,\n    CylinderComponent,\n    PlaneComponent,\n    RingComponent,\n    SphereComponent,\n    TorusComponent,\n    InvertedMeshComponent,\n    KitItemComponent,\n    StreetViewComponent,\n    WorldObjectComponent,\n    ConfigurableJointComponent,\n    CharacterJointComponent,\n    FixedJointComponent,\n    HingeJointComponent,\n    SpringJointComponent,\n    GrabbableComponent,\n    UIPanelComponent,\n    AvatarPedestalComponent,\n    TorusKnotComponent,\n    AppleComponent,\n    CatenoidComponent,\n    FermetComponent,\n    HelicoidComponent,\n    HornComponent,\n    KleinComponent,\n    MobiusComponent,\n    Mobius3dComponent,\n    NaticaComponent,\n    PillowComponent,\n    ScherkComponent,\n    SnailComponent,\n    SpiralComponent,\n    SpringComponent,\n    LightComponent,\n    ScriptRunnerComponent,\n    ScriptAssetComponent\n};\n", "/**\n * Scene Manager\n * Handles Unity scene connection, state management, and data synchronization\n */\nimport { SUPPORTED_COMPONENTS, Entity, TransformComponent, componentBSTypeMap, componentTypeMap, componentTextMap, componentBundleMap, ScriptRunnerComponent } from './entity-components/index.js';\nimport { confirm } from './utils.js';\n\nexport class SceneManager {\n        constructor() {\n            this.scene = null;\n            this.entityData = {\n                entities: [],\n                entityMap:{},\n                entityUUIDMap:{},\n                componentMap: {}\n            };\n            this.props = {\n                hierarchy: null,\n            }\n            this.garbage = [];\n            this.selectedEntity = null;\n            this.expandedNodes = new Set();\n            this.loaded = false;\n        }\n\n        myName(){\n            return this.scene.localUser.name\n        }\n\n        /**\n         * Shows a custom warning dialog asking user to create a missing GameObject\n         * @param {string} objectName - Name of the missing object (e.g., \"Scene\" or \"People\")\n         * @returns {Promise<boolean>} - True if user accepts, false if they decline\n         */\n        async showMissingObjectWarning(objectName) {\n            return await confirm(\n                `No \"${objectName}\" GameObject found in the scene. Would you like to create an empty \"${objectName}\" GameObject as a substitute?`\n            );\n        }\n\n        /**\n         * Creates an empty GameObject with the specified name\n         * @param {string} objectName - Name of the GameObject to create\n         * @returns {Promise<Object>} - The created GameObject\n         */\n        async createEmptyGameObject(objectName) {\n            log('init', `Creating empty GameObject: ${objectName}`);\n            const newGameObject = new window.BS.GameObject(objectName);\n            showNotification(`Created empty \"${objectName}\" GameObject`);\n            return newGameObject;\n        }\n\n        changeFileServer(value){\n            localStorage.setItem('file_server', value);\n            window.location.reload();\n        }\n\n        async initialize() {\n            try {\n                if (typeof window.BS === 'undefined' || !window.BS.BanterScene) {\n                    err('init', 'BS library not available');\n                    return;\n                }\n                this.scene = window.BS.BanterScene.GetInstance();\n                this.setup = async ()=>{\n                    if(this.loaded) return;\n                    log(\"init\", \"initializing firebase..\")\n\n                    net.initFirebase(async (state)=>{\n                        log(\"init\", \"spaceState =>\", state)\n                        if(!state.vars.hostUser){\n                            log('init', \"Server has no host user, so I guess it's me\", this.myName())\n                            net.claimHost();\n                        }else{\n                            let hostHere = Object.values(this.scene.users).map(x=>x.name).includes(state.vars.hostUser);\n                            if(!hostHere){\n                                log('init', \"Host user not here, so I'll make myself the host\", this.myName())\n                                net.claimHost();\n                            }\n                        }\n                        \n                        //TODO: have a mutex in place like\n                        // let crawlMutex = net.getVar(\"_MUTEX_CRAWL\");\n                        // while(crawlMutex && (Date.now() - crawlMutex) < 60000){\n                        //     log(\"init\", \"someone is already crawling the scene.. I should wait\", crawlMutex, Date.now() - crawlMutex)\n                        //     await new Promise(resolve => setTimeout(resolve, 1000));\n                        // }\n\n\n                        let sceneObj = await this.scene.Find(\"Scene\");\n                        let peopleObj = await this.scene.Find(\"People\");\n\n                        log(\"INIT\", \"sceneObj =>\", sceneObj)\n                        log(\"INIT\", \"peopleObj =>\", peopleObj)\n\n                        // Check for missing Scene object\n                        if(!sceneObj){\n                            log('init', 'No Scene object found');\n                            const shouldCreate = await this.showMissingObjectWarning(\"Scene\");\n                            if(shouldCreate){\n                                sceneObj = await this.createEmptyGameObject(\"Scene\");\n                            } else {\n                                err('init', 'User declined to create Scene object. Initialization may fail.');\n                            }\n                        }\n\n                        // Check for missing People object\n                        if(!peopleObj){\n                            log('init', 'No People object found');\n                            const shouldCreate = await this.showMissingObjectWarning(\"People\");\n                            if(shouldCreate){\n                                peopleObj = await this.createEmptyGameObject(\"People\");\n                            } else {\n                                err('init', 'User declined to create People object. Initialization may fail.');\n                            }\n                        }\n\n\n                        let scene_entity = null;\n                        let people_entity = null;\n                        if(!state.Scene){ // crawl\n                            net.setVar(\"_MUTEX_CRAWL\", Date.now());\n                            window.loadingScreen.updateStage('hierarchy', 0, 'Gathering scene structure...');\n                            let hierarchy = await this.gatherSceneHierarchy();\n                            log('init', \"gathered Scene's hierarchy =>\", hierarchy)\n                            this.props.hierarchy = hierarchy;\n                            window.loadingScreen.updateStage('hierarchy', 100, 'Scene structure loaded');\n                            window.loadingScreen.updateStage('entities', 0, 'Generating entities...');\n                            scene_entity = await this.loadHierarchy(\"Scene\", hierarchy, {context: \"crawl\"});\n                            people_entity = await this.loadHierarchy(\"People\", {}, {context: \"crawl\"});\n                            net.delVar(\"_MUTEX_CRAWL\");\n                        }else{ //load\n                            if(state.People[this.myName()]){\n                                await net.db.ref(`space/${net.spaceId}/People/${this.myName()}/__meta/destroyed`).set(true)\n                                await net.db.ref(`space/${net.spaceId}/People/${this.myName()}`).remove();\n                                delete state.People[this.myName()];\n                            }\n                            scene_entity = await this.loadHierarchy(\"Scene\", state.Scene, {context: \"startupLoad\"});\n                            people_entity = await this.loadHierarchy(\"People\", state.People, {context: \"startupLoad\"});\n                        }\n\n                        this.entityData.entities = [scene_entity, people_entity];\n                        this.initializeExpandedNodes();\n                        window.loadingScreen.updateStage('entities', 100, 'All entities generated');\n                        inspector?.hierarchyPanel?.render()\n                        inspector?.lifecyclePanel?.render()\n                        this.loaded = true;\n                        SM.getAllEntities().forEach(e=>e.startListeningForChildChanges());\n\n                        await this.executeStartupScripts(\"onSceneLoaded\");\n                        setTimeout(()=>{\n                            inspector?.hierarchyPanel?.render()\n                            SM.getAllScriptRunners().forEach(s=>s._refresh())\n                        }, 1000)\n                    })\n                }\n            } catch (error) {\n                err('init', 'Failed to connect to Unity:', error);\n            }\n            window.scene = this.scene\n        }\n\n        async Reset(ui){\n            console.log(\"%cReset() destroys persistant data, and should only be used consciously\", \"color: red; font-weight: bold;\");\n        }\n\n        // Resets the SpaceProperties\n        async Reset2(ui){\n\n            await net.clearSpaceState();\n            let r = async ()=>{\n                this._reset();\n            }\n\n            if(!(this.scene.localUser.name === \"Technocrat\") && ui){\n                inventory.ui.showWarningConfirm(\n                    \"Reset Scene\",\n                    `This will delete any unsaved changes, and return to an empty scene.`,\n                    r,\n                    ()=>{\n                        showNotification(`canceled reset\"`);\n                    }\n                );\n            }else{\n                await r();\n            }\n        }\n        \n        async _reset(){\n            scene.OpenPage(`banter://${location.host}`)\n        }\n\n\n        async handleUserJoined(event){\n            log('scene-event', \"[USER JOINED] fired\", event)\n            let name = event.detail.name;\n            await AddEntity(\"People\", name)\n            \n        }\n\n        async saveScene(){\n            //await this.updateHierarchy(false);\n            localStorage.setItem('lastProps', JSON.stringify(this.props));\n            //showNotification(\"Scene saved\")\n        }\n\n        // This gathers the hierarchy of the scene via Unity GameObjects\n        async gatherSceneHierarchy(){\n            log('init', \"gathering SceneHierarchy\")\n            \n            // Update progress: finding root\n            if (window.loadingScreen) {\n                window.loadingScreen.updateStage('hierarchy', 10, 'Finding scene object...');\n            }\n            \n            let sceneObj = await this.scene.Find(\"Scene\");\n            if(!sceneObj){\n                log('init', \"no scene object found\")\n                return null;\n            }\n            \n            // Update progress: found root\n            if (window.loadingScreen) {\n                window.loadingScreen.updateStage('hierarchy', 20, 'Scene object found');\n            }\n\n            let createEntityHierarchy = (obj)=>{\n                let component_refs = {}\n                let entity = {}\n\n                for(let c in obj.components){\n                    let component = obj.components[c]\n                    if(component.componentType == BS.ComponentType.Transform) continue;\n                    let component_ref = `${componentTextMap[component.componentType]}_${Math.floor(Math.random()*99999)}`\n                    component_refs[component_ref] = true;\n                }\n\n                entity.__meta = {\n                    active: true,\n                    layer: 0,\n                    localPosition: obj.transform.localPosition,\n                    localRotation: obj.transform.localRotation,\n                    localScale: obj.transform.localScale,\n                    position: obj.transform.position,\n                    rotation: obj.transform.rotation,\n                    components: component_refs\n                }\n                if (obj.Traverse) {\n                    const childPromises = [];\n                    obj.Traverse((child) => {\n                        log('init', 'traversing..',child.id, child.name,  child.parent, obj.unityId)\n                        if (child && child.id !== obj.unityId) {\n                            if (child.parent == obj.unityId) {\n                                entity[child.name] = createEntityHierarchy(child);\n                            }\n                        }\n                    });\n                } \n                return entity;\n            }\n\n            return createEntityHierarchy(sceneObj, null);\n        }\n\n        // This gathers the hierarchy of the scene from the root entity\n        async gatherEntityHierarchy(entity){\n            if(!entity){\n                return null;\n            }\n            let createEntityHierarchy = (entity)=>{\n                let h = {\n                    name: entity.name,\n                    layer: entity.layer,\n                    components: Array.from(new Set(entity.components.map(c=>c.id))),\n                    children: entity.children.map(c=>createEntityHierarchy(c)),\n                    localPosition: entity.transform.localPosition,\n                    localRotation: entity.transform.localRotation,\n                    localScale: entity.transform.localScale\n                }\n                return h;\n            }\n            let hierarchy = createEntityHierarchy(entity);\n            return hierarchy;\n        }\n\n        // Updates the hierarchy of the scene from the root entity\n        async updateHierarchy(updateUI = true){  \n            let h = await this.gatherEntityHierarchy(this.getSceneEntity());\n            this.props.hierarchy = h;\n            if(updateUI){\n                this._updateUI();\n            }\n        }\n\n\n        // Loads all the Entities on initialization\n        async loadHierarchy(destination, hierarchy, options){\n            log('init', \"loading hierarchy for\", destination, \"=>\", hierarchy)\n            if(!hierarchy){ return null }\n\n            if(!hierarchy.__meta){\n                hierarchy.__meta = {\n                    active: true,\n                    layer: 0,\n                    localPosition: {x: 0, y: 0, z: 0},\n                    localRotation: {x: 0, y: 0, z: 0, w: 1},\n                    localScale: {x: 1, y: 1, z: 1},\n                    position: {x: 0, y: 0, z: 0},\n                    rotation: {x: 0, y: 0, z: 0, w: 1},\n                    components: {}\n                }\n            }\n\n            let hierarchyToEntity = async (h, name, parentId, options)=>{\n                let gO_path = parentId ? parentId + \"/\" + name : name;\n                let gO = await this.scene.FindByPath(gO_path);\n                if(!gO){\n                    return await this.loadHistoricalEntity(h, name, parentId)\n                }\n\n                const entity = await new Entity().init({\n                    name: name,\n                    parentId: parentId,\n                    _bs: gO,\n                    layer: gO.layer || 0,\n                    localPosition: h.__meta.localPosition,\n                    localRotation: h.__meta.localRotation,\n                    localScale: h.__meta.localScale,\n                    position: h.__meta.position,\n                    rotation: h.__meta.rotation,\n                    uuid: h.__meta.uuid\n                }, options);\n                \n                //Make transform the top component\n                let ref_idx = 0;\n                // Add other components\n                let component_array = h.__meta.components ? Object.keys(h.__meta.components) : [];\n                for(let componentID in gO.components){\n                    let component = gO.components[componentID]\n                    if(component.componentType == BS.ComponentType.Transform) continue;\n                    let component_ref = component_array[ref_idx]\n                    ref_idx++;\n                    if(!component_ref){\n                        log('init', \"no component ref found for\", component, h.__meta.components, ref_idx, gO.components)\n                        continue;\n                    }\n\n                    if(SUPPORTED_COMPONENTS.has(component.componentType)){\n                        let componentClass = componentBSTypeMap[component.componentType]\n                        let props = this.getHistoricalProps(component_ref).props\n                        props.id = component_ref;\n                        let entityComponent = await new componentClass().init(entity, component, props, options);\n                        entity.AddComponent(entityComponent);\n                    }\n                }\n\n                //Add any ScriptRunners\n                component_array.forEach(async (component_ref)=>{\n                    if(!component_ref){\n                        log(\"init\", \"[SUS SITUATION]: component_ref is not defined\", component_ref, h, h.__meta.components)\n                        return;\n                    }\n                    if(component_ref.startsWith(\"ScriptRunner\")){\n                        let props = this.getHistoricalProps(component_ref).props\n                        props.id = component_ref;\n                        let entityComponent = await new ScriptRunnerComponent().init(entity, null, props, options)\n                        entity.AddComponent(entityComponent);\n                    }\n                })\n                \n\n                let promises = Object.keys(h).map(async key=>{\n                    if(key.startsWith(\"__\")){ return }\n                    let child = h[key]\n                    let childEntity = await hierarchyToEntity(child, key, entity.id, options)\n                    // await childEntity._setParent(entity);\n                    return childEntity;\n                })\n                await Promise.all(promises);\n                entity._loaded();\n                return entity;\n            }\n            return await hierarchyToEntity(hierarchy, destination, null, options);\n        }\n\n\n        // //Creates a entity from the inventory schema\n        // async _loadEntity(entityData, parentId, options){\n        //     //log(\"RANDOM DEBUG\", \"LOADING ENTITY\", entityData, parentId, options)\n        //     //TODO: add a param for await req for sync/async component/entity\n        //     let loadSubEntity = async (item, parentId, parentEnt)=>{ \n            \n        //         const newEntity = await new Entity().init({\n        //             name: item.name,\n        //             parentId: parentId,\n        //             layer: item.layer,\n        //             loadAsync: item.loadAsync,\n        //             localPosition: item.transform.localPosition,\n        //             localRotation: item.transform.localRotation,\n        //             localScale: item.transform.localScale,\n        //             uuid: item.uuid,\n        //             networkId: `${parentId}/${item.name}`\n        //         });\n    \n                \n        //         if(item.components){\n        //             for(let component of item.components){\n        //                 if(component.properties){\n        //                     component.properties.id = component.id;\n        //                 }else{\n        //                     component.properties = {\n        //                         id: component.id\n        //                     }\n        //                 }\n        //                 const result = this._addComponent(newEntity, component.type, component.properties, {context: \"item\", loadAsync: component.loadAsync, owner: options?.owner});\n        //                 if(!component.loadAsync){\n        //                     log(\"loadEntity\", \"component [AWAIT]\", component.type, item.name+\"/\"+component.type+\":\"+component.id)\n        //                     await result;\n        //                 }else{\n        //                     log(\"loadEntity\", \"component [ASYNC]\", component.type, item.name+\"/\"+component.type+\":\"+component.id)\n        //                 }\n        //             }\n        //         }\n\n        //         if(item.children){\n        //             let childPromises = [];\n        //             for(let i=0; i<item.children.length; i++){\n        //                 let child = item.children[i];\n        //                 let childEntityPromise = loadSubEntity(child, newEntity.id, newEntity);\n        //                 if(!child.loadAsync){\n        //                     console.log(\"LoadEntity\", \"Entity [AWAIT]\", child.name)\n        //                     await childEntityPromise;\n        //                 }else{\n        //                     console.log(\"LoadEntity\", \"Entity [ASYNC]\", child.name)\n        //                     childPromises.push(childEntityPromise);\n        //                 }\n        //             }\n        //             // Wait for all async children to complete\n        //             if(childPromises.length > 0){\n        //                 await Promise.all(childPromises);\n        //             }\n        //         }\n\n        //         // if(newEntity.name !== \"Scene\"){\n        //         //     await newEntity._setParent(parentEnt);\n        //         // }\n                \n        //         // Call _loaded() after all children are fully instantiated\n        //         newEntity._loaded();\n        //         return newEntity;\n        //     }\n\n\n        //     let parentEntity = (parentId)? this.getEntityOrScene(parentId) : this.getEntityOrScene(entityData.parentId);\n        //     let entity = await loadSubEntity(entityData, parentId, parentEntity);\n\n        //     this.expandedNodes.add(parentId);\n        //     this.selectEntity(entity.id);\n        //     // _loaded() is now called within loadSubEntity after all children are instantiated\n        //     return entity;\n        // }\n\n\n        getHistoricalProps(component_ref){\n            let props = net.state.components[component_ref]\n            if(!props){\n                log(\"init\", \"ISSUE: no props found for\", component_ref)\n                props = {}\n            }\n            return{\n                type: component_ref.split(\"_\")[0],\n                props: props\n            }\n        }\n        \n\n        // Creates and hydrates a entity using the SpaceProperties\n        async loadHistoricalEntity(hierarchy, name, parentId){\n            \n            log('init', \"loading historical entity =>\", hierarchy)\n            const entity = await new Entity().init({\n                name: name,\n                parentId: parentId,\n                layer: hierarchy.__meta.layer || 0,\n                localPosition: hierarchy.__meta.localPosition || {x: 0, y: 0, z: 0},\n                localRotation: hierarchy.__meta.localRotation || {x: 0, y: 0, z: 0, w: 1},\n                localScale: hierarchy.__meta.localScale || {x: 1, y: 1, z: 1},\n                position: hierarchy.__meta.position || {x: 0, y: 0, z: 0},\n                rotation: hierarchy.__meta.rotation || {x: 0, y: 0, z: 0, w: 1},\n                uuid: hierarchy.__meta.uuid\n            });\n           \n\n            // if(hierarchy.__meta.components){\n            //     let component_array = hierarchy.__meta.components ? Object.keys(hierarchy.__meta.components) : [];\n            //     for(let i=0; i<hierarchy.__meta.components.length; i++){\n            //         let component_ref = hierarchy.__meta.components[i]\n            //         let hist = this.getHistoricalProps(component_ref)\n            //         log('init', `historical props for [${component_ref}] =>`, hist)\n            //         let componentClass = componentTypeMap[hist.type]\n            //         let props = hist.props\n            //         props.id = component_ref;\n            //         let entityComponent = await new componentClass().init(entity, null, props)\n            //         entity.AddComponent(entityComponent);\n            //     }\n            // }\n\n            let childPromises = Object.keys(hierarchy).map(async key=>{\n                if(key.startsWith(\"__\")){ return }\n                let child = hierarchy[key]\n                let childEntity = await this.loadHistoricalEntity(child, key, entity.id)\n                //await childEntity._setParent(entity);\n                return childEntity;\n            })\n\n            await Promise.all(childPromises);\n            entity._loaded();\n            return entity;\n        }\n\n    \n        initializeExpandedNodes() {\n            // Expand root nodes by default\n            this.entityData.entities.forEach(entity => {\n                this.expandedNodes.add(entity.id);\n            });\n        }\n\n    \n        getEntityComponentById(componentId, useFallback = true){\n            let component = this.entityData.componentMap[componentId];\n            if(useFallback && !component){\n                log(\"fallback\", \"searching for component: \", componentId)\n                component = this.fallbackComponentSearch(componentId);\n                log(\"fallback\", \"found: \", component)\n            }\n            return component;\n        }\n\n        fallbackComponentSearch(componentId){\n            let crawlEnts = (arr, cid)=>{\n                for(var i=0; i<arr.length; i++){\n                    let ent = arr[i];\n                    for(var j=0; j<ent.components.length; j++){\n                        let comp = ent.components[j];\n                        if(comp.id === cid){\n                            return comp;\n                        }\n                    }\n                    let inChild = crawlEnts(ent.children, cid)\n                    if(inChild){\n                        return inChild\n                    }\n                }\n                return undefined;\n            }\n            let fallback = crawlEnts(entities(), componentId);\n            if(fallback){\n                this.entityData.componentMap[componentId] = fallback;\n            }\n            return fallback;\n        }\n\n        \n        toggleNodeExpansion(entityId) {\n            if (this.expandedNodes.has(entityId)) {\n                this.expandedNodes.delete(entityId);\n            } else {\n                this.expandedNodes.add(entityId);\n            }\n        }\n\n\n        selectEntity(entityId) {\n            // let lastEnt = this.getEntityById(this.selectedEntity, false);\n            // if(lastEnt){\n            //     lastEnt.WatchTransform([])\n            // }\n            this.selectedEntity = entityId;\n            // let ent = this.getEntityById(entityId);\n            // if(ent){\n            //     ent.WatchTransform([\"localPosition\", \"localRotation\", \"localScale\", \"position\", \"rotation\"], (e)=>{console.log(\"watch\", e)});\n            // }\n            this._updateUI();\n            window.dispatchEvent(new CustomEvent('entitySelected', {\n                detail: { entityId }\n            }));\n        }\n\n        _updateUI(){\n            // Update UI\n            if (inspector?.hierarchyPanel) {\n                inspector.hierarchyPanel.render();\n            }\n            if(inspector?.propertiesPanel){\n                inspector.propertiesPanel.render(this.selectedEntity);\n            }\n        }\n\n\n        getEntityById(entityId, useFallback = true) {\n            if(!entityId){ return null }\n            let ent = this.entityData.entityMap[entityId];\n            if(useFallback && !ent){\n                log(\"fallback\", \"searching for: \", entityId)\n                ent = this.fallbackEntitySearch(entityId);\n                log(\"fallback\", \"found: \", ent)\n            }\n            return ent;\n        }\n\n        getEntityByUuid(uuid){\n            return Object.values(SM.entityData.entityMap).find(ent=>ent.uuid === uuid);\n        }\n\n        fallbackEntitySearch(entityId){\n            let crawlEnts = (arr, eid)=>{\n                for(var i=0; i<arr.length; i++){\n                    let ent = arr[i];\n                    if(ent['id'] === eid){\n                        return ent;\n                    }\n                    let inChild = crawlEnts(ent.children, eid)\n                    if(inChild){\n                        return inChild\n                    }\n                }\n                return undefined;\n            }\n            let fallback = crawlEnts(entities(), entityId);\n            if(fallback){\n                this.entityData.entityMap[entityId] = fallback;\n            }\n            return fallback;\n        }\n\n\n        getAllEntities() {\n            return Object.values(this.entityData.entityMap || {});\n        }\n\n        getSceneEntity(){\n            return this.entityData.entities[0];\n        }\n\n        getEntityOrScene(entityId){\n            let entity = this.getEntityById(entityId);\n            if(!entity){\n                entity = this.getSceneEntity();\n            }\n            return entity;\n        }\n\n        getSelectedEntity(sceneFallback){\n            if(sceneFallback){\n                return this.getEntityOrScene(this.selectedEntity);\n            }\n            return this.getEntityById(this.selectedEntity);\n        }\n\n        getEntityByName(entityName){\n            return SM.getAllEntities().find(x=>x.name==entityName);\n        }\n\n        getAllComponents(){\n            return Object.values(this.entityData.componentMap).filter(x=>x._entity.components.includes(x))\n        }\n\n        getAllScriptRunners(){\n            return this.getAllComponents().filter(x=>x.type === \"ScriptRunner\");\n        }\n\n        getAllScriptAssets(){\n            return this.getAllComponents().filter(x=>x.type === \"ScriptAsset\");\n       }\n\n       getScriptAsset(scriptName){\n            return this.getAllScriptAssets().find(x=>x.properties.name === scriptName);\n       }\n\n\n        getScriptByName(scriptName){\n            let mono =  this.getAllScriptRunners().find(x=>x.properties.name === scriptName);\n            return mono?.ctx;\n        }\n\n\n        async _addNewEntity(entityName, parentId = null) {\n            if(!this.scene || !window.BS){\n                log('init', \"NO SCENE AVAILABLE\")\n                return null;\n            }\n\n            if(!parentId){\n                parentId = this.entityData.entities[0].id;\n            }\n\n            let parentEntity = this.getEntityById(parentId);\n            if(!parentEntity){\n                log(\"scene\",\"no parent entity found\")\n                return null;\n            }\n          \n            // Create new GameObject\n            let newEntity = await new Entity().init({\n                parentId: parentId,\n                name: entityName,\n                uuid: Math.floor(Math.random() * 10000000000000)\n            });\n\n            log(\"scene\", \"NEW SLOT:\", newEntity)\n\n            // function stringTo8DigitNumber(str) {\n            //     let hash = 0x811c9dc5; // FNV offset basis\n            //     for (let i = 0; i < str.length; i++) {\n            //       hash ^= str.charCodeAt(i);\n            //       hash = (hash + ((hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24))) >>> 0;\n            //     }\n            //     return hash % 100_000_000;\n            //   }\n            // let properties = {\n            //     id: `Transform_${stringTo8DigitNumber(newEntity.id)}`\n            // }\n            // let transform = await new TransformComponent().init(newEntity, null, properties);\n            // newEntity.components.push(transform);\n            //await newEntity._setParent(parentEntity);\n        }\n\n        /**\n         * Creates entity wrappers for a cloned GameObject and all its children/components\n         * Used after scene.Instantiate to map the Unity GameObject hierarchy to our entity system\n         * @param {Object} gameObject - The cloned Unity GameObject\n         * @param {string} parentId - The parent entity ID\n         * @param {string} name - The entity name\n         * @param {Object} sourceEntity - The original entity being cloned (for ID mapping)\n         * @param {Object} componentIdMap - Map of original component IDs to new synchronized IDs\n         */\n        async _createEntityFromGameObject(gameObject, parentId, name, sourceEntity, componentIdMap) {\n            // Create the entity wrapper\n\n            //TODO: figure out where uuid fits;\n            const entity = await new Entity().init({\n                name: name || gameObject.name,\n                parentId: parentId,\n                _bs: gameObject,\n                layer: gameObject.layer,\n                localPosition: gameObject.transform.localPosition,\n                localRotation: gameObject.transform.localRotation,\n                localScale: gameObject.transform.localScale,\n            });\n\n            \n            \n\n            // Map all components from the GameObject using synchronized IDs\n            let componentIndex = 0;\n\n            // Handle all other components\n            for (let c in gameObject.components) {\n                const component = gameObject.components[c];\n                if (component.componentType === BS.ComponentType.Transform) continue;\n\n                if (SUPPORTED_COMPONENTS.has(component.componentType)) {\n                    const sourceComponent = sourceEntity.components[componentIndex];\n                    const component_ref = componentIdMap[sourceComponent.id];\n                    const componentClass = componentTypeMap[component_ref.split(\"_\")[0]];\n                    const entityComponent = await new componentClass().init(entity, component, {id: component_ref});\n                    entity.AddComponent(entityComponent);\n                    this.entityData.componentMap[component_ref] = entityComponent;\n                    componentIndex++;\n                }\n            }\n\n            // Add entity to parent\n            const parentEntity = this.getEntityById(parentId);\n            if (parentEntity) {\n                parentEntity.children.push(entity);\n            }\n\n            // Recursively handle children\n            if (gameObject.Traverse && sourceEntity.children && sourceEntity.children.length > 0) {\n                let childIndex = 0;\n                gameObject.Traverse((child) => {\n                    if (child && child.id !== gameObject.unityId && child.parent === gameObject.unityId) {\n                        const sourceChild = sourceEntity.children[childIndex];\n                        this._createEntityFromGameObject(child, entity.id, child.name, sourceChild, componentIdMap);\n                        childIndex++;\n                    }\n                });\n            }\n\n\n            entity._loaded();\n            return entity;\n        }\n\n\n     \n        /**\n         * Execute startup scripts from inventory\n         * Scripts must have both startup and active flags set to true\n         */\n        async executeStartupScripts(stage, attempts = 0) {\n            log('startup', \"executing startup scripts for: \", stage)\n            if(!lifecycle || !window.inventory || !window.inventory.items){\n                log('startup', 'Lifecycle not initialized, delaying..');\n                await new Promise(resolve => setTimeout(resolve, 500));\n                return await this.executeStartupScripts(stage);\n            }\n\n            if(stage === \"onInspectorLoaded\"){\n                if(lifecycle.startupExecutionStart.onInspectorLoaded){\n                    log('startup', 'Inspector startup has already started, skipping..');\n                    return;\n                }\n                lifecycle.startupExecutionStart.onInspectorLoaded = true;\n            }\n           \n            if(stage === \"onSceneLoaded\"){\n                if(!lifecycle.startupExecutionStart.onInspectorLoaded){\n                    log('startup', 'Inspector startup has not started for some reason..');\n                    await this.executeStartupScripts(\"onInspectorLoaded\");\n                }\n                if(lifecycle.startupExecutionStart.onInspectorLoaded && !lifecycle.startupExecutionComplete.onInspectorLoaded){ \n                    log('startup', 'Inspector startup has not completed yet, delaying..');\n                    await new Promise(resolve => setTimeout(resolve, 500));\n                    return await this.executeStartupScripts(stage, attempts + 1);\n                }\n\n                if(lifecycle.startupExecutionStart.onSceneLoaded){\n                    log('startup', 'Scene startup has already started, skipping..');\n                    return;\n                }\n                lifecycle.startupExecutionStart.onSceneLoaded = true;\n            }\n\n            try {\n                if (!window.inventory) {\n                    log('startup', 'Inventory not initialized, skipping startup scripts');\n                    return;\n                }\n                \n                const startupScripts = Object.values(window.inventory.items).filter(item => \n                    item.itemType === 'script' && \n                    item.startup === true && \n                    item.active === true &&\n                    item.startupSequence === stage\n                );\n                \n           \n                \n                log('startup', `Found ${startupScripts.length} startup scripts to execute`);\n                for (const script of startupScripts) {\n                    try {\n                        log('startup', `Executing startup script: ${script.name}`);\n                        \n                        // Create a script context similar to ScriptRunner\n                        const scriptContext = {\n                            vars: {},\n                            _scene: this.scene,\n                            _BS: window.BS,\n                            _entity: null, // No entity for startup scripts\n                            _component: null // No component for startup scripts\n                        };\n                        \n                        // Execute the script\n                        const scriptFunction = new Function('console', script.data);\n                        scriptFunction.call(scriptContext, console);\n                        \n                        // Call onStart if it exists\n                        if (typeof scriptContext.onStart === 'function') {\n                            scriptContext.onStart();\n                        }\n                        \n                        showNotification(`Startup script \"${script.name}\" executed`);\n                    } catch (error) {\n                        err('startup', `Error executing startup script \"${script.name}\":`, error);\n                        showNotification(`Failed to execute startup script \"${script.name}\"`, 'error');\n                    }\n                }\n                \n                log('startup', 'All startup scripts executed');\n            } catch (error) {\n                err('startup', 'Error in executeStartupScripts:', error);\n            }\n\n            lifecycle.startupExecutionComplete[stage] = true;\n            log('startup', `[${stage}] COMPLETED`);\n        }\n    }\n\n    // Create singleton instance\n    export const sceneManager = new SceneManager();\n    window.SM = sceneManager\n    window.entities = ()=>{ return window.SM.entityData.entities }\n    window.crawl = ()=>{\n        let dig = (entity)=>{\n            let map = {\n                entity: entity,\n                _bs: entity._bs,\n                name: entity.name,\n                '.': entity.components,\n                '_': entity.components.map(c=>c.type)\n            }\n            for(let i=0; i<entity.children.length; i++){\n                map[i] = dig(entity.children[i])\n            }\n            return map\n        }\n        return dig(window.entities()[0])\n    }\n    window.sel = ()=>{\n        return window.SM.getSelectedEntity()\n    }\n    window.doIOwnCallback = (unityId, owned) => console.log(unityId, owned);\n    window.getUserColor = (name)=>{\n        return Object.values(scene.users).find(x=>x.name===name)?.color || \"#8b8f9e\"\n    }\n\n//})()", "/**\n * Firebase Authentication Helper\n * \n * This module provides custom authentication for Firebase using a secret-based system.\n * Since Firebase Realtime Database rules require proper authentication, we need to\n * implement a custom authentication flow.\n * \n * Note: For production use, you should implement this on a secure backend server\n * that validates secrets and creates Firebase custom tokens.\n */\n\nexport class FirebaseAuthHelper {\n    constructor(networking) {\n        this.networking = networking;\n        this.currentUser = null;\n        this.authStateListeners = [];\n    }\n\n    /**\n     * Initialize Firebase Auth and authenticate with secret\n     */\n    async initializeAuth() {\n        if (!firebase.auth) {\n            console.error('Firebase Auth not available');\n            return false;\n        }\n\n        try {\n            // Check if already authenticated\n            const currentUser = firebase.auth().currentUser;\n            if (currentUser) {\n                this.currentUser = currentUser;\n                return true;\n            }\n\n            // Get the user's secret\n            const secret = this.networking.secret;\n            const username = this.sanitizeUsername(SM.scene?.localUser?.name || 'anonymous');\n            await this.authenticateAnonymously(username, secret);\n            return true;\n        } catch (error) {\n            console.error('Failed to initialize Firebase Auth:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Authenticate anonymously and store secret/username in database\n     * This is a simplified approach for development\n     */\n    async authenticateAnonymously(username, secret) {\n        try {\n            // Sign in anonymously\n            const credential = await firebase.auth().signInAnonymously();\n            this.currentUser = credential.user;\n            //await this.registerUserSecret(this.currentUser.uid, username, secret);\n            console.log('Authenticated anonymously as:', username);\n            return this.currentUser;\n        } catch (error) {\n            console.error('Anonymous authentication failed:', error);\n            throw error;\n        }\n    }\n\n\n    /**\n     * Register user secret mapping (for development only)\n     * In production, this should be handled server-side\n     */\n    async registerUserSecret(uid, username, secret) {\n        try {\n            // Call auth server to set custom claims\n            const response = await fetch(`${window.repoUrl.slice(0,-3)}/setclaims`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'ngrok-skip-browser-warning': 'true'\n                },\n                body: JSON.stringify({\n                    uid: uid,\n                    username: username,\n                    secret: secret\n                })\n            });\n\n            if (response.ok) {\n                console.log('Custom claims set for:', username);\n                // Force token refresh to get new claims\n                await this.currentUser.getIdToken(true);\n            } else {\n                console.log('Could not set custom claims (server may not be running)');\n            }\n        } catch (error) {\n            console.log('Auth server not available - running without custom claims');\n        }\n    }\n\n    /**\n     * Sanitize username for use as Firebase path\n     */\n    sanitizeUsername(username) {\n        return username.replace(/[.#$[\\]]/g, '_');\n    }\n\n    /**\n     * Sign out current user\n     */\n    async signOut() {\n        try {\n            await firebase.auth().signOut();\n            this.currentUser = null;\n            console.log('Signed out successfully');\n        } catch (error) {\n            console.error('Sign out failed:', error);\n        }\n    }\n\n    /**\n     * Get current authenticated user\n     */\n    getCurrentUser() {\n        return this.currentUser || firebase.auth().currentUser;\n    }\n\n    /**\n     * Add auth state listener\n     */\n    onAuthStateChanged(callback) {\n        this.authStateListeners.push(callback);\n        return firebase.auth().onAuthStateChanged(callback);\n    }\n\n    /**\n     * Check if user is authenticated\n     */\n    isAuthenticated() {\n        return !!this.getCurrentUser();\n    }\n\n    /**\n     * Get ID token for API calls\n     */\n    async getIdToken() {\n        const user = this.getCurrentUser();\n        if (!user) {\n            throw new Error('No authenticated user');\n        }\n        return await user.getIdToken();\n    }\n}\n\n// Helper function to attach auth to database operations\nexport function attachAuthToDatabase(networking) {\n    const authHelper = new FirebaseAuthHelper(networking);\n    \n    // Initialize auth when Firebase is ready\n    const initAuth = async () => {\n        if (typeof firebase !== 'undefined' && firebase.auth) {\n            await authHelper.initializeAuth();\n            \n            // Monkey-patch networking methods to include auth\n            const originalMethods = {\n                setData: networking.setData.bind(networking),\n                getData: networking.getData.bind(networking),\n                updateData: networking.updateData.bind(networking),\n                deleteData: networking.deleteData.bind(networking),\n                addData: networking.addData.bind(networking)\n            };\n\n            // Wrap methods to ensure authentication\n            networking.setData = async function(path, data) {\n                if (!authHelper.isAuthenticated()) {\n                    await authHelper.initializeAuth();\n                }\n                return originalMethods.setData(path, data);\n            };\n\n            networking.getData = async function(path) {\n                if (!authHelper.isAuthenticated()) {\n                    await authHelper.initializeAuth();\n                }\n                return originalMethods.getData(path);\n            };\n\n            networking.updateData = async function(path, updates) {\n                if (!authHelper.isAuthenticated()) {\n                    await authHelper.initializeAuth();\n                }\n                return originalMethods.updateData(path, updates);\n            };\n\n            networking.deleteData = async function(path) {\n                if (!authHelper.isAuthenticated()) {\n                    await authHelper.initializeAuth();\n                }\n                return originalMethods.deleteData(path);\n            };\n\n            networking.addData = async function(path, data) {\n                if (!authHelper.isAuthenticated()) {\n                    await authHelper.initializeAuth();\n                }\n                return originalMethods.addData(path, data);\n            };\n\n            // Add auth helper to networking object\n            networking.auth = authHelper;\n\n            window.loadInventoryDeps()\n        } else {\n            // Retry if Firebase isn't ready yet\n            setTimeout(initAuth, 1000);\n        }\n    };\n\n    initAuth();\n    return authHelper;\n}", "import { appendToShell, parseBest } from './utils.js';\nimport { attachAuthToDatabase } from './firebase-auth-helper.js';\n\nexport class Networking {\n    constructor(){\n        this.db = null;\n        this.storage = null;\n        this.secret = this.getSecret();\n        this.logs = [];\n        this.spaceId = window.location.host.split(\".\")[0];\n        this.state = {};\n        this.varsListeners = new Map(); // Track vars listeners for cleanup\n    }\n\n    get host(){\n        return this.state.vars.hostUser;\n    }\n\n    get amHost(){\n        return this.state.vars.hostUser === SM.myName();\n    }\n\n    claimHost(){\n        this.setVar(\"hostUser\", SM.myName());\n    }\n\n    // New listener management methods for space-props\n    onVarsChange(callback) {\n        const varsRef = this.db.ref(`space/${this.spaceId}/vars`);\n        varsRef.on('value', callback);\n        this.varsListeners.set(callback, varsRef);\n        return callback; // Return for easy removal\n    }\n\n    offVarsChange(callback) {\n        if (this.varsListeners.has(callback)) {\n            const ref = this.varsListeners.get(callback);\n            ref.off('value', callback);\n            this.varsListeners.delete(callback);\n        }\n    }\n\n    // Granular listeners for performance optimization\n    onVarAdded(callback) {\n        const varsRef = this.db.ref(`space/${this.spaceId}/vars`);\n        varsRef.on('child_added', callback);\n        return { ref: varsRef, callback, event: 'child_added' };\n    }\n\n    onVarChanged(callback) {\n        const varsRef = this.db.ref(`space/${this.spaceId}/vars`);\n        varsRef.on('child_changed', callback);\n        return { ref: varsRef, callback, event: 'child_changed' };\n    }\n\n    onVarRemoved(callback) {\n        const varsRef = this.db.ref(`space/${this.spaceId}/vars`);\n        varsRef.on('child_removed', callback);\n        return { ref: varsRef, callback, event: 'child_removed' };\n    }\n\n    // Remove a specific listener\n    removeListener(listenerInfo) {\n        if (listenerInfo && listenerInfo.ref) {\n            listenerInfo.ref.off(listenerInfo.event, listenerInfo.callback);\n        }\n    }\n\n    // Helper to categorize vars (public vs protected)\n    categorizeVars(vars = this.state.vars) {\n        const result = { public: {}, protected: {} };\n        Object.entries(vars || {}).forEach(([key, value]) => {\n            if (key.startsWith('_')) {\n                result.protected[key.substring(1)] = value;\n            } else {\n                result.public[key] = value;\n            }\n        });\n        return result;\n    }\n\n    // Get all vars (snapshot)\n    async getAllVars() {\n        const snapshot = await this.db.ref(`space/${this.spaceId}/vars`).once('value');\n        return snapshot.val() || {};\n    }\n\n    // Cleanup all listeners\n    cleanupListeners() {\n        this.varsListeners.forEach((ref, callback) => {\n            ref.off('value', callback);\n        });\n        this.varsListeners.clear();\n    }\n\n    getSecret(){\n        let secret = localStorage.getItem(\"secret\");\n        if(!secret){\n            secret = Math.random().toString(36).substring(2, 15);\n            localStorage.setItem(\"secret\", secret);\n        }\n        return secret;\n    }\n    \n    initFirebase(callback) {\n        log(\"init\", \"initializing firebase\")\n        // Firebase configuration\n        if(!window.FIREBASE_CONFIG){\n            err(\"init\", \"Firebase configuration not found\");\n            return;\n        }\n        const firebaseConfig = window.FIREBASE_CONFIG;\n        // Initialize Firebase only if not already initialized\n        if (typeof firebase !== 'undefined' && !firebase.apps.length) {\n            try {\n                firebase.initializeApp(firebaseConfig);\n                this.db = firebase.database();\n                this.storage = firebase.storage();\n\n                let initFirebaseListeners = ()=>{\n                    if(window.inventory && window.inventory.firebase){\n                        window.inventory.firebase.setupFirebaseListeners()\n                        attachAuthToDatabase(this)\n                        const spaceRef = this.db.ref(\"space/\"+this.spaceId);\n                        spaceRef.once('value', (snapshot)=>{\n                            let spaceState = snapshot.val();\n                            if(!spaceState){\n                                spaceState = {\n                                    vars: {},\n                                    People: {},\n                                    components: {},\n                                    scripts: {}\n                                }\n                                this.db.ref(\"space/\"+this.spaceId).set(spaceState);\n                            }else{\n                                if(!spaceState.vars){\n                                    spaceState.vars = {}\n                                    this.db.ref(\"space/\"+this.spaceId+\"/vars\").set({});\n                                }\n                                if(!spaceState.People){\n                                    spaceState.People = {}\n                                    this.db.ref(\"space/\"+this.spaceId+\"/People\").set({});\n                                }\n                                if(!spaceState.components){\n                                    spaceState.components = {}\n                                    this.db.ref(\"space/\"+this.spaceId+\"/components\").set({});\n                                }\n                                if(!spaceState.scripts){\n                                    spaceState.scripts = {}\n                                    this.db.ref(\"space/\"+this.spaceId+\"/scripts\").set({});\n                                }\n                            }\n\n                            this.state = spaceState;\n                            callback(spaceState);\n                        });\n                    }else{\n                        setTimeout(initFirebaseListeners, 500)\n                    }\n                }\n                initFirebaseListeners()\n            } catch (error) {\n                console.error('Failed to initialize Firebase:', error);\n            }\n        }\n    }\n    \n    async testConnection() {\n        try {\n            log('net', 'Testing Firebase Realtime Database connection...');\n            \n            // Try a simple write operation\n            const testRef = this.db.ref('test/connection-test');\n            await testRef.set({\n                timestamp: firebase.database.ServerValue.TIMESTAMP,\n                test: true,\n                message: 'Realtime Database connection test'\n            });\n            \n            log('net', 'Realtime Database write successful');\n            \n            // Try to read it back\n            const snapshot = await testRef.once('value');\n            log('net', 'Realtime Database read successful:', snapshot.val());\n            \n            // Clean up - commented out to preserve test data  \n            log('net', '\u2705 Firebase Realtime Database is working correctly!');\n            \n        } catch (error) {\n            err('net', 'Realtime Database connection test failed:', error);\n        }\n    }\n    \n    async testStorageConnection() {\n        log('net', '=== Starting Firebase Storage Test ===');\n        \n        try {\n            // Step 1: Check if storage is initialized\n            log('net', 'Step 1: Checking storage initialization...');\n            const storage = this.getStorage();\n            if (!storage) {\n                err('net', '\u2717 Storage not initialized');\n                return;\n            }\n            log('net', '\u2713 Storage initialized:', storage);\n            \n            // Step 2: Check storage bucket\n            log('net', 'Step 2: Checking storage bucket...');\n            const storageRef = storage.ref();\n            log('net', 'Storage root reference:', storageRef);\n            log('net', 'Storage bucket:', storageRef.bucket);\n            \n            // Step 3: Try to create a reference\n            log('net', 'Step 3: Creating test reference...');\n            const testPath = `test/storage-test-${Date.now()}.txt`;\n            const testRef = storage.ref(testPath);\n            log('net', 'Test reference created:', testRef.fullPath);\n            \n            // Step 4: Try to upload a simple text file\n            log('net', 'Step 4: Attempting to upload test text...');\n            const testContent = 'Firebase Storage test content';\n            const blob = new Blob([testContent], { type: 'text/plain' });\n            \n            try {\n                const snapshot = await testRef.put(blob);\n                log('net', '\u2713 Upload successful:', snapshot);\n                log('net', 'Upload state:', snapshot.state);\n                log('net', 'Bytes transferred:', snapshot.bytesTransferred);\n                \n                // Step 5: Try to get download URL\n                log('net', 'Step 5: Getting download URL...');\n                const downloadURL = await snapshot.ref.getDownloadURL();\n                log('net', '\u2713 Download URL obtained:', downloadURL);\n\n                // Step 6: Try to delete the test file\n                log('net', 'Step 6: Cleaning up test file...');\n                await testRef.delete();\n                log('net', '\u2713 Test file deleted successfully');\n                \n                log('net', '=== Firebase Storage Test PASSED ===');\n                return true;\n                \n            } catch (uploadError) {\n                err('net', '\u2717 Upload/Download failed:', uploadError);\n                err('net', 'Error code:', uploadError.code);\n                err('net', 'Error message:', uploadError.message);\n                if (uploadError.serverResponse) {\n                    err('net', 'Server response:', uploadError.serverResponse);\n                }\n                \n                // Check common issues\n                if (uploadError.code === 'storage/unauthorized') {\n                    err('net', 'Issue: Storage security rules may be blocking uploads');\n                    err('net', 'Solution: Check Firebase Console > Storage > Rules');\n                } else if (uploadError.code === 'storage/unknown') {\n                    err('net', 'Issue: Unknown storage error - check CORS and bucket configuration');\n                    err('net', 'Check: Firebase Console > Storage > Files tab to ensure bucket exists');\n                }\n            }\n            \n        } catch (error) {\n            err('net', '\u2717 Storage test failed:', error);\n            err('net', 'Full error object:', error);\n            \n            // Additional debugging info\n            if (error.code) err('net', 'Error code:', error.code);\n            if (error.message) err('net', 'Error message:', error.message);\n            if (error.serverResponse) {\n                err('net', 'Server response:', error.serverResponse);\n                try {\n                    const parsed = JSON.parse(error.serverResponse);\n                    err('net', 'Parsed server response:', parsed);\n                } catch (e) {\n                    // Not JSON\n                }\n            }\n        }\n        \n        log('net', '=== Firebase Storage Test FAILED ===');\n        return false;\n    }\n    \n    // Get the Firebase Realtime Database reference\n    getDatabase() {\n        if (!this.db && typeof firebase !== 'undefined') {\n            this.db = firebase.database();\n        }\n        return this.db;\n    }\n    \n    // Get the Firebase Storage reference\n    getStorage() {\n        if (!this.storage && typeof firebase !== 'undefined') {\n            this.storage = firebase.storage();\n        }\n        return this.storage;\n    }\n    \n    // Generic Firebase Realtime Database operations\n    async addData(path, data) {\n        if (!this.db) {\n            err('net', 'Firebase Database not initialized');\n            throw new Error('Firebase Database not initialized');\n        }\n        \n        try {\n            log('net', `Adding data to path: ${path}`, data);\n            const newRef = this.db.ref(path).push();\n            await newRef.set({\n                ...data,\n                createdAt: firebase.database.ServerValue.TIMESTAMP\n            });\n            log('net', 'Data added successfully with key:', newRef.key);\n            return { id: newRef.key, ref: newRef };\n        } catch (error) {\n            err('net', `Failed to add data to ${path}:`, error);\n            throw error;\n        }\n    }\n    \n    async setData(path, data) {\n        if (!this.db) throw new Error('Firebase Database not initialized');\n        await this.db.ref(path).set(data);\n        return { path, data };\n    }\n    \n    async getData(path) {\n        if (!this.db) throw new Error('Firebase Database not initialized');\n        const snapshot = await this.db.ref(path).once('value');\n        return snapshot.val();\n    }\n    \n    async updateData(path, updates) {\n        if (!this.db) throw new Error('Firebase Database not initialized');\n        await this.db.ref(path).update(updates);\n        return { path, updates };\n    }\n    \n    async deleteData(path) {\n        if (!this.db) throw new Error('Firebase Database not initialized');\n        await this.db.ref(path).remove();\n        return { path };\n    }\n    \n    // Query data with filters\n    async queryData(path, options = {}) {\n        if (!this.db) throw new Error('Firebase Database not initialized');\n        let query = this.db.ref(path);\n        \n        // Apply ordering\n        if (options.orderBy) {\n            query = query.orderByChild(options.orderBy);\n        }\n        \n        // Apply filters\n        if (options.startAt !== undefined) {\n            query = query.startAt(options.startAt);\n        }\n        if (options.endAt !== undefined) {\n            query = query.endAt(options.endAt);\n        }\n        if (options.equalTo !== undefined) {\n            query = query.equalTo(options.equalTo);\n        }\n        \n        // Apply limits\n        if (options.limitToFirst) {\n            query = query.limitToFirst(options.limitToFirst);\n        } else if (options.limitToLast) {\n            query = query.limitToLast(options.limitToLast);\n        }\n        \n        const snapshot = await query.once('value');\n        const result = [];\n        snapshot.forEach(childSnapshot => {\n            result.push({\n                id: childSnapshot.key,\n                ...childSnapshot.val()\n            });\n        });\n        return result;\n    }\n\n\n\n    async routeOneShot(data, timestamp, sender){\n        let items = data.split(\"\u00B6\")\n\n        if(items[0] === \"runJS\"){\n            let code = items[1];\n            log(\"runJS\", code)\n            new Function(code)();\n            return;\n        }\n\n        if(data === \"reset\"){\n            await SM._reset();\n        }\n\n        if(items[0] === \"scriptrunner_start\"){\n            let componentId = items[1];\n            let scriptrunner = SM.getEntityComponentById(componentId);\n            if(scriptrunner){\n                await scriptrunner._start();\n            }\n        }\n\n        if(items[0] === \"scriptrunner_stop\"){\n            let componentId = items[1];\n            let scriptrunner = SM.getEntityComponentById(componentId);\n            if(scriptrunner){\n                await scriptrunner._stop();\n            }\n        }\n\n        if(items[0] === \"scriptrunner_refresh\"){\n            let componentId = items[1];\n            let scriptrunner = SM.getEntityComponentById(componentId);\n            if(scriptrunner){\n                await scriptrunner._refresh();\n            }\n        }\n\n        if(items[0] === \"import\"){\n            let [path, minUpdateTime] = items.slice(1)\n            await inventory.firebase.importFromFirebase(path, \"\", minUpdateTime);\n        }\n\n        \n        const saveBtn = document.getElementById('saveBtn');\n        if (saveBtn) {\n            saveBtn.style.opacity = 1;\n            saveBtn.style.cursor = \"pointer\";\n            saveBtn.style.pointerEvents = \"auto\";\n        }\n    }\n\n    async handleOneShot(event){\n\n        let message = event.detail.data;\n        let firstColon = message.indexOf(\":\");\n        let timestamp = parseInt(message.slice(0, firstColon));\n        \n        message = message.slice(firstColon+1);\n        let secondColon = message.indexOf(\":\");\n        let sender = message.slice(0, secondColon);\n        \n        if(sender === SM.myName()){\n            return;\n        }\n      \n        let data = message.slice(secondColon+1);\n        appendToShell(\"oneShot\", sender, data);\n        await this.routeOneShot(data, timestamp, sender)\n    }\n\n\n    convertKeyToFirebaseKey(key){\n        key = key.replace(\"$\", \"\");\n        key = key.replace(\":\", \"/\");\n        if(key.startsWith(\"__\")){\n            key = \"components/\"+key.slice(2);\n        }\n        return key;\n    }\n\n    clearSpaceState(){\n        this.state = {};\n        this.db.ref(\"space/\"+this.spaceId).remove();\n    }\n\n   \n    getVar(key){\n        return this.state.vars[key];\n    }\n\n    setVar(key, value, hostOnly){\n        if(hostOnly && !this.amHost) return;\n        this.state.vars[key] = value;\n        let ref = this.db.ref(\"space/\"+this.spaceId+\"/vars/\"+key);\n        ref.set(value);\n    }\n\n    setScript(scriptName, scriptContent){\n        // let ref = this.db.ref(\"space/\"+this.spaceId+\"/scripts/\"+scriptName);\n        // ref.set(scriptContent);\n    }\n\n    async SetScript(scriptName, scriptContent){\n        // let ref = this.db.ref(\"space/\"+this.spaceId+\"/scripts/\"+scriptName);\n        // await ref.set(scriptContent);\n    }\n\n    async SetVar(key, value, hostOnly){ \n        if(hostOnly && !this.amHost) return;\n        let ref = this.db.ref(\"space/\"+this.spaceId+\"/vars/\"+key);\n        await ref.set(value);\n    }\n\n    delVar(key, hostOnly){\n        if(hostOnly && !this.amHost) return;\n        delete this.state.vars[key];\n        let ref = this.db.ref(\"space/\"+this.spaceId+\"/vars/\"+key);\n        ref.remove();\n    }\n    \n    async DelVar(key, hostOnly){\n        if(hostOnly && !this.amHost) return;\n        let ref = this.db.ref(\"space/\"+this.spaceId+\"/vars/\"+key);\n        await ref.remove();\n    }\n  \n\n    async sendOneShot(data){\n        let now = Date.now();\n        let name = SM.myName();\n        let remote_message = `${now}:${name}:${data}`\n        SM.scene.OneShot(remote_message);\n        appendToShell(\"oneShot\", name, data);\n        await this.routeOneShot(data, now, name)\n    }\n\n    runJS(code){\n        this.sendOneShot(`runJS\u00B6${code}`);\n    }\n}\n\nexport const net = new Networking();\nwindow.net = net;\n\n\n// Debug function for testing Firebase Realtime Database\nwindow.testFirebaseDB = async () => {\n    log('net', 'Testing Firebase Realtime Database...');\n    try {\n        const db = net.getDatabase();\n        \n        // Test 1: Add data\n        const testData = {\n            test: true,\n            timestamp: firebase.database.ServerValue.TIMESTAMP,\n            message: 'Test data from Realtime Database',\n            number: 42,\n            boolean: true,\n            array: ['item1', 'item2'],\n            nested: { key: 'value' }\n        };\n        \n        log('net', 'Adding test data...');\n        const newRef = db.ref('test').push();\n        await newRef.set(testData);\n        log('net', '\u2705 Data added with key:', newRef.key);\n        \n        // Test 2: Read it back\n        log('net', 'Reading data...');\n        const snapshot = await newRef.once('value');\n        log('net', '\u2705 Retrieved data:', snapshot.val());\n        \n        // Test 3: Update it\n        log('net', 'Updating data...');\n        await newRef.update({\n            updated: true,\n            updateTime: firebase.database.ServerValue.TIMESTAMP\n        });\n        log('net', '\u2705 Data updated');\n        \n        // Test 4: List data\n        log('net', 'Listing data...');\n        const listSnapshot = await db.ref('test').limitToFirst(10).once('value');\n        log('net', '\u2705 Listed data:', listSnapshot.val());\n        \n        // Test 5: Delete\n        log('net', 'Deleting data...');\n        await newRef.remove();\n        log('net', '\u2705 Data deleted');\n        \n        return '\u2705 All Realtime Database tests passed!';\n    } catch (error) {\n        err('net', '\u274C Realtime Database test failed:', error);\n        return error;\n    }\n};", "/**\n * Refactored Change Manager\n * Uses specialized change classes for cleaner separation of concerns\n */\n\n\nclass ChangeManager {\n    constructor() {\n        this.changeListeners = [];\n        this.isProcessing = false;\n        this.undoStack = [];\n        this.redoStack = [];\n        this.maxSize = 100;\n        this.isApplying = false;\n        this.setupKeyboardShortcuts();\n        this.updateUI();\n    }\n\n\n    /**\n     * Add a change listener\n     */\n    addChangeListener(listener) {\n        this.changeListeners.push(listener);\n    }\n\n    /**\n     * Remove a change listener\n     */\n    removeChangeListener(listener) {\n        const index = this.changeListeners.indexOf(listener);\n        if (index > -1) {\n            this.changeListeners.splice(index, 1);\n        }\n    }\n\n    /**\n     * Apply a change - now accepts change objects with apply() and undo() methods\n     */\n    async applyChange(change) {\n        if (this.isProcessing) {\n            console.warn('Change already in progress');\n            return;\n        }\n\n        this.isProcessing = true;\n        let outcome = false;\n\n        try {\n            // Validate change object\n            if (!change || typeof change.apply !== 'function') {\n                console.error('Invalid change object - must have apply() method');\n                return;\n            }\n\n\n            // Skip history recording if from history or not from UI\n            const isFromHistory = change.options?.source === 'history' || this.isApplying;\n            const shouldRecord = !isFromHistory && change.options?.source === 'ui';\n\n            // Apply the change with timeout\n            const timeout = change.timeout || 5000; // Default 5 second timeout\n            outcome = await change.apply(); //await this.applyWithTimeout(change.apply.bind(change), timeout, change);\n\n            // Record in history if applicable\n            if (shouldRecord) {\n                this.recordChange(change);\n            }\n\n            // Notify listeners\n            this.notifyListeners(change);\n\n        } catch (error) {\n            console.error('Failed to apply change:', error);\n            throw error;\n        } finally {\n            this.isProcessing = false;\n        }\n        return outcome;\n    }\n\n    /**\n     * Apply a function with a timeout\n     */\n    async applyWithTimeout(fn, timeout, change) {\n        return Promise.race([\n            fn(),\n            new Promise((resolve) => {\n                setTimeout(() => {\n                    console.warn(`Change ${change.constructor.name || 'unknown'} timed out after ${timeout}ms`);\n                    resolve(null);\n                }, timeout);\n            })\n        ]);\n    }\n\n\n    /**\n     * Record a change in history\n     * @param {Object} change - The change object with apply() and undo() methods\n     */\n    recordChange(change) {\n        // Don't record if we're applying history\n        if (this.isApplying) {\n            log('change-manager', 'Skipping record - isApplying is true');\n            return;\n        }\n        \n        // Don't record if not from UI\n        if (change.options?.source !== 'ui') {\n            log('change-manager', 'Skipping record - source is not ui:', change.options?.source);\n            return;\n        }\n        \n        // Validate change object\n        if (!change || typeof change.apply !== 'function' || typeof change.undo !== 'function') {\n            err('change-manager', 'Invalid change object for history - must have apply() and undo() methods');\n            return;\n        }\n        \n        const entry = {\n            id: Date.now(),\n            timestamp: Date.now(),\n            description: change.getDescription ? change.getDescription() : 'Unknown change',\n            change: change // Store the actual change object\n        };\n        \n        this.undoStack.push(entry);\n        this.redoStack = []; // Clear redo on new change\n        \n        // Limit stack size\n        if (this.undoStack.length > this.maxSize) {\n            this.undoStack.shift();\n        }\n        \n        this.updateUI();\n    }\n    \n    /**\n     * Undo the last change\n     */\n    async undo() {\n        if (this.undoStack.length === 0) {\n            this.showNotification('Nothing to undo');\n            return;\n        }\n        \n        const entry = this.undoStack.pop();\n        this.isApplying = true;\n        \n        try {\n            // Call the change object's undo method with timeout\n            const timeout = 50000000 // entry.change.timeout || 5000;\n            await this.applyWithTimeout(entry.change.undo.bind(entry.change), timeout, entry.change.id);\n            \n            this.redoStack.push(entry);\n            this.updateUI();\n            this.showNotification(`Undone: ${entry.description}`);\n            log(\"UNDO/REDO\", `Undone: ${entry.description}`);\n        } catch (error) {\n            console.error('Undo failed:', error);\n            this.showNotification('Undo failed: ' + error.message, 'error');\n            // Put it back\n            this.undoStack.push(entry);\n        } finally {\n            this.isApplying = false;\n        }\n        changeManager.notifyListeners(entry);\n    }\n    \n    /**\n     * Redo the last undone change\n     */\n    async redo() {\n        if (this.redoStack.length === 0) {\n            this.showNotification('Nothing to redo');\n            return;\n        }\n        \n        const entry = this.redoStack.pop();\n        this.isApplying = true;\n        \n        try {\n            // Call the change object's apply method with timeout\n            //const timeout = entry.change.timeout || 5000;\n            const timeout = 50000000\n            await this.applyWithTimeout(entry.change.apply.bind(entry.change), timeout, entry.change.id);\n            \n            this.undoStack.push(entry);\n            this.updateUI();\n            this.showNotification(`Redone: ${entry.description}`);\n            log(\"UNDO/REDO\", `Redone: ${entry.description}`);\n        } catch (error) {\n            console.error('Redo failed:', error);\n            this.showNotification('Redo failed: ' + error.message, 'error');\n            // Put it back\n            this.redoStack.push(entry);\n        } finally {\n            this.isApplying = false;\n        }\n        changeManager.notifyListeners(entry);\n    }\n\n    /**\n     * Notify all change listeners\n     */\n    notifyListeners(change) {\n        this.changeListeners.forEach(listener => {\n            try {\n                listener(change);\n            } catch (error) {\n                console.error('Change listener error:', error);\n            }\n        });\n    }\n\n    /**\n     * Setup keyboard shortcuts\n     */\n    setupKeyboardShortcuts() {\n        document.addEventListener('keydown', (e) => {\n            if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                if(navigation.currentPage !== \"world-inspector\") return;\n                if (e.key === 'z' && !e.shiftKey) {\n                    e.preventDefault();\n                    this.undo();\n                } else if ((e.key === 'z' && e.shiftKey) || e.key === 'y') {\n                    e.preventDefault();\n                    this.redo();\n                }\n            }\n        });\n    }\n\n    /**\n     * Update UI state (buttons)\n     */\n    updateUI() {\n        const undoBtn = document.getElementById('undoBtn');\n        const redoBtn = document.getElementById('redoBtn');\n        \n        if (undoBtn) {\n            undoBtn.disabled = this.undoStack.length === 0;\n            undoBtn.title = this.undoStack.length > 0 \n                ? `Undo: ${this.undoStack[this.undoStack.length - 1].description} (Ctrl+Z)`\n                : 'Nothing to undo (Ctrl+Z)';\n        }\n        \n        if (redoBtn) {\n            redoBtn.disabled = this.redoStack.length === 0;\n            redoBtn.title = this.redoStack.length > 0\n                ? `Redo: ${this.redoStack[this.redoStack.length - 1].description} (Ctrl+Shift+Z)`\n                : 'Nothing to redo (Ctrl+Shift+Z)';\n        }\n    }\n\n    /**\n     * Show notification to user\n     */\n    showNotification(message, type = 'info') {\n        // Dispatch event for UI to handle\n        document.dispatchEvent(new CustomEvent('historyNotification', {\n            detail: { message, type }\n        }));\n    }\n    \n    /**\n     * Get current status\n     */\n    getStatus() {\n        return {\n            canUndo: this.undoStack.length > 0,\n            canRedo: this.redoStack.length > 0,\n            undoCount: this.undoStack.length,\n            redoCount: this.redoStack.length,\n            isApplying: this.isApplying\n        };\n    }\n\n\n    gatherHistory(entity){\n        let get_ids = (entity)=>{\n            let ids = new Array(...entity.identifiers)\n            let component_ids = entity.components.map(x=>x.id)\n            ids = ids.concat(component_ids)\n            entity.children.forEach((c)=>{\n                let children_ids = get_ids(c)\n                ids = ids.concat(children_ids)\n            })\n            return ids\n        }\n    \n        function valueExists(obj, validSet) {\n            return Object.values(obj).some(value => {\n                if (value && typeof value === 'object') {\n                    return valueExists(value, validSet);\n                }\n                return validSet.has(value);\n            });\n        }\n    \n        let relevant = new Set(get_ids(entity))\n        let history = []\n        this.undoStack.map(u=>u.change.cmd()).forEach(command=>{\n            if(command.action === \"add_entity\"){\n                let mergeId = command.parentId+\"/\"+command.entityName\n                if(relevant.has(mergeId)){\n                    history.push(command)\n                }\n            }\n            \n            if(valueExists(command, relevant)){\n                history.push(command)\n            }\n        })\n        return history\n    }\n    \n    \n    /**\n     * Clear all history\n     */\n    clear() {\n        this.undoStack = [];\n        this.redoStack = [];\n        this.updateUI();\n        this.showNotification('History cleared');\n    }\n    \n}\n\n// Export singleton instance\nexport const changeManager = new ChangeManager();\nwindow.changeManager = changeManager; // For debugging", "/**\n * Lifecycle Manager\n * Singleton that manages lifecycle events for all ScriptRunner components\n */\nlet localhost = window.location.hostname === 'localhost'\nexport class LifecycleManager {\n    constructor() {\n        this.startupExecutionStart = {\n            onInspectorLoaded: false,\n            onSceneLoaded: false\n        }\n        this.startupExecutionComplete = {\n            onInspectorLoaded: false,\n            onSceneLoaded: false\n        }\n        this.scriptRunners = new Map(); // Map of componentId -> ScriptRunner instance\n        this.fps = 30; // Default 45 FPS for onUpdate\n        this.updateInterval = null;\n        this.isRunning = false;\n        this.contexts = []\n        // Setup keyboard event listeners\n        this.setupKeyboardListeners();\n        return this;\n    }\n\n\n    recordContext(context){\n        //this.contexts.push(context); // This is only for debugging\n    }\n    \n    /**\n     * Register a ScriptRunner component\n     */\n    async registerScriptRunner(scriptRunner) {\n        this.scriptRunners.set(scriptRunner.id, scriptRunner);        \n        // Start the lifecycle if this is the first component\n        if (this.scriptRunners.size === 1 && !this.isRunning) {\n            this.start();\n        }\n\n        this.pruneOrphanedScriptRunners();\n        inspector.lifecyclePanel.render()\n    }\n\n    pruneOrphanedScriptRunners(){\n        // TODO\n    }\n    \n    /**\n     * Unregister a ScriptRunner component\n     */\n    unregisterScriptRunner(scriptRunner) {\n        if(!scriptRunner) return;\n        // Call onDestroy before removing\n        this.scriptRunners.delete(scriptRunner.id);\n        // Stop the lifecycle if no components remain\n        if (this.scriptRunners.size === 0) {\n            this.stop();\n        }\n        this.pruneOrphanedScriptRunners();\n        inspector.lifecyclePanel.render()\n    }\n    \n    /**\n     * Start the lifecycle manager\n     */\n    start() {\n        if (this.isRunning) return;\n        \n        this.isRunning = true;\n        \n        // Start update loop\n        const intervalMs = 1000 / this.fps;\n        this.updateInterval = setInterval(() => {\n            this.triggerUpdate();\n        }, intervalMs);\n        \n        log('lifecycle', `LifecycleManager started with ${this.fps} FPS`);\n        inspector.lifecyclePanel.render()\n    }\n    \n    /**\n     * Stop the lifecycle manager\n     */\n    stop() {\n        if (!this.isRunning) return;\n        \n        this.isRunning = false;\n        \n        // Stop update loop\n        if (this.updateInterval) {\n            clearInterval(this.updateInterval);\n            this.updateInterval = null;\n        }\n        \n        log('lifecycle', 'LifecycleManager stopped');\n        inspector.lifecyclePanel.render()\n    }\n    \n    /**\n     * Set the FPS for update events\n     */\n    setFPS(fps) {\n        this.fps = Math.max(1, Math.min(120, fps)); // Clamp between 1-120 FPS\n        \n        // Restart the update loop if running\n        if (this.isRunning) {\n            this.stop();\n            this.start();\n        }\n    }\n    \n    /**\n     * Trigger onUpdate for all registered behaviors\n     */\n    triggerUpdate() {\n        this.scriptRunners.forEach((scriptRunner, componentId) => {\n            scriptRunner._update();\n        });\n    }\n\n    relayEventToScriptRunners(event, key){\n        this.scriptRunners.forEach((scriptRunner, componentId) => {\n            if (scriptRunner.ctx[event] && typeof scriptRunner.ctx[event] === 'function') {\n                try {\n                    scriptRunner.ctx[event](key);\n                } catch (error) {\n                    err('lifecycle', `Error in ${event} for ${componentId}:`, error);\n                }\n            }\n        });\n    }\n    \n    /**\n     * Setup keyboard event listeners\n     */\n    setupKeyboardListeners() {\n        // KeyDown event\n        document.addEventListener('keydown', (event) => {\n            this.relayEventToScriptRunners('onKeyDown', event.key);\n        });\n        \n        // KeyUp event\n        document.addEventListener('keyup', (event) => {\n            this.relayEventToScriptRunners('onKeyUp', event.key);\n        });\n        \n        // KeyPress event (deprecated but included for compatibility)\n        document.addEventListener('keypress', (event) => {\n            this.relayEventToScriptRunners('keyPress', event.key);\n        });\n    }\n\n    keyDown(key){\n        this.relayEventToScriptRunners('onKeyDown', key);\n    }\n\n    keyUp(key){\n        this.relayEventToScriptRunners('onKeyUp', key);\n    }\n\n    keyPress(key){\n        this.relayEventToScriptRunners('keyPress', key);\n    }\n\n}\n\n// Create and export singleton instance\nexport const lifecycle = new LifecycleManager();\nwindow.lifecycle = lifecycle; // For debugging\n\n/**\n * Global LifecycleAPI for runtime inspection\n * Provides easy access to running ScriptRunner scripts\n */\nwindow.LifecycleAPI = {\n    /**\n     * Get the lifecycle manager instance\n     */\n    get manager() {\n        return lifecycle;\n    },\n\n    /**\n     * Get all running ScriptRunners\n     * @returns {Array} Array of ScriptRunner instances with metadata\n     */\n    getAllScripts() {\n        const scripts = [];\n        lifecycle.scriptRunners.forEach((scriptRunner, id) => {\n            scripts.push({\n                id,\n                scriptFile: mb.properties?.file,\n                entity: mb._entity ? {\n                    eid: mb._entity.eid,\n                    name: mb._entity.name,\n                    active: mb._entity.active,\n                    layer: mb._entity.layer\n                } : null,\n                running: mb.ctx?._running,\n                initialized: mb._initialized,\n                owner: mb.properties?.owner,\n                vars: mb.properties?.vars,\n                instance: mb\n            });\n        });\n        return scripts;\n    },\n\n    /**\n     * Get scripts by entity name\n     * @param {string} entityName - Name of entity to search for\n     * @returns {Array} Array of ScriptRunner instances on that entity\n     */\n    getByEntity(entityName) {\n        return this.getAllScripts().filter(s => s.entity?.name === entityName);\n    },\n\n    /**\n     * Get scripts by file name\n     * @param {string} fileName - Script file name to search for\n     * @returns {Array} Array of ScriptRunner instances using that script\n     */\n    getByFile(fileName) {\n        return this.getAllScripts().filter(s => s.scriptFile === fileName);\n    },\n\n    /**\n     * Get running scripts only\n     * @returns {Array} Array of currently running ScriptRunner instances\n     */\n    getRunning() {\n        return this.getAllScripts().filter(s => s.running);\n    },\n\n    /**\n     * Get scripts by owner\n     * @param {string} owner - Owner name to filter by\n     * @returns {Array} Array of ScriptRunner instances owned by that user\n     */\n    getByOwner(owner) {\n        return this.getAllScripts().filter(s => s.owner === owner);\n    },\n\n    /**\n     * Get lifecycle methods available on a script\n     * @param {string} scriptId - ScriptRunner component ID\n     * @returns {Object} Object with lifecycle method availability\n     */\n    getLifecycleMethods(scriptId) {\n        const mb = lifecycle.scriptRunners.get(scriptId);\n        if (!mb?.ctx) return null;\n\n        return {\n            onStart: typeof mb.ctx.onStart === 'function',\n            onUpdate: typeof mb.ctx.onUpdate === 'function',\n            onDestroy: typeof mb.ctx.onDestroy === 'function',\n            onLoaded: typeof mb.ctx.onLoaded === 'function',\n            onVarChange: typeof mb.ctx.onVarChange === 'function',\n            onKeyDown: typeof mb.ctx.onKeyDown === 'function',\n            onKeyUp: typeof mb.ctx.onKeyUp === 'function'\n        };\n    },\n\n    /**\n     * Get custom methods defined on a script (non-lifecycle)\n     * @param {string} scriptId - ScriptRunner component ID\n     * @returns {Array} Array of custom method names\n     */\n    getCustomMethods(scriptId) {\n        const mb = lifecycle.scriptRunners.get(scriptId);\n        if (!mb?.ctx) return [];\n\n        const standardKeys = [\n            'vars', '_running', 'onStart', 'onLoaded', 'onUpdate', 'onDestroy',\n            'onVarChange', 'onKeyDown', 'onKeyUp', 'keyDown', 'keyUp', 'keyPress',\n            'log', '_entity', '_scene', '_BS', '_component', 'default'\n        ];\n\n        return Object.keys(mb.ctx).filter(key =>\n            !standardKeys.includes(key) && typeof mb.ctx[key] === 'function'\n        );\n    },\n\n    /**\n     * Call a custom method on a ScriptRunner\n     * @param {string} scriptId - ScriptRunner component ID\n     * @param {string} methodName - Method name to call\n     * @param {...any} args - Arguments to pass to the method\n     * @returns {any} Return value of the method\n     */\n    callMethod(scriptId, methodName, ...args) {\n        const mb = lifecycle.scriptRunners.get(scriptId);\n        if (!mb?.ctx?.[methodName]) {\n            throw new Error(`Method ${methodName} not found on script ${scriptId}`);\n        }\n\n        if (typeof mb.ctx[methodName] !== 'function') {\n            throw new Error(`${methodName} is not a function`);\n        }\n\n        return mb.ctx[methodName](...args);\n    },\n\n    /**\n     * Get statistics about the lifecycle system\n     * @returns {Object} Statistics object\n     */\n    getStats() {\n        const all = this.getAllScripts();\n        const running = all.filter(s => s.running);\n\n        // Count by file\n        const byFile = {};\n        all.forEach(s => {\n            byFile[s.scriptFile] = (byFile[s.scriptFile] || 0) + 1;\n        });\n\n        // Count by owner\n        const byOwner = {};\n        all.forEach(s => {\n            if (s.owner) {\n                byOwner[s.owner] = (byOwner[s.owner] || 0) + 1;\n            }\n        });\n\n        return {\n            total: all.length,\n            running: running.length,\n            fps: lifecycle.fps,\n            isRunning: lifecycle.isRunning,\n            byFile,\n            byOwner,\n            files: Object.keys(byFile),\n            owners: Object.keys(byOwner)\n        };\n    },\n\n    /**\n     * List all scripts with basic info\n     */\n    list() {\n        const scripts = this.getAllScripts();\n        console.table(scripts.map(s => ({\n            id: s.id,\n            file: s.scriptFile,\n            entity: s.entity?.name,\n            running: s.running,\n            owner: s.owner\n        })));\n        return scripts;\n    },\n\n    /**\n     * Get detailed info about a specific script\n     * @param {string} scriptId - ScriptRunner component ID\n     * @returns {Object} Detailed information object\n     */\n    getInfo(scriptId) {\n        const mb = lifecycle.scriptRunners.get(scriptId);\n        if (!mb) {\n            console.warn(`Script ${scriptId} not found`);\n            return null;\n        }\n\n        const info = {\n            id: scriptId,\n            scriptFile: mb.properties?.file,\n            entity: mb._entity ? {\n                eid: mb._entity.eid,\n                name: mb._entity.name,\n                active: mb._entity.active,\n                layer: mb._entity.layer\n            } : null,\n            running: mb.ctx?._running,\n            initialized: mb._initialized,\n            owner: mb.properties?.owner,\n            vars: mb.properties?.vars,\n            lifecycleMethods: this.getLifecycleMethods(scriptId),\n            customMethods: this.getCustomMethods(scriptId),\n            inventoryItem: mb.inventoryItem ? {\n                name: mb.inventoryItem.name,\n                folder: mb.inventoryItem.folder,\n                author: mb.inventoryItem.author,\n                created: new Date(mb.inventoryItem.created).toLocaleString(),\n                startup: mb.inventoryItem.startup\n            } : null\n        };\n\n        console.log('ScriptRunner Info:', info);\n        return info;\n    },\n\n    /**\n     * Set the FPS for update loops\n     * @param {number} fps - Target FPS (1-120)\n     */\n    setFPS(fps) {\n        lifecycle.setFPS(fps);\n        console.log(`Update FPS set to ${lifecycle.fps}`);\n    },\n\n    /**\n     * Start the lifecycle manager\n     */\n    start() {\n        lifecycle.start();\n    },\n\n    /**\n     * Stop the lifecycle manager\n     */\n    stop() {\n        lifecycle.stop();\n    }\n};\n\nconsole.log('[LifecycleAPI] Exposed globally with monitoring for', lifecycle.scriptRunners.size, 'ScriptRunner scripts');", "// Import required dependencies\nimport { deepClone, parseBest, appendToShell, showNotification } from './utils.js';\nimport { SUPPORTED_COMPONENTS, Entity, TransformComponent, componentBSTypeMap, componentTypeMap, componentTextMap, componentBundleMap, ScriptRunnerComponent } from './entity-components/index.js';\n\n// options: { source: 'ui' | 'history' | 'script' | 'sync' }\n\n\n\nexport class Change {\n    constructor(){\n        this.id = `change_${Math.floor(Math.random() * 1000000)}`;\n        this.timeout = 5000;\n        this.voidChange = false;\n    }\n\n    void(message){\n        this.voidChange = true;\n        if(message){\n            showNotification(message);\n        }\n    }\n\n    async apply(){\n        let cmd_el = document.getElementById(this.id);\n        if(cmd_el){\n            cmd_el.style.textDecoration = \"none\";\n            cmd_el.style.color = \"white\";\n            return;\n        }\n\n        let command = this.cmd();\n        let commandStr = \"\";\n        Object.entries(command).forEach(([key, value])=>{\n            if(typeof value === \"object\"){\n                value = JSON.stringify(value);\n            }\n            if(key === \"options\"){\n                return;\n            }\n            commandStr += value + \" \";\n        })\n        if(this.voidChange){\n            cmd_el.style.textDecoration = \"line-through\";\n            cmd_el.style.color = \"gray\";\n        }\n        appendToShell(\"command\", this.id, commandStr);\n    }\n\n    async undo(){\n        if(this.voidChange){\n            return;\n        }\n        let cmd_el = document.getElementById(this.id);\n        if(cmd_el){\n            cmd_el.style.textDecoration = \"line-through\";\n            cmd_el.style.color = \"gray\";\n        }\n    }\n\n    cmd(){\n        return {\n            action: \"empty_change\"\n        }\n    }\n}\n\n\nexport class EntityPropertyChange extends Change{\n    constructor(entityId, property, newValue, options) {\n        super();\n        this.timeout = 500;\n        this.entityId = entityId;\n        this.property = property;\n        this.newValue = newValue;\n        this.options = options || {};\n        this.oldValue = this.options.oldValue || this.getOldValue();\n    }\n\n    getOldValue() {\n        const entity = SM.getEntityById(this.entityId);\n        return entity[this.property];\n    }\n\n    async apply(){\n        if(this.property === \"name\"){\n            if(this.oldValue.endsWith(\"_js\")){\n                this.void(\"Cannot change the name of scripts\");\n                return;\n            }\n            if((this.oldValue === \"Scene\" || this.newValue === \"Scene\")){\n                this.void(\"Cannot assign/change the name of 'Scene'\");\n                return;\n            }\n            if((this.newValue === \"People\" || this.oldValue === \"People\")){\n                this.void(\"Cannot change the name of 'People'\");\n                return;\n            }\n            let entity = SM.getEntityById(this.entityId);\n            if(!entity){\n                this.void(\"Entity not found\");\n                return;\n            }\n            if(entity.parentId === \"People\"){\n                this.void(\"Cannot change the name of 'People'\");\n                return;\n            }\n            let newId = entity.parentId+\"/\"+this.newValue;\n            let existsAlready = SM.getEntityById(newId, false);\n            if(existsAlready){\n                this.void(\"Entity with that name already exists\");\n                return;\n            }\n        }\n        \n        super.apply();\n        await this.change(this.newValue)\n    }\n\n    async undo(){\n        await this.change(this.oldValue)\n    }\n\n    async change(value){\n        const entity = SM?.getEntityById(this.entityId);\n        entity.Set(this.property, value);\n    }\n\n    getDescription() {\n        return `Changed entity ${this.entityId} ${this.property} to ${this.newValue}`;\n    }\n\n    getUndoDescription() {\n        return `Changed entity ${this.entityId} ${this.property} to ${this.oldValue}`;\n    }\n\n    cmd(){\n        return {\n            action: \"set_entity_property\",\n            entityId: this.entityId,\n            property: this.property,\n            newValue: this.newValue,\n            options: this.options\n        }\n    }\n}\n\nexport class ComponentPropertyChange extends Change{\n    constructor(componentId, property, newValue, options) {\n        super();\n        this.timeout = 500;\n        this.componentId = componentId;\n        this.property = property;\n        this.newValue = deepClone(newValue);\n        this.options = options || {};\n        this.component = SM.getEntityComponentById(componentId);\n        if(!this.component){\n            this.void(`Component ${componentId} not found`);\n            return;\n        }\n        this.oldValue = deepClone(this.options.oldValue || this.getOldValue());\n    }\n\n    getOldValue() {        \n        return deepClone(this.component.properties?.[this.property]);\n    }\n\n    async apply() {\n        super.apply();\n        await this.change(this.newValue);\n    }\n\n    async undo() {\n        super.undo();\n        await this.change(this.oldValue);\n    }\n\n    async change(value) {\n        if(!this.component) return;\n\n        await this.component.Set(this.property, value);\n\n        // Refresh UI if needed\n        // if (inspector?.spacePropsPanel) {\n        //     inspector.spacePropsPanel.render();\n        // }\n    }\n\n    getDescription() {\n        return `Changed ${this.component.type} ${this.property} to ${JSON.stringify(this.newValue)}`;\n    }\n\n    getUndoDescription() {\n        return `Changed ${this.component.type} ${this.property} to ${JSON.stringify(this.oldValue)}`;\n    }\n\n    cmd(){\n        return {\n            action: \"set_component_property\",\n            componentId: this.componentId,\n            property: this.property,\n            newValue: this.newValue,\n            options: this.options\n        }\n    }\n}\n\nexport class SpacePropertyChange extends Change{\n    constructor(property, newValue, protect, options) {\n        super();\n        this.timeout = 500;\n        this.property = property;\n        this.newValue = newValue;\n        this.protected = protect;\n        this.options = options || {};\n        this.oldValue = options.oldValue || this.getOldValue();\n    }\n\n    getOldValue() {\n        return net.state.vars?.[this.property] || net.state[this.property];\n    }\n\n    async apply() {\n        super.apply();\n        await this.change(this.newValue);\n    }\n\n    async undo() {\n        super.undo();\n        await this.change(this.oldValue);\n    }\n\n    async change(value) {\n        if (value === undefined) {\n            // Delete the property\n            await net.DelVar(this.property, this.protected);\n        } else {\n            // Set or update the property\n            await net.SetVar(this.property, value, this.protected);\n        }\n    }\n\n    getDescription() {\n        const propType = this.protected ? 'protected' : 'public';\n        return `Change ${propType} property ${this.property} to ${this.newValue}`;\n    }\n\n    getUndoDescription(){\n        const propType = this.protected ? 'protected' : 'public';\n        return `Change ${propType} property ${this.property} to ${this.oldValue}`;\n    }\n\n    cmd(){\n        return {\n            action: \"set_space_property\",\n            property: this.property,\n            newValue: this.newValue,\n            protected: this.protected,\n            options: this.options\n        }\n    }\n}\n\nexport class AddComponentChange extends Change{\n    constructor(entityId, componentType, options) {\n        super();\n        this.timeout = 3000;\n        this.entityId = entityId;\n        this.componentType = componentType;\n        this.options = options || {};\n        this.componentProperties = this.options.componentProperties || {};\n        this.componentId = this.componentProperties.id || `${this.componentType}_${Math.floor(Math.random() * 10000)}`;\n\n        // Validate component type exists\n        const validation = window.ChangeTypes?.validateComponent(componentType);\n        if (validation && !validation.valid) {\n            this.void(`Invalid component type: ${componentType}`);\n\n            // Build error message with suggestions\n            let errorMsg = validation.message;\n            if (validation.suggestions && validation.suggestions.length > 0) {\n                errorMsg += '\\n\\nDid you mean one of these?\\n' +\n                    validation.suggestions.slice(0, 5).map(s => `  - ${s}`).join('\\n');\n            }\n\n            // Also add helpful tips about component naming\n            errorMsg += '\\n\\nNote: Component names like Box, Sphere, Material, etc.';\n            errorMsg += '\\nExcept colliders which don\\'t (e.g., BoxCollider, SphereCollider)';\n            errorMsg += '\\n\\nUse ComponentRegistry.list() to see all available components.';\n\n            throw new Error(errorMsg);\n        }\n    }\n\n    async apply() {\n        super.apply();   \n        let entity = SM.getEntityById(this.entityId);\n        if(!entity){\n            this.void(`Entity not found => ${this.entityId}`);\n            return;\n        }\n\n        this.componentProperties.id = this.componentId; //needs at least 1 prop to register with firebase\n        log(\"AddComponentChange\", \"adding component =>\", this.componentId, this.componentProperties);\n        await net.db.ref(`space/${net.spaceId}/components/${this.componentId}`).set(this.componentProperties);\n        await net.db.ref(`space/${net.spaceId}/${entity.id}/__meta/components/${this.componentId}`).set(true);\n\n        inspector.propertiesPanel.render();\n\n\n        let checks = 0;\n        const returnWhenComponentLoaded = () => {\n            return new Promise(resolve => {\n              const check = () => {\n                const component = SM.getEntityComponentById(this.componentId, false);\n                if (component !== undefined && component._initialized) {\n                  resolve(component);\n                } else {\n                  checks++;\n                  if(checks > 100){\n                    resolve(null);\n                  }else{\n                    setTimeout(check, 50);\n                  }\n                }\n              };\n              check();\n            });\n          };\n        return await returnWhenComponentLoaded();\n    }\n\n    async undo() {\n        super.undo();\n        if (!this.componentId) return;\n        log(\"TODO\", \"implement undo for AddComponentChange\");\n    }\n\n\n    getDescription() {\n        return `Add ${this.componentType} component`;\n    }\n\n    getUndoDescription(){\n        return `Remove ${this.componentType} component`;\n    }\n\n    cmd(){\n        return {\n            action: \"add_component\",\n            entityId: this.entityId,\n            componentType: this.componentType,\n            componentProperties: this.componentProperties,\n            options: this.options\n        }\n    }\n}\n\nexport class ReorderComponentChange extends Change{\n    constructor(entityId, fromIndex, toIndex, options) {\n        super();\n        this.timeout = 1000;\n        this.entityId = entityId;\n        this.fromIndex = fromIndex;\n        this.toIndex = toIndex;\n        this.options = options || {};\n    }\n\n    async apply() {\n        super.apply();\n        const entity = SM.getEntityById(this.entityId);\n        if (!entity || !entity.components) return;\n        \n        // // Don't allow moving Transform component (index 0)\n        // if (this.fromIndex === 0 || this.toIndex === 0) {\n        //     console.warn('Cannot reorder Transform component');\n        //     return;\n        // }\n        \n        const components = entity.components;\n        if (this.fromIndex < 0 || this.fromIndex >= components.length ||\n            this.toIndex < 0 || this.toIndex >= components.length) {\n            console.error('Invalid component indices for reorder');\n            return;\n        }\n        \n        // Send the reorder command\n        let event = {\n            entityId: this.entityId,\n            fromIndex: this.fromIndex,\n            toIndex: this.toIndex\n        };\n        let event_str = JSON.stringify(event);\n        let data = `component_reordered\u00B6${event_str}`;\n        net.sendOneShot(data);\n    }\n\n    async undo() {\n        super.undo();\n        // Reverse the reorder\n        let event = {\n            entityId: this.entityId,\n            fromIndex: this.toIndex,\n            toIndex: this.fromIndex\n        };\n        let event_str = JSON.stringify(event);\n        let data = `component_reordered\u00B6${event_str}`;\n        net.sendOneShot(data);\n    }\n\n    getDescription() {\n        return `Reorder component from position ${this.fromIndex} to ${this.toIndex}`;\n    }\n\n    getUndoDescription() {\n        return `Reorder component from position ${this.toIndex} to ${this.fromIndex}`;\n    }\n\n    cmd() {\n        return {\n            action: \"reorder_component\",\n            entityId: this.entityId,\n            fromIndex: this.fromIndex,\n            toIndex: this.toIndex,\n            options: this.options\n        };\n    }\n}\n\nexport class RemoveComponentChange extends Change{\n    constructor(entityId, componentId, options) {\n        super();\n        this.timeout = 3000;\n        this.componentId = componentId;\n        this.entityId = entityId;\n        this.options = options || {};\n    }\n\n    async apply() {\n        super.apply();\n        let entity = SM.getEntityById(this.entityId);\n        let component = SM.getEntityComponentById(this.componentId);\n        if(!entity || !component){\n            this.void(`Entity or component not found => ${this.entityId} or ${this.componentId}`);\n            return;\n        }\n        await entity.RemoveComponent(component);\n    }\n\n    async undo() {\n        super.undo();\n        log(\"TODO\", \"implement undo for RemoveComponentChange\");\n    }\n\n    getDescription() {\n        return `Remove ${this.componentId || 'unknown'} from ${this.entityId}`;\n    }\n\n    getUndoDescription(){\n        return `Add ${this.componentId || 'unknown'} to ${this.entityId}`;\n    }\n\n    cmd(){\n        return {\n            action: \"remove_component\",\n            componentId: this.componentId,\n            options: this.options\n        }\n    }\n}\n\nexport class AddEntityChange extends Change{\n    constructor(parentId, entityName, options) {\n        super();\n        this.timeout = 1000;\n        this.parentId = parentId;\n        this.entityName = entityName || `NewEntity_${Math.floor(Math.random() * 100000)}`;\n        this.newEntityId = null; // Will be set after creation\n        this.options = options || {};\n    }\n\n    async apply() {\n        super.apply();\n        this.newEntityId = `${this.parentId}/${this.entityName}`\n        let exists = SM.getEntityById(this.newEntityId, false);\n        if(exists){\n            showNotification(\"Entity with that name already exists\");\n            return exists;\n        }\n\n        let parentRef = net.db.ref(`space/${net.spaceId}/${this.parentId}`);\n        let newEntityRef = parentRef.child(this.entityName);\n        await newEntityRef.set({\n            __meta: {\n                active: true,\n                layer: 0,\n                localPosition: {x: 0, y: 0, z: 0},\n                localRotation: {x: 0, y: 0, z: 0, w: 1},\n                localScale: {x: 1, y: 1, z: 1},\n                position: {x: 0, y: 0, z: 0},\n                rotation: {x: 0, y: 0, z: 0, w: 1},\n                components: {},\n                uuid: Math.floor(Math.random() * 10000000000000)\n            }\n        });\n\n        const returnWhenEntityLoaded = () => {\n            return new Promise(resolve => {\n              const check = () => {\n                console.log(\"checking for: \", this.newEntityId)\n                const entity = SM.getEntityById(this.newEntityId, false);\n                if (entity !== undefined && entity.initialized) {\n                    console.log(\"entity found: \", entity)\n                  resolve(entity);\n                } else {\n                    console.log(\"entity not found: \", this.newEntityId)\n                  setTimeout(check, 50);\n                }\n              };\n              check();\n            });\n          };\n        return await returnWhenEntityLoaded();\n    }\n\n    async undo() {\n        super.undo();\n        if (!this.newEntityId) return;\n        let entity_id = this.newEntityId\n        let data = `entity_removed\u00B6${entity_id}`\n        net.sendOneShot(data);\n    }\n\n    getDescription() {\n        return `New Entity: ${this.entityName} @ ${this.parentId}`;\n    }\n\n    getUndoDescription(){\n        return `Remove Entity: ${this.entityName} @ ${this.parentId}`;\n    }\n\n    cmd(){\n        return {\n            action: \"add_entity\",\n            parentId: this.parentId,\n            entityName: this.entityName,\n            options: this.options\n        }\n    }\n}\n\nexport class RemoveEntityChange extends Change{\n    constructor(entityId, options) {\n        super();\n        this.timeout = 5000;\n        this.entityId = entityId;\n        this.siblingIndex = null;\n        this.options = options || {};\n    }\n\n    async apply() {\n        super.apply();\n        let entity = SM.getEntityById(this.entityId);\n        if(!entity){\n            this.void(`Entity not found => ${this.entityId}`);\n            return;\n        }\n        await entity.Destroy();\n    }\n\n    async undo() {\n        super.undo();\n        if (!this.entityExport) return;\n\n        // Recreate the entity hierarchy\n        // let data = `load_entity\u00B6${this.entity.parentId}\u00B6${JSON.stringify(this.entityExport)}`\n        // net.sendOneShot(data);\n        \n    }\n\n    getDescription() {\n        return `Remove Entity: ${this.entityId}`;\n    }\n\n    getUndoDescription(){\n        return `Restore Entity: ${this.entityId}`;\n    }\n\n    cmd(){\n        return {\n            action: \"remove_entity\",\n            entityId: this.entityId,\n            options: this.options\n        }\n    }\n}\n\nexport class EntityMoveChange extends Change{\n    constructor(entityId, newParentId, options) {\n        super();\n        this.timeout = 500;\n        this.entityId = entityId;\n        this.newParentId = newParentId;\n        this.options = options || {};\n    }\n\n\n    async apply() {\n        log(\"move entity change\", \"apply\", this.entityId, this.newParentId)\n        super.apply();\n        if(this.oldParentId === this.newParentId) return;\n        if(this.oldParentId === \"People\" || this.newParentId === \"People\" || this.entityId === \"People\"){\n            showNotification(\"People entities cannot be moved\");\n            return;\n        }\n        const entity = SM.getEntityById(this.entityId);\n        const parent = SM.getEntityById(this.newParentId);\n        if (!entity || !parent) return;\n        await entity.SetParent(this.newParentId);\n    }\n\n    async undo() {\n        super.undo();\n        const entity = SM.getEntityById(this.entityId);\n        if (!entity) return;\n        await entity.SetParent(this.oldParentId);\n    }\n\n    getDescription() {\n        return `Move entity`;\n    }\n\n    getUndoDescription(){\n        return `Move entity`;\n    }\n\n    cmd(){\n        return {\n            action: \"move_entity\",\n            entityId: this.entityId,\n            newParentId: this.newParentId,\n            keepPosition: this.keepPosition,\n            options: this.options\n        }\n    }\n}\n\nexport class ScriptRunnerVarChange extends Change{\n    constructor(componentId, varName, newValue, options) {\n        super();\n        this.timeout = 500;\n        this.componentId = componentId;\n        this.varName = varName;\n        this.newValue = deepClone(newValue);\n        this.options = options || {};\n        this.scriptrunner = SM.getEntityComponentById(componentId);\n        this.oldValue = deepClone(options.oldValue || this.getOldValue());\n    }\n\n    getOldValue() {\n        if (!this.scriptrunner || !this.scriptrunner.ctx?.vars) return undefined;\n        return deepClone(this.scriptrunner.ctx.vars[this.varName]);\n    }\n\n    async apply() {\n        super.apply();\n        await this.change(this.newValue);\n    }\n\n    async undo() {\n        super.undo();\n        await this.change(this.oldValue);\n    }\n\n    async change(value) {\n        log(\"scriptrunner\", \"changing var =>\", this.scriptrunner, this.varName, value)\n        if (!this.scriptrunner) return;\n\n        // Update the properties.vars for persistence\n        if (!this.scriptrunner.ctx.vars) {\n            return;\n        }\n\n        await this.scriptrunner.SetVar(this.varName, value.value);\n\n        // Refresh UI if needed\n        if (inspector?.propertiesPanel) {\n            inspector.propertiesPanel.render(SM.selectedEntity);\n        }\n    }\n\n    getDescription() {\n        return `Changed ScriptRunner var ${this.varName} to ${JSON.stringify(this.newValue)}`;\n    }\n\n    getUndoDescription() {\n        return `Changed ScriptRunner var ${this.varName} to ${JSON.stringify(this.oldValue)}`;\n    }\n\n    cmd(){\n        return {\n            action: \"set_script_runner_var\",\n            componentId: this.componentId,\n            varName: this.varName,\n            newValue: this.newValue,\n            options: this.options\n        }\n    }\n}\n\n\nexport class LoadItemChange extends Change{\n    constructor(itemName, parentId, itemData, options) {\n        super();\n        this.timeout = 10000000;\n        this.itemName = itemName;\n        this.parentId = parentId || 'Scene';\n        this.options = options || {};\n        this.entityId = null;\n        this.itemData = itemData;\n    }\n\n    async apply() {\n        super.apply();\n        let newEntName = \"NewEntity_\"+Math.floor(Math.random()*99999);\n        if(!this.itemData){\n            const item = inventory.items[this.itemName];\n            if(!item){\n                err(\"inventory\", \"No item found =>\", this.itemName)\n                return null;\n            }\n            if(item.itemType !== \"entity\"){\n                err(\"inventory\", \"Item is not a entity =>\", this.itemName)\n                return null;\n            }\n    \n           \n            if(!item.data.Entity){\n                err(\"inventory\", \"No entity data found =>\", this.itemName)\n                return null;\n            }\n\n            let itemData = JSON.parse(JSON.stringify(item.data));\n            //Lets change Ids of items\n            let entName = Object.keys(itemData.Entity)[0];\n            newEntName = (this.options.name) ? this.options.name : `${this.itemName}_${Math.floor(Math.random()*99999)}`;\n            let entData = itemData.Entity[entName];\n            \n            delete itemData.Entity[entName];\n\n            let compDict = {}\n            let changeChildrenIds = (entity)=>{\n                entity.__meta.uuid = Math.floor(Math.random() * 10000000000000);\n                if(entity.__meta.components){\n                    let entComps = {}\n                    Object.keys(entity.__meta.components).forEach(compId=>{\n                        let newID = `${compId.split(\"_\")[0]}_${Math.floor(Math.random()*99999)}`\n                        compDict[newID] = itemData.Components[compId];\n                        entComps[newID] = true;\n                    })\n                    entity.__meta.components = entComps;\n                }\n                \n                Object.keys(entity).forEach(childName=>{\n                    if(childName === \"__meta\"){\n                        return;\n                    }\n                    let child = entity[childName];\n                    changeChildrenIds(child);\n                })\n            }\n            changeChildrenIds(entData);\n\n            itemData.Entity[newEntName] = entData;\n            itemData.Components = compDict;\n    \n            log(\"inventory\", \"[ITEM DATA] =>\", itemData)\n\n            if(item.data.Components){\n                await net.db.ref(`space/${net.spaceId}/components`).update(itemData.Components);\n            }\n\n            await net.db.ref(`space/${net.spaceId}/${this.parentId}`).update(itemData.Entity);\n            \n            this.itemData = itemData;    \n        }\n        log(\"loadItem\", \"loading entity =>\", this.itemData)\n        this.entityId = `${this.parentId}/${newEntName}`\n        \n        // let data = `load_entity\u00B6${this.parentId}\u00B6${JSON.stringify(this.itemData)}`\n        // net.sendOneShot(data);\n        \n        let everythingLoaded = ()=>{\n            let entity = SM.getEntityById(this.entityId, false)\n            if(!entity){\n                log(\"loadItem\", \"entity not found =>\", this.entityId)\n                return false;\n            }\n\n            let componentsLoaded = true;\n            Object.keys(this.itemData.Components).forEach(compId=>{\n                let component = SM.getEntityComponentById(compId, false);\n                if(!component){\n                    log(\"loadItem\", \"component not found =>\", compId)\n                    componentsLoaded = false;\n                }else{\n                    if(!component._entity.components.includes(component)){\n                        log(\"loadItem\", `${component.id} not a component of ${entity.id} yet`)\n                        componentsLoaded = false;\n                    }\n                }\n            })\n            return componentsLoaded;\n        }\n\n        let checks = 0;\n        const returnWhenEntityLoaded = () => {\n            return new Promise(resolve => {\n              const check = () => {\n                let isLoaded = everythingLoaded();\n                checks++;\n                log(\"loadItem\", \"checking for entity =>\", this.entityId, isLoaded)\n\n                if(checks > 250){\n                    err(\"loadItem\", \"Entity could not be loaded/found =>\", this.entityId)\n                    resolve(null);\n                    return;\n                }\n\n                if (isLoaded) {\n                    resolve(SM.getEntityById(this.entityId));\n                } else {\n                    setTimeout(check, 50);\n                }\n              };\n              check();\n            });\n          };\n        return await returnWhenEntityLoaded();\n    }\n\n    async undo() {\n        super.undo();\n        if(!this.entityId) return;\n        let data = `entity_removed\u00B6${this.entityId}`\n        net.sendOneShot(data);\n    }\n\n    getDescription() {\n        return `Load item ${this.itemName} to ${this.parentId}`;\n    }\n\n    getUndoDescription() {\n        return `Remove item ${this.itemName} from ${this.parentId}`;\n    }\n\n    cmd(){\n        return {\n            action: \"load_item\",\n            itemName: this.itemName,\n            parentId: this.parentId,\n            itemData: this.itemData,\n            options: this.options\n        }\n    }\n}\n\n\nexport class LoadScriptChange extends Change{\n    constructor(scriptName, options) {\n        super();\n        this.timeout = 10000000;\n        this.scriptName = scriptName;\n        this.options = options || {};\n        this.itemData = null;\n        this.entityId = null;\n    }\n\n    async apply() {\n        super.apply();\n        let sanatizedScriptName = this.scriptName.replaceAll(\".\",\"_\");\n        let checkExistingInScene = SM.getEntityByName(sanatizedScriptName);\n        if(checkExistingInScene){\n            err(\"loadScript\", \"Script already exists in scene =>\", checkExistingInScene.id)\n            this.void(\"Script already exists in scene => \"+checkExistingInScene.id);\n            return checkExistingInScene;\n        }\n\n        let componentId = \"ScriptAsset_\"+Math.floor(Math.random()*99999);\n        \n        this.itemData = {\n            \"Entity\": {\n                [sanatizedScriptName]: {\n                    \"__meta\": {\n                        \"active\": true,\n                        \"components\": {\n                            [componentId]: true\n                        },\n                        \"layer\": 0,\n                        \"localPosition\": {\n                            \"x\": 0,\n                            \"y\": 0,\n                            \"z\": 0\n                        },\n                        \"localRotation\": {\n                            \"w\": 1,\n                            \"x\": 0,\n                            \"y\": 0,\n                            \"z\": 0\n                        },\n                        \"localScale\": {\n                            \"x\": 1,\n                            \"y\": 1,\n                            \"z\": 1\n                        },\n                        \"position\": {\n                            \"x\": 0,\n                            \"y\": 0,\n                            \"z\": 0\n                        },\n                        \"rotation\": {\n                            \"w\": 1,\n                            \"x\": 0,\n                            \"y\": 0,\n                            \"z\": 0\n                        },\n                        \"uuid\": Math.floor(Math.random() * 10000000000000)\n                    }\n                }\n            },\n            \"Components\": {\n                [componentId]: {\n                    \"name\": this.scriptName,\n                    \"author\": inventory.items[this.scriptName]?.author || \"Unknown\",\n                    \"data\": inventory.items[this.scriptName].data,\n                    \"vars\": inventory.items[this.scriptName].vars || {}\n                }\n            }\n        }\n        await net.db.ref(`space/${net.spaceId}/components`).update(this.itemData.Components);\n        await net.db.ref(`space/${net.spaceId}/Scene`).update(this.itemData.Entity);\n        this.entityId = `Scene/${sanatizedScriptName}`\n        \n        \n        let everythingLoaded = ()=>{\n            let entity = SM.getEntityById(this.entityId, false)\n            if(!entity){\n                log(\"loadItem\", \"entity not found =>\", this.entityId)\n                return false;\n            }\n\n            let componentsLoaded = true;\n            Object.keys(this.itemData.Components).forEach(compId=>{\n                let component = SM.getEntityComponentById(compId, false);\n                if(!component){\n                    log(\"loadItem\", \"component not found =>\", compId)\n                    componentsLoaded = false;\n                }else{\n                    if(!component._entity.components.includes(component)){\n                        log(\"loadItem\", `${component.id} not a component of ${entity.id} yet`)\n                        componentsLoaded = false;\n                    }\n                }\n            })\n            return componentsLoaded;\n        }\n\n        let checks = 0;\n        const returnWhenEntityLoaded = () => {\n            return new Promise(resolve => {\n              const check = () => {\n                let isLoaded = everythingLoaded();\n                checks++;\n                log(\"loadItem\", \"checking for entity =>\", this.entityId, isLoaded)\n\n                if(checks > 250){\n                    err(\"loadItem\", \"Entity could not be loaded/found =>\", this.entityId)\n                    resolve(null);\n                    return;\n                }\n\n                if (isLoaded) {\n                    resolve(SM.getEntityById(this.entityId));\n                } else {\n                    setTimeout(check, 50);\n                }\n              };\n              check();\n            });\n          };\n        return await returnWhenEntityLoaded();\n    }\n\n    async undo() {\n        super.undo();\n        log(\"todo\", \"undo load script\");\n    }\n\n    getDescription() {\n        return `Load script ${this.scriptName}`;\n    }\n\n    getUndoDescription() {\n        return `Remove script ${this.scriptName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"load_script\",\n            scriptName: this.scriptName,\n            options: this.options\n        }\n    }\n}\n\n\nexport class CloneEntityChange extends Change{\n    constructor(entityId, options) {\n        super();\n        this.timeout = 10000;\n        this.sourceEntity = SM.getEntityById(entityId);\n        if(!this.sourceEntity){\n            console.error(`Source entity ${entityId} not found`);\n            return;\n        }\n        this.sourceEntityId = entityId;\n        this.cloneName = `${this.sourceEntity.name}_${Math.floor(Math.random() * 100000)}`;\n        this.clonedEntityId = `${this.sourceEntity.parentId}/${this.cloneName}`;\n        this.options = options || {};\n    }\n\n\n\n    async apply() {\n        super.apply();\n\n        if (!this.sourceEntity) {\n            this.void(`Source entity not found`);\n            return null;\n        }\n\n        // Export the source entity data\n        let exportData = await this.sourceEntity.export();\n        if (!exportData || !exportData.Entity) {\n            this.void(`Failed to export source entity`);\n            return null;\n        }\n\n        // Get the original entity name and data\n        let originalName = Object.keys(exportData.Entity)[0];\n        let entityData = exportData.Entity[originalName];\n\n        // Create new component ID mapping\n        let compDict = {};\n        const changeChildrenIds = (entity) => {\n            // Generate new UUID for this entity\n            entity.__meta.uuid = Math.floor(Math.random() * 10000000000000);\n\n            // Remap component IDs\n            if (entity.__meta.components) {\n                let entComps = {};\n                Object.keys(entity.__meta.components).forEach(compId => {\n                    let newID = `${compId.split(\"_\")[0]}_${Math.floor(Math.random() * 99999)}`;\n                    compDict[newID] = exportData.Components[compId];\n                    entComps[newID] = true;\n                });\n                entity.__meta.components = entComps;\n            }\n\n            // Process all children recursively\n            Object.keys(entity).forEach(childName => {\n                if (childName === \"__meta\") {\n                    return;\n                }\n                let child = entity[childName];\n                if (child && typeof child === 'object' && child.__meta) {\n                    changeChildrenIds(child);\n                }\n            });\n        };\n        changeChildrenIds(entityData);\n\n        // Build the final item data with new name\n        let itemData = {\n            Entity: { [this.cloneName]: entityData },\n            Components: compDict\n        };\n\n        this.itemData = itemData;\n\n        log(\"CloneEntityChange\", \"cloning entity =>\", this.sourceEntityId, \"to\", this.clonedEntityId);\n\n        // Write components to Firebase\n        if (Object.keys(itemData.Components).length > 0) {\n            await net.db.ref(`space/${net.spaceId}/components`).update(itemData.Components);\n        }\n\n        // Write entity to Firebase under the parent\n        await net.db.ref(`space/${net.spaceId}/${this.sourceEntity.parentId}`).update(itemData.Entity);\n\n        // Wait for the cloned entity to fully load\n        let checks = 0;\n        const everythingLoaded = () => {\n            let entity = SM.getEntityById(this.clonedEntityId, false);\n            if (!entity) {\n                return false;\n            }\n\n            let componentsLoaded = true;\n            Object.keys(this.itemData.Components).forEach(compId => {\n                let component = SM.getEntityComponentById(compId, false);\n                if (!component) {\n                    componentsLoaded = false;\n                } else {\n                    if (!component._entity.components.includes(component)) {\n                        componentsLoaded = false;\n                    }\n                }\n            });\n            return componentsLoaded && entity._finished_loading;\n        };\n\n        const returnWhenEntityLoaded = () => {\n            return new Promise(resolve => {\n                const check = () => {\n                    let isLoaded = everythingLoaded();\n                    checks++;\n\n                    if (checks > 200) {\n                        err(\"CloneEntityChange\", \"Entity could not be loaded/found =>\", this.clonedEntityId);\n                        resolve(null);\n                        return;\n                    }\n\n                    if (isLoaded) {\n                        resolve(SM.getEntityById(this.clonedEntityId));\n                    } else {\n                        setTimeout(check, 50);\n                    }\n                };\n                check();\n            });\n        };\n        return await returnWhenEntityLoaded();\n    }\n\n    async undo() {\n        super.undo();\n        if(!this.clonedEntityId) return;\n        let data = `entity_removed\u00B6${this.clonedEntityId}`\n        net.sendOneShot(data);\n    }\n\n    getDescription() {\n        return `Clone entity ${this.sourceEntity.name}`;\n    }\n\n    getUndoDescription() {\n        return `Remove cloned entity`;\n    }\n\n    cmd(){\n        return {\n            action: \"clone_entity\",\n            entityId: this.sourceEntityId,\n            options: this.options\n        }\n    }\n}\n\nexport class SaveEntityItemChange extends Change{\n    constructor(entityId, itemName, folder, options){\n        super();\n        this.timeout = 10000;\n        this.entityId = entityId;\n        if(this.entityId.length === 0){\n            showNotification('No entity selected');\n            return;\n        }\n        this.entity = SM.getEntityById(entityId);\n        this.itemName = itemName || this.entity.name;\n        this.folder = folder || inventory.currentFolder;\n        this.options = options || {};\n        this.itemName = this.itemName.trim();\n    }\n\n\n    async finalizeAddItem(){\n        let data = await this.entity.export();\n        const now = Date.now();\n        const inventoryItem = {\n            author: SM.scene?.localUser?.name || 'Unknown',\n            name: this.itemName,\n            created: now,\n            last_used: now,\n            itemType: \"entity\",\n            icon:\"\uD83D\uDCE6\",\n            description: '',  // Initialize with empty description\n            data: data,\n            folder: this.folder\n        };\n        const storageKey = `inventory_${this.itemName}`;\n        localStorage.setItem(storageKey, JSON.stringify(inventoryItem));\n        log(\"inventory\", \"saved item =>\", inventoryItem)\n        // Sync to Firebase if in remote location\n        await inventory.firebase.syncToFirebase(inventoryItem);\n        let folderName = this.folder? this.folder : \"/\";\n        showNotification(`Item \"${this.itemName}\" saved to ${folderName}`);\n        inventory.reload();\n    }\n    \n    \n\n    async apply(){\n        if(this.entityId.length === 0){return;}\n\n        super.apply();\n        const existingKeys = Object.keys(inventory.items);\n        if (!this.itemName || this.itemName.trim() === ''){\n            showNotification('Item not added - no name provided.');\n            return;\n        }\n        if(this.options.source === 'ui'){\n            if (existingKeys.includes(this.itemName)) {\n                inventory.ui.showWarningConfirm(\n                    \"Overwrite Existing Item\",\n                    `WARNING: An item named \"${this.itemName}\" already exists.<br><br>` +\n                    `<strong style=\"color: #ff6b6b;\">Clicking \"Confirm\" will DELETE the existing saved entity \"${this.itemName}\" and replace it with the new one.</strong><br><br>` +\n                    `This action cannot be undone. Are you sure you want to overwrite it?`,\n                    async () => {\n                        // User confirmed overwrite - delete existing and save new\n                        const deleteChange = new DeleteItemChange(this.itemName, {source: 'ui'});\n                        await deleteChange.apply();\n                        showNotification(`Overwriting existing item \"${this.itemName}\"`);\n                        let change = new SaveEntityItemChange(this.entityId, this.itemName, this.folder, this.options);\n                        change.apply();\n                        return;\n                    },\n                    ()=>{\n                        showNotification(`canceled save\"`);\n                    }\n                );\n            }else{\n                this.finalizeAddItem().then(() => {});\n            }\n            return true;\n        }\n        await this.finalizeAddItem();\n        return true;\n    }\n\n    async undo(){\n        super.undo();\n        showNotification('[ NO UNDO FOR SAVE ITEM ]');\n    }\n\n    getDescription(){\n        return `Save item ${this.itemName} to ${this.folder}`;\n    }\n\n    getUndoDescription(){\n        return `Remove item ${this.itemName} from ${this.folder}`;\n    }\n\n    cmd(){\n        return {\n            action: \"save_item\",\n            entityId: this.entityId,\n            itemName: this.itemName,\n            folder: this.folder,\n            options: this.options\n        }\n    }\n}\n\nexport class RenameItemChange extends Change{\n    //TODO: Implement this\n    constructor(itemName, newName, options){\n        super();\n        this.timeout = 1000;\n        this.itemName = itemName;\n        this.newName = newName;\n        this.options = options || {};\n    }\n\n    async finalizeRename(){\n\n        let item = inventory.items[this.itemName];\n        if(!item) return false;\n\n        if (item.itemType === 'script' && !this.newName.endsWith('.js')) {\n            this.newName = this.newName + '.js';\n        }\n\n        //DELETE OLD ITEM\n        const oldKey = `inventory_${this.itemName}`;\n        localStorage.removeItem(oldKey);\n        delete inventory.items[this.itemName];\n        let folder = item.folder;\n        if(folder && folder.remote){\n            let sAuth = inventory.firebase.sanitizeFirebasePath(SM.scene?.localUser?.name || 'default');\n            let sFolder = inventory.firebase.sanitizeFirebasePath(folder);\n            let sItem = inventory.firebase.sanitizeFirebasePath(this.itemName);\n            let firebasePath = `inventory/${sAuth}/${sFolder}/${sItem}`;\n            await net.deleteData(firebasePath);\n        }\n        \n        //ADD ITEM\n        item.name = this.newName;\n        item.last_used = Date.now();\n        item.folder = inventory.currentFolder;\n        \n        const newKey = `inventory_${this.newName}`;\n        localStorage.setItem(newKey, JSON.stringify(item));\n        inventory.items[this.newName] = item;\n        \n        // Sync to Firebase if in remote location\n        await inventory.firebase.syncToFirebase(item);\n        showNotification(`Item \"${this.itemName}\" renamed to \"${this.newName}\"`);\n        inventory.reload();\n        inventory.selectItem(this.newName);\n\n\n\n        // If this is a script, update any open script editor tabs\n        if (item.itemType === 'script' && window.inspector && window.inspector.scriptEditors) {\n            // Find and update the script editor with the old name\n            for (const [key, editor] of window.inspector.scriptEditors) {\n                if (editor.currentScript.name === this.itemName) {\n                    // Update the script editor's internal reference\n                    editor.currentScript.name = this.newName;\n                    editor.currentScript.data = item.data;\n                    \n                    // Update the navigation tab text\n                    if (editor.navElement) {\n                        // Store the old close button handler before updating innerHTML\n                        const oldCloseBtn = editor.navElement.querySelector('.close-tab-btn');\n                        \n                        editor.navElement.innerHTML = `\n                            <span class=\"nav-icon\">\uD83D\uDCDC</span>\n                            ${this.newName}\n                            <span class=\"close-tab-btn\" data-close-script=\"${editor.pageId}\">\u00D7</span>\n                        `;\n                        \n                        // Re-attach close button handler\n                        const newCloseBtn = editor.navElement.querySelector('.close-tab-btn');\n                        if (newCloseBtn && editor.closeBtnHandler) {\n                            newCloseBtn.addEventListener('mousedown', editor.closeBtnHandler);\n                        }\n                    }\n                    \n                    // Update the editor page title\n                    const editorTitle = document.querySelector(`#${editor.pageId}-page .editor-title h2`);\n                    if (editorTitle) {\n                        editorTitle.textContent = `Editing: ${this.newName}`;\n                    }\n                    \n                    // Update the scriptEditors map key\n                    window.inspector.scriptEditors.delete(key);\n                    window.inspector.scriptEditors.set(this.newName, editor);\n                    \n                    // Update localStorage for opened editors\n                    localStorage.setItem(`openedEditors`, Array.from(window.inspector.scriptEditors.keys()).join(\",\"));\n                    \n                    break;\n                }\n            }\n        }\n        return true;\n    }\n\n    async apply(){\n        super.apply();\n        if(this.newName === this.itemName) return true;\n        if(inventory.items[this.newName]) return false;\n        if(this.options.source === 'ui'){\n            inventory.ui.showWarningConfirm(\n                \"Renaming is Dangerous\",\n                `WARNING: Renaming an item can break existing references in scripts or other entities that depend on this name.<br><br>` +\n                `This action cannot be undone. Are you sure you want to continue?`,\n                async () => {\n                    const existingKeys = Object.keys(inventory.items);\n                    if(existingKeys.includes(this.newName)){\n                        inventory.ui.showWarningConfirm(\n                            \"Overwrite Existing Item\",\n                            `WARNING: An item named \"${this.newName}\" already exists.<br><br>` +\n                            `<strong style=\"color: #ff6b6b;\">Clicking \"Confirm\" will DELETE the existing saved entity \"${this.newName}\" and replace it with the new one.</strong><br><br>` +\n                            `This action cannot be undone. Are you sure you want to overwrite it?`,\n                            async () => {\n                                this.finalizeRename();\n                            },\n                            ()=>{\n                                showNotification(`canceled rename\"`);\n                            }\n                        );\n                    }else{\n                        this.finalizeRename();\n                    }\n                    return;\n                },\n                ()=>{\n                    showNotification(`canceled rename\"`);\n                }\n            );\n        \n        }else{\n            this.finalizeRename();\n        }\n       \n        return true;\n    }\n\n    async undo(){\n        super.undo();\n        log(\"command\", \"[ NO UNDO FOR RENAME ITEM ]\")\n    }\n\n    getDescription(){\n        return `Rename item ${this.itemName} to ${this.newName}`;\n    }\n\n    getUndoDescription(){\n        return `Rename item ${this.newName} to ${this.itemName}`;\n    }\n    \n    cmd(){\n        return {\n            action: \"rename_item\",\n            itemName: this.itemName,\n            newName: this.newName,\n            options: this.options\n        }\n    }\n}\n\nexport class DeleteItemChange extends Change{\n    constructor(itemName, options){\n        super();\n        this.timeout = 1000;\n        this.itemName = itemName;\n        this.options = options || {};\n        // Store item data for Firebase sync\n        this.itemData = inventory.items[this.itemName];\n    }\n\n    async apply(){\n        super.apply();\n        const storageKey = `inventory_${this.itemName}`;\n        localStorage.removeItem(storageKey);\n        delete inventory.items[this.itemName];\n        \n        // Sync deletion to Firebase if in remote location\n        await this.syncDeleteToFirebase();\n        \n        return true;\n    }\n    \n    async syncDeleteToFirebase() {\n        if (!this.itemData) return;\n        \n        // Check if item was in a remote folder or root is remote\n        const isRemote = this.isItemInRemoteLocation();\n        if (!isRemote) return;\n\n        if (!window.net) {\n            console.warn('Networking not initialized, skipping sync');\n            return;\n        }\n\n        try {\n            const userName = inventory.firebase.sanitizeFirebasePath(SM.scene?.localUser?.name || 'default');\n            \n            // Build the Firebase path\n            let firebasePath = `inventory/${userName}`;\n            if (this.itemData.folder) {\n                const sanitizedFolder = inventory.firebase.sanitizeFirebasePath(this.itemData.folder);\n                firebasePath += `/${sanitizedFolder}`;\n            }\n            const sanitizedItemName = inventory.firebase.sanitizeFirebasePath(this.itemName);\n            firebasePath += `/${sanitizedItemName}`;\n            \n            // Delete from Firebase\n            await net.deleteData(firebasePath);\n            log('inventory', 'Item deleted from Firebase:', firebasePath);\n        } catch (error) {\n            err('inventory', 'Failed to delete item from Firebase:', error);\n        }\n    }\n\n    isItemInRemoteLocation() {\n        if (!this.itemData) return false;\n        \n        if (this.itemData.folder) {\n            // Check if folder is marked as remote\n            const folderData = inventory.folders[this.itemData.folder];\n            return folderData && folderData.remote === true;\n        } else {\n            // Check if root is marked as remote\n            // const userName = inventory.firebase.sanitizeFirebasePath(SM.scene?.localUser?.name || 'default');\n            // const rootRemoteKey = `inventory_root_remote_${userName}`;\n            // return localStorage.getItem(rootRemoteKey) === 'true';\n        }\n    }\n\n    async undo(){\n        super.undo();\n        log(\"command\", \"[ NO UNDO FOR DELETE ITEM ]\")\n    }\n\n    getDescription(){\n        return `Delete item ${this.itemName}`;\n    }\n\n    getUndoDescription(){\n        return `Restore item ${this.itemName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"delete_item\",\n            itemName: this.itemName,\n            options: this.options\n        }\n    }\n}\n\nexport class CreateFolderChange extends Change{\n    constructor(folderName, parentFolderName, options){\n        super();\n        this.timeout = 500;\n        this.folderName = folderName;\n        this.parentFolderName = parentFolderName || inventory.currentFolder;\n        this.options = options || {};\n    }\n\n    async apply(){\n        super.apply();\n        const trimmedName = this.folderName.trim();\n            \n        // Check if folder already exists\n        if (inventory.folders[trimmedName]) {\n            showNotification(`A folder named \"${trimmedName}\" already exists.`);\n            return false;\n        }\n        \n        let parentFolder = inventory.folders[this.parentFolderName];\n        let parentPath = \"\";\n        if(parentFolder && parentFolder.path){\n            parentPath = parentFolder.path+\"/\";\n        }\n        // Create folder object\n        const now = Date.now();\n        let path = `${parentPath}${trimmedName}`\n        const folder = {\n            name: trimmedName,\n            created: now,\n            last_used: now,\n            parent: this.parentFolderName,\n            path: path,\n            itemType: \"folder\",\n            icon:\"\uD83D\uDCC2\",\n            remote: false,\n            public: false\n        };\n        \n        // Save to localStorage\n        const storageKey = `inventory_folder_${path}`;\n        localStorage.setItem(storageKey, JSON.stringify(folder));\n        \n        // Update local folders\n        inventory.folders[path] = folder;\n        return true;\n    }\n\n    async undo(){\n        super.undo();   \n        log(\"command\", \"[ NO UNDO FOR CREATE FOLDER ]\")\n    }\n\n    getDescription(){\n        return `Create folder ${this.folderName} in ${this.parentFolder}`;\n    }\n\n    getUndoDescription(){\n        return `Remove folder ${this.folderName} from ${this.parentFolder}`;\n    }\n\n    cmd(){\n        return {\n            action: \"create_folder\",\n            folderName: this.folderName,\n            parentFolder: this.parentFolder,\n            options: this.options\n        }\n    }\n}\n\nexport class RenameFolderChange extends Change{\n    constructor(originalName, newName, options){\n        super();\n        this.timeout = 500;\n        this.originalName = originalName;\n        this.newName = newName;\n        this.options = options || {};\n    }\n\n    async apply(){\n        super.apply();\n        inventory._renameFolder(this.originalName, this.newName);\n    }\n\n    async undo(){\n        super.undo();\n        inventory._renameFolder(this.newName, this.originalName);\n    }\n\n    getDescription(){\n        return `Rename folder ${this.originalName} to ${this.newName}`;\n    }\n\n    getUndoDescription(){\n        return `Rename folder ${this.newName} to ${this.originalName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"rename_folder\",\n            originalName: this.originalName,\n            newName: this.newName,\n            options: this.options\n        }\n    }\n}\n\nexport class MoveFolderChange extends Change{\n    //TODO: Implement this\n}\n\nexport class RemoveFolderChange extends Change{\n    constructor(folderPath, options){\n        super();\n        this.timeout = 500;\n        this.folderPath = folderPath;\n        this.options = options || {};\n    }\n\n    async apply(){\n        super.apply();\n        Object.entries(inventory.items).forEach(([key, item]) => {\n            if (item.folder === this.folderPath) {\n                const storageKey = `inventory_${key}`;\n                localStorage.removeItem(storageKey);\n                delete inventory.items[key];\n            }\n        });\n        \n        Object.entries(inventory.folders).forEach(([key, subfolder]) => {\n            if (subfolder.parent === this.folderPath) {\n                const storageKey = `inventory_folder_${key}`;\n                localStorage.removeItem(storageKey);\n                let delChange = new RemoveFolderChange(key, this.options);\n                delChange.apply();\n            }\n        });\n        \n        const storageKey = `inventory_folder_${this.folderPath}`;\n        localStorage.removeItem(storageKey);\n        delete inventory.folders[this.folderPath];\n    }\n\n    async undo(){\n        super.undo();\n        log(\"command\", \"[ NO UNDO FOR REMOVE FOLDER ]\")\n    }\n\n    getDescription(){\n        return `Remove folder ${this.folderPath}`;\n    }\n\n    getUndoDescription(){\n        return `Restore folder ${this.folderPath}`;\n    }\n\n    cmd(){\n        return {\n            action: \"remove_folder\",\n            folderPath: this.folderPath,\n            options: this.options\n        }\n    }\n}\n\nexport class MoveItemDirectoryChange extends Change{\n    constructor(itemName, folderName, options){\n        super();\n        this.timeout = 500;\n        this.itemName = itemName;\n        this.folderName = folderName;\n        this.options = options || {};\n    }\n\n    async apply(){\n        super.apply();\n        const item = inventory.items[this.itemName];\n        if (!item) return false;\n        \n        // Don't move if it's already in the target folder\n        if (item.folder === this.folderName) return false;\n        \n        // Update item's folder property\n        item.folder = this.folderName || null;\n        \n        // Save to localStorage\n        const storageKey = `inventory_${this.itemName}`;\n        localStorage.setItem(storageKey, JSON.stringify(item));\n        return true;\n    }\n\n    async undo(){\n        super.undo();\n        log(\"command\", \"[ NO UNDO FOR MOVE ITEM DIRECTORY ]\")\n    }\n\n    getDescription(){\n        return `Move item ${this.itemName} to folder ${this.folderName}`;\n    }\n\n    getUndoDescription(){\n        return `Move item ${this.itemName} to folder ${this.folderName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"move_item_directory\",\n            itemName: this.itemName,\n            folderName: this.folderName,\n            options: this.options\n        }\n    }\n}\n\nexport class CreateScriptItemChange extends Change{\n    constructor(scriptName, options){\n        super();\n        this.timeout = 500;\n        this.scriptName = scriptName;\n        this.options = options || {};\n        this.fileType = options.fileType || 'script'; // 'script' or 'markdown'\n    }\n\n    async apply(){\n        super.apply();\n        \n        let defaultContent, itemType, icon;\n        \n        if (this.fileType === 'markdown') {\n            defaultContent = `# ${this.scriptName.replace('.md', '')}\n\n## Description\nEnter your documentation here...\n\n## Usage\nDescribe how to use this...\n\n## Notes\nAdditional notes...`;\n            itemType = 'markdown';\n            icon = '\uD83D\uDCDD';\n        } else {\n            defaultContent = `this.default = {}\n\nObject.entries(this.default).forEach(([key, val])=>{\n    if(!this.vars[key]) this.vars[key] = val\n})\n\n\nthis.onStart = ()=>{\n    console.log(\"onStart\")\n}\n\nthis.onUpdate = ()=>{\n    console.log(\"onUpdate\")\n}\n\nthis.onDestroy = ()=>{\n    console.log(\"onDestroy\")\n}\n`;\n            itemType = 'script';\n            icon = '\uD83D\uDCDC';\n        }\n                \n        // Create item\n        const now = Date.now();\n        const item = {\n            author: SM.scene?.localUser?.name || 'Unknown',\n            name: this.scriptName,\n            created: now,\n            last_used: now,\n            itemType: itemType,\n            icon: icon,\n            description: '',  // Initialize with empty description\n            data: defaultContent,\n            startup: false,  // Script runs on scene startup (only for scripts)\n            startupSequence: \"onSceneLoaded\",\n            active: false,    // Script is active even without being attached to GameObject (only for scripts)\n            global: false,    // Script is global (only for scripts)\n            autoUpdate: false // Script auto updates when imported from remote folder\n        };\n        \n        // Only add folder property if we're in a folder\n        if (inventory.currentFolder) {\n            item.folder = inventory.currentFolder;\n        }\n\n        // Save to localStorage\n        const storageKey = `inventory_${this.scriptName}`;\n        localStorage.setItem(storageKey, JSON.stringify(item));\n        \n        // Update local items\n        inventory.items[this.scriptName] = item;\n        return true;\n    }\n    async undo(){\n        super.undo();\n        log(\"command\", \"[ NO UNDO FOR SCRIPTS ]\")\n    }\n\n    getDescription(){\n        return `Create ${this.fileType} ${this.scriptName}`;\n    }\n\n    getUndoDescription(){\n        return `Delete ${this.fileType} ${this.scriptName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"create_script\",\n            scriptName: this.scriptName,\n            options: this.options\n        }\n    }\n}\n\n\nexport class EditScriptItemChange extends Change{\n    constructor(scriptName, scriptContent, options){\n        super();\n        this.timeout = 1000;\n        this.scriptName = scriptName;\n        this.scriptContent = scriptContent;\n        this.options = options || {};\n    }\n\n    async apply(){\n        super.apply();\n        // Send save event back to inventory\n        if (inventory) {\n            const item = inventory.items[this.scriptName];\n            item.data = this.scriptContent;\n            item.last_used = Date.now();\n            inventory.syncItem(this.scriptName, item);\n        }\n\n\n    }\n\n    async undo(){\n        super.undo();   \n        log(\"command\", \"[ NO UNDO FOR EDIT SCRIPT ]\")\n    }\n\n    getDescription(){\n        return `Edit script ${this.scriptName}`;    \n    }\n\n    getUndoDescription(){\n        return `Edit script ${this.scriptName}`;\n    }\n\n    cmd(){\n        return {\n            action: \"edit_script\",\n            scriptName: this.scriptName,\n            scriptContent: this.scriptContent,\n            options: this.options\n        }\n    }\n}\n\n\n\n\n// Command history management\nconst COMMAND_HISTORY_KEY = 'commandHistory';\nconst MAX_HISTORY_SIZE = 100;\n\nclass CommandHistory {\n    constructor() {\n        this.history = this.loadHistory();\n        this.currentIndex = this.history.length;\n        this.tempCommand = '';\n    }\n    \n    loadHistory() {\n        try {\n            const stored = localStorage.getItem(COMMAND_HISTORY_KEY);\n            return stored ? JSON.parse(stored) : [];\n        } catch (e) {\n            console.error('Failed to load command history:', e);\n            return [];\n        }\n    }\n    \n    saveHistory() {\n        try {\n            localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(this.history));\n        } catch (e) {\n            console.error('Failed to save command history:', e);\n        }\n    }\n    \n    add(command) {\n        if (!command || command.trim() === '') return;\n        \n        // Remove duplicate if exists\n        const index = this.history.indexOf(command);\n        if (index > -1) {\n            this.history.splice(index, 1);\n        }\n        \n        // Add to end of history\n        this.history.push(command);\n        \n        // Limit history size\n        if (this.history.length > MAX_HISTORY_SIZE) {\n            this.history.shift();\n        }\n        \n        this.currentIndex = this.history.length;\n        this.tempCommand = '';\n        this.saveHistory();\n    }\n    \n    navigateUp(currentValue) {\n        if (this.history.length === 0) return currentValue;\n        \n        if (this.currentIndex === this.history.length) {\n            this.tempCommand = currentValue;\n        }\n        \n        if (this.currentIndex > 0) {\n            this.currentIndex--;\n            return this.history[this.currentIndex];\n        }\n        \n        return this.history[0];\n    }\n    \n    navigateDown(currentValue) {\n        if (this.history.length === 0) return currentValue;\n        \n        if (this.currentIndex < this.history.length - 1) {\n            this.currentIndex++;\n            return this.history[this.currentIndex];\n        } else if (this.currentIndex === this.history.length - 1) {\n            this.currentIndex = this.history.length;\n            return this.tempCommand;\n        }\n        \n        return currentValue;\n    }\n    \n    reset() {\n        this.currentIndex = this.history.length;\n        this.tempCommand = '';\n    }\n}\n\nconst commandHistory = new CommandHistory();\n\nlet commandInputEl = document.getElementById(\"commandShellInput\");\ncommandInputEl.addEventListener(\"keydown\", (e)=>{\n    if(e.key === \"Enter\"){\n        let execString = commandInputEl.value;\n        if(execString.trim()) {\n            commandHistory.add(execString);\n            window.RunCommand(execString);\n        }\n        commandInputEl.value = \"\";\n        commandHistory.reset();\n    } else if(e.key === \"ArrowUp\") {\n        e.preventDefault();\n        commandInputEl.value = commandHistory.navigateUp(commandInputEl.value);\n        // Move cursor to end\n        commandInputEl.setSelectionRange(commandInputEl.value.length, commandInputEl.value.length);\n    } else if(e.key === \"ArrowDown\") {\n        e.preventDefault();\n        commandInputEl.value = commandHistory.navigateDown(commandInputEl.value);\n        // Move cursor to end\n        commandInputEl.setSelectionRange(commandInputEl.value.length, commandInputEl.value.length);\n    }\n})\n\n\nwindow.SetEntityProp = async (entityId, property, newValue, options)=>{\n    let change = new EntityPropertyChange(entityId, property, newValue, options);\n    return await change.apply();\n}\nwindow.SetComponentProp = async (componentId, property, newValue, options)=>{\n    let change = new ComponentPropertyChange(componentId, property, newValue, options);\n    return await change.apply();\n}\nwindow.SetSpaceProp = async (property, newValue, protect, options)=>{\n    let change = new SpacePropertyChange(property, newValue, protect, options);\n    return await change.apply();\n}\nwindow.AddComponent = async (entityId, componentType, options)=>{\n    let change = new AddComponentChange(entityId, componentType, options);\n    return await change.apply();\n}\nwindow.RemoveComponent = async (entityId, componentId, options)=>{\n    let change = new RemoveComponentChange(entityId, componentId, options);\n    return await change.apply();\n}\n\nwindow.ReorderComponent = async (entityId, fromIndex, toIndex, options)=>{\n    let change = new ReorderComponentChange(entityId, fromIndex, toIndex, options);\n    return await change.apply();\n}\n\nwindow.AddEntity = async (parentId, entityName, options)=>{\n    let change = new AddEntityChange(parentId, entityName, options);\n    return await change.apply();\n}\nwindow.RemoveEntity = async (entityId, options)=>{\n    let change = new RemoveEntityChange(entityId, options);\n    return await change.apply();\n}\nwindow.MoveEntity = async (entityId, newParentId, options)=>{\n    let change = new EntityMoveChange(entityId, newParentId, options);\n    return await change.apply();\n}\n\nwindow.RenameItem = async (itemName, newName, options)=>{\n    let change = new RenameItemChange(itemName, newName, options);\n    return await change.apply();\n}\n\nwindow.SetScriptRunnerVar = async (componentId, varName, newValue, options)=>{\n    let change = new ScriptRunnerVarChange(componentId, varName, newValue, options);\n    return await change.apply();\n}\n\nwindow.SetItem = (item)=>{\n    const storageKey = 'inventory_' + item.name;\n    localStorage.setItem(storageKey, JSON.stringify(item));\n    inventory.items[item.name] = item;\n}\n\nwindow.LoadItem = async (itemName, parentId, options)=>{\n    let change = new LoadItemChange(itemName, parentId, null, options);\n    return await change.apply();\n}\n\nwindow.CloneEntity = async (entityId, options)=>{\n    let change = new CloneEntityChange(entityId, options);\n    return await change.apply();\n}\n\nwindow.SaveEntityItem = async (entityId, itemName, folder, options)=>{\n    let change = new SaveEntityItemChange(entityId, itemName, folder, options);\n    return await change.apply();\n}\n\nwindow.DeleteItem = async (itemName, options)=>{\n    let change = new DeleteItemChange(itemName, options);\n    return await change.apply();\n}\n\nwindow.CreateFolder = async (folderName, parentFolder, options)=>{\n    let change = new CreateFolderChange(folderName, parentFolder, options);\n    return await change.apply();\n}\n\nwindow.RemoveFolder = async (folderName, options)=>{\n    let change = new RemoveFolderChange(folderName, options);\n    return await change.apply();\n}\n\nwindow.MoveItemDirectory = async (itemName, folderName, options)=>{\n    let change = new MoveItemDirectoryChange(itemName, folderName, options);\n    return await change.apply();\n}\n\nwindow.CreateScript = async (scriptName, options)=>{\n    let change = new CreateScriptItemChange(scriptName, options);\n    return await change.apply();\n}\n\nwindow.EditScript = async (scriptName, scriptContent, options)=>{\n    let change = new EditScriptItemChange(scriptName, scriptContent, options);\n    return await change.apply();\n}\n\nwindow.RenameFolder = async (folderName, newName, options)=>{\n    let change = new RenameFolderChange(folderName, newName, options);\n    return await change.apply();\n}\n\nwindow.MoveFolder = async (folderName, newName, options)=>{\n    let change = new MoveFolderChange(folderName, newName, options);\n    return await change.apply();\n}\n\nwindow.LoadScript = async (scriptName, options)=>{\n    let change = new LoadScriptChange(scriptName, options);\n    return await change.apply();\n}\n\n// ============================================================================\n// EXPOSE CHANGE TYPES FOR RUNTIME INSPECTION\n// ============================================================================\n\n/**\n * Global registry of all Change types for runtime inspection and debugging.\n * Accessible via window.ChangeTypes in the browser console.\n *\n * Usage:\n *   - List all change types: Object.keys(ChangeTypes.classes)\n *   - Get change type info: ChangeTypes.getInfo('EntityPropertyChange')\n *   - Create change instance: new ChangeTypes.classes.EntityPropertyChange(...)\n *   - Get all entity changes: ChangeTypes.getByCategory('entity')\n */\nwindow.ChangeTypes = {\n    // All change class constructors\n    actions: {\n        Change,\n        SetEntityProp,\n        SetComponentProp,\n        SetSpaceProp,\n        AddComponent,\n        ReorderComponent,\n        RemoveComponent,\n        AddEntity,\n        RemoveEntity,\n        MoveEntity,\n        SetScriptRunnerVar,\n        LoadItem,\n        CloneEntity,\n        SaveEntityItem,\n        RenameItem,\n        DeleteItem,\n        CreateFolder,\n        RenameFolder,\n        MoveFolder,\n        RemoveFolder,\n        MoveItemDirectory,\n        CreateScript,\n        EditScript\n    },\n\n    // Metadata about each change type\n    metadata: {\n        Change: {\n            category: 'base',\n            description: 'Base class for all changes',\n            parameters: [],\n            undoable: true\n        },\n        SetEntityProp: {\n            category: 'entity',\n            description: 'Change a property of an entity (name, active, layer, etc.)',\n            parameters: ['entityId', 'property', 'newValue', 'options'],\n            undoable: true,\n            command: 'set_entity_property'\n        },\n        SetComponentProp: {\n            category: 'component',\n            description: 'Change a property of a component',\n            parameters: ['componentId', 'property', 'newValue', 'options'],\n            undoable: true,\n            command: 'set_component_property'\n        },\n        SetSpaceProp: {\n            category: 'space',\n            description: 'Change a public or protected space property',\n            parameters: ['property', 'newValue', 'protect', 'options'],\n            undoable: true,\n            command: 'set_space_property'\n        },\n        AddComponent: {\n            category: 'component',\n            description: 'Add a component to an entity',\n            parameters: ['entityId', 'componentType', 'options'],\n            undoable: true,\n            command: 'add_component'\n        },\n        ReorderComponent: {\n            category: 'component',\n            description: 'Reorder a component in the entity component list',\n            parameters: ['entityId', 'fromIndex', 'toIndex', 'options'],\n            undoable: true,\n            command: 'reorder_component'\n        },\n        RemoveComponent: {\n            category: 'component',\n            description: 'Remove a component from an entity',\n            parameters: ['componentId', 'options'],\n            undoable: true,\n            command: 'remove_component'\n        },\n        AddEntity: {\n            category: 'entity',\n            description: 'Add a new entity as child of parent',\n            parameters: ['parentId', 'entityName', 'options'],\n            undoable: true,\n            command: 'add_entity'\n        },\n        RemoveEntity: {\n            category: 'entity',\n            description: 'Remove an entity and its children',\n            parameters: ['entityId', 'options'],\n            undoable: true,\n            command: 'remove_entity'\n        },\n        MoveEntity: {\n            category: 'entity',\n            description: 'Move entity to new parent',\n            parameters: ['entityId', 'newParentId', 'options'],\n            undoable: true,\n            command: 'move_entity'\n        },\n        SetScriptRunnerVar: {\n            category: 'script',\n            description: 'Change a ScriptRunner variable value',\n            parameters: ['componentId', 'varName', 'newValue', 'options'],\n            undoable: true,\n            command: 'set_script_runner_var'\n        },\n        LoadItem: {\n            category: 'inventory',\n            description: 'Load item from inventory into scene',\n            parameters: ['itemName', 'parentId', 'itemData', 'options'],\n            undoable: true,\n            command: 'load_item'\n        },\n        CloneEntity: {\n            category: 'entity',\n            description: 'Clone an entity and its children',\n            parameters: ['entityId', 'options'],\n            undoable: true,\n            command: 'clone_entity'\n        },\n        SaveEntityItem: {\n            category: 'inventory',\n            description: 'Save entity as inventory item',\n            parameters: ['entityId', 'itemName', 'folder', 'options'],\n            undoable: false,\n            command: 'save_item'\n        },\n        RenameItem: {\n            category: 'inventory',\n            description: 'Rename an inventory item',\n            parameters: ['itemName', 'newName', 'options'],\n            undoable: false,\n            command: 'rename_item'\n        },\n        DeleteItem: {\n            category: 'inventory',\n            description: 'Delete item from inventory',\n            parameters: ['itemName', 'options'],\n            undoable: false,\n            command: 'delete_item'\n        },\n        CreateFolder: {\n            category: 'inventory',\n            description: 'Create inventory folder',\n            parameters: ['folderName', 'parentFolderName', 'options'],\n            undoable: false,\n            command: 'create_folder'\n        },\n        RenameFolder: {\n            category: 'inventory',\n            description: 'Rename inventory folder',\n            parameters: ['originalName', 'newName', 'options'],\n            undoable: true,\n            command: 'rename_folder'\n        },\n        MoveFolder: {\n            category: 'inventory',\n            description: 'Move folder to new parent (NOT IMPLEMENTED)',\n            parameters: [],\n            undoable: false,\n            command: null\n        },\n        RemoveFolder: {\n            category: 'inventory',\n            description: 'Remove inventory folder and its contents',\n            parameters: ['folderPath', 'options'],\n            undoable: false,\n            command: 'remove_folder'\n        },\n        MoveItemDirectory: {\n            category: 'inventory',\n            description: 'Move item to different folder',\n            parameters: ['itemName', 'folderName', 'options'],\n            undoable: false,\n            command: 'move_item_directory'\n        },\n        CreateScriptItem: {\n            category: 'inventory',\n            description: 'Create new script or markdown item',\n            parameters: ['scriptName', 'options'],\n            undoable: false,\n            command: 'create_script'\n        },\n        EditScriptItem: {\n            category: 'inventory',\n            description: 'Edit script content',\n            parameters: ['scriptName', 'scriptContent', 'options'],\n            undoable: false,\n            command: 'edit_script'\n        }\n    },\n\n    // Helper methods for runtime inspection\n\n    /**\n     * Get information about a specific change type\n     * @param {string} typeName - Name of the change type\n     * @returns {Object} Metadata object with category, description, parameters\n     */\n    getInfo(typeName) {\n        return this.metadata[typeName] || null;\n    },\n\n    /**\n     * Get all change types in a category\n     * @param {string} category - Category name (entity, component, inventory, space, script, base)\n     * @returns {Array<string>} Array of change type names\n     */\n    getByCategory(category) {\n        return Object.entries(this.metadata)\n            .filter(([_, meta]) => meta.category === category)\n            .map(([name, _]) => name);\n    },\n\n    /**\n     * Get all categories\n     * @returns {Array<string>} Array of unique category names\n     */\n    getCategories() {\n        return [...new Set(Object.values(this.metadata).map(meta => meta.category))];\n    },\n\n    /**\n     * Get all undoable change types\n     * @returns {Array<string>} Array of change type names that support undo\n     */\n    getUndoable() {\n        return Object.entries(this.metadata)\n            .filter(([_, meta]) => meta.undoable === true)\n            .map(([name, _]) => name);\n    },\n\n    // /**\n    //  * Get all change types that have shell commands\n    //  * @returns {Object} Map of command names to change type names\n    //  */\n    // getCommands() {\n    //     const commands = {};\n    //     Object.entries(this.metadata).forEach(([typeName, meta]) => {\n    //         if (meta.command) {\n    //             commands[meta.command] = typeName;\n    //         }\n    //     });\n    //     return commands;\n    // },\n\n    /**\n     * List all change types with their basic info\n     * @returns {Array<Object>} Array of {name, category, description, undoable} objects\n     */\n    list() {\n        return Object.entries(this.metadata).map(([name, meta]) => ({\n            name,\n            category: meta.category,\n            description: meta.description,\n            undoable: meta.undoable,\n            command: meta.command || null\n        }));\n    },\n\n    // /**\n    //  * Get statistics about change types\n    //  * @returns {Object} Statistics object\n    //  */\n    // getStats() {\n    //     const categories = this.getCategories();\n    //     const stats = {\n    //         total: Object.keys(this.classes).length,\n    //         byCategory: {},\n    //         undoable: this.getUndoable().length,\n    //         withCommands: Object.keys(this.getCommands()).length\n    //     };\n\n    //     categories.forEach(cat => {\n    //         stats.byCategory[cat] = this.getByCategory(cat).length;\n    //     });\n\n    //     return stats;\n    // },\n    // getHelpText(){\n    //     return `\n    //     <span style=\"color: #00ff00; font-weight: bold;\">Available Commands:</span>\n\n    //     <span style=\"color: #ffaa00; font-weight: bold;\">Entity Commands:</span>\n    //       <span style=\"color: #88ddff;\">add_entity</span> <span style=\"color: #ff88ff;\">$parentId $entityName</span>         - Add a new entity as child of parent\n    //       <span style=\"color: #88ddff;\">remove_entity</span> <span style=\"color: #ff88ff;\">$entityId</span>                   - Remove an entity and its children\n    //       <span style=\"color: #88ddff;\">move_entity</span> <span style=\"color: #ff88ff;\">$entityId $newParentId</span>       - Move entity to new parent\n    //       <span style=\"color: #88ddff;\">set_entity_property</span> <span style=\"color: #ff88ff;\">$entityId $prop $val</span>- Set entity property value\n    //       <span style=\"color: #88ddff;\">clone_entity</span> <span style=\"color: #ff88ff;\">$entityId</span>                    - Clone an entity and its children\n\n    //     <span style=\"color: #ffaa00; font-weight: bold;\">Component Commands:</span>\n    //       <span style=\"color: #88ddff;\">add_component</span> <span style=\"color: #ff88ff;\">$entityId $componentType</span>   - Add component to entity\n    //       <span style=\"color: #88ddff;\">remove_component</span> <span style=\"color: #ff88ff;\">$componentId</span>              - Remove component from entity\n    //       <span style=\"color: #88ddff;\">set_component_property</span> <span style=\"color: #ff88ff;\">$compId $prop $val</span>- Set component property value\n\n    //     <span style=\"color: #ffaa00; font-weight: bold;\">Space Commands:</span>\n    //       <span style=\"color: #88ddff;\">set_space_property</span> <span style=\"color: #ff88ff;\">$prop $val $protect</span>  - Set space property (protect: true/false)\n\n    //     <span style=\"color: #ffaa00; font-weight: bold;\">MonoBehavior Commands:</span>\n    //       <span style=\"color: #88ddff;\">set_mono_behavior_var</span> <span style=\"color: #ff88ff;\">$compId $var $val</span> - Set MonoBehavior variable value\n\n    //     <span style=\"color: #ffaa00; font-weight: bold;\">Inventory Commands:</span>\n    //       <span style=\"color: #88ddff;\">load_item</span> <span style=\"color: #ff88ff;\">$itemName $parentId</span>            - Load item from inventory\n    //       <span style=\"color: #88ddff;\">save_item</span> <span style=\"color: #ff88ff;\">$entityId $itemName $desc</span>     - Save entity as inventory item\n    //       <span style=\"color: #88ddff;\">delete_item</span> <span style=\"color: #ff88ff;\">$itemName</span>                     - Delete item from inventory\n    //       <span style=\"color: #88ddff;\">create_folder</span> <span style=\"color: #ff88ff;\">$folderName $color</span>         - Create inventory folder\n    //       <span style=\"color: #88ddff;\">remove_folder</span> <span style=\"color: #ff88ff;\">$folderName</span>                 - Remove inventory folder\n    //       <span style=\"color: #88ddff;\">move_item_directory</span> <span style=\"color: #ff88ff;\">$itemName $folder</span>    - Move item to folder\n    //       <span style=\"color: #88ddff;\">create_script_item</span> <span style=\"color: #ff88ff;\">$scriptName</span>            - Create new script item\n\n    //     <span style=\"color: #00ff00; font-weight: bold;\">Usage Examples:</span>\n    //       <span style=\"color: #88ddff;\">add_entity</span> <span style=\"color: #ffff88;\">Scene MyEntity</span>                   - Add entity to root\n    //       <span style=\"color: #88ddff;\">add_component</span> <span style=\"color: #ffff88;\">Scene/Box Box</span>         - Add Box component\n    //       <span style=\"color: #88ddff;\">set_entity_property</span> <span style=\"color: #ffff88;\">Scene/Box name \"New Name\"</span>  - Rename entity\n    //       <span style=\"color: #88ddff;\">load_item</span> <span style=\"color: #ffff88;\">MyPrefab Scene</span>                   - Load prefab to Scene\n\n    //     <span style=\"color: #00ff00; font-weight: bold;\">Discovery Commands:</span>\n    //       <span style=\"color: #88ddff;\">ComponentRegistry.list()</span>              - List all available components\n    //       <span style=\"color: #88ddff;\">ComponentRegistry.getByCategory(\"meshes\")</span> - Get components by category\n    //       <span style=\"color: #88ddff;\">ChangeTypes.validateComponent(\"Box\")</span> - Check if component exists\n    //       <span style=\"color: #88ddff;\">ChangeTypes.suggestComponent(\"cube\")</span>  - Get component name suggestions\n\n    //     <span style=\"color: #00ff00; font-weight: bold;\">Notes:</span>\n    //       <span style=\"color: #aaaaaa;\">- Most components have 'Banter' prefix (Box, Sphere, Material)\n    //       - Colliders DON'T have Banter prefix (BoxCollider, SphereCollider)\n    //       - Entity IDs use path format: Scene/Parent/Child\n    //       - Component IDs format: ComponentType_12345\n    //       - Values are auto-parsed (strings, numbers, booleans, vectors, colors)\n    //       - Vectors: [1,2,3] or {x:1,y:2,z:3}\n    //       - Colors: #FF0000 or {r:1,g:0,b:0}\n    //       - ALWAYS verify components exist after add_component!</span>`\n    //     },\n\n    /**\n     * Validate if a component type exists and is supported\n     * @param {string} componentType - Component type name to validate\n     * @returns {Object} {valid: boolean, message: string, suggestions: Array<string>}\n     */\n    validateComponent(componentType) {\n        // Check if ComponentRegistry exists\n        if (!window.ComponentRegistry) {\n            return {\n                valid: false,\n                message: 'ComponentRegistry not available',\n                suggestions: []\n            };\n        }\n\n        // Check if component exists\n        const exists = window.ComponentRegistry.typeMap[componentType];\n        if (exists) {\n            return {\n                valid: true,\n                message: `Component \"${componentType}\" is valid`,\n                suggestions: []\n            };\n        }\n\n        // Get suggestions using fuzzy matching\n        const suggestions = this.suggestComponent(componentType);\n\n        return {\n            valid: false,\n            message: `Component \"${componentType}\" not found. Did you mean one of these?`,\n            suggestions: suggestions.slice(0, 5)  // Top 5 suggestions\n        };\n    },\n\n    /**\n     * Suggest component names based on fuzzy matching\n     * @param {string} input - Partial or misspelled component name\n     * @returns {Array<string>} Sorted array of suggested component names\n     */\n    suggestComponent(input) {\n        if (!window.ComponentRegistry) return [];\n\n        const allComponents = Object.keys(window.ComponentRegistry.typeMap);\n        const lowerInput = input.toLowerCase();\n\n        // Calculate similarity scores\n        const scored = allComponents.map(name => {\n            const lowerName = name.toLowerCase();\n            let score = 0;\n\n            // Exact match\n            if (lowerName === lowerInput) score += 1000;\n\n            // Starts with\n            if (lowerName.startsWith(lowerInput)) score += 100;\n\n            // Contains\n            if (lowerName.includes(lowerInput)) score += 50;\n\n            // Levenshtein-like simple similarity\n            const commonChars = [...lowerInput].filter(char => lowerName.includes(char)).length;\n            score += commonChars * 10;\n\n            // Penalize length difference\n            score -= Math.abs(lowerName.length - lowerInput.length) * 2;\n\n            return { name, score };\n        });\n\n        // Sort by score and return top matches\n        return scored\n            .filter(item => item.score > 0)\n            .sort((a, b) => b.score - a.score)\n            .map(item => item.name);\n    },\n\n    // /**\n    //  * Validate command syntax before execution\n    //  * @param {string} commandString - Full command string to validate\n    //  * @returns {Object} {valid: boolean, message: string, suggestions: Array<string>}\n    //  */\n    // validateCommand(commandString) {\n    //     const args = commandString.trim().split(\" \");\n    //     const command = args[0];\n\n    //     // Check if command exists\n    //     const commands = this.getCommands();\n    //     const validCommands = Object.keys(commands);\n\n    //     if (!validCommands.includes(command) && command !== 'help') {\n    //         return {\n    //             valid: false,\n    //             message: `Unknown command: \"${command}\"`,\n    //             suggestions: validCommands.filter(cmd =>\n    //                 cmd.toLowerCase().includes(command.toLowerCase())\n    //             )\n    //         };\n    //     }\n\n    //     // Validate add_component specifically\n    //     if (command === 'add_component') {\n    //         if (args.length < 3) {\n    //             return {\n    //                 valid: false,\n    //                 message: 'add_component requires entityId and componentType',\n    //                 suggestions: []\n    //             };\n    //         }\n\n    //         const componentType = args[2];\n    //         const componentValidation = this.validateComponent(componentType);\n\n    //         if (!componentValidation.valid) {\n    //             return componentValidation;\n    //         }\n    //     }\n\n    //     // Validate set_component_property specifically\n    //     if (command === 'set_component_property') {\n    //         if (args.length < 4) {\n    //             return {\n    //                 valid: false,\n    //                 message: 'set_component_property requires componentId, property, and newValue',\n    //                 suggestions: []\n    //             };\n    //         }\n\n    //         const componentId = parseBest(args[1]);\n    //         const propertyName = parseBest(args[2]);\n\n    //         // Check if SM (SceneManager) is available\n    //         if (!window.SM) {\n    //             // Can't validate without SM, but allow command through\n    //             return {\n    //                 valid: true,\n    //                 message: 'SceneManager not available, skipping property validation',\n    //                 suggestions: []\n    //             };\n    //         }\n\n    //         // Get the component\n    //         const component = window.SM.getEntityComponentById(componentId, false);\n    //         if (!component) {\n    //             return {\n    //                 valid: false,\n    //                 message: `Component \"${componentId}\" not found`,\n    //                 suggestions: []\n    //             };\n    //         }\n\n        \n    //         // Check if property exists\n    //         const validProperties = Object.keys(component.properties);\n    //         if (!validProperties.includes(propertyName)) {\n    //             // Suggest similar property names\n    //             const suggestions = validProperties.filter(prop =>\n    //                 prop.toLowerCase().includes(propertyName.toLowerCase()) ||\n    //                 propertyName.toLowerCase().includes(prop.toLowerCase())\n    //             );\n\n    //             return {\n    //                 valid: false,\n    //                 message: `Property \"${propertyName}\" does not exist in component \"${component.type}\". Valid properties: ${validProperties.join(', ')}`,\n    //                 suggestions: suggestions.length > 0 ? suggestions : validProperties.slice(0, 5)\n    //             };\n    //         }\n    //     }\n\n    //     return {\n    //         valid: true,\n    //         message: 'Command syntax is valid',\n    //         suggestions: []\n    //     };\n    // },\n\n//     /**\n//      * Get help for a specific command or component\n//      * @param {string} name - Command or component name\n//      * @returns {string} Help text\n//      */\n//     getHelp(name) {\n//         // Check if it's a command\n//         const commands = this.getCommands();\n//         const changeType = commands[name];\n//         if (changeType) {\n//             const info = this.getInfo(changeType);\n//             return `\n// Command: ${name}\n// Description: ${info.description}\n// Parameters: ${info.parameters.join(', ')}\n// Undoable: ${info.undoable ? 'Yes' : 'No'}\n//             `.trim();\n//         }\n\n//         // Check if it's a component\n//         if (window.ComponentRegistry) {\n//             const compInfo = window.ComponentRegistry.getInfo(name);\n//             if (compInfo) {\n//                 return `\n// Component: ${name}\n// Category: ${compInfo.category}\n// Description: ${compInfo.description}\n// Usage: add_component <entityId> ${name}\n//                 `.trim();\n//             }\n//         }\n\n//         return `No help available for \"${name}\". Try: ChangeTypes.list() or ComponentRegistry.list()`;\n//     },\n\n//     /**\n//      * Validate and run a command string safely with error checking\n//      * @param {string} commandString - Full command string to validate and execute\n//      * @param {Object} options - Optional options object to pass to RunCommand\n//      * @returns {Promise<boolean>} True if command executed successfully\n//      * @throws {Error} If validation fails\n//      */\n//     async runSafe(commandString, options) {\n//         // Validate command syntax first\n//         const validation = this.validateCommand(commandString);\n\n//         if (!validation.valid) {\n//             let errorMsg = `\u274C ${validation.message}`;\n//             if (validation.suggestions.length > 0) {\n//                 errorMsg += `\\n\\nDid you mean:\\n` + validation.suggestions.map(s => `  - ${s}`).join('\\n');\n//             }\n\n//             // Log to console for debugging\n//             console.error(errorMsg);\n\n//             // Throw error so calling code knows validation failed\n//             throw new Error(errorMsg);\n//         }\n\n//         console.log(`\u2713 Command validated, executing: ${commandString}`);\n//         await window.RunCommand(commandString, options);\n//         return true;\n//     }\n};\n\n\n// window.RunCommand = async (execString, options)=>{\n//     let args = execString.split(\" \").map(arg=>parseBest(arg));\n\n//     // Convert arrays to {x, y, z} objects for Vector3-like values\n//     args = args.map(arg => {\n//         if (Array.isArray(arg)) {\n//             if (arg.length === 3) {\n//                 return { x: arg[0], y: arg[1], z: arg[2] };\n//             } else if (arg.length === 2) {\n//                 return { x: arg[0], y: arg[1] };\n//             } else if (arg.length === 4) {\n//                 return { x: arg[0], y: arg[1], z: arg[2], w: arg[3] };\n//             }\n//         }\n//         return arg;\n//     });\n\n//     let change = null;\n//     options = options || {};\n//     switch(args[0]){\n//         case \"help\":\n//             // Create a colored help text div\n//             const helpDiv = document.createElement('div');\n//             helpDiv.style.fontFamily = 'monospace';\n//             helpDiv.style.whiteSpace = 'pre-wrap';\n//             helpDiv.innerHTML = window.ChangeTypes.getHelpText();\n            \n//             // Append the colored help directly\n//             const shellEl = document.getElementById(\"lifecycleShell\");\n//             if(shellEl) {\n//                 const children = shellEl.children;\n//                 if (children.length >= 500) {\n//                     shellEl.removeChild(children[0]);\n//                 }\n\n//                 const wrapper = document.createElement('div');\n//                 wrapper.className = 'change-item';\n//                 wrapper.id = \"help_\"+Math.floor(Math.random()*1000000);\n//                 wrapper.appendChild(helpDiv);\n//                 shellEl.appendChild(wrapper);\n//                 shellEl.scrollTop = shellEl.scrollHeight;\n//             }\n//             return;\n//         case \"add_entity\":\n//             change = new AddEntityChange(args[1], args[2], options);\n//             break;\n//         case \"remove_entity\":\n//             change = new RemoveEntityChange(args[1], options);\n//             break;\n//         case \"move_entity\":\n//             change = new EntityMoveChange(args[1], args[2], options);\n//             break;\n//         case \"set_entity_property\":\n//             change = new EntityPropertyChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"add_component\":\n//             options.componentProperties = args[3];\n//             change = new AddComponentChange(args[1], args[2], options);\n//             break;\n//         case \"remove_component\":\n//             change = new RemoveComponentChange(args[1], options);\n//             break;\n//         case \"set_component_property\":\n//             change = new ComponentPropertyChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"set_space_property\":\n//             change = new SpacePropertyChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"set_mono_behavior_var\":\n//             change = new MonoBehaviorVarChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"load_item\":\n//             change = new LoadItemChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"clone_entity\":\n//             change = new CloneEntityChange(args[1], options);\n//             break;\n//         case \"save_item\":\n//             change = new SaveEntityItemChange(args[1], args[2], args[3], options);\n//             break;\n//         case \"delete_item\":\n//             change = new DeleteItemChange(args[1], options);\n//             break;\n//         case \"create_folder\":\n//             change = new CreateFolderChange(args[1], args[2], options);\n//             break;\n//         case \"remove_folder\":\n//             change = new RemoveFolderChange(args[1], options);\n//             break;\n//         case \"move_item_directory\":\n//             change = new MoveItemDirectoryChange(args[1], args[2], options);\n//             break;\n//         case \"create_script\":\n//             change = new CreateScriptItemChange(args[1], options);\n//             break;\n//         case \"edit_script\":\n//             change = new EditScriptItemChange(args[1], args[2], options);\n//             break;\n//         case \"reorder_component\":\n//             change = new ReorderComponentChange(args[1], args[2], args[3], options);\n//             break;\n//         default:\n//             appendToShell(\"command\", \"custom_command_\"+Math.floor(Math.random()*1000000), `Unknown command: ${args[0]}`)\n//     }\n\n//     if(change){\n//         await change.apply();\n//     }\n// }\n\n// Log availability for debugging\n// console.log('[ChangeTypes] Exposed globally with', Object.keys(window.ChangeTypes.classes).length, 'change types');\n// console.log('[ChangeTypes] Usage: window.ChangeTypes.list() or ChangeTypes.getInfo(\"EntityPropertyChange\")');\n// console.log('[ChangeTypes] Categories:', window.ChangeTypes.getCategories().join(', '));", "/**\n * Hierarchy Panel\n * Handles the scene hierarchy tree display and interactions\n */\n\nimport { changeManager } from '../../change-manager.js';\nimport { AddEntityChange, RemoveEntityChange, EntityMoveChange, CloneEntityChange, SaveEntityItemChange } from '../../change-types.js';\nimport { confirm } from '../../utils.js';\n\nexport class HierarchyPanel {\n        constructor() {\n            this.treeContainer = document.getElementById('hierarchyTree');\n            this.searchInput = document.getElementById('searchInput');\n            this.addChildBtn = document.getElementById('addChildEntityBtn');\n            this.cloneBtn = document.getElementById('cloneEntityBtn');\n            this.deleteBtn = document.getElementById('deleteEntityBtn');\n            this.saveBtn = document.getElementById('saveEntityBtn');\n            \n            this.searchTerm = '';\n            this.draggedEntityId = null;\n            this.dropTargetId = null;\n            this.setupEventListeners();\n        }\n\n        /**\n         * Setup event listeners\n         */\n        setupEventListeners() {\n            // Search input\n            this.searchInput.addEventListener('input', (e) => {\n                this.searchTerm = e.target.value.toLowerCase();\n                this.render();\n            });\n            \n            // Listen for scene updates\n            document.addEventListener('sceneUpdated', () => {\n                this.render();\n            });\n            \n            // Add drag and drop to the tree container for root level drops\n            this.treeContainer.addEventListener('dragover', (e) => {\n                // Only allow drop at root level if not over a node\n                if (!e.target.closest('.tree-node') && this.draggedEntityId) {\n                    e.preventDefault();\n                    e.dataTransfer.dropEffect = 'move';\n                    this.treeContainer.classList.add('drag-over-root');\n                }\n            });\n            \n            this.treeContainer.addEventListener('dragleave', (e) => {\n                // Remove visual feedback when leaving the container\n                if (e.target === this.treeContainer) {\n                    this.treeContainer.classList.remove('drag-over-root');\n                }\n            });\n            \n            this.treeContainer.addEventListener('drop', (e) => {\n                // Handle drop at root level\n                if (!e.target.closest('.tree-node') && this.draggedEntityId) {\n                    e.preventDefault();\n                    this.treeContainer.classList.remove('drag-over-root');\n                    this.handleDropToRoot();\n                }\n            });\n\n            // Add child button\n            this.addChildBtn.addEventListener('mousedown', async () => {\n                const parentId = SM.selectedEntity;\n                \n                // Queue entity addition through change manager\n                const change = new AddEntityChange(parentId, null, { source: 'ui' });\n                changeManager.applyChange(change);\n            });\n\n            // Clone button\n            this.cloneBtn.addEventListener('mousedown', async () => {\n                const change = new CloneEntityChange(SM.selectedEntity, { source: 'ui' });\n                changeManager.applyChange(change);\n                SM.selectEntity(change.entityId);\n            });\n\n            // Delete button\n            this.deleteBtn.addEventListener('mousedown', async () => {\n                if (!SM.selectedEntity) {\n                    showNotification('Please select a entity to delete');\n                    return;\n                }\n                \n                const entity = SM.getEntityById(SM.selectedEntity);\n                if (!entity) return;\n                \n                if (await confirm(`Are you sure you want to delete \"${entity.name}\" and all its children?`)) {\n                    // Queue entity deletion through change manager\n                    log(\"scene\", \"deleting entity =>\", SM.selectedEntity)\n                    const change = new RemoveEntityChange(SM.selectedEntity, { source: 'ui' });\n                    changeManager.applyChange(change);\n                    SM.selectEntity('Scene');\n                }\n            });\n\n            // Save button\n            this.saveBtn.addEventListener('mousedown', async () => {\n                if (!SM.selectedEntity) {\n                    showNotification('Please select a entity to save');\n                    return;\n                }\n\n                let change = new SaveEntityItemChange(SM.selectedEntity, null, null, {source: 'ui'});\n                changeManager.applyChange(change);\n\n            });\n        }\n\n        /**\n         * Render the hierarchy tree\n         */\n        render() {\n            if (!this.treeContainer) return;\n            \n            this.treeContainer.innerHTML = '';\n            if (SM.entityData.entities.length === 0) {\n                this.treeContainer.innerHTML = '<div class=\"loading-state\">No scene data available</div>';\n                return;\n            }\n            \n            // Get root entities\n            const rootEntities = SM.entityData.entities;\n            \n            // Render each root entity\n            rootEntities.forEach(entity => {\n                const nodeElement = this.renderEntityNode(entity, this.searchTerm, 0);\n                if (nodeElement) {\n                    this.treeContainer.appendChild(nodeElement);\n                }\n            });\n        }\n\n        /**\n         * Render a single entity node\n         */\n        renderEntityNode(entity, searchTerm, level) {\n            // Check if this node or any children match the search\n            if (searchTerm && !this.matchesSearch(entity, searchTerm)) {\n                return null;\n            }\n            \n            const isExpanded = SM.expandedNodes.has(entity.id);\n            const hasChildren = entity.children && entity.children.length > 0;\n            const isSelected = SM.selectedEntity === entity.id;\n            \n            // Create node container\n            const nodeDiv = document.createElement('div');\n            nodeDiv.className = 'tree-node-container';\n            nodeDiv.dataset.entityId = entity.id;\n            \n            // Create node element\n            const node = document.createElement('div');\n            node.className = 'tree-node';\n            if (isSelected) node.classList.add('selected');\n            if (!entity.active) node.classList.add('inactive');\n            if (!entity.persistent) node.classList.add('non-persistent');\n            node.style.paddingLeft = `${level * 20 + 8}px`;\n            \n            // Make node draggable\n            node.draggable = true;\n            node.dataset.entityId = entity.id;\n            \n            // Add drag event handlers\n            node.addEventListener('dragstart', (e) => this.handleDragStart(e, entity));\n            node.addEventListener('dragend', (e) => this.handleDragEnd(e));\n            node.addEventListener('dragover', (e) => this.handleDragOver(e));\n            node.addEventListener('drop', (e) => this.handleDrop(e));\n            node.addEventListener('dragenter', (e) => this.handleDragEnter(e));\n            node.addEventListener('dragleave', (e) => this.handleDragLeave(e));\n            \n            // Toggle button\n            const toggle = document.createElement('span');\n            toggle.className = 'tree-toggle';\n            if (hasChildren) {\n                toggle.classList.add('has-children');\n                toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n                toggle.onmousedown = (e) => {\n                    e.stopPropagation();\n                    this.toggleNode(entity.id);\n                };\n            } else {\n                toggle.classList.add('empty');\n                toggle.textContent = '\u2022';\n            }\n            \n            // Node content\n            const content = document.createElement('div');\n            content.className = 'node-content';\n            \n            // Node icon\n            const icon = document.createElement('span');\n            icon.className = 'node-icon';\n            \n            // Node name\n            const name = document.createElement('span');\n            name.className = 'node-name';\n            name.textContent = entity.name;\n\n            if(entity.name.endsWith(\"_js\")){\n                name.style.color = '#ff9500';\n            }\n            \n            // Assemble node\n            content.appendChild(icon);\n            content.appendChild(name);\n            node.appendChild(toggle);\n            node.appendChild(content);\n            \n            // Click handler\n            node.onmousedown = () => SM.selectEntity(entity.id);\n            \n            nodeDiv.appendChild(node);\n            \n            // Render children if expanded\n            if (hasChildren && isExpanded) {\n                const childrenContainer = document.createElement('div');\n                childrenContainer.className = 'tree-children';\n                \n                entity.children.forEach(child => {\n                    const childNode = this.renderEntityNode(child, searchTerm, level + 1);\n                    if (childNode) {\n                        childrenContainer.appendChild(childNode);\n                    }\n                });\n                \n                nodeDiv.appendChild(childrenContainer);\n            }\n            \n            return nodeDiv;\n        }\n\n        /**\n         * Check if entity matches search term\n         */\n        matchesSearch(entity, searchTerm) {\n            if (!searchTerm) return true;\n            \n            // Check entity name\n            if (entity.name.toLowerCase().includes(searchTerm)) {\n                return true;\n            }\n            \n            // Check component types\n            if (entity.components) {\n                for (const component of entity.components) {\n                    if (component.type.toLowerCase().includes(searchTerm)) {\n                        return true;\n                    }\n                }\n            }\n            \n            // Check children\n            if (entity.children) {\n                for (const child of entity.children) {\n                    if (this.matchesSearch(child, searchTerm)) {\n                        return true;\n                    }\n                }\n            }\n            \n            return false;\n        }\n\n        /**\n         * Toggle node expansion\n         */\n        toggleNode(entityId) {\n            SM.toggleNodeExpansion(entityId);\n            this.render();\n        }\n\n\n        /**\n         * Show error message\n         */\n        showError(message) {\n            this.treeContainer.innerHTML = `\n                <div class=\"empty-state\">\n                    <h3>Error</h3>\n                    <p>${message}</p>\n                </div>\n            `;\n        }\n\n        /**\n         * Handle drag start\n         */\n        handleDragStart(e, entity) {\n            this.draggedEntityId = entity.id;\n            e.dataTransfer.effectAllowed = 'copyMove';\n            e.dataTransfer.setData('text/plain', entity.id);\n            \n            // Add dragging class\n            e.target.classList.add('dragging');\n            \n            // Store drag data\n            e.dataTransfer.setDragImage(e.target, 0, 0);\n        }\n\n        /**\n         * Handle drag end\n         */\n        handleDragEnd(e) {\n            e.target.classList.remove('dragging');\n            this.draggedEntityId = null;\n            \n            // Remove all drag-over classes\n            document.querySelectorAll('.drag-over').forEach(el => {\n                el.classList.remove('drag-over');\n            });\n            \n            // Remove root drag-over class\n            this.treeContainer.classList.remove('drag-over-root');\n        }\n\n        /**\n         * Handle drag over\n         */\n        handleDragOver(e) {\n            e.preventDefault();\n            e.dataTransfer.dropEffect = 'move';\n        }\n\n        /**\n         * Handle drag enter\n         */\n        handleDragEnter(e) {\n            if (!this.draggedEntityId) return;\n            \n            const target = e.target.closest('.tree-node');\n            if (!target) return;\n            \n            const targetEntityId = target.dataset.entityId;\n            if (targetEntityId === this.draggedEntityId) return;\n            \n            // Check if we can drop here (not on a descendant)\n            if (this.isDescendant(this.draggedEntityId, targetEntityId)) {\n                return;\n            }\n            \n            target.classList.add('drag-over');\n        }\n\n        /**\n         * Handle drag leave\n         */\n        handleDragLeave(e) {\n            const target = e.target.closest('.tree-node');\n            if (target) {\n                target.classList.remove('drag-over');\n            }\n        }\n\n        /**\n         * Handle drop\n         */\n        async handleDrop(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            \n            const target = e.target.closest('.tree-node');\n            if (!target) return;\n            \n            const targetEntityId = target.dataset.entityId;\n            if (!targetEntityId || targetEntityId === this.draggedEntityId) return;\n            \n            // Check if we can drop here\n            if (this.isDescendant(this.draggedEntityId, targetEntityId)) {\n                showNotification('Cannot move a entity into one of its descendants');\n                return;\n            }\n            \n            // Queue entity move through change manager\n            const change = new EntityMoveChange(this.draggedEntityId, targetEntityId, { source: 'ui' });\n            changeManager.applyChange(change);\n            \n            // Expand the target node to show the newly added child\n            SM.expandedNodes.add(targetEntityId);\n        }\n\n        /**\n         * Check if targetId is a descendant of entityId\n         */\n        isDescendant(entityId, targetId) {\n            const entity = SM.getEntityById(entityId);\n            if (!entity) return false;\n            \n            const checkChildren = (parent) => {\n                if (!parent.children) return false;\n                \n                for (const child of parent.children) {\n                    if (child.id === targetId) return true;\n                    if (checkChildren(child)) return true;\n                }\n                return false;\n            };\n            \n            return checkChildren(entity);\n        }\n\n        /**\n         * Handle drop to root level\n         */\n        async handleDropToRoot() {\n            if (!this.draggedEntityId) return;\n\n            // Queue entity move to root through change manager\n            const change = new EntityMoveChange(this.draggedEntityId, null, { source: 'ui' });\n            changeManager.applyChange(change);\n        }\n    }", "/**\n * Scale Lock Handler\n * Manages proportional scaling lock states and calculations for scale properties\n */\n\nexport class ScaleLockHandler {\n    constructor() {\n        // Store collapsed state of components\n        this.scaleLockStates = new Map(); // Key: componentId_propertyKey, Value: boolean\n        this.scaleRatios = new Map(); // Key: componentId_propertyKey, Value: {x: number, y: number, z: number}\n    }\n\n    /**\n     * Check if a scale property is locked\n     * @param {string} scaleLockKey - The key for the scale property (entityId_propertyName)\n     * @returns {boolean} - Whether proportional scaling is locked\n     */\n    isLocked(scaleLockKey) {\n        return this.scaleLockStates.get(scaleLockKey) || false;\n    }\n\n    /**\n     * Get the scale ratios for a locked scale property\n     * @param {string} scaleLockKey - The key for the scale property\n     * @returns {Object|null} - The scale ratios or null if not set\n     */\n    getRatios(scaleLockKey) {\n        return this.scaleRatios.get(scaleLockKey) || null;\n    }\n\n    /**\n     * Set the scale ratios for a property\n     * @param {string} scaleLockKey - The key for the scale property\n     * @param {Object} ratios - The scale ratios {x, y, z}\n     */\n    setRatios(scaleLockKey, ratios) {\n        this.scaleRatios.set(scaleLockKey, ratios);\n    }\n\n    /**\n     * Toggle the lock state for a scale property\n     * @param {string} scaleLockKey - The key for the scale property\n     * @param {Object} currentValue - The current scale value {x, y, z}\n     * @returns {boolean} - The new lock state\n     */\n    toggleLock(scaleLockKey, currentValue) {\n        const isLocked = !this.scaleLockStates.get(scaleLockKey);\n        this.scaleLockStates.set(scaleLockKey, isLocked);\n\n        if (isLocked) {\n            // Store current ratios when locking\n            const baseValue = currentValue.x || 1;\n            this.setRatios(scaleLockKey, {\n                x: (currentValue.x || 0) / baseValue,\n                y: (currentValue.y || 0) / baseValue,\n                z: (currentValue.z || 0) / baseValue\n            });\n        }\n\n        return isLocked;\n    }\n\n    /**\n     * Create a scale lock button element\n     * @param {string} scaleLockKey - The key for the scale property\n     * @param {Object} value - The current scale value\n     * @returns {HTMLElement} - The lock button element\n     */\n    createLockButton(scaleLockKey, value) {\n        const lockButton = document.createElement('button');\n        lockButton.className = 'scale-lock-btn';\n        lockButton.style.marginLeft = '8px';\n        lockButton.style.padding = '4px 4px';\n        lockButton.style.background = this.isLocked(scaleLockKey) ? '#4a90e2' : '#2a2a2a';\n        lockButton.style.border = '1px solid #3a3a3a';\n        lockButton.style.borderRadius = '4px';\n        lockButton.style.color = this.isLocked(scaleLockKey) ? '#fff' : '#999';\n        lockButton.style.cursor = 'pointer';\n        lockButton.style.fontSize = '12px';\n        lockButton.innerHTML = this.isLocked(scaleLockKey) ? '\uD83D\uDD12' : '\uD83D\uDD13';\n        lockButton.title = this.isLocked(scaleLockKey) ? 'Proportional scaling locked' : 'Click to lock proportional scaling';\n\n        lockButton.onmousedown = (e) => {\n            e.stopPropagation();\n            const isLocked = this.toggleLock(scaleLockKey, value);\n\n            // Update button appearance\n            lockButton.style.background = isLocked ? '#4a90e2' : '#2a2a2a';\n            lockButton.style.color = isLocked ? '#fff' : '#999';\n            lockButton.innerHTML = isLocked ? '\uD83D\uDD12' : '\uD83D\uDD13';\n            lockButton.title = isLocked ? 'Proportional scaling locked' : 'Click to lock proportional scaling';\n        };\n\n        return lockButton;\n    }\n\n    /**\n     * Handle proportional scale changes when locked\n     * @param {string} scaleLockKey - The key for the scale property\n     * @param {Object} currentValue - The current scale value\n     * @param {string} axis - The axis being changed ('x', 'y', or 'z')\n     * @param {number} newValue - The new value for the axis\n     * @returns {Object} - The new proportional scale values for all axes\n     */\n    handleProportionalScale(scaleLockKey, currentValue, axis, newValue) {\n        if (!this.isLocked(scaleLockKey)) {\n            // If not locked, return single axis change\n            const result = { ...currentValue };\n            result[axis] = newValue;\n            return result;\n        }\n\n        const numValue = parseFloat(newValue);\n        if (isNaN(numValue)) {\n            return currentValue;\n        }\n\n        let ratios = this.getRatios(scaleLockKey);\n\n        // If no ratios stored, calculate them from current values\n        if (!ratios) {\n            const baseValue = currentValue[axis] || 1;\n            ratios = {\n                x: (currentValue.x || 0) / baseValue,\n                y: (currentValue.y || 0) / baseValue,\n                z: (currentValue.z || 0) / baseValue\n            };\n            this.setRatios(scaleLockKey, ratios);\n        }\n\n        // Calculate the scale factor based on the changed axis\n        const oldValue = currentValue[axis] || 1;\n        const scaleFactor = numValue / oldValue;\n\n        // Apply proportional scaling to all axes\n        return {\n            x: currentValue.x * scaleFactor,\n            y: currentValue.y * scaleFactor,\n            z: currentValue.z * scaleFactor\n        };\n    }\n\n    /**\n     * Clear all lock states\n     */\n    clearAll() {\n        this.scaleLockStates.clear();\n        this.scaleRatios.clear();\n    }\n\n    /**\n     * Clear lock state for a specific entity\n     * @param {string} entityId - The entity ID to clear locks for\n     */\n    clearForEntity(entityId) {\n        // Remove all entries that start with the entityId\n        const keysToRemove = [];\n        for (const key of this.scaleLockStates.keys()) {\n            if (key.startsWith(entityId + '_')) {\n                keysToRemove.push(key);\n            }\n        }\n        keysToRemove.forEach(key => {\n            this.scaleLockStates.delete(key);\n            this.scaleRatios.delete(key);\n        });\n    }\n}", "/**\n * Transform Handler\n * Manages transform mode (local/global) and transform calculations\n */\n\nexport class TransformHandler {\n    constructor() {\n        // Transform display mode - 'local' or 'global'\n        this.transformMode = 'local';\n    }\n\n    /**\n     * Get the current transform mode\n     * @returns {string} - 'local' or 'global'\n     */\n    getMode() {\n        return this.transformMode;\n    }\n\n    /**\n     * Toggle between local and global transform mode\n     * @returns {string} - The new transform mode\n     */\n    toggleMode() {\n        this.transformMode = this.transformMode === 'local' ? 'global' : 'local';\n        return this.transformMode;\n    }\n\n    /**\n     * Set the transform mode\n     * @param {string} mode - 'local' or 'global'\n     */\n    setMode(mode) {\n        if (mode === 'local' || mode === 'global') {\n            this.transformMode = mode;\n        }\n    }\n\n    /**\n     * Get transform values based on current mode\n     * @param {Object} entity - The entity to get transform values from\n     * @returns {Object} - Object containing position, rotation, and scale values\n     */\n    getTransformValues(entity) {\n        if (!entity) {\n            return {\n                position: { x: 0, y: 0, z: 0 },\n                rotation: { x: 0, y: 0, z: 0, w: 1 },\n                scale: { x: 1, y: 1, z: 1 }\n            };\n        }\n\n        if (this.transformMode === 'global') {\n            return {\n                position: entity.transform.position || { x: 0, y: 0, z: 0 },\n                rotation: entity.transform.rotation || { x: 0, y: 0, z: 0, w: 1 },\n                scale: entity.transform.scale || { x: 1, y: 1, z: 1 }\n            };\n        } else {\n            return {\n                position: entity.transformVal(\"localPosition\"),\n                rotation: entity.transformVal(\"localRotation\"),\n                scale: entity.transformVal(\"localScale\")\n            };\n        }\n    }\n\n    /**\n     * Get transform property labels based on current mode\n     * @returns {Object} - Object containing positionLabel, rotationLabel, and scaleLabel\n     */\n    getTransformLabels() {\n        if (this.transformMode === 'global') {\n            return {\n                positionLabel: 'position',\n                rotationLabel: 'rotation',\n                scaleLabel: 'scale'\n            };\n        } else {\n            return {\n                positionLabel: 'localPosition',\n                rotationLabel: 'localRotation',\n                scaleLabel: 'localScale'\n            };\n        }\n    }\n\n    /**\n     * Create a transform mode toggle button\n     * @param {Function} onToggle - Callback when button is clicked\n     * @returns {HTMLElement} - The toggle button element\n     */\n    createModeToggleButton(onToggle) {\n        const transformToggleBtn = document.createElement('button');\n        transformToggleBtn.className = 'transform-mode-toggle-btn';\n        transformToggleBtn.style.padding = '4px 8px';\n        transformToggleBtn.style.marginRight = '8px';\n        transformToggleBtn.style.background = '#2a2a2a';\n        transformToggleBtn.style.border = '1px solid #3a3a3a';\n        transformToggleBtn.style.borderRadius = '4px';\n        transformToggleBtn.style.color = '#ccc';\n        transformToggleBtn.style.cursor = 'pointer';\n        transformToggleBtn.style.fontSize = '11px';\n        transformToggleBtn.style.fontWeight = 'bold';\n        transformToggleBtn.textContent = this.transformMode === 'local' ? 'Local' : 'Global';\n        transformToggleBtn.title = 'Toggle between local and global transform display';\n\n        transformToggleBtn.onmousedown = (e) => {\n            e.stopPropagation();\n            this.toggleMode();\n            transformToggleBtn.textContent = this.transformMode === 'local' ? 'Local' : 'Global';\n            if (onToggle) {\n                onToggle();\n            }\n        };\n\n        return transformToggleBtn;\n    }\n\n    /**\n     * Create a reset button for position properties\n     * @param {Function} onReset - Callback when reset is clicked\n     * @returns {HTMLElement} - The reset button element\n     */\n    createPositionResetButton(onReset) {\n        const resetButton = document.createElement('button');\n        resetButton.className = 'position-reset-btn';\n        resetButton.style.marginLeft = '8px';\n        resetButton.style.padding = '4px 8px';\n        resetButton.style.background = '#2a2a2a';\n        resetButton.style.border = '1px solid #3a3a3a';\n        resetButton.style.borderRadius = '4px';\n        resetButton.style.color = '#999';\n        resetButton.style.cursor = 'pointer';\n        resetButton.style.fontSize = '14px';\n        resetButton.innerHTML = '\u2205';\n        resetButton.title = 'Reset position to zero';\n\n        resetButton.onmousedown = (e) => {\n            e.stopPropagation();\n            if (onReset) {\n                onReset();\n            }\n        };\n\n        return resetButton;\n    }\n\n    /**\n     * Create a reset button for rotation properties\n     * @param {Function} onReset - Callback when reset is clicked\n     * @returns {HTMLElement} - The reset button element\n     */\n    createRotationResetButton(onReset) {\n        const resetButton = document.createElement('button');\n        resetButton.className = 'rotation-reset-btn';\n        resetButton.style.marginLeft = '8px';\n        resetButton.style.padding = '4px 8px';\n        resetButton.style.background = '#2a2a2a';\n        resetButton.style.border = '1px solid #3a3a3a';\n        resetButton.style.borderRadius = '4px';\n        resetButton.style.color = '#999';\n        resetButton.style.cursor = 'pointer';\n        resetButton.style.fontSize = '14px';\n        resetButton.innerHTML = '\u2205';\n        resetButton.title = 'Reset rotation to zero';\n\n        resetButton.onmousedown = (e) => {\n            e.stopPropagation();\n            if (onReset) {\n                onReset();\n            }\n        };\n\n        return resetButton;\n    }\n\n    /**\n     * Update transform inputs in the DOM to match current entity state\n     * @param {HTMLElement} section - The entity section element\n     * @param {Object} entity - The entity to update from\n     * @param {Object} utils - Utility functions (quaternionToEuler, formatNumber)\n     */\n    updateTransformInputs(section, entity, utils) {\n        if (!entity || !section) return;\n\n        const { quaternionToEuler, formatNumber } = utils;\n\n        // Get current transform values based on mode\n        const transforms = this.getTransformValues(entity);\n        const labels = this.getTransformLabels();\n\n        // Format labels for display\n        const formatPropertyName = (name) => {\n            return name.replace(/([A-Z])/g, ' $1')\n                .replace(/^./, str => str.toUpperCase())\n                .trim();\n        };\n\n        const positionLabel = formatPropertyName(labels.positionLabel);\n        const rotationLabel = formatPropertyName(labels.rotationLabel);\n        const scaleLabel = formatPropertyName(labels.scaleLabel);\n\n        // Update position inputs\n        this.updateVector3Inputs(section, positionLabel, transforms.position, formatNumber);\n\n        // Update rotation inputs (convert quaternion to euler)\n        const eulerAngles = quaternionToEuler(transforms.rotation);\n        this.updateVector3Inputs(section, rotationLabel, eulerAngles, formatNumber);\n\n        // Update scale inputs\n        this.updateVector3Inputs(section, scaleLabel, transforms.scale, formatNumber);\n    }\n\n    /**\n     * Helper to update vector3 inputs for a specific property\n     * @param {HTMLElement} section - The section containing the inputs\n     * @param {string} labelText - The label text to match\n     * @param {Object} values - The values to set {x, y, z}\n     * @param {Function} formatNumber - Number formatting function\n     */\n    updateVector3Inputs(section, labelText, values, formatNumber) {\n        const propertyRows = section.querySelectorAll('.property-row');\n        for (const row of propertyRows) {\n            const label = row.querySelector('.property-label');\n            if (label && label.textContent === labelText) {\n                const inputs = row.querySelectorAll('.vector-group input[type=\"number\"]');\n                if (inputs.length >= 3) {\n                    inputs[0].value = formatNumber ? formatNumber(values.x, 6) : values.x;\n                    inputs[1].value = formatNumber ? formatNumber(values.y, 6) : values.y;\n                    inputs[2].value = formatNumber ? formatNumber(values.z, 6) : values.z;\n                }\n                break;\n            }\n        }\n    }\n}", "/**\n * Property Updater\n * Handles programmatic property value updates and DOM synchronization\n */\n\nexport class PropertyUpdater {\n    constructor() {\n        // This class is stateless, just provides update methods\n    }\n\n    /**\n     * Update a property value programmatically\n     * @param {string} componentId - The ID of the component\n     * @param {string} propertyKey - The key of the property to update\n     * @param {*} newValue - The new value to set\n     * @param {Object} utils - Utility functions (optional)\n     */\n    updateProperty(componentId, propertyKey, newValue, utils = {}) {\n        const propertyRowId = `prop_${componentId}_${propertyKey}`;\n        const propertyRow = document.getElementById(propertyRowId);\n\n        if (!propertyRow) {\n            //console.warn(`Property row not found: ${propertyRowId}`);\n            return;\n        }\n\n        // Update based on value type\n        if (typeof newValue === 'boolean') {\n            this.updateCheckbox(propertyRow, newValue);\n        } else if (typeof newValue === 'number') {\n            this.updateNumberInput(propertyRow, newValue);\n        } else if (typeof newValue === 'string') {\n            this.updateStringInput(propertyRow, newValue);\n        } else if (typeof newValue === 'object') {\n            this.updateObjectProperty(propertyRow, newValue, utils);\n        }\n    }\n\n    /**\n     * Update a checkbox input\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {boolean} value - The new checkbox value\n     */\n    updateCheckbox(propertyRow, value) {\n        const checkbox = propertyRow.querySelector('input[type=\"checkbox\"]');\n        if (checkbox) {\n            checkbox.checked = value;\n        }\n    }\n\n    /**\n     * Update a number input\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {number} value - The new number value\n     */\n    updateNumberInput(propertyRow, value) {\n        const numberInput = propertyRow.querySelector('input[type=\"number\"]:not(.vector-group input)');\n        if (numberInput) {\n            numberInput.value = value;\n        }\n    }\n\n    /**\n     * Update a string input (text or dropdown)\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {string} value - The new string value\n     */\n    updateStringInput(propertyRow, value) {\n        // Check for dropdowns first\n        const dropdown = propertyRow.querySelector('select');\n        if (dropdown) {\n            dropdown.value = value;\n        } else {\n            // Text input\n            const textInput = propertyRow.querySelector('input[type=\"text\"]');\n            if (textInput) {\n                textInput.value = value;\n            }\n        }\n    }\n\n    /**\n     * Update an object property (Vector3, Color, Quaternion, etc.)\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {Object} value - The new object value\n     * @param {Object} utils - Utility functions\n     */\n    updateObjectProperty(propertyRow, value, utils) {\n        if (!value) return;\n\n        // Handle Vector3 objects\n        if ('x' in value && 'y' in value && 'z' in value && !('w' in value)) {\n            this.updateVector3(propertyRow, value);\n        }\n        // Handle Quaternion (rotation) - has x, y, z, and w\n        else if ('x' in value && 'y' in value && 'z' in value && 'w' in value) {\n            this.updateQuaternion(propertyRow, value, utils);\n        }\n        // Handle Color objects\n        else if ('r' in value && 'g' in value && 'b' in value) {\n            this.updateColor(propertyRow, value, utils);\n        }\n    }\n\n    /**\n     * Update Vector3 inputs\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {Object} value - The vector3 value {x, y, z}\n     */\n    updateVector3(propertyRow, value) {\n        const vectorInputs = propertyRow.querySelectorAll('.vector-group input[type=\"number\"]');\n        if (vectorInputs.length >= 3) {\n            vectorInputs[0].value = value.x || 0;\n            vectorInputs[1].value = value.y || 0;\n            vectorInputs[2].value = value.z || 0;\n        }\n    }\n\n    /**\n     * Update Quaternion inputs (converted to Euler angles)\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {Object} value - The quaternion value {x, y, z, w}\n     * @param {Object} utils - Utility functions containing quaternionToEuler and formatNumber\n     */\n    updateQuaternion(propertyRow, value, utils) {\n        const { quaternionToEuler, formatNumber } = utils || {};\n\n        if (quaternionToEuler) {\n            const eulerAngles = quaternionToEuler(value);\n            const vectorInputs = propertyRow.querySelectorAll('.vector-group input[type=\"number\"]');\n            if (vectorInputs.length >= 3) {\n                vectorInputs[0].value = formatNumber ? formatNumber(eulerAngles.x, 2) : eulerAngles.x;\n                vectorInputs[1].value = formatNumber ? formatNumber(eulerAngles.y, 2) : eulerAngles.y;\n                vectorInputs[2].value = formatNumber ? formatNumber(eulerAngles.z, 2) : eulerAngles.z;\n            }\n        }\n    }\n\n    /**\n     * Update Color inputs\n     * @param {HTMLElement} propertyRow - The property row element\n     * @param {Object} value - The color value {r, g, b, a}\n     * @param {Object} utils - Utility functions containing rgbToHex\n     */\n    updateColor(propertyRow, value, utils) {\n        // Update color swatch\n        const colorSwatch = propertyRow.querySelector('.color-swatch');\n        if (colorSwatch) {\n            colorSwatch.style.backgroundColor = `rgba(${value.r * 255}, ${value.g * 255}, ${value.b * 255}, ${value.a || 1})`;\n        }\n\n        // Update RGBA inputs\n        const rgbaInputs = propertyRow.querySelectorAll('.vector-group input[type=\"number\"]');\n        if (rgbaInputs.length >= 3) {\n            rgbaInputs[0].value = value.r || 0;\n            rgbaInputs[1].value = value.g || 0;\n            rgbaInputs[2].value = value.b || 0;\n            if (rgbaInputs[3]) {\n                rgbaInputs[3].value = value.a || 1;\n            }\n        }\n\n        // Update hidden color input\n        const colorInput = propertyRow.querySelector('input[type=\"color\"]');\n        if (colorInput) {\n            const { rgbToHex } = utils || {};\n            if (rgbToHex) {\n                colorInput.value = rgbToHex(value.r * 255, value.g * 255, value.b * 255);\n            }\n        }\n    }\n\n    /**\n     * Update all properties for a component\n     * @param {string} componentId - The component ID\n     * @param {Object} properties - Object containing property key-value pairs\n     * @param {Object} utils - Utility functions\n     */\n    updateAllProperties(componentId, properties, utils) {\n        if (!properties) return;\n\n        Object.entries(properties).forEach(([key, value]) => {\n            this.updateProperty(componentId, key, value, utils);\n        });\n    }\n\n    /**\n     * Update a specific entity property by searching for its label\n     * @param {HTMLElement} entitySection - The entity section element\n     * @param {string} propertyLabel - The property label to search for\n     * @param {*} value - The new value\n     */\n    updateEntityProperty(entitySection, propertyLabel, value) {\n        if (!entitySection) return;\n\n        const propertyRows = entitySection.querySelectorAll('.property-row');\n        for (const row of propertyRows) {\n            const label = row.querySelector('.property-label');\n            if (label && label.textContent === propertyLabel) {\n                // Determine type and update accordingly\n                if (typeof value === 'boolean') {\n                    this.updateCheckbox(row, value);\n                } else if (typeof value === 'number') {\n                    this.updateNumberInput(row, value);\n                } else if (typeof value === 'string') {\n                    this.updateStringInput(row, value);\n                } else if (typeof value === 'object') {\n                    this.updateObjectProperty(row, value);\n                }\n                break;\n            }\n        }\n    }\n}", "/**\n * Vector and Color Input Renderer\n * Creates specialized input fields for Vector3, Vector4 (Quaternion), and Color properties\n */\n\nexport class VectorColorInputRenderer {\n    constructor(utils) {\n        this.utils = utils || {};\n    }\n\n    /**\n     * Create a Vector3 input group\n     * @param {string} label - Property label\n     * @param {Object} value - Current vector3 value {x, y, z}\n     * @param {Function} onChange - Callback when value changes (axis, newValue)\n     * @param {string} entityId - Entity ID for input identification\n     * @param {Object} entity - Entity object\n     * @param {boolean} isScaleProperty - Whether this is a scale property\n     * @param {Object} scaleLockHandler - Scale lock handler instance (optional)\n     * @param {boolean} showResetButton - Whether to show reset button\n     * @returns {HTMLElement} - The vector3 input container\n     */\n    createVector3Input(label, value, onChange, entityId, entity = null, isScaleProperty = false, scaleLockHandler = null, showResetButton = false) {\n        const vectorContainer = document.createElement('div');\n        vectorContainer.style.display = 'flex';\n        vectorContainer.style.alignItems = 'center';\n        vectorContainer.style.width = '100%';\n\n        const vectorGroup = document.createElement('div');\n        vectorGroup.className = 'vector-group';\n\n        ['x', 'y', 'z'].forEach(axis => {\n            const axisLabel = document.createElement('span');\n            axisLabel.className = 'vector-label';\n            axisLabel.textContent = axis.toUpperCase();\n\n            const input = document.createElement('input');\n            input.type = 'number';\n            input.className = 'property-input number';\n            input.value = value[axis] || 0;\n            input.step = 'any';\n            input.id = `${entityId}_${label}.${axis}`;\n\n            input.onchange = () => {\n                if (isScaleProperty && scaleLockHandler && scaleLockHandler.isLocked(`${entityId}_${label}`)) {\n                    const newVector = scaleLockHandler.handleProportionalScale(\n                        `${entityId}_${label}`,\n                        value,\n                        axis,\n                        input.value\n                    );\n                    onChange('proportional', newVector);\n                } else {\n                    onChange(axis, input.value, value);\n                }\n            };\n\n            // VR input handler integration\n            if (entity && typeof inputHandler !== 'undefined') {\n                input.onclick = (e) => {\n                    inputHandler.inputFocusChanged(input, entity, `${label}.${axis}`);\n                };\n\n                if (inputHandler.focusComponent === entity && inputHandler.focusProperty === `${label}.${axis}`) {\n                    input.style.backgroundColor = \"#1e3764\";\n                    input.style.borderColor = \"#326689\";\n                }\n            }\n\n            vectorGroup.appendChild(axisLabel);\n            vectorGroup.appendChild(input);\n        });\n\n        vectorContainer.appendChild(vectorGroup);\n\n        // Add scale lock button for scale properties\n        if (isScaleProperty && scaleLockHandler) {\n            const scaleLockKey = `${entityId}_${label}`;\n            const lockButton = scaleLockHandler.createLockButton(scaleLockKey, value);\n            vectorGroup.appendChild(lockButton);\n        }\n\n        // Add reset button for position properties\n        if (showResetButton) {\n            const resetButton = this.createVector3ResetButton(label, () => {\n                const zeroVector = { x: 0, y: 0, z: 0 };\n                onChange('reset', zeroVector);\n            });\n            vectorGroup.appendChild(resetButton);\n        }\n\n        return vectorContainer;\n    }\n\n    /**\n     * Create a Vector4 input group (for Quaternion/rotation)\n     * @param {string} label - Property label\n     * @param {Object} value - Current quaternion value {x, y, z, w}\n     * @param {Function} onChange - Callback when value changes (axis, newValue)\n     * @param {string} entityId - Entity ID for input identification\n     * @param {Object} entity - Entity object\n     * @param {boolean} showResetButton - Whether to show reset button\n     * @returns {HTMLElement} - The vector4 input container\n     */\n    createVector4Input(label, value, onChange, entityId, entity = null, showResetButton = false) {\n        const { quaternionToEuler, formatNumber } = this.utils;\n\n        // Convert quaternion to Euler angles for display\n        const eulerAngles = quaternionToEuler ? quaternionToEuler(value) : { x: 0, y: 0, z: 0 };\n\n        const vectorContainer = document.createElement('div');\n        vectorContainer.style.display = 'flex';\n        vectorContainer.style.alignItems = 'center';\n        vectorContainer.style.width = '100%';\n\n        const vectorGroup = document.createElement('div');\n        vectorGroup.className = 'vector-group';\n\n        ['x', 'y', 'z'].forEach(axis => {\n            const axisLabel = document.createElement('span');\n            axisLabel.className = 'vector-label';\n            axisLabel.textContent = axis.toUpperCase();\n\n            const input = document.createElement('input');\n            input.type = 'number';\n            input.className = 'property-input number';\n            input.value = formatNumber ? formatNumber(eulerAngles[axis], 2) : eulerAngles[axis];\n            input.step = 'any';\n            input.id = `${entityId}_${label}.${axis}`;\n\n            input.onchange = () => onChange(axis, input.value, value);\n\n            // VR input handler integration for rotation\n            if (entity && typeof inputHandler !== 'undefined') {\n                input.onclick = (e) => {\n                    inputHandler.inputFocusChanged(input, entity, `localRotation.${axis}`);\n                };\n\n                if (inputHandler.focusComponent === entity && inputHandler.focusProperty === `localRotation.${axis}`) {\n                    input.style.backgroundColor = \"#1e3764\";\n                    input.style.borderColor = \"#326689\";\n                }\n            }\n\n            vectorGroup.appendChild(axisLabel);\n            vectorGroup.appendChild(input);\n        });\n\n        // Add reset button for rotation\n        if (showResetButton) {\n            const resetButton = this.createRotationResetButton(() => {\n                const zeroRotation = { x: 0, y: 0, z: 0, w: 1 };\n                onChange('reset', zeroRotation);\n            });\n            vectorGroup.appendChild(resetButton);\n        }\n\n        vectorContainer.appendChild(vectorGroup);\n        return vectorContainer;\n    }\n\n    /**\n     * Create a color input with preview and RGBA sliders\n     * @param {string} key - Property key\n     * @param {Object} value - Current color value {r, g, b, a}\n     * @param {string} componentId - Component ID\n     * @param {Object} component - Component object\n     * @param {Function} onChange - Callback when color changes\n     * @returns {HTMLElement} - The color input container\n     */\n    createColorInput(key, value, componentId, component = null, onChange) {\n        const { rgbToHex, hexToRgb } = this.utils;\n\n        const colorGroup = document.createElement('div');\n        colorGroup.className = 'color-group';\n\n        // Color preview\n        const preview = document.createElement('div');\n        preview.className = 'color-preview';\n        const swatch = document.createElement('div');\n        swatch.className = 'color-swatch';\n        swatch.style.backgroundColor = `rgba(${value.r * 255}, ${value.g * 255}, ${value.b * 255}, ${value.a || 1})`;\n        preview.appendChild(swatch);\n\n        // Hidden color input\n        const colorInput = document.createElement('input');\n        colorInput.type = 'color';\n        colorInput.style.display = 'none';\n\n        if (rgbToHex) {\n            colorInput.value = rgbToHex(value.r * 255, value.g * 255, value.b * 255);\n        }\n\n        colorInput.onchange = () => {\n            if (hexToRgb) {\n                const rgb = hexToRgb(colorInput.value);\n                const newColor = {\n                    r: rgb.r / 255,\n                    g: rgb.g / 255,\n                    b: rgb.b / 255,\n                    a: value.a || 1\n                };\n                swatch.style.backgroundColor = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${newColor.a})`;\n                if (onChange) {\n                    onChange(newColor);\n                }\n            }\n        };\n\n        // Enable color input handler for VR\n        if (component && typeof inputHandler !== 'undefined') {\n            preview.onclick = (e) => {\n                e.stopPropagation();\n                inputHandler.inputFocusChanged(colorInput, component, key);\n            };\n        }\n\n        preview.onmousedown = () => colorInput.click();\n\n        // RGBA inputs\n        const rgbaContainer = document.createElement('div');\n        rgbaContainer.className = 'vector-group';\n\n        ['r', 'g', 'b', 'a'].forEach(channel => {\n            const input = document.createElement('input');\n            input.type = 'number';\n            input.className = 'property-input number';\n            input.value = channel === 'a' ? (value[channel] || 1) : value[channel];\n            input.min = '0';\n            input.max = '1';\n            input.step = '0.01';\n\n            input.onchange = () => {\n                const newValue = parseFloat(input.value);\n                if (!isNaN(newValue)) {\n                    // Create a new color object instead of mutating the existing one\n                    const newColor = {\n                        r: channel === 'r' ? Math.max(0, Math.min(1, newValue)) : value.r,\n                        g: channel === 'g' ? Math.max(0, Math.min(1, newValue)) : value.g,\n                        b: channel === 'b' ? Math.max(0, Math.min(1, newValue)) : value.b,\n                        a: channel === 'a' ? Math.max(0, Math.min(1, newValue)) : (value.a || 1)\n                    };\n                    swatch.style.backgroundColor = `rgba(${newColor.r * 255}, ${newColor.g * 255}, ${newColor.b * 255}, ${newColor.a})`;\n                    if (onChange) {\n                        onChange(newColor);\n                    }\n                }\n            };\n\n            // VR input handler integration\n            if (component && typeof inputHandler !== 'undefined') {\n                input.onclick = (e) => {\n                    inputHandler.inputFocusChanged(input, component, `${key}.${channel}`);\n                };\n\n                if (inputHandler.focusComponent === component && inputHandler.focusProperty === `${key}.${channel}`) {\n                    input.style.backgroundColor = \"#1e3764\";\n                    input.style.borderColor = \"#326689\";\n                }\n            }\n\n            rgbaContainer.appendChild(input);\n        });\n\n        colorGroup.appendChild(preview);\n        colorGroup.appendChild(colorInput);\n        colorGroup.appendChild(rgbaContainer);\n\n        return colorGroup;\n    }\n\n    /**\n     * Create a reset button for Vector3 properties\n     * @param {string} label - Property label\n     * @param {Function} onReset - Callback when reset is clicked\n     * @returns {HTMLElement} - The reset button\n     */\n    createVector3ResetButton(label, onReset) {\n        const resetButton = document.createElement('button');\n        resetButton.className = 'position-reset-btn';\n        resetButton.style.marginLeft = '8px';\n        resetButton.style.padding = '4px 8px';\n        resetButton.style.background = '#2a2a2a';\n        resetButton.style.border = '1px solid #3a3a3a';\n        resetButton.style.borderRadius = '4px';\n        resetButton.style.color = '#999';\n        resetButton.style.cursor = 'pointer';\n        resetButton.style.fontSize = '14px';\n        resetButton.innerHTML = '\u2205';\n        resetButton.title = `Reset ${label} to zero`;\n\n        resetButton.onmousedown = (e) => {\n            e.stopPropagation();\n            if (onReset) {\n                onReset();\n            }\n        };\n\n        return resetButton;\n    }\n\n    /**\n     * Create a reset button for rotation properties\n     * @param {Function} onReset - Callback when reset is clicked\n     * @returns {HTMLElement} - The reset button\n     */\n    createRotationResetButton(onReset) {\n        const resetButton = document.createElement('button');\n        resetButton.className = 'rotation-reset-btn';\n        resetButton.style.marginLeft = '8px';\n        resetButton.style.padding = '4px 8px';\n        resetButton.style.background = '#2a2a2a';\n        resetButton.style.border = '1px solid #3a3a3a';\n        resetButton.style.borderRadius = '4px';\n        resetButton.style.color = '#999';\n        resetButton.style.cursor = 'pointer';\n        resetButton.style.fontSize = '14px';\n        resetButton.innerHTML = '\u2205';\n        resetButton.title = 'Reset rotation to zero';\n\n        resetButton.onmousedown = (e) => {\n            e.stopPropagation();\n            if (onReset) {\n                onReset();\n            }\n        };\n\n        return resetButton;\n    }\n\n    /**\n     * Check if a value is a Vector3 object\n     * @param {*} value - Value to check\n     * @returns {boolean} - True if value is a Vector3\n     */\n    isVector3Object(value) {\n        return value &&\n               typeof value === 'object' &&\n               'x' in value &&\n               'y' in value &&\n               'z' in value &&\n               !('w' in value);\n    }\n\n    /**\n     * Check if a value is a Quaternion object\n     * @param {*} value - Value to check\n     * @returns {boolean} - True if value is a Quaternion\n     */\n    isQuaternion(value) {\n        return value &&\n               typeof value === 'object' &&\n               'x' in value &&\n               'y' in value &&\n               'z' in value &&\n               'w' in value;\n    }\n\n    /**\n     * Check if a value is a Color object\n     * @param {*} value - Value to check\n     * @returns {boolean} - True if value is a Color\n     */\n    isColor(value) {\n        return value &&\n               typeof value === 'object' &&\n               'r' in value &&\n               'g' in value &&\n               'b' in value;\n    }\n}", "/**\n * Property Input Renderer\n * Factory for creating property input fields of various types\n */\n\nimport { VectorColorInputRenderer } from './vector-color-inputs.js';\n\nexport class PropertyInputRenderer {\n    constructor(utils, changeManager, scaleLockHandler = null) {\n        this.utils = utils || {};\n        this.changeManager = changeManager;\n        this.scaleLockHandler = scaleLockHandler;\n        this.vectorColorRenderer = new VectorColorInputRenderer(utils);\n    }\n\n    /**\n     * Create a simple property row for Entities and MonoBehaviors\n     * @param {string} label - Property label\n     * @param {*} value - Current value\n     * @param {string} type - Input type ('checkbox', 'text', 'dropdown', 'vector3', 'vector4', 'number')\n     * @param {Function} onChange - Callback when value changes\n     * @param {Object} enums - Enum values for dropdown (optional)\n     * @param {string} entityId - Entity ID (optional)\n     * @param {Object} entity - Entity object (optional)\n     * @returns {HTMLElement} - The property row element\n     */\n    createPropertyRow(label, value, type, onChange, enums = null, entityId = null, entity = null) {\n        const { formatPropertyName } = this.utils;\n\n        const row = document.createElement('div');\n        row.className = 'property-row';\n\n        const labelElement = document.createElement('span');\n        labelElement.className = 'property-label';\n        labelElement.textContent = formatPropertyName ? formatPropertyName(label) : label;\n\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        // Create appropriate input based on type\n        switch (type) {\n            case 'checkbox':\n                valueContainer.appendChild(this.createCheckboxInput(value, onChange, entityId, label));\n                break;\n            case 'text':\n                valueContainer.appendChild(this.createTextInput(value, onChange, entityId, label));\n                break;\n            case 'number':\n                valueContainer.appendChild(this.createNumberInput(value, onChange, entityId, label, entity));\n                break;\n            case 'dropdown':\n                valueContainer.appendChild(this.createDropdownInput(value, enums, onChange, entityId, label));\n                break;\n            case 'vector3':\n                this.createVector3Row(valueContainer, label, value, onChange, entityId, entity);\n                break;\n            case 'vector4':\n                this.createVector4Row(valueContainer, label, value, onChange, entityId, entity);\n                break;\n        }\n\n        row.appendChild(document.createElement('span')); // Empty space for button\n        row.appendChild(labelElement);\n        row.appendChild(valueContainer);\n\n        return row;\n    }\n\n    /**\n     * Render a property row for arbitrary Components\n     * @param {string} key - Property key\n     * @param {*} value - Property value\n     * @param {Object} component - Component object\n     * @param {number} componentIndex - Component index\n     * @param {number} propertyIndex - Property index\n     * @returns {HTMLElement} - The property row element\n     */\n    renderProperty(key, value, component, componentIndex, propertyIndex) {\n        const { formatPropertyName, parseBest, deepClone } = this.utils;\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n\n        const componentType = component.type;\n        const componentId = component.id;\n        const row = document.createElement('div');\n        row.className = 'property-row';\n        row.id = `prop_${componentId}_${key}`;\n\n        // Property button (for actions like reset)\n        const button = document.createElement('button');\n        button.className = 'property-button';\n        button.textContent = '\u21BB';\n        button.title = 'Reset to default';\n\n        // Property label\n        const label = document.createElement('span');\n        label.className = 'property-label';\n        label.textContent = formatPropertyName ? formatPropertyName(key) : key;\n        label.title = key;\n\n        // Property value container\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        const enums = component.enums ? component.enums() : {};\n        // log('property-input-renderer', 'rendering property', key, value, component, componentIndex, propertyIndex)\n        // Handle different property types\n        if (enums[key]) {\n            // Enum dropdown\n            valueContainer.appendChild(\n                this.createEnumDropdown(key, value, enums[key], componentId, ComponentPropertyChange)\n            );\n            valueContainer.style.width = '50%';\n        } else if (key === \"uid\") {\n            // User UID dropdown\n            valueContainer.appendChild(\n                this.createUserUidDropdown(value, componentId, key, ComponentPropertyChange)\n            );\n        } else if (typeof value === 'boolean') {\n            // Boolean checkbox\n            valueContainer.appendChild(\n                this.createComponentCheckbox(value, componentId, key, ComponentPropertyChange)\n            );\n        } else if (typeof value === 'number') {\n            // Number input\n            valueContainer.appendChild(\n                this.createComponentNumberInput(value, componentId, key, component, ComponentPropertyChange)\n            );\n        } else if (this.vectorColorRenderer.isVector3Object(value)) {\n            // Vector3 input\n            this.createComponentVector3Input(valueContainer, key, value, componentId, component, ComponentPropertyChange);\n        } else if (key === 'color' && this.vectorColorRenderer.isColor(value)) {\n            // Color input\n            const colorInput = this.vectorColorRenderer.createColorInput(key, value, componentId, component, (newColor) => {\n                if (ComponentPropertyChange) {\n                    const change = new ComponentPropertyChange(componentId, key, newColor, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                }\n            });\n            valueContainer.appendChild(colorInput);\n        } else {\n            // String or other types - text input\n            valueContainer.appendChild(\n                this.createComponentTextInput(value, componentId, key, ComponentPropertyChange)\n            );\n        }\n\n        row.appendChild(button);\n        row.appendChild(label);\n        row.appendChild(valueContainer);\n\n        return row;\n    }\n\n    /**\n     * Create a checkbox input\n     */\n    createCheckboxInput(value, onChange, entityId, label) {\n        const input = document.createElement('input');\n        input.type = 'checkbox';\n        input.className = 'checkbox-input';\n        input.checked = value;\n        if (entityId) {\n            input.id = `${entityId}_${label}`;\n        }\n        input.onchange = () => onChange(input.checked);\n        return input;\n    }\n\n    /**\n     * Create a text input\n     */\n    createTextInput(value, onChange, entityId, label) {\n        const input = document.createElement('input');\n        input.type = 'text';\n        input.className = 'property-input';\n        input.value = value || '';\n        if (entityId) {\n            input.id = `${entityId}_${label}`;\n        }\n        input.onchange = () => onChange(input.value);\n        return input;\n    }\n\n    /**\n     * Create a number input\n     */\n    createNumberInput(value, onChange, entityId, label, entity = null) {\n        const input = document.createElement('input');\n        input.type = 'number';\n        input.className = 'property-input number';\n        input.value = value || 0;\n        input.step = 'any';\n        if (entityId) {\n            input.id = `${entityId}_${label}`;\n        }\n        input.onchange = () => {\n            const numValue = parseFloat(input.value);\n            if (!isNaN(numValue)) {\n                onChange(numValue);\n            }\n        };\n\n        // VR input handler integration\n        if (entity && typeof inputHandler !== 'undefined') {\n            input.onclick = (e) => {\n                inputHandler.inputFocusChanged(input, entity, label);\n            };\n\n            if (inputHandler.focusComponent === entity && inputHandler.focusProperty === label) {\n                input.style.backgroundColor = \"#1e3764\";\n                input.style.borderColor = \"#326689\";\n            }\n        }\n\n        return input;\n    }\n\n    /**\n     * Create a dropdown input\n     */\n    createDropdownInput(value, enums, onChange, entityId, label) {\n        const select = document.createElement('select');\n        select.className = 'property-input';\n        if (entityId) {\n            select.id = `${entityId}_${label}`;\n        }\n\n        Object.entries(enums).forEach(([key, enumValue]) => {\n            const option = document.createElement('option');\n            option.value = enumValue;\n            option.textContent = key;\n            if (enumValue === value) {\n                option.selected = true;\n            }\n            select.appendChild(option);\n        });\n\n        select.onchange = () => onChange(select.value);\n        return select;\n    }\n\n    /**\n     * Create Vector3 row content\n     */\n    createVector3Row(valueContainer, label, value, onChange, entityId, entity) {\n        const isScaleProperty = label.toLowerCase().includes('scale');\n        const showResetButton = label === 'localPosition' || label === 'position';\n\n        const vector3Input = this.vectorColorRenderer.createVector3Input(\n            label,\n            value,\n            onChange,\n            entityId,\n            entity,\n            isScaleProperty,\n            this.scaleLockHandler,\n            showResetButton\n        );\n\n        valueContainer.appendChild(vector3Input);\n    }\n\n    /**\n     * Create Vector4 (Quaternion) row content\n     */\n    createVector4Row(valueContainer, label, value, onChange, entityId, entity) {\n        const showResetButton = label === 'localRotation' || label === 'rotation';\n\n        const vector4Input = this.vectorColorRenderer.createVector4Input(\n            label,\n            value,\n            onChange,\n            entityId,\n            entity,\n            showResetButton\n        );\n\n        valueContainer.appendChild(vector4Input);\n    }\n\n    /**\n     * Create enum dropdown for component\n     */\n    createEnumDropdown(key, value, enumValues, componentId, ComponentPropertyChange) {\n        const { parseBest } = this.utils;\n        const dropdown = document.createElement('select');\n        dropdown.className = 'property-input';\n        dropdown.style.width = '100%';\n\n        Object.keys(enumValues).forEach(enumKey => {\n            const option = document.createElement('option');\n            option.value = enumKey;\n            option.textContent = enumValues[enumKey];\n            if (value == enumKey) {\n                option.selected = true;\n            }\n            dropdown.appendChild(option);\n        });\n\n        dropdown.onchange = () => {\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(\n                    componentId,\n                    key,\n                    parseBest ? parseBest(dropdown.value) : dropdown.value,\n                    { source: 'ui' }\n                );\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        return dropdown;\n    }\n\n    /**\n     * Create user UID dropdown for component\n     */\n    createUserUidDropdown(value, componentId, key, ComponentPropertyChange) {\n        const dropdown = document.createElement('select');\n        dropdown.className = 'property-input';\n        dropdown.style.width = '100%';\n\n        // Add users from scene\n        if (typeof SM !== 'undefined' && SM.scene && SM.scene.users) {\n            Object.values(SM.scene.users).forEach(user => {\n                const option = document.createElement('option');\n                option.value = user.uid;\n                option.textContent = user.name;\n                if (value === user.uid) {\n                    option.selected = true;\n                }\n                dropdown.appendChild(option);\n            });\n        }\n\n        // Add null/empty option\n        const nullOption = document.createElement('option');\n        nullOption.value = \"\";\n        nullOption.textContent = \"None\";\n        if (value === \"\") {\n            nullOption.selected = true;\n        }\n        dropdown.appendChild(nullOption);\n\n        dropdown.onchange = () => {\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(componentId, key, dropdown.value, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        return dropdown;\n    }\n\n    /**\n     * Create checkbox for component property\n     */\n    createComponentCheckbox(value, componentId, key, ComponentPropertyChange) {\n        const input = document.createElement('input');\n        input.type = 'checkbox';\n        input.className = 'checkbox-input';\n        input.checked = value;\n\n        input.onchange = () => {\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(componentId, key, input.checked, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        return input;\n    }\n\n    /**\n     * Create number input for component property\n     */\n    createComponentNumberInput(value, componentId, key, component, ComponentPropertyChange) {\n        const input = document.createElement('input');\n        input.type = 'number';\n        input.className = 'property-input number';\n        input.value = value;\n        input.step = 'any';\n\n        input.onchange = () => {\n            const numValue = parseFloat(input.value);\n            if (!isNaN(numValue) && ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(componentId, key, numValue, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        // VR input handler integration\n        if (component && typeof inputHandler !== 'undefined') {\n            input.onclick = (e) => {\n                inputHandler.inputFocusChanged(input, component, key);\n            };\n\n            if (inputHandler.focusComponent === component && inputHandler.focusProperty === key) {\n                input.style.backgroundColor = \"#1e3764\";\n                input.style.borderColor = \"#326689\";\n            }\n        }\n\n        return input;\n    }\n\n    /**\n     * Create text input for component property\n     */\n    createComponentTextInput(value, componentId, key, ComponentPropertyChange) {\n        const input = document.createElement('input');\n        input.type = 'text';\n        input.className = 'property-input';\n        input.value = value?.toString() || '';\n\n        input.onchange = () => {\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(componentId, key, input.value, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        return input;\n    }\n\n    /**\n     * Create Vector3 input for component property\n     */\n    createComponentVector3Input(valueContainer, key, value, componentId, component, ComponentPropertyChange) {\n        const { deepClone } = this.utils;\n\n        const handleVector3Change = (axis, newValue) => {\n            if (!ComponentPropertyChange || !deepClone) return;\n\n            let newVector = deepClone(value);\n            const numValue = parseFloat(newValue);\n            if (!isNaN(numValue)) {\n                newVector[axis] = numValue;\n                const change = new ComponentPropertyChange(\n                    componentId,\n                    key,\n                    newVector,\n                    { source: 'ui', oldValue: value }\n                );\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        const vector3Input = this.vectorColorRenderer.createVector3Input(\n            key,\n            value,\n            handleVector3Change,\n            componentId,\n            component,\n            false,\n            null,\n            false\n        );\n\n        valueContainer.appendChild(vector3Input);\n    }\n}", "/**\n * Entity Properties Renderer\n * Renders the entity properties section with transforms, name, layer, etc.\n */\n\nimport { BanterLayers } from '../../../entity-components/index.js';\n\nexport class EntityPropertiesRenderer {\n    constructor(propertyInputRenderer, transformHandler, scaleLockHandler, utils, changeManager) {\n        this.propertyInputRenderer = propertyInputRenderer;\n        this.transformHandler = transformHandler;\n        this.scaleLockHandler = scaleLockHandler;\n        this.utils = utils || {};\n        this.changeManager = changeManager;\n    }\n\n    /**\n     * Create entity properties section\n     * @param {Object} entity - The entity to render properties for\n     * @param {boolean} showLoadSettings - Whether to show async toggle\n     * @returns {Promise<HTMLElement>} - The entity section element\n     */\n    async createEntityPropertiesSection(entity, showLoadSettings = false) {\n        if (!entity) return null;\n\n        const section = document.createElement('div');\n        section.className = 'entity-section';\n        section.dataset.panel = 'propertyPanelComponent';\n\n        // Create header\n        const header = this.createEntityHeader(entity);\n        section.appendChild(header);\n\n        // Create body\n        const body = await this.createEntityBody(entity, showLoadSettings);\n        section.appendChild(body);\n\n        return section;\n    }\n\n    /**\n     * Create entity header with transform mode toggle\n     */\n    createEntityHeader(entity) {\n        const header = document.createElement('div');\n        header.className = 'component-header perm';\n\n        const headerContent = document.createElement('div');\n        headerContent.style.display = 'flex';\n        headerContent.style.justifyContent = 'space-between';\n        headerContent.style.alignItems = 'center';\n        headerContent.style.width = '100%';\n\n        // Title\n        const titleDiv = document.createElement('div');\n        titleDiv.innerHTML = `\n            <span class=\"component-name\">Entity</span>\n            <span class=\"component-type\">${entity.id}</span>\n        `;\n\n        // Transform mode toggle button\n        const transformToggleBtn = this.transformHandler.createModeToggleButton(() => {\n            // Trigger re-render on toggle\n            if (typeof SM !== 'undefined' && SM.selectedEntity) {\n                window.dispatchEvent(new CustomEvent('transform-mode-changed'));\n            }\n        });\n\n        headerContent.appendChild(titleDiv);\n        headerContent.appendChild(transformToggleBtn);\n        header.appendChild(headerContent);\n\n        return header;\n    }\n\n    /**\n     * Create entity body with all properties\n     */\n    async createEntityBody(entity, showLoadSettings) {\n        const body = document.createElement('div');\n        body.className = 'component-body';\n\n        // Add async toggle if enabled\n        if (showLoadSettings) {\n            const asyncRow = this.createAsyncToggleRow(entity);\n            body.appendChild(asyncRow);\n        }\n\n        // Name property\n        const nameRow = this.createNameRow(entity);\n        body.appendChild(nameRow);\n\n        // Layer property\n        const layerRow = await this.createLayerRow(entity);\n        body.appendChild(layerRow);\n\n        // Active property\n        const activeRow = this.createActiveRow(entity);\n        body.appendChild(activeRow);\n\n        // Transform properties\n        const transformRows = this.createTransformRows(entity);\n        transformRows.forEach(row => body.appendChild(row));\n\n        return body;\n    }\n\n    /**\n     * Create name property row with inline editing\n     */\n    createNameRow(entity) {\n        const { EntityPropertyChange } = this.changeManager.changeTypes || {};\n\n        const nameRow = document.createElement('div');\n        nameRow.className = 'property-row';\n\n        const nameLabel = document.createElement('span');\n        nameLabel.className = 'property-label';\n        nameLabel.textContent = 'Name';\n        nameRow.appendChild(nameLabel);\n\n        const inputName = document.createElement('input');\n        inputName.type = 'text';\n        inputName.className = 'name-input';\n        inputName.value = entity.name;\n        inputName.style.width = '100%';\n\n        const handleRename = () => {\n            const newName = inputName.value.trim();\n            if (newName && newName !== entity.name && EntityPropertyChange) {\n                const change = new EntityPropertyChange(entity.id, 'name', newName, { source: 'ui' });\n                this.changeManager.applyChange(change);\n\n                // Update selection after rename\n                setTimeout(() => {\n                    if (typeof SM !== 'undefined') {\n                        SM.selectEntity(entity.parentId + \"/\" + newName);\n                    }\n                }, 70);\n            }\n        };\n\n        inputName.addEventListener('change', handleRename);\n        inputName.addEventListener('blur', handleRename);\n\n        nameRow.appendChild(inputName);\n        return nameRow;\n    }\n\n    /**\n     * Create layer property dropdown\n     */\n    async createLayerRow(entity) {\n        const { EntityPropertyChange } = this.changeManager.changeTypes || {};\n\n        return this.propertyInputRenderer.createPropertyRow(\n            'layer',\n            entity.layer,\n            'dropdown',\n            (value) => {\n                if (EntityPropertyChange) {\n                    const change = new EntityPropertyChange(entity.id, 'layer', value, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                }\n            },\n            BanterLayers\n        );\n    }\n\n    /**\n     * Create active property checkbox\n     */\n    createActiveRow(entity) {\n        const { EntityPropertyChange } = this.changeManager.changeTypes || {};\n\n        return this.propertyInputRenderer.createPropertyRow(\n            'active',\n            entity.active,\n            'checkbox',\n            (value) => {\n                if (EntityPropertyChange) {\n                    const change = new EntityPropertyChange(entity.id, 'active', value, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                }\n            }\n        );\n    }\n\n    /**\n     * Create transform property rows (position, rotation, scale)\n     */\n    createTransformRows(entity) {\n        const { EntityPropertyChange } = this.changeManager.changeTypes || {};\n        const { deepClone, quaternionToEuler, eulerToQuaternion } = this.utils;\n\n        const rows = [];\n\n        // Get transform values and labels based on mode\n        const transforms = this.transformHandler.getTransformValues(entity);\n        const labels = this.transformHandler.getTransformLabels();\n\n        // Position row\n        const positionRow = this.propertyInputRenderer.createPropertyRow(\n            labels.positionLabel,\n            transforms.position,\n            'vector3',\n            (axis, value) => {\n                if (axis === 'reset') {\n                    // Reset position\n                    const change = new EntityPropertyChange(\n                        entity.id,\n                        'localPosition',\n                        { x: 0, y: 0, z: 0 },\n                        { source: 'ui' }\n                    );\n                    this.changeManager.applyChange(change);\n                } else {\n                    // Update specific axis\n                    let newValue = deepClone ? deepClone(transforms.position) : { ...transforms.position };\n                    newValue[axis] = parseFloat(value);\n                    const change = new EntityPropertyChange(\n                        entity.id,\n                        'localPosition',\n                        newValue,\n                        { source: 'ui', oldValue: transforms.position }\n                    );\n                    this.changeManager.applyChange(change);\n                }\n            },\n            null,\n            entity.id,\n            entity\n        );\n        rows.push(positionRow);\n\n        // Rotation row\n        const rotationRow = this.propertyInputRenderer.createPropertyRow(\n            labels.rotationLabel,\n            transforms.rotation,\n            'vector4',\n            (axis, value) => {\n                if (axis === 'reset') {\n                    // Reset rotation\n                    const change = new EntityPropertyChange(\n                        entity.id,\n                        'localRotation',\n                        { x: 0, y: 0, z: 0, w: 1 },\n                        { source: 'ui' }\n                    );\n                    this.changeManager.applyChange(change);\n                } else {\n                    // Update specific axis (convert from Euler to Quaternion)\n                    let currentEntity = typeof SM !== 'undefined' ? SM.getSelectedEntity() : entity;\n                    const currentQuaternion = this.transformHandler.getMode() === 'global'\n                        ? currentEntity.transform.rotation\n                        : currentEntity.transform.localRotation;\n\n                    const eulerAngles = quaternionToEuler ? quaternionToEuler(currentQuaternion) : { x: 0, y: 0, z: 0 };\n                    const numValue = parseFloat(value);\n\n                    if (!isNaN(numValue)) {\n                        const oldValue = deepClone ?\n                            deepClone(this.transformHandler.getMode() === 'global' ?\n                                currentEntity.transform.rotation :\n                                currentEntity.transformVal(\"localRotation\")) :\n                            { ...currentQuaternion };\n\n                        eulerAngles[axis] = numValue;\n                        const newQuaternion = eulerToQuaternion ? eulerToQuaternion(eulerAngles) : currentQuaternion;\n\n                        const change = new EntityPropertyChange(\n                            entity.id,\n                            'localRotation',\n                            newQuaternion,\n                            { source: 'ui', oldValue: oldValue }\n                        );\n                        this.changeManager.applyChange(change);\n                    }\n                }\n            },\n            null,\n            entity.id,\n            entity\n        );\n        rows.push(rotationRow);\n\n        // Scale row\n        const scaleRow = this.propertyInputRenderer.createPropertyRow(\n            labels.scaleLabel,\n            transforms.scale,\n            'vector3',\n            (axis, value) => {\n                const scaleLockKey = `${entity.id}_localScale`;\n\n                if (axis === 'proportional') {\n                    // Proportional scaling - value is the complete new vector\n                    const change = new EntityPropertyChange(\n                        entity.id,\n                        'localScale',\n                        value,\n                        { source: 'ui', oldValue: transforms.scale }\n                    );\n                    this.changeManager.applyChange(change);\n\n                    // Update the inputs after proportional change\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('update-transform-display'));\n                    }, 50);\n                } else {\n                    // Single axis change\n                    if (this.scaleLockHandler && this.scaleLockHandler.isLocked(scaleLockKey)) {\n                        // Handle proportional scaling\n                        const newVector = this.scaleLockHandler.handleProportionalScale(\n                            scaleLockKey,\n                            transforms.scale,\n                            axis,\n                            value\n                        );\n\n                        const change = new EntityPropertyChange(\n                            entity.id,\n                            'localScale',\n                            newVector,\n                            { source: 'ui', oldValue: transforms.scale }\n                        );\n                        this.changeManager.applyChange(change);\n\n                        // Update display\n                        setTimeout(() => {\n                            window.dispatchEvent(new CustomEvent('update-transform-display'));\n                        }, 50);\n                    } else {\n                        // Normal single axis change\n                        let newValue = deepClone ? deepClone(transforms.scale) : { ...transforms.scale };\n                        newValue[axis] = parseFloat(value);\n\n                        const change = new EntityPropertyChange(\n                            entity.id,\n                            'localScale',\n                            newValue,\n                            { source: 'ui', oldValue: transforms.scale }\n                        );\n                        this.changeManager.applyChange(change);\n                    }\n                }\n            },\n            null,\n            entity.id,\n            entity\n        );\n        rows.push(scaleRow);\n\n        return rows;\n    }\n\n    /**\n     * Create async toggle row for entity\n     */\n    createAsyncToggleRow(entity) {\n        const row = document.createElement('div');\n        row.className = 'async-toggle-row';\n\n        const label = document.createElement('span');\n        label.className = 'property-label';\n        label.textContent = 'Async';\n        label.style.fontWeight = 'bold';\n        label.style.flex = \"none\";\n\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        const input = document.createElement('input');\n        input.type = 'checkbox';\n        input.className = 'checkbox-input';\n        input.style.flex = \"none\";\n\n        // Check entity.loadAsync\n        input.checked = entity.loadAsync || false;\n\n        input.onchange = () => {\n            console.log(\"loadAsync changed\", input.checked);\n            entity.loadAsync = input.checked;\n        };\n\n        valueContainer.appendChild(input);\n\n        row.appendChild(document.createElement('span')); // Empty space for button\n        row.appendChild(label);\n        row.appendChild(valueContainer);\n\n        return row;\n    }\n}", "/**\n * Component Renderer\n * Renders generic component sections with properties and actions\n */\n\nexport class ComponentRenderer {\n    constructor(propertyInputRenderer, utils, changeManager) {\n        this.propertyInputRenderer = propertyInputRenderer;\n        this.utils = utils || {};\n        this.changeManager = changeManager;\n        this.collapsedComponents = new Set();\n    }\n\n    /**\n     * Render a component\n     * @param {Object} component - Component to render\n     * @param {number} index - Component index in entity's component array\n     * @param {number} totalComponents - Total number of components\n     * @param {string} entityId - Parent entity ID\n     * @param {boolean} showLoadSettings - Whether to show async toggle\n     * @returns {HTMLElement} - The component section element\n     */\n    renderComponent(component, index, totalComponents, entityId, showLoadSettings = false) {\n        const section = document.createElement('div');\n        section.className = 'component-section';\n        section.dataset.panel = 'propertyPanelComponent';\n        section.dataset.componentId = component.id;\n        section.dataset.componentIndex = index;\n\n        // Create header\n        const header = this.createComponentHeader(component, index, totalComponents, entityId);\n        section.appendChild(header);\n\n        // Create body\n        const body = this.createComponentBody(component, showLoadSettings);\n        section.appendChild(body);\n\n        // Setup toggle functionality\n        this.setupToggleFunctionality(header, body, entityId, component, index);\n\n        return section;\n    }\n\n    /**\n     * Create component header with actions\n     */\n    createComponentHeader(component, index, totalComponents, entityId) {\n        const header = document.createElement('div');\n        header.className = 'component-header';\n\n        const headerContent = document.createElement('div');\n        headerContent.style.display = 'flex';\n        headerContent.style.alignItems = 'center';\n        headerContent.style.width = '100%';\n        headerContent.style.justifyContent = 'space-between';\n\n        // Title\n        const titleDiv = document.createElement('div');\n        titleDiv.innerHTML = `\n            <span class=\"component-name\">${component.type}</span>\n            <span class=\"component-type\">${component.id}</span>\n        `;\n\n        // Actions\n        const actionsDiv = this.createActionButtons(component, index, totalComponents, entityId);\n\n        headerContent.appendChild(titleDiv);\n        headerContent.appendChild(actionsDiv);\n        header.appendChild(headerContent);\n\n        return header;\n    }\n\n    /**\n     * Create action buttons for component header\n     */\n    createActionButtons(component, index, totalComponents, entityId) {\n        const { ReorderComponentChange, RemoveComponentChange } = this.changeManager.changeTypes || {};\n        const { confirm } = this.utils;\n\n        const actionsDiv = document.createElement('div');\n        actionsDiv.style.display = 'flex';\n        actionsDiv.style.alignItems = 'center';\n        actionsDiv.style.gap = '8px';\n\n        // Up arrow - hide if component is at the top\n        if (index > 0) {\n            const upBtn = document.createElement('button');\n            upBtn.className = 'component-reorder-btn';\n            upBtn.innerHTML = '\u2191';\n            upBtn.title = 'Move up';\n            upBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index - 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    // Trigger re-render\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(upBtn);\n        }\n\n        // Down arrow - hide if component is the last one\n        if (index < totalComponents - 1) {\n            const downBtn = document.createElement('button');\n            downBtn.className = 'component-reorder-btn';\n            downBtn.innerHTML = '\u2193';\n            downBtn.title = 'Move down';\n            downBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index + 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    // Trigger re-render\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(downBtn);\n        }\n\n        // Delete button\n        const deleteBtn = document.createElement('button');\n        deleteBtn.className = 'component-delete-btn';\n        deleteBtn.innerHTML = '\u00D7';\n        deleteBtn.title = 'Delete component';\n        deleteBtn.onmousedown = async (e) => {\n            e.stopPropagation();\n            const shouldDelete = confirm ? await confirm(`Delete ${component.type} component?`) : window.confirm(`Delete ${component.type} component?`);\n            if (shouldDelete && RemoveComponentChange) {\n                const change = new RemoveComponentChange(entityId, component.id, { source: 'ui' });\n                this.changeManager.applyChange(change);\n                // Trigger re-render\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('component-deleted'));\n                }, 100);\n            }\n        };\n        actionsDiv.appendChild(deleteBtn);\n\n        // Toggle span\n        const toggleSpan = document.createElement('span');\n        toggleSpan.className = 'component-toggle';\n        toggleSpan.textContent = '\u25BC';\n        actionsDiv.appendChild(toggleSpan);\n\n        return actionsDiv;\n    }\n\n    /**\n     * Create component body with properties\n     */\n    createComponentBody(component, showLoadSettings) {\n        const body = document.createElement('div');\n        body.className = 'component-body';\n\n        // Add async loading toggle if Load Settings is enabled\n        if (showLoadSettings) {\n            const asyncRow = this.createAsyncToggleRow(component);\n            body.appendChild(asyncRow);\n        }\n\n        // Add component controls (buttons from _controls)\n        if (component._controls) {\n            this.renderComponentControls(component._controls, component, body);\n        }\n\n        // Render properties\n        if (component.properties) {\n            Object.entries(component.properties).forEach(([key, value], propIndex) => {\n                const propertyRow = this.propertyInputRenderer.renderProperty(\n                    key,\n                    value,\n                    component,\n                    0,  // componentIndex not needed here\n                    propIndex\n                );\n                body.appendChild(propertyRow);\n            });\n        }\n\n        return body;\n    }\n\n    /**\n     * Render component controls (custom buttons)\n     */\n    renderComponentControls(controls, component, body) {\n        if (!controls || !controls.controls) return;\n\n        Object.values(controls.controls).forEach(control => {\n            if (control.input === \"button\") {\n                const button = document.createElement('button');\n                button.className = 'property-button prop-control-btn';\n                button.textContent = control.label;\n                button.id = `${component.id}_${control.id}`;\n                button.onmousedown = control.callback;\n                body.appendChild(button);\n            }\n        });\n    }\n\n    /**\n     * Create async toggle row for component\n     */\n    createAsyncToggleRow(component) {\n        const row = document.createElement('div');\n        row.className = 'async-toggle-row';\n\n        const label = document.createElement('span');\n        label.className = 'property-label';\n        label.textContent = 'Async';\n        label.style.fontWeight = 'bold';\n        label.style.flex = \"none\";\n\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        const input = document.createElement('input');\n        input.type = 'checkbox';\n        input.className = 'checkbox-input';\n        input.style.flex = \"none\";\n\n        // Check component.loadAsync\n        input.checked = component.loadAsync || false;\n\n        input.onchange = () => {\n            console.log(\"loadAsync changed\", input.checked);\n            component.loadAsync = input.checked;\n        };\n\n        valueContainer.appendChild(input);\n\n        row.appendChild(document.createElement('span')); // Empty space for button\n        row.appendChild(label);\n        row.appendChild(valueContainer);\n\n        return row;\n    }\n\n    /**\n     * Setup toggle functionality for expand/collapse\n     */\n    setupToggleFunctionality(header, body, entityId, component, index) {\n        const componentKey = `${entityId}_${component.type}_${index}`;\n        let isExpanded = !this.collapsedComponents.has(componentKey);\n\n        // Apply initial state\n        body.style.display = isExpanded ? 'block' : 'none';\n        const toggle = header.querySelector('.component-toggle');\n        if (toggle) {\n            toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n        }\n\n        header.onmousedown = () => {\n            isExpanded = !isExpanded;\n            body.style.display = isExpanded ? 'block' : 'none';\n            if (toggle) {\n                toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n            }\n\n            // Save collapsed state\n            if (isExpanded) {\n                this.collapsedComponents.delete(componentKey);\n            } else {\n                this.collapsedComponents.add(componentKey);\n            }\n\n            // Notify about collapse state change\n            window.dispatchEvent(new CustomEvent('component-collapse-changed'));\n        };\n    }\n\n    /**\n     * Get the set of collapsed components\n     * @returns {Set} - Set of collapsed component keys\n     */\n    getCollapsedComponents() {\n        return this.collapsedComponents;\n    }\n\n    /**\n     * Set the collapsed components\n     * @param {Set} collapsedSet - Set of component keys to collapse\n     */\n    setCollapsedComponents(collapsedSet) {\n        this.collapsedComponents = new Set(collapsedSet);\n    }\n\n    /**\n     * Clear all collapsed states\n     */\n    clearCollapsedStates() {\n        this.collapsedComponents.clear();\n    }\n\n    /**\n     * Collapse all components for an entity\n     * @param {string} entityId - The entity ID\n     * @param {Array} components - Array of components\n     */\n    collapseAll(entityId, components) {\n        components.forEach((component, index) => {\n            const componentKey = `${entityId}_${component.type}_${index}`;\n            this.collapsedComponents.add(componentKey);\n        });\n    }\n}", "/**\n * ScriptRunner Renderer\n * Specialized renderer for ScriptRunner components with script management\n */\n\nimport { VectorColorInputRenderer } from './vector-color-inputs.js';\n\nexport class ScriptRunnerRenderer {\n    constructor(propertyInputRenderer, utils, changeManager) {\n        this.propertyInputRenderer = propertyInputRenderer;\n        this.utils = utils || {};\n        this.changeManager = changeManager;\n        this.vectorColorRenderer = new VectorColorInputRenderer(utils);\n        this.collapsedComponents = new Set();\n    }\n\n    /**\n     * Render ScriptRunner component with special handling\n     * @param {Object} component - ScriptRunner component\n     * @param {number} index - Component index in entity's component array\n     * @param {number} totalComponents - Total number of components\n     * @param {string} entityId - Parent entity ID\n     * @returns {HTMLElement} - The component section element\n     */\n    renderScriptRunnerComponent(component, index, totalComponents, entityId) {\n        const section = document.createElement('div');\n        section.className = 'component-section';\n        section.dataset.panel = 'propertyPanelComponent';\n        section.dataset.componentId = component.id;\n        section.dataset.componentIndex = index;\n\n        // Create header\n        const header = this.createScriptRunnerHeader(component, index, totalComponents, entityId);\n        section.appendChild(header);\n\n        // Create body\n        const body = this.createScriptRunnerBody(component, entityId);\n        section.appendChild(body);\n\n        // Setup toggle functionality\n        this.setupToggleFunctionality(header, body, entityId, component, index);\n\n        return section;\n    }\n\n    /**\n     * Create ScriptRunner header with special actions\n     */\n    createScriptRunnerHeader(component, index, totalComponents, entityId) {\n        const header = document.createElement('div');\n        header.className = 'component-header runner-header';\n\n        const headerContent = document.createElement('div');\n        headerContent.style.display = 'flex';\n        headerContent.style.alignItems = 'center';\n        headerContent.style.width = '100%';\n        headerContent.style.justifyContent = 'space-between';\n\n        // Title with owner\n        const titleDiv = document.createElement('div');\n        const ownerColor = this.getUserColor(component.properties.owner);\n        titleDiv.innerHTML = `\n            <span class=\"component-name\">ScriptRunner</span>\n            <span class=\"component-type\">${component.id}</span>\n            <span class=\"component-owner\" style=\"color:${ownerColor}\">${component.properties.owner}</span>\n            <span class=\"component-status\" style=\"font-size:10px; margin-left:30px; color:#${component.ctx?._running ? '00b100' : 'b10000'};\">${component.ctx?._running ? 'Running' : 'Stopped'}</span>\n        `;\n\n        // Actions\n        const actionsDiv = this.createScriptRunnerActions(component, index, totalComponents, entityId);\n\n        headerContent.appendChild(titleDiv);\n        headerContent.appendChild(actionsDiv);\n        header.appendChild(headerContent);\n\n        return header;\n    }\n\n    /**\n     * Get user color for display\n     */\n    getUserColor(owner) {\n        // This would normally come from a user color mapping\n        // For now, return a default color\n        if (typeof getUserColor === 'function') {\n            return getUserColor(owner);\n        }\n        return '#888';\n    }\n\n    /**\n     * Create ScriptRunner-specific action buttons\n     */\n    createScriptRunnerActions(component, index, totalComponents, entityId) {\n        const { ReorderComponentChange, RemoveComponentChange } = this.changeManager.changeTypes || {};\n        const { confirm } = this.utils;\n\n        const actionsDiv = document.createElement('div');\n        actionsDiv.style.display = 'flex';\n        actionsDiv.style.alignItems = 'center';\n        actionsDiv.style.gap = '8px';\n\n        \n\n        // Refresh button for ScriptRunner\n        const refreshBtn = document.createElement('button');\n        refreshBtn.className = 'component-reorder-btn';\n        refreshBtn.innerHTML = '\u21BB';\n        refreshBtn.title = 'Refresh script';\n        refreshBtn.onmousedown = (e) => {\n            e.stopPropagation();\n            if (component.Refresh) {\n                component.Refresh();\n            }\n        };\n\n\n        actionsDiv.appendChild(refreshBtn);\n\n        // Up arrow - hide if component is at the top\n        if (index > 0) {\n            const upBtn = document.createElement('button');\n            upBtn.className = 'component-reorder-btn';\n            upBtn.innerHTML = '\u2191';\n            upBtn.title = 'Move up';\n            upBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index - 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(upBtn);\n        }\n\n        // Down arrow - hide if component is the last one\n        if (index < totalComponents - 1) {\n            const downBtn = document.createElement('button');\n            downBtn.className = 'component-reorder-btn';\n            downBtn.innerHTML = '\u2193';\n            downBtn.title = 'Move down';\n            downBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index + 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(downBtn);\n        }\n\n        // Delete button\n        const deleteBtn = document.createElement('button');\n        deleteBtn.className = 'component-delete-btn';\n        deleteBtn.innerHTML = '\u00D7';\n        deleteBtn.title = 'Delete component';\n        deleteBtn.onmousedown = async (e) => {\n            e.stopPropagation();\n            const shouldDelete = confirm ? await confirm(`Delete ScriptRunner component?`) : window.confirm(`Delete ScriptRunner component?`);\n            if (shouldDelete && RemoveComponentChange) {\n                const change = new RemoveComponentChange(entityId, component.id, { source: 'ui' });\n                this.changeManager.applyChange(change);\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('component-deleted'));\n                }, 100);\n            }\n        };\n        actionsDiv.appendChild(deleteBtn);\n\n        // Toggle span\n        const toggleSpan = document.createElement('span');\n        toggleSpan.className = 'component-toggle';\n        toggleSpan.textContent = '\u25BC';\n        actionsDiv.appendChild(toggleSpan);\n\n        return actionsDiv;\n    }\n\n    /**\n     * Create ScriptRunner body with script properties and vars\n     */\n    createScriptRunnerBody(component, entityId) {\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n\n        const body = document.createElement('div');\n        body.className = 'component-body';\n\n        // Name property\n        const nameRow = this.propertyInputRenderer.createPropertyRow(\n            'Name',\n            component.properties.name || 'myScript',\n            'text',\n            (value) => {\n                component.properties.name = value;\n                if (ComponentPropertyChange) {\n                    const change = new ComponentPropertyChange(component.id, 'name', value, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                }\n            }\n        );\n        body.appendChild(nameRow);\n\n\n      \n\n\n        // File property with dropdown\n        const fileRow = this.createFileSelectionRow(component, entityId);\n        body.appendChild(fileRow);\n\n        \n        const hotreloadRow = this.propertyInputRenderer.createPropertyRow(\n            'Hotreload',\n            (component.properties.hotreload),\n            'checkbox',\n            (value) => {\n                log(\"scriptrunner\", \"hotreload\", value);\n                //component.properties.hotreload = value;\n                const change = new ComponentPropertyChange(component.id, 'hotreload', value, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        );\n        body.appendChild(hotreloadRow);\n\n\n        // Render vars if any\n        if (component.ctx && component.ctx.vars && Object.keys(component.ctx.vars).length > 0) {\n            const varsHeader = this.createVarsHeader();\n            body.appendChild(varsHeader);\n\n            // Render each variable\n            Object.entries(component.ctx.vars).forEach(([varName, varValue]) => {\n                const varRow = this.renderScriptRunnerVar(varName, varValue, component);\n                body.appendChild(varRow);\n            });\n        }\n\n\n\n        // Add Edit Script button\n        if (component.properties.file) {\n            const editButton = this.createEditScriptButton(component);\n            body.appendChild(editButton);\n        }\n\n        return body;\n    }\n\n    /**\n     * Create file selection dropdown row\n     */\n    createFileSelectionRow(component, entityId) {\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n\n        const fileRow = document.createElement('div');\n        fileRow.className = 'property-row';\n\n        const fileLabel = document.createElement('span');\n        fileLabel.className = 'property-label';\n        fileLabel.textContent = 'Script File';\n\n        const fileContainer = document.createElement('div');\n        fileContainer.className = 'property-value';\n\n        const fileSelect = document.createElement('select');\n        fileSelect.className = 'property-input';\n        fileSelect.style.width = '100%';\n\n        // Add empty option\n        const emptyOption = document.createElement('option');\n        emptyOption.value = '';\n        emptyOption.textContent = '-- Select Script --';\n        fileSelect.appendChild(emptyOption);\n\n        // Get available scripts from inventory\n        if (typeof window !== 'undefined' && window.inventory) {\n            const scripts = SM.getAllScriptAssets().map(x=>x.properties);\n\n            // Add current script if it exists\n            const addScriptOption = (script) => {\n                if (!script) return;\n                const option = document.createElement('option');\n                option.value = script.name;\n                option.textContent = `${script.name} (by ${script.author})`;\n                if (component.properties.file === script.name) {\n                    option.selected = true;\n                }\n                fileSelect.appendChild(option);\n            };\n\n            // Add current file first if it exists\n            // if (window.inventory.items && window.inventory.items[component.properties.file]) {\n                // addScriptOption(window.inventory.items[component.properties.file]);\n            // }\n\n            // Add other available scripts\n            scripts.forEach(script => {\n                // if (script.name !== component.properties.file) {\n                    addScriptOption(script);\n                //}\n            });\n        }\n\n        fileSelect.onchange = async () => {\n            if (component.properties.file === fileSelect.value) return;\n\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(component.id, 'file', fileSelect.value, { source: 'ui' });\n                this.changeManager.applyChange(change);\n\n                // Trigger re-render to show vars\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('scriptrunner-file-changed', { detail: { entityId } }));\n                }, 100);\n            }\n        };\n\n        fileContainer.appendChild(fileSelect);\n        fileRow.appendChild(document.createElement('span')); // Empty space for button\n        fileRow.appendChild(fileLabel);\n        fileRow.appendChild(fileContainer);\n\n        return fileRow;\n    }\n\n    /**\n     * Create vars header\n     */\n    createVarsHeader() {\n        const varsHeader = document.createElement('div');\n        varsHeader.className = 'property-row';\n        varsHeader.style.marginTop = '12px';\n        varsHeader.style.fontWeight = 'bold';\n        varsHeader.innerHTML = '<span></span><span>Script Variables</span><span></span>';\n        return varsHeader;\n    }\n\n    /**\n     * Render a ScriptRunner variable\n     */\n    renderScriptRunnerVar(varName, varValue, component) {\n        const { ScriptRunnerVarChange } = this.changeManager.changeTypes || {};\n        const { formatPropertyName } = this.utils;\n\n        const row = document.createElement('div');\n        row.className = 'property-row';\n\n        const label = document.createElement('span');\n        label.className = 'property-label';\n        label.textContent = formatPropertyName ? formatPropertyName(varName) : varName;\n        label.title = varName;\n\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        if(!varValue.type){\n            if(varValue.value === true || varValue.value === false){\n                varValue.type = 'boolean';\n            } else if(!isNaN(varValue.value)){\n                varValue.type = 'number';\n            } else {\n                varValue.type = 'string';\n            }\n        }\n\n        // Determine type and render appropriate input\n        if (varValue.type === 'boolean') {\n            const input = document.createElement('input');\n            input.type = 'checkbox';\n            input.className = 'checkbox-input';\n            input.checked = varValue.value;\n            input.onchange = () => {\n                if (ScriptRunnerVarChange) {\n                    const change = new ScriptRunnerVarChange(\n                        component.id,\n                        varName,\n                        { type: 'boolean', value: input.checked },\n                        { source: 'ui' }\n                    );\n                    this.changeManager.applyChange(change);\n                }\n            };\n            valueContainer.appendChild(input);\n\n        } else if (varValue.type === 'number') {\n            const input = document.createElement('input');\n            input.type = 'number';\n            input.className = 'property-input number';\n            input.value = varValue.value;\n            input.step = 'any';\n            input.onchange = () => {\n                const numValue = parseFloat(input.value);\n                if (!isNaN(numValue) && ScriptRunnerVarChange) {\n                    const change = new ScriptRunnerVarChange(\n                        component.id,\n                        varName,\n                        { type: 'number', value: numValue },\n                        { source: 'ui' }\n                    );\n                    this.changeManager.applyChange(change);\n                }\n            };\n            valueContainer.appendChild(input);\n\n        } else if (varValue.type === 'vector3') {\n            // Vector3 variable\n            const vectorGroup = document.createElement('div');\n            vectorGroup.className = 'vector-group';\n\n            ['x', 'y', 'z'].forEach(axis => {\n                const axisLabel = document.createElement('span');\n                axisLabel.className = 'vector-label';\n                axisLabel.textContent = axis.toUpperCase();\n\n                const input = document.createElement('input');\n                input.type = 'number';\n                input.className = 'property-input number';\n                input.value = varValue.value[axis] || 0;\n                input.step = 'any';\n                input.onchange = () => {\n                    const numValue = parseFloat(input.value);\n                    if (!isNaN(numValue) && ScriptRunnerVarChange) {\n                        varValue.value[axis] = numValue;\n                        const change = new ScriptRunnerVarChange(\n                            component.id,\n                            varName,\n                            { type: 'vector3', value: varValue.value },\n                            { source: 'ui' }\n                        );\n                        this.changeManager.applyChange(change);\n                    }\n                };\n\n                vectorGroup.appendChild(axisLabel);\n                vectorGroup.appendChild(input);\n            });\n\n            valueContainer.appendChild(vectorGroup);\n\n        } else if (varValue.type === 'color') {\n            // Color variable\n            const colorInput = this.vectorColorRenderer.createColorInput(\n                varName,\n                varValue.value,\n                component.id,\n                component,\n                (newColor) => {\n                    if (ScriptRunnerVarChange) {\n                        const change = new ScriptRunnerVarChange(\n                            component.id,\n                            varName,\n                            { type: 'color', value: newColor },\n                            { source: 'ui' }\n                        );\n                        this.changeManager.applyChange(change);\n                    }\n                },\n                true  // isScriptRunnerVar\n            );\n            valueContainer.appendChild(colorInput);\n\n        } else {\n            // String or other types\n            const input = document.createElement('input');\n            input.type = 'text';\n            input.className = 'property-input';\n            input.value = varValue.value?.toString() || '';\n            input.onchange = () => {\n                if (ScriptRunnerVarChange) {\n                    const change = new ScriptRunnerVarChange(\n                        component.id,\n                        varName,\n                        { type: 'string', value: input.value },\n                        { source: 'ui' }\n                    );\n                    this.changeManager.applyChange(change);\n                }\n            };\n            valueContainer.appendChild(input);\n        }\n\n        row.appendChild(document.createElement('span')); // Empty space for button\n        row.appendChild(label);\n        row.appendChild(valueContainer);\n\n        return row;\n    }\n\n    /**\n     * Create Edit Script button\n     */\n    createEditScriptButton(component) {\n        const editButtonRow = document.createElement('div');\n        editButtonRow.className = 'property-row';\n        editButtonRow.style.marginTop = '12px';\n        editButtonRow.style.paddingTop = '12px';\n        editButtonRow.style.borderTop = '1px solid #333';\n\n        const editButton = document.createElement('button');\n        editButton.className = 'edit-script-btn';\n        editButton.style.width = '100%';\n        editButton.style.padding = '8px';\n        editButton.style.backgroundColor = 'rgb(42 52 60)';\n        editButton.style.color = 'white';\n        editButton.style.border = 'none';\n        editButton.style.borderRadius = '4px';\n        editButton.style.cursor = 'pointer';\n        editButton.innerHTML = '\uD83D\uDCDD Edit Script';\n\n        editButton.onmousedown = () => {\n            if(component.properties.file.length > 0){\n                let assetEnt = SM.getEntityByName(component.properties.file.replace(\".\",\"_\"));\n                if(assetEnt){\n                    SM.selectEntity(assetEnt.id);\n                }\n            }\n            // if (typeof window !== 'undefined' && window.inventory && window.inventory.items) {\n            //     const scriptItem = window.inventory.items[component.properties.file];\n            //     if (scriptItem && scriptItem.itemType === 'script') {\n            //         const event = new CustomEvent('open-script-editor', {\n            //             detail: {\n            //                 name: component.properties.file,\n            //                 content: scriptItem.data,\n            //                 author: scriptItem.author,\n            //                 created: scriptItem.created\n            //             }\n            //         });\n            //         window.dispatchEvent(event);\n            //     }\n            // }\n        };\n\n        editButton.onmouseover = () => {\n            editButton.style.backgroundColor = 'rgb(41 70 92)';\n        };\n\n        editButton.onmouseout = () => {\n            editButton.style.backgroundColor = 'rgb(42 52 60)';\n        };\n\n        editButtonRow.appendChild(document.createElement('span')); // Empty space for button column\n        editButtonRow.appendChild(document.createElement('span')); // Empty space for label column\n        const buttonContainer = document.createElement('div');\n        buttonContainer.className = 'property-value';\n        buttonContainer.appendChild(editButton);\n        editButtonRow.appendChild(buttonContainer);\n\n        return editButtonRow;\n    }\n\n    /**\n     * Setup toggle functionality\n     */\n    setupToggleFunctionality(header, body, entityId, component, index) {\n        const componentKey = `${entityId}_${component.type}_${index}`;\n        let isExpanded = !this.collapsedComponents.has(componentKey);\n\n        // Apply initial state\n        body.style.display = isExpanded ? 'block' : 'none';\n        const toggle = header.querySelector('.component-toggle');\n        if (toggle) {\n            toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n        }\n\n        header.onmousedown = () => {\n            isExpanded = !isExpanded;\n            body.style.display = isExpanded ? 'block' : 'none';\n            if (toggle) {\n                toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n            }\n\n            // Save collapsed state\n            if (isExpanded) {\n                this.collapsedComponents.delete(componentKey);\n            } else {\n                this.collapsedComponents.add(componentKey);\n            }\n\n            // Notify about collapse state change\n            window.dispatchEvent(new CustomEvent('component-collapse-changed'));\n        };\n    }\n\n    /**\n     * Get the set of collapsed components\n     * @returns {Set} - Set of collapsed component keys\n     */\n    getCollapsedComponents() {\n        return this.collapsedComponents;\n    }\n\n    /**\n     * Set the collapsed components\n     * @param {Set} collapsedSet - Set of component keys to collapse\n     */\n    setCollapsedComponents(collapsedSet) {\n        this.collapsedComponents = new Set(collapsedSet);\n    }\n}", "/**\n * ScriptAsset Renderer\n * Specialized renderer for ScriptAsset components with code display and variable management\n */\n\nimport { VectorColorInputRenderer } from './vector-color-inputs.js';\n\nexport class ScriptAssetRenderer {\n    constructor(propertyInputRenderer, utils, changeManager) {\n        this.propertyInputRenderer = propertyInputRenderer;\n        this.utils = utils || {};\n        this.changeManager = changeManager;\n        this.vectorColorRenderer = new VectorColorInputRenderer(utils);\n        this.collapsedComponents = new Set();\n        this.collapsedVars = new Set(); // Track which vars sections are collapsed\n    }\n\n    /**\n     * Render ScriptAsset component with special handling\n     * @param {Object} component - ScriptAsset component\n     * @param {number} index - Component index in entity's component array\n     * @param {number} totalComponents - Total number of components\n     * @param {string} entityId - Parent entity ID\n     * @returns {HTMLElement} - The component section element\n     */\n    renderScriptAssetComponent(component, index, totalComponents, entityId) {\n        const section = document.createElement('div');\n        section.className = 'component-section';\n        section.dataset.panel = 'propertyPanelComponent';\n        section.dataset.componentId = component.id;\n        section.dataset.componentIndex = index;\n\n        // Create header\n        const header = this.createScriptHeader(component, index, totalComponents, entityId);\n        section.appendChild(header);\n\n        // Create body\n        const body = this.createScriptAssetBody(component, entityId);\n        section.appendChild(body);\n\n        // Setup toggle functionality\n        this.setupToggleFunctionality(header, body, entityId, component, index);\n\n        return section;\n    }\n\n    /**\n     * Create ScriptAsset header with special actions\n     */\n    createScriptHeader(component, index, totalComponents, entityId) {\n        const header = document.createElement('div');\n        header.className = 'component-header scriptasset-header';\n\n        const headerContent = document.createElement('div');\n        headerContent.style.display = 'flex';\n        headerContent.style.alignItems = 'center';\n        headerContent.style.width = '100%';\n        headerContent.style.justifyContent = 'space-between';\n\n        // Title with owner\n        const titleDiv = document.createElement('div');\n        titleDiv.innerHTML = `\n            <span class=\"component-name\">ScriptAsset</span>\n            <span class=\"component-type\">${component.id}</span>\n            <span class=\"component-owner\" style=\"color:#b1b1b1;\">${component.properties.author}</span>\n        `;\n\n        // Actions\n        const actionsDiv = this.createScriptActions(component, index, totalComponents, entityId);\n\n        headerContent.appendChild(titleDiv);\n        headerContent.appendChild(actionsDiv);\n        header.appendChild(headerContent);\n\n        return header;\n    }\n\n    /**\n     * Get user color for display\n     */\n    getUserColor(owner) {\n        // This would normally come from a user color mapping\n        // For now, return a default color\n        if (typeof getUserColor === 'function') {\n            return getUserColor(owner);\n        }\n        return '#888';\n    }\n\n    /**\n     * Create ScriptAsset-specific action buttons\n     */\n    createScriptActions(component, index, totalComponents, entityId) {\n        const { ReorderComponentChange, RemoveComponentChange } = this.changeManager.changeTypes || {};\n        const { confirm } = this.utils;\n\n        const actionsDiv = document.createElement('div');\n        actionsDiv.style.display = 'flex';\n        actionsDiv.style.alignItems = 'center';\n        actionsDiv.style.gap = '8px';\n\n        // Up arrow - hide if component is at the top\n        if (index > 0) {\n            const upBtn = document.createElement('button');\n            upBtn.className = 'component-reorder-btn';\n            upBtn.innerHTML = '\u2191';\n            upBtn.title = 'Move up';\n            upBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index - 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(upBtn);\n        }\n\n        // Down arrow - hide if component is the last one\n        if (index < totalComponents - 1) {\n            const downBtn = document.createElement('button');\n            downBtn.className = 'component-reorder-btn';\n            downBtn.innerHTML = '\u2193';\n            downBtn.title = 'Move down';\n            downBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                if (ReorderComponentChange) {\n                    const change = new ReorderComponentChange(entityId, index, index + 1, { source: 'ui' });\n                    this.changeManager.applyChange(change);\n                    setTimeout(() => {\n                        window.dispatchEvent(new CustomEvent('component-reordered'));\n                    }, 100);\n                }\n            };\n            actionsDiv.appendChild(downBtn);\n        }\n\n        // Delete button\n        const deleteBtn = document.createElement('button');\n        deleteBtn.className = 'component-delete-btn';\n        deleteBtn.innerHTML = '\u00D7';\n        deleteBtn.title = 'Delete component';\n        deleteBtn.onmousedown = async (e) => {\n            e.stopPropagation();\n            const shouldDelete = confirm ? await confirm(`Delete ScriptAsset component?`) : window.confirm(`Delete ScriptAsset component?`);\n            if (shouldDelete && RemoveComponentChange) {\n                const change = new RemoveComponentChange(entityId, component.id, { source: 'ui' });\n                this.changeManager.applyChange(change);\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('component-deleted'));\n                }, 100);\n            }\n        };\n        actionsDiv.appendChild(deleteBtn);\n\n        // Toggle span\n        const toggleSpan = document.createElement('span');\n        toggleSpan.className = 'component-toggle';\n        toggleSpan.textContent = '\u25BC';\n        actionsDiv.appendChild(toggleSpan);\n\n        return actionsDiv;\n    }\n\n    /**\n     * Create ScriptAsset body with name, data, and vars\n     */\n    createScriptAssetBody(component, entityId) {\n        const body = document.createElement('div');\n        body.className = 'component-body';\n\n        // Name property (read-only)\n        const nameRow = this.createReadOnlyNameRow(component);\n        body.appendChild(nameRow);\n\n        // Data property (JavaScript code)\n        const dataRow = this.createDataCodeRow(component);\n        body.appendChild(dataRow);\n\n        // Vars property (String:DataType map builder)\n        const varsSection = this.createVarsSection(component, entityId);\n        body.appendChild(varsSection);\n\n        return body;\n    }\n\n    /**\n     * Create read-only name row\n     */\n    createReadOnlyNameRow(component) {\n        const nameRow = document.createElement('div');\n        nameRow.className = 'property-row';\n\n        const label = document.createElement('span');\n        label.className = 'property-label';\n        label.textContent = 'Name';\n\n        const valueContainer = document.createElement('div');\n        valueContainer.className = 'property-value';\n\n        const input = document.createElement('input');\n        input.type = 'text';\n        input.className = 'property-input';\n        input.value = component.properties.name || 'myScript';\n        input.readOnly = true;\n        input.style.backgroundColor = '#1a1a1a';\n        input.style.cursor = 'not-allowed';\n        input.style.opacity = '0.7';\n\n        valueContainer.appendChild(input);\n        nameRow.appendChild(document.createElement('span')); // Empty space for button\n        nameRow.appendChild(label);\n        nameRow.appendChild(valueContainer);\n\n        return nameRow;\n    }\n\n    /**\n     * Create data code display row\n     */\n    createDataCodeRow(component) {\n        const dataRow = document.createElement('div');\n        dataRow.style.marginTop = '12px';\n        dataRow.style.marginBottom = '12px';\n\n        const headerRow = document.createElement('div');\n        headerRow.style.display = 'flex';\n        headerRow.style.justifyContent = 'space-between';\n        headerRow.style.alignItems = 'center';\n        headerRow.style.marginBottom = '8px';\n\n        const label = document.createElement('span');\n        label.style.fontWeight = '600';\n        label.style.fontSize = '13px';\n        label.style.color = '#aaa';\n        label.textContent = 'Data (JavaScript)';\n\n        const lineCount = document.createElement('span');\n        lineCount.style.fontSize = '11px';\n        lineCount.style.color = '#666';\n        const lines = (component.properties.data || '').split('\\n').length;\n        lineCount.textContent = `${lines} lines`;\n\n        headerRow.appendChild(label);\n        headerRow.appendChild(lineCount);\n\n        // Container for textarea and overlay button\n        const textareaContainer = document.createElement('div');\n        textareaContainer.style.position = 'relative';\n\n        const textarea = document.createElement('textarea');\n        textarea.className = 'property-input';\n        textarea.value = component.properties.data || '';\n        textarea.rows = Math.min(Math.max(lines, 5), 15);\n        textarea.readOnly = true;\n        textarea.style.fontFamily = 'Monaco, Consolas, \"Courier New\", monospace';\n        textarea.style.fontSize = '12px';\n        textarea.style.lineHeight = '1.5';\n        textarea.style.whiteSpace = 'pre';\n        textarea.style.overflowX = 'auto';\n        textarea.style.backgroundColor = '#0d0d0d';\n        textarea.style.color = '#d4d4d4';\n        textarea.style.border = '1px solid #2a2a2a';\n        textarea.style.borderRadius = '4px';\n        textarea.style.padding = '12px';\n        textarea.style.paddingTop = '40px'; // Make room for edit button\n        textarea.style.resize = 'vertical';\n        textarea.style.width = '100%';\n        textarea.style.boxSizing = 'border-box';\n        textarea.style.cursor = 'default';\n\n        // Create overlay edit button\n        const editButton = document.createElement('button');\n        editButton.innerHTML = '\u270F\uFE0F Edit';\n        editButton.style.position = 'absolute';\n        editButton.style.top = '8px';\n        editButton.style.right = '8px';\n        editButton.style.padding = '6px 12px';\n        editButton.style.backgroundColor = '#2a4a6a';\n        editButton.style.color = '#fff';\n        editButton.style.border = 'none';\n        editButton.style.borderRadius = '4px';\n        editButton.style.cursor = 'pointer';\n        editButton.style.fontSize = '12px';\n        editButton.style.fontWeight = '600';\n        editButton.style.transition = 'background-color 0.2s';\n        editButton.style.zIndex = '10';\n\n        editButton.onmouseover = () => {\n            editButton.style.backgroundColor = '#3a5a7a';\n        };\n\n        editButton.onmouseout = () => {\n            editButton.style.backgroundColor = '#2a4a6a';\n        };\n\n        editButton.onmousedown = (e) => {\n            e.stopPropagation();\n            // Dispatch event to open script editor\n            const event = new CustomEvent('open-script-editor', {\n                detail: {\n                    name: component.properties.name || 'myScript',\n                    content: component.properties.data || '',\n                    author: component.properties._owner || 'Unknown',\n                    created: Date.now(),\n                    isScriptAsset: true,\n                    componentId: component.id\n                }\n            });\n            window.dispatchEvent(event);\n        };\n\n        textareaContainer.appendChild(textarea);\n        textareaContainer.appendChild(editButton);\n\n        dataRow.appendChild(headerRow);\n        dataRow.appendChild(textareaContainer);\n\n        return dataRow;\n    }\n\n    /**\n     * Create vars section with map builder\n     */\n    createVarsSection(component, entityId) {\n        const varsContainer = document.createElement('div');\n        varsContainer.style.marginTop = '16px';\n        varsContainer.style.paddingTop = '16px';\n        varsContainer.style.borderTop = '1px solid #333';\n\n        // Vars header with toggle\n        const varsHeader = this.createVarsHeader(component);\n        varsContainer.appendChild(varsHeader);\n\n        // Vars body (collapsible)\n        const varsBody = this.createVarsBody(component);\n        varsContainer.appendChild(varsBody);\n\n        // Setup vars toggle\n        this.setupVarsToggle(varsHeader, varsBody, component, entityId);\n\n        return varsContainer;\n    }\n\n    /**\n     * Create vars header with toggle\n     */\n    createVarsHeader(component) {\n        const header = document.createElement('div');\n        header.style.display = 'flex';\n        header.style.justifyContent = 'space-between';\n        header.style.alignItems = 'center';\n        header.style.cursor = 'pointer';\n        header.style.padding = '10px 12px';\n        header.style.backgroundColor = '#1a1a1a';\n        header.style.border = '1px solid #2a2a2a';\n        header.style.borderRadius = '6px';\n        header.style.marginBottom = '12px';\n        header.style.transition = 'background-color 0.2s';\n\n        header.onmouseover = () => {\n            header.style.backgroundColor = '#222';\n        };\n\n        header.onmouseout = () => {\n            header.style.backgroundColor = '#1a1a1a';\n        };\n\n        const title = document.createElement('span');\n        title.style.fontWeight = '600';\n        title.style.fontSize = '13px';\n        title.style.color = '#aaa';\n        const varsCount = Object.keys(component.properties.vars || {}).length;\n        title.textContent = `Variables`;\n\n        const badge = document.createElement('span');\n        badge.style.display = 'inline-block';\n        badge.style.marginLeft = '8px';\n        badge.style.padding = '2px 8px';\n        badge.style.backgroundColor = '#2a4a6a';\n        badge.style.color = '#5b9dd6';\n        badge.style.borderRadius = '10px';\n        badge.style.fontSize = '11px';\n        badge.style.fontWeight = '600';\n        badge.textContent = varsCount.toString();\n\n        const titleContainer = document.createElement('div');\n        titleContainer.appendChild(title);\n        titleContainer.appendChild(badge);\n\n        const toggle = document.createElement('span');\n        toggle.className = 'vars-toggle';\n        toggle.textContent = '\u25BC';\n        toggle.style.fontSize = '12px';\n        toggle.style.color = '#666';\n\n        header.appendChild(titleContainer);\n        header.appendChild(toggle);\n\n        return header;\n    }\n\n    /**\n     * Create vars body with variable list and add button\n     */\n    createVarsBody(component) {\n        const body = document.createElement('div');\n        body.className = 'vars-body';\n\n        // Render existing variables\n        const vars = component.properties.vars || {};\n        Object.entries(vars).forEach(([varName, varData]) => {\n            const varRow = this.renderScriptVar(varName, varData, component);\n            body.appendChild(varRow);\n        });\n\n        // Add new variable section\n        const addVarSection = this.createAddVarSection(component);\n        body.appendChild(addVarSection);\n\n        return body;\n    }\n\n    /**\n     * Setup vars toggle functionality\n     */\n    setupVarsToggle(header, body, component, entityId) {\n        const varsKey = `${entityId}_${component.id}_vars`;\n        let isExpanded = !this.collapsedVars.has(varsKey);\n\n        // Apply initial state\n        body.style.display = isExpanded ? 'block' : 'none';\n        const toggle = header.querySelector('.vars-toggle');\n        if (toggle) {\n            toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n        }\n\n        header.onmousedown = (e) => {\n            e.stopPropagation();\n            isExpanded = !isExpanded;\n            body.style.display = isExpanded ? 'block' : 'none';\n            if (toggle) {\n                toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n            }\n\n            // Save collapsed state\n            if (isExpanded) {\n                this.collapsedVars.delete(varsKey);\n            } else {\n                this.collapsedVars.add(varsKey);\n            }\n        };\n    }\n\n    /**\n     * Render a ScriptAsset variable\n     */\n    renderScriptVar(varName, varData, component) {\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n        const { formatPropertyName } = this.utils;\n\n        const row = document.createElement('div');\n        row.style.display = 'flex';\n        row.style.alignItems = 'center';\n        row.style.justifyContent = 'space-between';\n        row.style.backgroundColor = '#0d0d0d';\n        row.style.border = '1px solid #2a2a2a';\n        row.style.padding = '10px 12px';\n        row.style.marginBottom = '6px';\n        row.style.borderRadius = '6px';\n        row.style.gap = '12px';\n\n        // Left side: Name and type badge\n        const leftSide = document.createElement('div');\n        leftSide.style.display = 'flex';\n        leftSide.style.alignItems = 'center';\n        leftSide.style.gap = '10px';\n        leftSide.style.minWidth = '140px';\n\n        const nameLabel = document.createElement('span');\n        nameLabel.style.fontWeight = '500';\n        nameLabel.style.fontSize = '13px';\n        nameLabel.style.color = '#ddd';\n        nameLabel.textContent = formatPropertyName ? formatPropertyName(varName) : varName;\n        nameLabel.title = varName;\n\n        const typeBadge = document.createElement('span');\n        typeBadge.style.padding = '2px 6px';\n        typeBadge.style.borderRadius = '4px';\n        typeBadge.style.fontSize = '10px';\n        typeBadge.style.fontWeight = '600';\n        typeBadge.style.textTransform = 'uppercase';\n\n        // Color code by type\n        const typeColors = {\n            'string': { bg: '#2a3a2a', color: '#6db46d' },\n            'number': { bg: '#3a2a4a', color: '#b46dd6' },\n            'boolean': { bg: '#2a3a4a', color: '#6d9dd6' }\n        };\n        const colors = typeColors[varData.type] || { bg: '#2a2a2a', color: '#888' };\n        typeBadge.style.backgroundColor = colors.bg;\n        typeBadge.style.color = colors.color;\n        typeBadge.textContent = varData.type;\n\n        leftSide.appendChild(nameLabel);\n        leftSide.appendChild(typeBadge);\n\n        // Right side: Input and delete button\n        const rightSide = document.createElement('div');\n        rightSide.style.display = 'flex';\n        rightSide.style.alignItems = 'center';\n        rightSide.style.gap = '8px';\n        rightSide.style.flex = '1';\n\n        // Render appropriate input based on type\n        const input = this.createVarInput(varName, varData, component);\n        input.style.flex = '1';\n        input.style.maxWidth = '300px';\n        rightSide.appendChild(input);\n\n        // Delete variable button\n        const deleteBtn = document.createElement('button');\n        deleteBtn.innerHTML = '\u00D7';\n        deleteBtn.title = 'Delete variable';\n        deleteBtn.style.padding = '4px 8px';\n        deleteBtn.style.backgroundColor = 'transparent';\n        deleteBtn.style.color = '#666';\n        deleteBtn.style.border = '1px solid #333';\n        deleteBtn.style.borderRadius = '4px';\n        deleteBtn.style.cursor = 'pointer';\n        deleteBtn.style.fontSize = '16px';\n        deleteBtn.style.lineHeight = '1';\n        deleteBtn.style.transition = 'all 0.2s';\n\n        deleteBtn.onmouseover = () => {\n            deleteBtn.style.backgroundColor = '#4a2a2a';\n            deleteBtn.style.color = '#d66';\n            deleteBtn.style.borderColor = '#4a2a2a';\n        };\n\n        deleteBtn.onmouseout = () => {\n            deleteBtn.style.backgroundColor = 'transparent';\n            deleteBtn.style.color = '#666';\n            deleteBtn.style.borderColor = '#333';\n        };\n\n        deleteBtn.onmousedown = (e) => {\n            e.stopPropagation();\n            const vars = { ...component.properties.vars };\n            delete vars[varName];\n\n            // Firebase doesn't support empty objects {}, so use null when no vars remain\n            const newVars = Object.keys(vars).length === 0 ? null : vars;\n\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(component.id, 'vars', newVars, { source: 'ui' });\n                this.changeManager.applyChange(change);\n                // Trigger re-render\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('component-reordered'));\n                }, 100);\n            }\n        };\n        rightSide.appendChild(deleteBtn);\n\n        row.appendChild(leftSide);\n        row.appendChild(rightSide);\n\n        return row;\n    }\n\n    /**\n     * Create input for a variable based on its type\n     */\n    createVarInput(varName, varData, component) {\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n\n        const updateVar = (newValue) => {\n            // Handle the case where vars might be null\n            const currentVars = component.properties.vars || {};\n            const vars = { ...currentVars };\n            vars[varName] = { type: varData.type, value: newValue };\n\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(component.id, 'vars', vars, { source: 'ui' });\n                this.changeManager.applyChange(change);\n            }\n        };\n\n        switch (varData.type) {\n            case 'boolean':\n                const checkboxContainer = document.createElement('div');\n                checkboxContainer.style.display = 'flex';\n                checkboxContainer.style.alignItems = 'center';\n                checkboxContainer.style.gap = '8px';\n\n                const checkbox = document.createElement('input');\n                checkbox.type = 'checkbox';\n                checkbox.checked = varData.value;\n                checkbox.style.width = '18px';\n                checkbox.style.height = '18px';\n                checkbox.style.cursor = 'pointer';\n                checkbox.onchange = () => updateVar(checkbox.checked);\n\n                const checkboxLabel = document.createElement('span');\n                checkboxLabel.style.fontSize = '12px';\n                checkboxLabel.style.color = '#888';\n                checkboxLabel.textContent = checkbox.checked ? 'true' : 'false';\n\n                checkbox.onchange = () => {\n                    updateVar(checkbox.checked);\n                    checkboxLabel.textContent = checkbox.checked ? 'true' : 'false';\n                };\n\n                checkboxContainer.appendChild(checkbox);\n                checkboxContainer.appendChild(checkboxLabel);\n                return checkboxContainer;\n\n            case 'number':\n                const numberInput = document.createElement('input');\n                numberInput.type = 'number';\n                numberInput.className = 'property-input';\n                numberInput.value = varData.value;\n                numberInput.step = 'any';\n                numberInput.style.padding = '6px 10px';\n                numberInput.onchange = () => {\n                    const numValue = parseFloat(numberInput.value);\n                    if (!isNaN(numValue)) {\n                        updateVar(numValue);\n                    }\n                };\n                return numberInput;\n\n            case 'string':\n            default:\n                const textInput = document.createElement('input');\n                textInput.type = 'text';\n                textInput.className = 'property-input';\n                textInput.value = varData.value?.toString() || '';\n                textInput.style.padding = '6px 10px';\n                textInput.onchange = () => updateVar(textInput.value);\n                return textInput;\n        }\n    }\n\n    /**\n     * Create add variable section\n     */\n    createAddVarSection(component) {\n        const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n\n        const section = document.createElement('div');\n        section.style.marginTop = '16px';\n        section.style.padding = '16px';\n        section.style.backgroundColor = '#1a1a1a';\n        section.style.border = '1px solid #2a2a2a';\n        section.style.borderRadius = '6px';\n\n        const title = document.createElement('div');\n        title.textContent = 'Add New Variable';\n        title.style.fontWeight = '600';\n        title.style.fontSize = '13px';\n        title.style.color = '#aaa';\n        title.style.marginBottom = '12px';\n        section.appendChild(title);\n\n        // Form grid\n        const formGrid = document.createElement('div');\n        formGrid.style.display = 'grid';\n        formGrid.style.gridTemplateColumns = '1fr 1fr';\n        formGrid.style.gap = '10px';\n        formGrid.style.marginBottom = '12px';\n\n        // Variable name input\n        const nameGroup = document.createElement('div');\n        const nameLabel = document.createElement('label');\n        nameLabel.textContent = 'Name';\n        nameLabel.style.display = 'block';\n        nameLabel.style.fontSize = '11px';\n        nameLabel.style.color = '#888';\n        nameLabel.style.marginBottom = '4px';\n        nameLabel.style.fontWeight = '500';\n\n        const nameInput = document.createElement('input');\n        nameInput.type = 'text';\n        nameInput.className = 'property-input';\n        nameInput.placeholder = 'variableName';\n        nameInput.style.width = '100%';\n        nameInput.style.boxSizing = 'border-box';\n\n        nameGroup.appendChild(nameLabel);\n        nameGroup.appendChild(nameInput);\n        formGrid.appendChild(nameGroup);\n\n        // Type selector\n        const typeGroup = document.createElement('div');\n        const typeLabel = document.createElement('label');\n        typeLabel.textContent = 'Type';\n        typeLabel.style.display = 'block';\n        typeLabel.style.fontSize = '11px';\n        typeLabel.style.color = '#888';\n        typeLabel.style.marginBottom = '4px';\n        typeLabel.style.fontWeight = '500';\n\n        const typeSelect = document.createElement('select');\n        typeSelect.className = 'property-input';\n        typeSelect.style.width = '100%';\n        typeSelect.style.boxSizing = 'border-box';\n\n        const types = ['string', 'number', 'boolean'];\n        types.forEach(type => {\n            const option = document.createElement('option');\n            option.value = type;\n            option.textContent = type.charAt(0).toUpperCase() + type.slice(1);\n            typeSelect.appendChild(option);\n        });\n\n        typeGroup.appendChild(typeLabel);\n        typeGroup.appendChild(typeSelect);\n        formGrid.appendChild(typeGroup);\n\n        section.appendChild(formGrid);\n\n        // Default value input (full width)\n        const valueGroup = document.createElement('div');\n        valueGroup.style.marginBottom = '12px';\n\n        const valueLabel = document.createElement('label');\n        valueLabel.textContent = 'Default Value';\n        valueLabel.style.display = 'block';\n        valueLabel.style.fontSize = '11px';\n        valueLabel.style.color = '#888';\n        valueLabel.style.marginBottom = '4px';\n        valueLabel.style.fontWeight = '500';\n\n        const defaultValueInput = document.createElement('input');\n        defaultValueInput.type = 'text';\n        defaultValueInput.className = 'property-input';\n        defaultValueInput.placeholder = 'Enter default value';\n        defaultValueInput.style.width = '100%';\n        defaultValueInput.style.boxSizing = 'border-box';\n\n        valueGroup.appendChild(valueLabel);\n        valueGroup.appendChild(defaultValueInput);\n        section.appendChild(valueGroup);\n\n        // Add button\n        const addButton = document.createElement('button');\n        addButton.textContent = '+ Add Variable';\n        addButton.style.width = '100%';\n        addButton.style.padding = '10px';\n        addButton.style.backgroundColor = '#2a4a6a';\n        addButton.style.color = '#fff';\n        addButton.style.border = 'none';\n        addButton.style.borderRadius = '6px';\n        addButton.style.cursor = 'pointer';\n        addButton.style.fontWeight = '600';\n        addButton.style.fontSize = '13px';\n        addButton.style.transition = 'background-color 0.2s';\n\n        addButton.onmousedown = (e) => {\n            e.stopPropagation();\n            const varName = nameInput.value.trim();\n            const varType = typeSelect.value;\n            const varValue = defaultValueInput.value;\n\n            if (!varName) {\n                alert('Please enter a variable name');\n                return;\n            }\n\n            // Check if variable already exists\n            const existingVars = component.properties.vars || {};\n            if (existingVars[varName]) {\n                alert('Variable with this name already exists');\n                return;\n            }\n\n            // Convert value based on type\n            let typedValue;\n            switch (varType) {\n                case 'boolean':\n                    typedValue = varValue.toLowerCase() === 'true';\n                    break;\n                case 'number':\n                    typedValue = parseFloat(varValue) || 0;\n                    break;\n                case 'string':\n                default:\n                    typedValue = varValue;\n                    break;\n            }\n\n            // Add the variable\n            // Handle the case where vars is null (all variables deleted)\n            const currentVars = component.properties.vars || {};\n            const vars = { ...currentVars };\n            vars[varName] = { type: varType, value: typedValue };\n\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(component.id, 'vars', vars, { source: 'ui' });\n                this.changeManager.applyChange(change);\n\n                // Clear inputs\n                nameInput.value = '';\n                defaultValueInput.value = '';\n\n                // Trigger re-render\n                setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('component-reordered'));\n                }, 100);\n            }\n        };\n\n        addButton.onmouseover = () => {\n            addButton.style.backgroundColor = '#3a5a7a';\n        };\n\n        addButton.onmouseout = () => {\n            addButton.style.backgroundColor = '#2a4a6a';\n        };\n\n        section.appendChild(addButton);\n\n        return section;\n    }\n\n    /**\n     * Setup toggle functionality\n     */\n    setupToggleFunctionality(header, body, entityId, component, index) {\n        const componentKey = `${entityId}_${component.type}_${index}`;\n        let isExpanded = !this.collapsedComponents.has(componentKey);\n\n        // Apply initial state\n        body.style.display = isExpanded ? 'block' : 'none';\n        const toggle = header.querySelector('.component-toggle');\n        if (toggle) {\n            toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n        }\n\n        header.onmousedown = () => {\n            isExpanded = !isExpanded;\n            body.style.display = isExpanded ? 'block' : 'none';\n            if (toggle) {\n                toggle.textContent = isExpanded ? '\u25BC' : '\u25B6';\n            }\n\n            // Save collapsed state\n            if (isExpanded) {\n                this.collapsedComponents.delete(componentKey);\n            } else {\n                this.collapsedComponents.add(componentKey);\n            }\n\n            // Notify about collapse state change\n            window.dispatchEvent(new CustomEvent('component-collapse-changed'));\n        };\n    }\n\n    /**\n     * Get the set of collapsed components\n     * @returns {Set} - Set of collapsed component keys\n     */\n    getCollapsedComponents() {\n        return this.collapsedComponents;\n    }\n\n    /**\n     * Set the collapsed components\n     * @param {Set} collapsedSet - Set of component keys to collapse\n     */\n    setCollapsedComponents(collapsedSet) {\n        this.collapsedComponents = new Set(collapsedSet);\n    }\n}\n", "/**\n * Properties Panel\n * Main orchestrator for component display and property editing\n */\n\nimport { ScaleLockHandler } from './scale-lock-handler.js';\nimport { TransformHandler } from './transform-handler.js';\nimport { PropertyUpdater } from './property-updater.js';\nimport { PropertyInputRenderer } from './property-input-renderer.js';\nimport { EntityPropertiesRenderer } from './entity-properties-renderer.js';\nimport { ComponentRenderer } from './component-renderer.js';\nimport { ScriptRunnerRenderer } from './scriptrunner-renderer.js';\nimport { ScriptAssetRenderer } from './scriptasset-renderer.js';\nimport * as utils from '../../../utils.js';\nimport { changeManager } from '../../../change-manager.js';\nimport * as changeTypes from '../../../change-types.js';\n\nexport class PropertiesPanel {\n    constructor() {\n        // DOM elements\n        this.propertiesContent = document.getElementById('propertiesContent');\n        this.addComponentContainer = document.getElementById('addComponentContainer');\n        this.addComponentBtn = document.getElementById('addComponentBtn');\n        this.selectedEntityNameElement = document.getElementById('selectedEntityName');\n        this.collapseAllBtn = document.getElementById('collapseAllBtn');\n        this.loadSettingsBtn = document.getElementById('loadSettingsBtn');\n\n        // Load settings toggle state\n        this.showLoadSettings = false;\n\n        // Render guard to prevent concurrent renders\n        this.isRendering = false;\n        this.pendingRender = null;\n\n        // Initialize handlers and renderers\n        this.initializeModules();\n\n        // Setup event listeners\n        this.setupEventListeners();\n    }\n\n    /**\n     * Initialize all module instances\n     */\n    async initializeModules() {\n        // Store references\n        this.utils = utils;\n        this.changeManager = changeManager;\n        this.changeManager.changeTypes = changeTypes;\n\n        // Initialize handlers\n        this.scaleLockHandler = new ScaleLockHandler();\n        this.transformHandler = new TransformHandler();\n        this.propertyUpdater = new PropertyUpdater();\n\n        // Initialize renderers\n        this.propertyInputRenderer = new PropertyInputRenderer(utils, changeManager, this.scaleLockHandler);\n        this.entityRenderer = new EntityPropertiesRenderer(\n            this.propertyInputRenderer,\n            this.transformHandler,\n            this.scaleLockHandler,\n            utils,\n            changeManager\n        );\n        this.componentRenderer = new ComponentRenderer(\n            this.propertyInputRenderer,\n            utils,\n            changeManager\n        );\n        this.scriptRunnerRenderer = new ScriptRunnerRenderer(\n            this.propertyInputRenderer,\n            utils,\n            changeManager\n        );\n        this.scriptAssetRenderer = new ScriptAssetRenderer(\n            this.propertyInputRenderer,\n            utils,\n            changeManager\n        );\n    }\n\n    /**\n     * Setup event listeners\n     */\n    setupEventListeners() {\n        // Add component button\n        this.addComponentBtn?.addEventListener('mousedown', () => {\n            document.dispatchEvent(new CustomEvent('showComponentMenu', {\n                detail: { entityId: SM.selectedEntity }\n            }));\n        });\n\n        // Collapse all button\n        this.collapseAllBtn?.addEventListener('mousedown', () => {\n            this.collapseAllComponents();\n        });\n\n        // Load settings button\n        this.loadSettingsBtn?.addEventListener('mousedown', () => {\n            this.toggleLoadSettings();\n        });\n\n        // Listen for transform mode changes\n        window.addEventListener('transform-mode-changed', () => {\n            if (SM.selectedEntity) {\n                this.render(SM.selectedEntity);\n            }\n        });\n\n        // Listen for transform updates\n        window.addEventListener('update-transform-display', () => {\n            this.updateTransform();\n        });\n\n        // Listen for component reorder/delete events\n        window.addEventListener('component-reordered', () => {\n            if (SM.selectedEntity) {\n                this.render(SM.selectedEntity);\n            }\n        });\n\n        window.addEventListener('component-deleted', () => {\n            if (SM.selectedEntity) {\n                this.render(SM.selectedEntity);\n            }\n        });\n\n        window.addEventListener('monobehavior-file-changed', (e) => {\n            if (e.detail && e.detail.entityId) {\n                this.render(e.detail.entityId);\n            }\n        });\n\n        // Listen for component collapse changes\n        window.addEventListener('component-collapse-changed', () => {\n            this.updateCollapseAllButtonVisibility();\n        });\n    }\n\n    /**\n     * Toggle Load Settings mode\n     */\n    toggleLoadSettings() {\n        this.showLoadSettings = !this.showLoadSettings;\n\n        // Update button appearance\n        if (this.loadSettingsBtn) {\n            this.loadSettingsBtn.style.backgroundColor = this.showLoadSettings ? '#4a90e2' : '';\n            this.loadSettingsBtn.style.color = this.showLoadSettings ? '#fff' : '';\n        }\n\n        // Re-render to show/hide async toggles\n        if (SM.selectedEntity) {\n            this.render(SM.selectedEntity);\n        }\n    }\n\n    /**\n     * Toggle Transform mode between local and global\n     */\n    toggleTransformMode() {\n        this.transformHandler.toggleMode();\n\n        // Re-render to show updated transform values\n        if (SM.selectedEntity) {\n            this.render(SM.selectedEntity);\n        }\n    }\n\n    /**\n     * Collapse all components\n     */\n    collapseAllComponents() {\n        const entity = SM.getEntityById(SM.selectedEntity);\n        if (!entity || !entity.components) return;\n\n        // Collapse all components in both renderers\n        this.componentRenderer.collapseAll(SM.selectedEntity, entity.components);\n\n        // Also collapse ScriptRunner and ScriptAsset components\n        entity.components.forEach((component, index) => {\n            if (component.type === 'ScriptRunner') {\n                const componentKey = `${SM.selectedEntity}_${component.type}_${index}`;\n                this.scriptRunnerRenderer.collapsedComponents.add(componentKey);\n            } else if (component.type === 'ScriptAsset') {\n                const componentKey = `${SM.selectedEntity}_${component.type}_${index}`;\n                this.scriptAssetRenderer.collapsedComponents.add(componentKey);\n            }\n        });\n\n        // Re-render to apply collapsed state\n        this.render(SM.selectedEntity);\n    }\n\n    /**\n     * Update collapse all button visibility\n     */\n    updateCollapseAllButtonVisibility() {\n        if (!this.collapseAllBtn) return;\n\n        const entity = SM.getEntityById(SM.selectedEntity, false);\n        if (!entity || !entity.components || entity.components.length === 0) {\n            this.collapseAllBtn.style.display = 'none';\n            return;\n        }\n\n        // Check if at least one component is expanded\n        const hasExpandedComponent = entity.components.some((component, index) => {\n            const componentKey = `${SM.selectedEntity}_${component.type}_${index}`;\n\n            if (component.type === 'ScriptRunner') {\n                return !this.scriptRunnerRenderer.collapsedComponents.has(componentKey);\n            } else if (component.type === 'ScriptAsset') {\n                return !this.scriptAssetRenderer.collapsedComponents.has(componentKey);\n            } else {\n                return !this.componentRenderer.collapsedComponents.has(componentKey);\n            }\n        });\n\n        this.collapseAllBtn.style.display = hasExpandedComponent ? 'block' : 'none';\n    }\n\n    /**\n     * Render properties for an entity\n     */\n    async render(entityId = null) {\n        // Use SM.selectedEntity as fallback if no entityId provided\n        const targetEntityId = entityId || SM.selectedEntity;\n\n        // If already rendering, queue this render request\n        if (this.isRendering) {\n            this.pendingRender = targetEntityId;\n            return;\n        }\n\n        // Set rendering flag\n        this.isRendering = true;\n\n        try {\n            await this._doRender(targetEntityId);\n        } finally {\n            // Clear rendering flag\n            this.isRendering = false;\n\n            // If there's a pending render, execute it\n            if (this.pendingRender !== null) {\n                const pending = this.pendingRender;\n                this.pendingRender = null;\n                await this.render(pending);\n            }\n        }\n    }\n\n    /**\n     * Internal render method (does the actual rendering)\n     */\n    async _doRender(entityId) {\n        if (!this.propertiesContent) return;\n\n        const entity = entityId ? SM.getEntityById(entityId) : null;\n\n        if (!entity) {\n            this.renderEmptyState();\n            return;\n        }\n\n        // Update header\n        if (this.selectedEntityNameElement) {\n            this.selectedEntityNameElement.textContent = `Properties - ${entity.name}`;\n        }\n\n        // Save scroll position before clearing content\n        const scrollTop = this.propertiesContent.scrollTop;\n\n        // Clear content\n        this.propertiesContent.innerHTML = '';\n\n        // Entity properties section\n        const entitySection = await this.entityRenderer.createEntityPropertiesSection(entity, this.showLoadSettings);\n        if (entitySection) {\n            this.propertiesContent.appendChild(entitySection);\n        }\n\n        // Render components\n        if (entity.components && entity.components.length > 0) {\n            entity.components.forEach((component, index) => {\n                let componentElement;\n\n                if (component.type === 'ScriptRunner') {\n                    // Use ScriptRunner renderer\n                    componentElement = this.scriptRunnerRenderer.renderScriptRunnerComponent(\n                        component,\n                        index,\n                        entity.components.length,\n                        SM.selectedEntity\n                    );\n                } else if (component.type === 'ScriptAsset') {\n                    // Use ScriptAsset renderer\n                    componentElement = this.scriptAssetRenderer.renderScriptAssetComponent(\n                        component,\n                        index,\n                        entity.components.length,\n                        SM.selectedEntity\n                    );\n                } else {\n                    // Use generic component renderer\n                    componentElement = this.componentRenderer.renderComponent(\n                        component,\n                        index,\n                        entity.components.length,\n                        SM.selectedEntity,\n                        this.showLoadSettings\n                    );\n                }\n\n                if (componentElement) {\n                    this.propertiesContent.appendChild(componentElement);\n                }\n            });\n        }\n\n        // Show add component button\n        if (this.addComponentContainer) {\n            this.addComponentContainer.style.display = 'block';\n        }\n\n        // Update collapse all button visibility\n        this.updateCollapseAllButtonVisibility();\n\n        // Restore scroll position after rendering\n        this.propertiesContent.scrollTop = scrollTop;\n\n        // Dispatch render complete event\n        window.dispatchEvent(new CustomEvent(\"ui-rendered\", {\n            detail: { id: \"propertiesPanel\" }\n        }));\n    }\n\n    /**\n     * Render empty state when no entity is selected\n     */\n    renderEmptyState() {\n        this.propertiesContent.innerHTML = `\n            <div class=\"empty-state\">\n                <h3>No entity selected</h3>\n                <p>Select a entity from the hierarchy to view its properties</p>\n            </div>\n        `;\n\n        if (this.addComponentContainer) {\n            this.addComponentContainer.style.display = 'none';\n        }\n\n        if (this.selectedEntityNameElement) {\n            this.selectedEntityNameElement.textContent = 'Properties';\n        }\n\n        if (this.collapseAllBtn) {\n            this.collapseAllBtn.style.display = 'none';\n        }\n    }\n\n    /**\n     * Update transform display values to match current entity state\n     */\n    updateTransform() {\n        const entity = SM.getSelectedEntity();\n        if (!entity) return;\n\n        const entitySection = this.propertiesContent.querySelector('.entity-section');\n        if (!entitySection) return;\n\n        // Use transform handler to update inputs\n        this.transformHandler.updateTransformInputs(entitySection, entity, this.utils);\n    }\n\n    /**\n     * Update a property value programmatically\n     * @param {string} componentId - The ID of the component\n     * @param {string} propertyKey - The key of the property to update\n     * @param {*} newValue - The new value to set\n     */\n    updateProperty(componentId, propertyKey, newValue) {\n        this.propertyUpdater.updateProperty(componentId, propertyKey, newValue, this.utils);\n    }\n\n    /**\n     * Handle Vector3 property changes (for backwards compatibility)\n     */\n    handleVector3Change(componentId, key, axis, value) {\n        const entity = SM.getEntityById(SM.selectedEntity);\n        if (!entity) return;\n\n        const component = entity.components.find(c => c.id === componentId);\n        if (!component || !component.properties[key]) return;\n\n        const vector = component.properties[key];\n        const numValue = parseFloat(value);\n        if (!isNaN(numValue)) {\n            const oldValue = this.utils.deepClone ? this.utils.deepClone(vector) : { ...vector };\n            vector[axis] = numValue;\n\n            const { ComponentPropertyChange } = this.changeManager.changeTypes || {};\n            if (ComponentPropertyChange) {\n                const change = new ComponentPropertyChange(componentId, key, vector, { source: 'ui', oldValue: oldValue });\n                this.changeManager.applyChange(change);\n            }\n        }\n    }\n\n    /**\n     * Delete a component from the selected entity (for backwards compatibility)\n     */\n    async deleteComponent(componentId, componentType) {\n        const entityId = SM.selectedEntity;\n        if (!entityId) return;\n\n        const { RemoveComponentChange } = this.changeManager.changeTypes || {};\n        if (RemoveComponentChange) {\n            const change = new RemoveComponentChange(entityId, componentId, { source: 'ui' });\n            this.changeManager.applyChange(change);\n        }\n\n        // Re-render after deletion\n        setTimeout(() => this.render(entityId), 100);\n    }\n\n    /**\n     * Move component up in the order (for backwards compatibility)\n     */\n    moveComponentUp(index) {\n        if (index <= 0) return;\n\n        const { ReorderComponentChange } = this.changeManager.changeTypes || {};\n        if (ReorderComponentChange) {\n            const change = new ReorderComponentChange(SM.selectedEntity, index, index - 1, { source: 'ui' });\n            this.changeManager.applyChange(change);\n        }\n\n        // Re-render after a short delay\n        setTimeout(() => this.render(SM.selectedEntity), 100);\n    }\n\n    /**\n     * Move component down in the order (for backwards compatibility)\n     */\n    moveComponentDown(index, totalComponents) {\n        if (index >= totalComponents - 1) return;\n\n        const { ReorderComponentChange } = this.changeManager.changeTypes || {};\n        if (ReorderComponentChange) {\n            const change = new ReorderComponentChange(SM.selectedEntity, index, index + 1, { source: 'ui' });\n            this.changeManager.applyChange(change);\n        }\n\n        // Re-render after a short delay\n        setTimeout(() => this.render(SM.selectedEntity), 100);\n    }\n}", "/**\n * Sync Status Comparator\n * Compares local Unity scene hierarchy with networked state to identify divergences\n */\n\nimport { parseBest } from '../../utils.js';\n\nexport class SyncStatusComparator {\n    constructor() {\n        this.localCache = null;\n        this.networkCache = null;\n        this.divergences = new Map();\n        this.lastComparisonTime = 0;\n        this.comparisonThrottle = 500; // ms\n    }\n\n    /**\n     * Main comparison method - compares local and network hierarchies\n     * @returns {Map} Map of entity paths to divergence objects\n     */\n    async compare() {\n        // Throttle comparisons\n        const now = Date.now();\n        if (now - this.lastComparisonTime < this.comparisonThrottle) {\n            return this.divergences;\n        }\n        this.lastComparisonTime = now;\n\n        try {\n            // Get both hierarchies\n            this.localCache = entities();\n            this.networkCache = networking.getSpaceHeir();\n\n            // Clear previous divergences\n            this.divergences.clear();\n\n            // Build path maps for comparison\n            const localMap = this.buildPathMap(this.localCache, 'local');\n            const networkMap = this.buildPathMap(this.networkCache, 'network');\n\n            // Compare the maps\n            this.compareHierarchies(localMap, networkMap);\n\n            // Also compare component properties\n            this.compareComponentProperties(localMap, networkMap);\n\n            return this.divergences;\n        } catch (error) {\n            console.error('Error comparing hierarchies:', error);\n            return this.divergences;\n        }\n    }\n\n    /**\n     * Build a map of entity paths to their data\n     * @param {Object|Array} hierarchy - The hierarchy to map\n     * @param {String} source - 'local' or 'network'\n     * @returns {Map} Map of paths to entity data\n     */\n    buildPathMap(hierarchy, source) {\n        const pathMap = new Map();\n\n        const processEntity = (entity, parentPath = '') => {\n            const currentPath = parentPath ? `${parentPath}/${entity.name}` : entity.name;\n\n            // Store entity data\n            pathMap.set(currentPath, {\n                name: entity.name,\n                active: entity.active,\n                layer: entity.layer,\n                position: entity.position ? { ...entity.position } : null,\n                rotation: entity.rotation ? { ...entity.rotation } : null,\n                scale: entity.scale ? { ...entity.scale } : null,\n                localPosition: entity.localPosition ? { ...entity.localPosition } : null,\n                localRotation: entity.localRotation ? { ...entity.localRotation } : null,\n                localScale: entity.localScale ? { ...entity.localScale } : null,\n                children: entity.children ? entity.children.map(c => c.name) : [],\n                components: this.extractComponents(entity.components, source),\n                source: source\n            });\n\n            // Process children recursively\n            if (entity.children && Array.isArray(entity.children)) {\n                entity.children.forEach(child => processEntity(child, currentPath));\n            }\n        };\n\n        // Handle different hierarchy structures\n        if (Array.isArray(hierarchy)) {\n            hierarchy.forEach(entity => processEntity(entity));\n        } else if (hierarchy && hierarchy.roots) {\n            hierarchy.roots.forEach(entity => processEntity(entity));\n        } else if (hierarchy) {\n            processEntity(hierarchy);\n        }\n\n        return pathMap;\n    }\n\n    /**\n     * Extract component information from entity components\n     * @param {Array} components - Array of component objects or IDs\n     * @param {String} source - 'local' or 'network' to handle different formats\n     * @returns {Array} Array of component info objects\n     */\n    extractComponents(components, source = 'local') {\n        if (!components || !Array.isArray(components)) return [];\n\n        return components.map(comp => {\n            // Network components are stored as ID strings like \"Grabbable_43761\"\n            if (source === 'network' && typeof comp === 'string') {\n                // Extract the type from the ID (part before underscore and numbers)\n                const match = comp.match(/^([A-Za-z]+)(?:_\\d+)?$/);\n                const type = match ? match[1] : comp;\n\n                // Get component properties from space state\n                const properties = this.getNetworkComponentProperties(comp);\n\n                return {\n                    type: type,\n                    id: comp,\n                    properties: properties\n                };\n            }\n\n            // Local components are objects with constructor names\n            if (typeof comp === 'string') {\n                // Sometimes components might be strings\n                return { type: comp };\n            } else if (comp && comp.constructor) {\n                // Most common case - component objects with constructors\n                let typeName = comp.constructor.name;\n                // Remove \"Component\" suffix for comparison if present\n                if (typeName.endsWith('Component')) {\n                    typeName = typeName.replace(/Component$/, '');\n                }\n\n                // Extract local component properties\n                const properties = this.extractLocalComponentProperties(comp);\n\n                return {\n                    type: typeName,\n                    id: comp.id || null,\n                    properties: properties\n                };\n            } else if (comp && comp.type) {\n                return { type: comp.type };\n            }\n            return { type: 'unknown' };\n        });\n    }\n\n    /**\n     * Compare two hierarchy maps and identify divergences\n     * @param {Map} localMap - Map of local entity paths\n     * @param {Map} networkMap - Map of network entity paths\n     */\n    compareHierarchies(localMap, networkMap) {\n        const allPaths = new Set([...localMap.keys(), ...networkMap.keys()]);\n\n        allPaths.forEach(path => {\n            const localEntity = localMap.get(path);\n            const networkEntity = networkMap.get(path);\n            const divergence = {\n                path: path,\n                types: new Set(),\n                details: {},\n                severity: 'low'\n            };\n\n            // Check existence divergences\n            if (!localEntity && networkEntity) {\n                divergence.types.add('missing-local');\n                divergence.severity = 'high';\n                divergence.details.existence = 'Only exists in network';\n            } else if (localEntity && !networkEntity) {\n                divergence.types.add('missing-network');\n                divergence.severity = 'high';\n                divergence.details.existence = 'Only exists locally';\n            } else if (localEntity && networkEntity) {\n                // Both exist, check properties\n                this.compareProperties(localEntity, networkEntity, divergence);\n            }\n\n            // Only add to divergences if there are actual differences\n            if (divergence.types.size > 0) {\n                this.divergences.set(path, divergence);\n            }\n        });\n\n        // Propagate child divergences to parents\n        this.propagateChildDivergences();\n    }\n\n    /**\n     * Compare properties of two entities\n     * @param {Object} local - Local entity data\n     * @param {Object} network - Network entity data\n     * @param {Object} divergence - Divergence object to populate\n     */\n    compareProperties(local, network, divergence) {\n        // Check active state\n        if (local.active !== network.active) {\n            divergence.types.add('property-active');\n            divergence.details.active = {\n                local: local.active,\n                network: network.active\n            };\n            divergence.severity = 'medium';\n        }\n\n        // Check layer\n        if (local.layer !== network.layer) {\n            divergence.types.add('property-layer');\n            divergence.details.layer = {\n                local: local.layer,\n                network: network.layer\n            };\n            divergence.severity = 'medium';\n        }\n\n        // Check transforms\n        this.compareVector3(local.position, network.position, 'position', divergence);\n        this.compareQuaternion(local.rotation, network.rotation, 'rotation', divergence);\n        this.compareVector3(local.scale, network.scale, 'scale', divergence);\n        this.compareVector3(local.localPosition, network.localPosition, 'localPosition', divergence);\n        this.compareQuaternion(local.localRotation, network.localRotation, 'localRotation', divergence);\n        this.compareVector3(local.localScale, network.localScale, 'localScale', divergence);\n\n        // Check children\n        const localChildren = new Set(local.children);\n        const networkChildren = new Set(network.children);\n\n        if (local.children.length !== network.children.length ||\n            ![...localChildren].every(c => networkChildren.has(c))) {\n            divergence.types.add('hierarchy-children');\n            divergence.details.children = {\n                localCount: local.children.length,\n                networkCount: network.children.length,\n                onlyInLocal: [...localChildren].filter(c => !networkChildren.has(c)),\n                onlyInNetwork: [...networkChildren].filter(c => !localChildren.has(c))\n            };\n        }\n\n        // Check components\n        this.compareComponents(local.components, network.components, divergence);\n    }\n\n    /**\n     * Compare Vector3 values with tolerance\n     */\n    compareVector3(local, network, propertyName, divergence, tolerance = 0.001) {\n        if (!local && !network) return;\n\n        if (!local || !network ||\n            Math.abs((local.x || 0) - (network.x || 0)) > tolerance ||\n            Math.abs((local.y || 0) - (network.y || 0)) > tolerance ||\n            Math.abs((local.z || 0) - (network.z || 0)) > tolerance) {\n\n            divergence.types.add(`property-${propertyName}`);\n            divergence.details[propertyName] = {\n                local: local ? { x: local.x, y: local.y, z: local.z } : null,\n                network: network ? { x: network.x, y: network.y, z: network.z } : null\n            };\n        }\n    }\n\n    /**\n     * Compare Quaternion values with tolerance\n     */\n    compareQuaternion(local, network, propertyName, divergence, tolerance = 0.001) {\n        if (!local && !network) return;\n\n        if (!local || !network ||\n            Math.abs((local.x || 0) - (network.x || 0)) > tolerance ||\n            Math.abs((local.y || 0) - (network.y || 0)) > tolerance ||\n            Math.abs((local.z || 0) - (network.z || 0)) > tolerance ||\n            Math.abs((local.w || 1) - (network.w || 1)) > tolerance) {\n\n            divergence.types.add(`property-${propertyName}`);\n            divergence.details[propertyName] = {\n                local: local ? { x: local.x, y: local.y, z: local.z, w: local.w } : null,\n                network: network ? { x: network.x, y: network.y, z: network.z, w: network.w } : null\n            };\n        }\n    }\n\n    /**\n     * Compare component arrays\n     */\n    compareComponents(local, network, divergence) {\n        const localTypes = new Set(local.map(c => c.type));\n        const networkTypes = new Set(network.map(c => c.type));\n\n        if (local.length !== network.length ||\n            ![...localTypes].every(t => networkTypes.has(t))) {\n\n            divergence.types.add('components');\n            divergence.details.components = {\n                localCount: local.length,\n                networkCount: network.length,\n                localTypes: [...localTypes],\n                networkTypes: [...networkTypes],\n                onlyInLocal: [...localTypes].filter(t => !networkTypes.has(t)),\n                onlyInNetwork: [...networkTypes].filter(t => !localTypes.has(t))\n            };\n            divergence.severity = 'medium';\n        }\n    }\n\n    /**\n     * Propagate child divergences to parent nodes\n     */\n    propagateChildDivergences() {\n        // Create a set of paths that have children with divergences\n        const parentsWithDivergentChildren = new Set();\n\n        this.divergences.forEach((_divergence, path) => {\n            // Get parent path\n            const lastSlash = path.lastIndexOf('/');\n            if (lastSlash > 0) {\n                const parentPath = path.substring(0, lastSlash);\n                parentsWithDivergentChildren.add(parentPath);\n            }\n        });\n\n        // Add or update parent divergences\n        parentsWithDivergentChildren.forEach(parentPath => {\n            const existing = this.divergences.get(parentPath);\n            if (existing) {\n                existing.types.add('has-child-divergences');\n            } else {\n                this.divergences.set(parentPath, {\n                    path: parentPath,\n                    types: new Set(['has-child-divergences']),\n                    details: {},\n                    severity: 'info'\n                });\n            }\n        });\n    }\n\n    /**\n     * Get a summary of divergences by type\n     */\n    getSummary() {\n        const summary = {\n            total: this.divergences.size,\n            byType: {},\n            bySeverity: {\n                high: 0,\n                medium: 0,\n                low: 0,\n                info: 0\n            }\n        };\n\n        this.divergences.forEach(divergence => {\n            divergence.types.forEach(type => {\n                summary.byType[type] = (summary.byType[type] || 0) + 1;\n            });\n            summary.bySeverity[divergence.severity]++;\n        });\n\n        return summary;\n    }\n\n    /**\n     * Get status indicator for an entity path\n     * @param {String} path - Entity path\n     * @returns {String} Status indicator (synced/warning/error/missing)\n     */\n    getEntityStatus(path) {\n        const divergence = this.divergences.get(path);\n        if (!divergence) return 'synced';\n\n        if (divergence.types.has('missing-local') || divergence.types.has('missing-network')) {\n            return 'missing';\n        }\n        if (divergence.types.has('property-active') || divergence.types.has('property-layer') ||\n            divergence.types.has('component-properties')) {\n            return 'error';\n        }\n        if (divergence.types.has('has-child-divergences')) {\n            return 'warning';\n        }\n        return 'warning';\n    }\n\n    /**\n     * Get component properties from network space state\n     * @param {String} componentId - Component ID like \"Material_59130\"\n     * @returns {Object} Component properties\n     */\n    getNetworkComponentProperties(componentId) {\n        if (!networking.spaceState) return {};\n\n        const publicProps = networking.spaceState;\n        const properties = {};\n\n        // Component properties are stored with __ prefix\n        const prefix = `__${componentId}:`;\n\n        Object.keys(networking.spaceState).forEach(key => {\n            if (key.startsWith(prefix)) {\n                const propName = key.substring(prefix.length);\n                const value = networking.spaceState[key];\n\n                // Parse the value if it's a string representation\n                properties[propName] = parseBest ? parseBest(value) : value;\n            }\n        });\n\n        return properties;\n    }\n\n    /**\n     * Extract properties from local component object\n     * @param {Object} component - Local component object\n     * @returns {Object} Component properties\n     */\n    extractLocalComponentProperties(component) {\n        const properties = {};\n\n        // Components have a 'properties' object that contains the actual values\n        if (component.properties && typeof component.properties === 'object') {\n            // Copy all properties from the properties object\n            Object.keys(component.properties).forEach(key => {\n                properties[key] = component.properties[key];\n            });\n            return properties;\n        }\n\n        // Fallback: Try to get properties from SM.scene.components using the component ID\n        if (component.id && window.SM && window.SM.scene && window.SM.scene.components) {\n            const sceneComponent = window.SM.scene.components[component.id];\n            if (sceneComponent) {\n                // Get all properties that start with underscore (these are the actual values)\n                Object.keys(sceneComponent).forEach(key => {\n                    if (key.startsWith('_')) {\n                        const propName = key.substring(1); // Remove underscore\n                        properties[propName] = sceneComponent[key];\n                    }\n                });\n                return properties;\n            }\n        }\n\n        // Fallback: Try direct property access\n        const propertiesToExtract = [\n            'color', 'texture', 'shaderName', 'generateMipMaps', 'side',  // Material\n            'width', 'height', 'depth',  // Box\n            'radius',  // Sphere\n            'isTrigger', 'center', 'size',  // Colliders\n            'mass', 'drag', 'angularDrag', 'useGravity', 'isKinematic',  // Rigidbody\n            'attachmentPoint', 'uid'  // AttachedObject\n        ];\n\n        propertiesToExtract.forEach(prop => {\n            // Try different ways to access the property\n            if (component[prop] !== undefined) {\n                properties[prop] = component[prop];\n            } else if (component['_' + prop] !== undefined) {\n                properties[prop] = component['_' + prop];\n            } else if (component.Get && typeof component.Get === 'function') {\n                try {\n                    const value = component.Get(prop);\n                    if (value !== undefined) {\n                        properties[prop] = value;\n                    }\n                } catch(e) {\n                    // Ignore errors from Get method\n                }\n            }\n        });\n\n        return properties;\n    }\n\n    /**\n     * Compare component properties between local and network\n     * @param {Map} localMap - Map of local entity paths\n     * @param {Map} networkMap - Map of network entity paths\n     */\n    compareComponentProperties(localMap, networkMap) {\n        // Iterate through all entities that exist in both local and network\n        localMap.forEach((localEntity, path) => {\n            const networkEntity = networkMap.get(path);\n            if (!networkEntity) return; // Skip if entity doesn't exist in network\n\n            // Get existing divergence or create new one\n            let divergence = this.divergences.get(path);\n            if (!divergence) {\n                divergence = {\n                    path: path,\n                    types: new Set(),\n                    details: {},\n                    severity: 'low'\n                };\n            }\n\n            // Compare components properties\n            if (localEntity.components && networkEntity.components) {\n                const componentPropDivergences = [];\n\n                // Check local components against network\n                localEntity.components.forEach(localComp => {\n                    // Find matching network component by ID or type\n                    const networkComp = networkEntity.components.find(nc =>\n                        (nc.id === localComp.id) ||\n                        (nc.type === localComp.type && nc.id && localComp.id && nc.id.split('_')[0] === localComp.type)\n                    );\n\n                    if (networkComp && localComp.properties && networkComp.properties) {\n                        const propDiffs = this.compareComponentPropertyValues(localComp.properties, networkComp.properties);\n                        if (Object.keys(propDiffs).length > 0) {\n                            componentPropDivergences.push({\n                                componentId: localComp.id || networkComp.id,\n                                type: localComp.type,\n                                differences: propDiffs\n                            });\n                        }\n                    }\n                });\n\n                // IMPORTANT: Also check for network components that don't exist locally\n                // These are divergences that need to be synced to local\n                networkEntity.components.forEach(networkComp => {\n                    // Find matching local component by ID or type\n                    const localComp = localEntity.components.find(lc =>\n                        (lc.id === networkComp.id) ||\n                        (lc.type === networkComp.type && lc.id && networkComp.id && networkComp.id.split('_')[0] === lc.type)\n                    );\n\n                    // If network component has no local counterpart and has properties, flag all properties as missing locally\n                    if (!localComp && networkComp.properties && Object.keys(networkComp.properties).length > 0) {\n                        const missingLocalProps = {};\n                        Object.keys(networkComp.properties).forEach(key => {\n                            missingLocalProps[key] = {\n                                local: undefined,\n                                network: networkComp.properties[key]\n                            };\n                        });\n\n                        componentPropDivergences.push({\n                            componentId: networkComp.id,\n                            type: networkComp.type,\n                            differences: missingLocalProps,\n                            missingLocally: true  // Flag to indicate entire component is missing locally\n                        });\n                    }\n                });\n\n                if (componentPropDivergences.length > 0) {\n                    divergence.types.add('component-properties');\n                    divergence.details.componentProperties = componentPropDivergences;\n                    divergence.severity = 'medium';\n                    this.divergences.set(path, divergence);\n                }\n            }\n        });\n    }\n\n    /**\n     * Compare two property objects and return differences\n     * @param {Object} localProps - Local properties\n     * @param {Object} networkProps - Network properties\n     * @returns {Object} Differences between properties\n     */\n    compareComponentPropertyValues(localProps, networkProps) {\n        const differences = {};\n\n        // Check all properties from both local and network\n        const allKeys = new Set([...Object.keys(localProps), ...Object.keys(networkProps)]);\n\n        allKeys.forEach(key => {\n            const localVal = localProps[key];\n            const networkVal = networkProps[key];\n\n            // Skip if both are undefined\n            if (localVal === undefined && networkVal === undefined) return;\n\n            // IMPORTANT: Only flag as divergence if:\n            // 1. Network has value but local doesn't (local needs to sync)\n            // 2. Both have values but they differ\n            // NOT a divergence if local has value but network doesn't (local-only properties are okay)\n\n            if (networkVal !== undefined && localVal === undefined) {\n                // Network exists but local missing - this is an error\n                differences[key] = {\n                    local: localVal,\n                    network: networkVal\n                };\n            } else if (localVal !== undefined && networkVal === undefined) {\n                // Local exists but network missing - this is okay, skip it\n                return;\n            } else if (!this.areValuesEqual(localVal, networkVal)) {\n                // Both exist but differ - this is a divergence\n                differences[key] = {\n                    local: localVal,\n                    network: networkVal\n                };\n            }\n        });\n\n        return differences;\n    }\n\n    /**\n     * Deep comparison of two values\n     * @param {*} val1 - First value\n     * @param {*} val2 - Second value\n     * @returns {Boolean} Whether values are equal\n     */\n    areValuesEqual(val1, val2) {\n        // Handle nulls and undefineds\n        if (val1 === val2) return true;\n        if (val1 == null || val2 == null) return false;\n\n        // Handle objects (like Vector3, Color)\n        if (typeof val1 === 'object' && typeof val2 === 'object') {\n            const keys1 = Object.keys(val1);\n            const keys2 = Object.keys(val2);\n\n            if (keys1.length !== keys2.length) return false;\n\n            for (let key of keys1) {\n                if (!this.areValuesEqual(val1[key], val2[key])) return false;\n            }\n            return true;\n        }\n\n        // Handle numbers with tolerance\n        if (typeof val1 === 'number' && typeof val2 === 'number') {\n            return Math.abs(val1 - val2) < 0.001;\n        }\n\n        return false;\n    }\n}", "/**\n * Space Properties Panel\n * Handles public and protected space properties management\n */\n\nimport { isVector3Object, isQuaternion, quaternionToEuler, formatNumber, confirm } from '../../utils.js';\nimport { changeManager } from '../../change-manager.js';\nimport { SpacePropertyChange } from '../../change-types.js';\nimport { SyncStatusComparator } from './sync-status-comparator.js';\n\nexport class SpacePropsPanel {\n    constructor() {\n            this.editingProps = new Map();\n            this.pinnedProps = new Set();\n            this.popupWindow = null;\n            this.isPopupOpen = false;\n            this.popupType = null; // 'public' or 'protected'\n            this.isDragging = false;\n            this.isResizing = false;\n            this.dragOffset = { x: 0, y: 0 };\n            this.resizeStartPos = { x: 0, y: 0, width: 0, height: 0 };\n            this.renders = 0; // Track number of render calls\n            this.renderOrigins = {}\n            this.viewMode = 'flat'; // 'flat', 'struct', or 'sync'\n            this.syncComparator = new SyncStatusComparator(); // Sync status comparator instance\n            this.expandedNodes = new Set(); // Track expanded nodes in struct view\n            this.showAllInline = false; // Whether to show all properties inline (default: only pinned)\n            this.searchQuery = ''; // Search filter for flat view\n            // Property filters for struct view - default show common structure properties\n            this.propertyFilters = new Set(['active', 'layer', 'position', 'rotation', 'scale',\n                                           'localPosition', 'localRotation', 'localScale',\n                                           'components', 'children']);\n            this.varsCache = {}; // Cache for Firebase vars\n            this.listeners = []; // Track listeners for cleanup\n            this.loadPinnedProps();\n            this.loadViewPreferences();\n            this.setupFirebaseListeners();\n            this.setupEventListeners();\n            this.setupCollapsible();\n            this.addPopupButtons();\n            this.render('spaceprop:init');\n        }\n\n        /**\n         * Add popup buttons to space props headers\n         */\n        addPopupButtons() {\n            // Add popup button after a slight delay to ensure DOM is ready\n            setTimeout(() => {\n                const publicHeader = document.querySelector('#publicPropsSection');\n                const protectedHeader = document.querySelector('#protectedPropsSection');\n\n                // Add to public header\n                if (publicHeader) {\n                    // Add popup button if not already there\n                    if (!publicHeader.querySelector('.popup-btn')) {\n                        const popupBtn = document.createElement('button');\n                        popupBtn.className = 'popup-btn';\n                        popupBtn.innerHTML = '\u26F6';\n                        popupBtn.title = 'Open in popup window';\n                        popupBtn.onmousedown = (e) => {\n                            e.stopPropagation();\n                            this.togglePopup('public');\n                        };\n                        publicHeader.appendChild(popupBtn);\n                    }\n\n                    // Add render counter if not already there\n                    if (!publicHeader.querySelector('.render-count')) {\n                        const renderCount = document.createElement('span');\n                        renderCount.className = 'render-count';\n                        renderCount.title = 'Render calls';\n                        renderCount.style.cssText = 'margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;';\n                        renderCount.innerHTML = `R: <span id=\"publicPropsRenderCount\">${this.renders}</span>`;\n                        publicHeader.appendChild(renderCount);\n                    }\n\n                    // Add Show All toggle if not already there\n                    if (!publicHeader.querySelector('.show-all-toggle')) {\n                        const toggleBtn = document.createElement('button');\n                        toggleBtn.className = 'show-all-toggle';\n                        toggleBtn.style.cssText = 'margin-left: 10px; font-size: 12px; padding: 2px 8px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;';\n                        toggleBtn.innerHTML = this.showAllInline ? 'Show Pinned Only' : 'Show All';\n                        toggleBtn.title = this.showAllInline ? 'Show only pinned properties' : 'Show all properties';\n                        toggleBtn.onmousedown = (e) => {\n                            e.stopPropagation();\n                            this.showAllInline = !this.showAllInline;\n                            toggleBtn.innerHTML = this.showAllInline ? 'Show Pinned Only' : 'Show All';\n                            toggleBtn.title = this.showAllInline ? 'Show only pinned properties' : 'Show all properties';\n                            // Also update the protected button if it exists\n                            const protToggle = document.querySelector('#protectedPropsSection .show-all-toggle');\n                            if (protToggle) {\n                                protToggle.innerHTML = toggleBtn.innerHTML;\n                                protToggle.title = toggleBtn.title;\n                            }\n                            this.render('spaceprop:showAllToggle');\n                        };\n                        publicHeader.appendChild(toggleBtn);\n                    }\n                }\n\n                // Add to protected header\n                if (protectedHeader) {\n                    // Add popup button if not already there\n                    if (!protectedHeader.querySelector('.popup-btn')) {\n                        const popupBtn = document.createElement('button');\n                        popupBtn.className = 'popup-btn';\n                        popupBtn.innerHTML = '\u26F6';\n                        popupBtn.title = 'Open in popup window';\n                        popupBtn.onmousedown = (e) => {\n                            e.stopPropagation();\n                            this.togglePopup('protected');\n                        };\n                        protectedHeader.appendChild(popupBtn);\n                    }\n\n                    // Add render counter if not already there\n                    if (!protectedHeader.querySelector('.render-count')) {\n                        const renderCount = document.createElement('span');\n                        renderCount.className = 'render-count';\n                        renderCount.title = 'Render calls';\n                        renderCount.style.cssText = 'margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;';\n                        renderCount.innerHTML = `R: <span id=\"protectedPropsRenderCount\">${this.renders}</span>`;\n                        protectedHeader.appendChild(renderCount);\n                    }\n\n                    // Add Show All toggle if not already there\n                    if (!protectedHeader.querySelector('.show-all-toggle')) {\n                        const toggleBtn = document.createElement('button');\n                        toggleBtn.className = 'show-all-toggle';\n                        toggleBtn.style.cssText = 'margin-left: 10px; font-size: 12px; padding: 2px 8px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;';\n                        toggleBtn.innerHTML = this.showAllInline ? 'Show Pinned Only' : 'Show All';\n                        toggleBtn.title = this.showAllInline ? 'Show only pinned properties' : 'Show all properties';\n                        toggleBtn.onmousedown = (e) => {\n                            e.stopPropagation();\n                            this.showAllInline = !this.showAllInline;\n                            toggleBtn.innerHTML = this.showAllInline ? 'Show Pinned Only' : 'Show All';\n                            toggleBtn.title = this.showAllInline ? 'Show only pinned properties' : 'Show all properties';\n                            // Also update the public button if it exists\n                            const pubToggle = document.querySelector('#publicPropsSection .show-all-toggle');\n                            if (pubToggle) {\n                                pubToggle.innerHTML = toggleBtn.innerHTML;\n                                pubToggle.title = toggleBtn.title;\n                            }\n                            this.render('spaceprop:showAllToggle2');\n                        };\n                        protectedHeader.appendChild(toggleBtn);\n                    }\n                }\n            }, 100);\n        }\n\n        /**\n         * Toggle popup window\n         */\n        togglePopup(type) {\n            if (this.isPopupOpen && this.popupType === type) {\n                // Close if clicking the same type that's already open\n                this.closePopup();\n            } else if (this.isPopupOpen) {\n                // Switch to different type\n                this.closePopup();\n                this.openPopup(type);\n            } else {\n                // Open new popup\n                this.openPopup(type);\n            }\n        }\n\n        /**\n         * Open space props in popup window\n         */\n        openPopup(type) {\n            // Store the type of popup being opened\n            this.popupType = type;\n\n            // Hide inline panel\n            const spacePropsContent = document.getElementById('spacePropsContent');\n            if (spacePropsContent) {\n                spacePropsContent.style.display = 'none';\n            }\n\n            // Create popup window\n            this.createPopupWindow(type);\n            this.isPopupOpen = true;\n\n            // Render content in popup\n            this.render('spaceprop:openPopup');\n        }\n\n        /**\n         * Close popup window\n         */\n        closePopup() {\n            if (this.popupWindow && this.popupWindow.parentNode) {\n                this.popupWindow.remove();\n            }\n            this.popupWindow = null;\n            this.isPopupOpen = false;\n            this.popupType = null;\n\n            // Show inline panel again\n            const spacePropsContent = document.getElementById('spacePropsContent');\n            if (spacePropsContent) {\n                spacePropsContent.style.display = '';\n            }\n\n            // Re-render in inline panel\n            this.render('spaceprop:closePopup');\n            // Re-add popup buttons after rendering\n            this.addPopupButtons();\n        }\n\n        /**\n         * Create property filter buttons HTML\n         */\n        createPropertyFilterButtons() {\n            const properties = ['active', 'layer', 'position', 'rotation', 'scale',\n                              'localPosition', 'localRotation', 'localScale',\n                              'components', 'children'];\n\n            return properties.map(prop => {\n                const isActive = this.propertyFilters.has(prop);\n                return `\n                    <button class=\"property-filter-btn ${isActive ? 'active' : ''}\"\n                            data-property=\"${prop}\"\n                            style=\"padding: 4px 10px;\n                                   border-radius: 4px;\n                                   border: 1px solid ${isActive ? '#3b82c4' : '#555'};\n                                   background: ${isActive ? '#3b82c4' : '#2a2a2a'};\n                                   color: ${isActive ? 'white' : '#888'};\n                                   cursor: pointer;\n                                   font-size: 12px;\n                                   transition: all 0.2s;\">\n                        ${prop}\n                    </button>`;\n            }).join('');\n        }\n\n        /**\n         * Create popup window\n         */\n        createPopupWindow(type) {\n            // Remove any existing popup first\n            if (this.popupWindow) {\n                this.popupWindow.remove();\n            }\n\n            // Determine title and content based on type\n            const isPublic = type === 'public';\n            const title = isPublic ? 'Public Properties' : 'Protected Properties';\n            const propsKey = isPublic ? 'public' : 'protected';\n            const capitalized = isPublic ? 'Public' : 'Protected';\n\n            // Create popup container\n            this.popupWindow = document.createElement('div');\n            this.popupWindow.id = 'space-props-popup';\n            this.popupWindow.className = 'space-props-popup';\n            this.popupWindow.innerHTML = `\n                <div class=\"popup-header\">\n                    <span class=\"popup-title\">${title}</span>\n                    <div class=\"popup-controls\">\n                        <button class=\"view-toggle-btn ${this.viewMode === 'flat' ? 'active' : ''}\" data-mode=\"flat\" title=\"Flat view\">\n                            <span>\uD83D\uDCCB</span> Flat\n                        </button>\n                        <button class=\"view-toggle-btn ${this.viewMode === 'struct' ? 'active' : ''}\" data-mode=\"struct\" title=\"Structured view\">\n                            <span>\uD83C\uDF33</span> Struct\n                        </button>\n                        <button class=\"view-toggle-btn ${this.viewMode === 'sync' ? 'active' : ''}\" data-mode=\"sync\" title=\"Sync Status view\">\n                            <span>\uD83D\uDD04</span> Sync Status\n                        </button>\n                        <button class=\"popup-close\" title=\"Close\">&times;</button>\n                    </div>\n                </div>\n                <div class=\"popup-content\">\n                    <div class=\"space-props-content-popup\">\n                        <div class=\"space-props-section\">\n                            <div class=\"space-props-header\">\n                                <h3>${capitalized} Properties</h3>\n                                <span class=\"props-count\" id=\"${propsKey}PropsCountPopup\">0</span>\n                                <span class=\"render-count\" style=\"margin-left: 10px; font-size: 12px; color: #888; background: #333; padding: 2px 6px; border-radius: 3px;\" title=\"Render calls\">R: <span id=\"SpacePropsRenderCount\">${this.renders}</span></span>\n                                <button class=\"refresh-popup-btn\" id=\"refreshPopupBtn\" style=\"margin-left: 8px; font-size: 12px; padding: 2px 6px; border-radius: 3px; background: #444; border: 1px solid #555; color: #888; cursor: pointer;\" title=\"Refresh all values\">\uD83D\uDD04</button>\n                            </div>\n                            <div class=\"search-bar-container\" id=\"searchBarContainer\" style=\"display: ${this.viewMode === 'flat' ? 'block' : 'none'}; padding: 10px; border-bottom: 1px solid #333;\">\n                                <input type=\"text\"\n                                    id=\"propSearchInput\"\n                                    class=\"prop-search-input\"\n                                    placeholder=\"\uD83D\uDD0D Search properties...\"\n                                    value=\"${this.searchQuery}\"\n                                    style=\"width: 100%; padding: 8px 12px; background: #2a2a2a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; font-size: 14px;\">\n                            </div>\n                            <div class=\"property-filters-container\" id=\"propertyFiltersContainer\" style=\"display: ${this.viewMode === 'struct' || this.viewMode === 'sync' ? 'block' : 'none'}; padding: 10px; border-bottom: 1px solid #333;\">\n                                <div style=\"font-size: 11px; color: #888; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px;\">Show Properties:</div>\n                                <div class=\"property-filter-buttons\" id=\"propertyFilterButtons\" style=\"display: flex; flex-wrap: wrap; gap: 6px;\">\n                                    ${this.createPropertyFilterButtons()}\n                                </div>\n                            </div>\n                            <div class=\"props-list\" id=\"${propsKey}PropsListPopup\">\n                                <div class=\"empty-props\">No ${propsKey} properties</div>\n                            </div>\n                            <div class=\"add-prop-container\">\n                                <input type=\"text\" id=\"add${capitalized}KeyPopup\" class=\"prop-input\" placeholder=\"Key\">\n                                <input type=\"text\" id=\"add${capitalized}ValuePopup\" class=\"prop-input\" placeholder=\"Value\">\n                                <button onclick=\"window.spacePropsPanel.add${capitalized}PropPopup()\" class=\"add-prop-button\">Add</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"popup-resize-handle\"></div>\n            `;\n\n            // Position popup in center of screen initially\n            this.popupWindow.style.left = '50%';\n            this.popupWindow.style.top = '50%';\n            this.popupWindow.style.transform = 'translate(-50%, -50%)';\n            this.popupWindow.style.width = '500px';\n            this.popupWindow.style.height = '400px';\n\n            // Add to document body\n            document.body.appendChild(this.popupWindow);\n\n            // Set up event listeners\n            this.setupPopupEventListeners();\n\n            // Apply styles\n            this.injectStructViewStyles();\n        }\n\n        /**\n         * Setup popup event listeners\n         */\n        setupPopupEventListeners() {\n            const header = this.popupWindow.querySelector('.popup-header');\n            const closeBtn = this.popupWindow.querySelector('.popup-close');\n            const resizeHandle = this.popupWindow.querySelector('.popup-resize-handle');\n            const viewToggleBtns = this.popupWindow.querySelectorAll('.view-toggle-btn');\n\n            // Close button\n            closeBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                this.closePopup();\n            });\n\n            // View toggle buttons\n            viewToggleBtns.forEach(btn => {\n                btn.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    const mode = btn.dataset.mode;\n                    if (mode !== this.viewMode) {\n                        this.viewMode = mode;\n                        this.saveViewPreferences();\n                        // Update active state\n                        viewToggleBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === mode));\n\n                        // Show/hide search bar and filters based on view mode\n                        const searchBarContainer = this.popupWindow.querySelector('#searchBarContainer');\n                        if (searchBarContainer) {\n                            searchBarContainer.style.display = mode === 'flat' ? 'block' : 'none';\n                        }\n\n                        const propertyFiltersContainer = this.popupWindow.querySelector('#propertyFiltersContainer');\n                        if (propertyFiltersContainer) {\n                            propertyFiltersContainer.style.display = (mode === 'struct' || mode === 'sync') ? 'block' : 'none';\n                        }\n\n                        // Clear search when switching to struct view\n                        if (mode === 'struct') {\n                            this.searchQuery = '';\n                            const searchInput = this.popupWindow.querySelector('#propSearchInput');\n                            if (searchInput) searchInput.value = '';\n                        }\n\n                        // Re-render with new view mode\n                        this.render(\"spaceprop:viewModeChanged\");\n                    }\n                });\n            });\n\n            // Search input\n            const searchInput = this.popupWindow.querySelector('#propSearchInput');\n            if (searchInput) {\n                searchInput.addEventListener('input', (e) => {\n                    this.searchQuery = e.target.value.toLowerCase();\n                    // Re-render to apply filter\n                    this.render(\"spaceprop:searchInputChanged\");\n                });\n\n                // Clear search on Escape\n                searchInput.addEventListener('keydown', (e) => {\n                    if (e.key === 'Escape') {\n                        this.searchQuery = '';\n                        searchInput.value = '';\n                        this.render(\"spaceprop:searchInputCleared\");\n                    }\n                });\n            }\n\n            // Refresh button\n            const refreshBtn = this.popupWindow.querySelector('#refreshPopupBtn');\n            if (refreshBtn) {\n                refreshBtn.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    // Force a full refresh of all properties\n                    this.fullRefresh();\n                });\n            }\n\n            // Property filter buttons\n            const propertyFilterButtons = this.popupWindow.querySelectorAll('.property-filter-btn');\n            propertyFilterButtons.forEach(btn => {\n                btn.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    const property = btn.dataset.property;\n\n                    // Toggle filter\n                    if (this.propertyFilters.has(property)) {\n                        this.propertyFilters.delete(property);\n                        btn.classList.remove('active');\n                        btn.style.background = '#2a2a2a';\n                        btn.style.borderColor = '#555';\n                        btn.style.color = '#888';\n                    } else {\n                        this.propertyFilters.add(property);\n                        btn.classList.add('active');\n                        btn.style.background = '#3b82c4';\n                        btn.style.borderColor = '#3b82c4';\n                        btn.style.color = 'white';\n                    }\n\n                    this.saveViewPreferences();\n                    // Re-render to apply filters\n                    this.render(\"spaceprop:propertyFilterChanged\");\n                });\n            });\n\n            // Dragging functionality\n            header.addEventListener('mousedown', (e) => {\n                if (e.target.classList.contains('popup-close')) return;\n                if (e.target.classList.contains('view-toggle-btn')) return;\n                if (e.target.closest('.view-toggle-btn')) return;\n\n                this.isDragging = true;\n\n                // Get current position\n                const rect = this.popupWindow.getBoundingClientRect();\n                this.dragOffset.x = e.clientX - rect.left;\n                this.dragOffset.y = e.clientY - rect.top;\n\n                // Remove transform for absolute positioning\n                this.popupWindow.style.transform = 'none';\n\n                header.style.cursor = 'grabbing';\n            });\n\n            // Resize functionality\n            resizeHandle.addEventListener('mousedown', (e) => {\n                this.isResizing = true;\n                const rect = this.popupWindow.getBoundingClientRect();\n                this.resizeStartPos = {\n                    x: e.clientX,\n                    y: e.clientY,\n                    width: rect.width,\n                    height: rect.height\n                };\n                e.preventDefault();\n            });\n\n            // Global mouse move\n            document.addEventListener('mousemove', (e) => {\n                if (this.isDragging && this.popupWindow) {\n                    const x = e.clientX - this.dragOffset.x;\n                    const y = e.clientY - this.dragOffset.y;\n\n                    this.popupWindow.style.left = `${x}px`;\n                    this.popupWindow.style.top = `${y}px`;\n                } else if (this.isResizing && this.popupWindow) {\n                    const deltaX = e.clientX - this.resizeStartPos.x;\n                    const deltaY = e.clientY - this.resizeStartPos.y;\n\n                    const newWidth = Math.max(400, this.resizeStartPos.width + deltaX);\n                    const newHeight = Math.max(300, this.resizeStartPos.height + deltaY);\n\n                    this.popupWindow.style.width = `${newWidth}px`;\n                    this.popupWindow.style.height = `${newHeight}px`;\n                }\n            });\n\n            // Global mouse up\n            document.addEventListener('mouseup', () => {\n                if (this.isDragging) {\n                    this.isDragging = false;\n                    const header = this.popupWindow?.querySelector('.popup-header');\n                    if (header) header.style.cursor = 'grab';\n                }\n                if (this.isResizing) {\n                    this.isResizing = false;\n                }\n            });\n\n            // Setup input event listeners for popup based on type\n            if (this.popupType === 'public') {\n                const keyInput = this.popupWindow.querySelector('#addPublicKeyPopup');\n                const valueInput = this.popupWindow.querySelector('#addPublicValuePopup');\n\n                if (keyInput && valueInput) {\n                    const addProp = () => this.addPublicPropPopup();\n                    keyInput.addEventListener('keypress', (e) => {\n                        if (e.key === 'Enter') addProp();\n                    });\n                    valueInput.addEventListener('keypress', (e) => {\n                        if (e.key === 'Enter') addProp();\n                    });\n                }\n            } else if (this.popupType === 'protected') {\n                const keyInput = this.popupWindow.querySelector('#addProtectedKeyPopup');\n                const valueInput = this.popupWindow.querySelector('#addProtectedValuePopup');\n\n                if (keyInput && valueInput) {\n                    const addProp = () => this.addProtectedPropPopup();\n                    keyInput.addEventListener('keypress', (e) => {\n                        if (e.key === 'Enter') addProp();\n                    });\n                    valueInput.addEventListener('keypress', (e) => {\n                        if (e.key === 'Enter') addProp();\n                    });\n                }\n            }\n        }\n\n        /**\n         * Setup collapsible functionality\n         */\n        setupCollapsible() {\n            const collapseBtn = document.getElementById('spacePropsCollapseBtn');\n            const panel = document.getElementById('spacePropsContent');\n\n            if (collapseBtn && panel) {\n                // Load saved state from localStorage\n                const isCollapsed = localStorage.getItem('spacePropsCollapsed') === 'true';\n                if (isCollapsed) {\n                    panel.classList.add('collapsed');\n                    collapseBtn.classList.add('collapsed');\n                }\n\n                // Add click handler\n                collapseBtn.addEventListener('click', () => {\n                    const isCurrentlyCollapsed = panel.classList.contains('collapsed');\n                    if (isCurrentlyCollapsed) {\n                        panel.classList.remove('collapsed');\n                        collapseBtn.classList.remove('collapsed');\n                        localStorage.setItem('spacePropsCollapsed', 'false');\n                    } else {\n                        panel.classList.add('collapsed');\n                        collapseBtn.classList.add('collapsed');\n                        localStorage.setItem('spacePropsCollapsed', 'true');\n                    }\n                });\n            }\n        }\n\n        /**\n         * Setup Firebase listeners for real-time synchronization\n         */\n        async setupFirebaseListeners() {\n\n            if(!net.db){\n                await new Promise(resolve => setTimeout(resolve, 100));\n                await this.setupFirebaseListeners();\n                return;\n            }\n            // Use the global net instance directly\n\n            // Main listener for all vars changes\n            net.onVarsChange((snapshot) => {\n                this.varsCache = snapshot.val() || {};\n                this.renderFromCache();\n            });\n\n            // Granular listeners for performance optimization\n            this.listeners.push(\n                net.onVarAdded((snapshot) => {\n                    this.handlePropertyAdded(snapshot.key, snapshot.val());\n                })\n            );\n\n            this.listeners.push(\n                net.onVarChanged((snapshot) => {\n                    this.handlePropertyChanged(snapshot.key, snapshot.val());\n                })\n            );\n\n            this.listeners.push(\n                net.onVarRemoved((snapshot) => {\n                    this.handlePropertyRemoved(snapshot.key);\n                })\n            );\n        }\n\n        /**\n         * Handle property added from Firebase\n         */\n        handlePropertyAdded(key, value) {\n            // Update local cache\n            this.varsCache[key] = value;\n            // Smart render to only update if necessary\n            this.smartRender(key, key.startsWith('_'));\n        }\n\n        /**\n         * Handle property changed from Firebase\n         */\n        handlePropertyChanged(key, value) {\n            // Update local cache\n            this.varsCache[key] = value;\n            // Smart render to only update if necessary\n            this.smartRender(key, key.startsWith('_'));\n        }\n\n        /**\n         * Handle property removed from Firebase\n         */\n        handlePropertyRemoved(key) {\n            // Remove from local cache\n            delete this.varsCache[key];\n            // Smart render to only update if necessary\n            this.smartRender(key, key.startsWith('_'));\n        }\n\n        /**\n         * Render from cached data\n         */\n        renderFromCache() {\n            const { public: publicVars, protected: protectedVars } = this.categorizeProperties();\n\n            if (this.isPopupOpen && this.popupWindow) {\n                // Render only the specific property type in popup\n                if (this.viewMode === 'struct') {\n                    if (this.popupType === 'public') {\n                        this.renderStructView('public', this.varsCache, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderStructView('protected', this.varsCache, true);\n                    }\n                } else if (this.viewMode === 'sync') {\n                    if (this.popupType === 'public') {\n                        this.renderSyncView('public', this.varsCache, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderSyncView('protected', this.varsCache, true);\n                    }\n                } else {\n                    if (this.popupType === 'public') {\n                        this.renderPropsList('public', this.varsCache, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderPropsList('protected', this.varsCache, true);\n                    }\n                }\n            } else {\n                // Render both in inline panel (always flat view for inline)\n                this.renderPropsList('public', this.varsCache, false);\n                this.renderPropsList('protected', this.varsCache, false);\n            }\n        }\n\n        /**\n         * Categorize properties into public and protected\n         */\n        categorizeProperties() {\n            // Use the helper method from net\n            return net.categorizeVars(this.varsCache);\n        }\n\n        /**\n         * Setup event listeners\n         */\n        setupEventListeners() {\n            // Firebase listeners handle space state changes now\n            // Remove legacy spaceStateChanged event listener\n\n            // Add property key press handlers\n            const publicKeyInput = document.getElementById('addPublicKey');\n            const publicValueInput = document.getElementById('addPublicValue');\n            const protectedKeyInput = document.getElementById('addProtectedKey');\n            const protectedValueInput = document.getElementById('addProtectedValue');\n            const refreshSpacePropsBtn = document.getElementById('refreshSpacePropsBtn');\n            if(refreshSpacePropsBtn){\n                refreshSpacePropsBtn.addEventListener('mousedown', () => {\n                    this.render(\"spaceprop:refreshSpacePropsBtn\");\n                });\n            }\n\n            if (publicKeyInput && publicValueInput) {\n                const addPublic = () => this.addPublicProp();\n                publicKeyInput.addEventListener('keypress', (e) => {\n                    if (e.key === 'Enter') addPublic();\n                });\n                publicValueInput.addEventListener('keypress', (e) => {\n                    if (e.key === 'Enter') addPublic();\n                });\n            }\n\n            if (protectedKeyInput && protectedValueInput) {\n                const addProtected = () => this.addProtectedProp();\n                protectedKeyInput.addEventListener('keypress', (e) => {\n                    if (e.key === 'Enter') addProtected();\n                });\n                protectedValueInput.addEventListener('keypress', (e) => {\n                    if (e.key === 'Enter') addProtected();\n                });\n            }\n        }\n\n        /**\n         * Render space properties\n         */\n        /**\n         * Check if we should render based on property changes\n         */\n        shouldRenderForProperty(propertyKey, isProtected = false) {\n            // Always render if popup is open\n            if (this.isPopupOpen) {\n                return true;\n            }\n\n            // If showing all inline, always render\n            if (this.showAllInline) {\n                return true;\n            }\n\n            // Otherwise, only render if property is pinned\n            const type = isProtected ? 'protected' : 'public';\n            const propKey = `${type}_${propertyKey}`;\n            return this.pinnedProps.has(propKey);\n        }\n\n        /**\n         * Smart render - only renders if necessary\n         */\n        smartRender(propertyKey = null, isProtected = false) {\n            // If no property specified, always render (for general updates)\n            if (!propertyKey) {\n                this.render(\"spaceprop:smartRender\");\n                return;\n            }\n\n            // Check if we should render for this property\n            if (this.shouldRenderForProperty(propertyKey, isProtected)) {\n                this.render(\"spaceprop:smartRender2\");\n            }\n        }\n\n        /**\n         * Force a full refresh of all property values from the scene\n         */\n        fullRefresh() {\n            // Clear any cached values or editing states\n            this.editingProps.clear();\n\n            // Force re-fetch all properties from Firebase\n            // The Firebase listener will automatically update the varsCache\n            // Force a full re-render\n            this.render('spaceprop:fullRefresh');\n\n            // Show a brief visual feedback that refresh occurred\n            const refreshBtn = this.popupWindow?.querySelector('#refreshPopupBtn');\n            if (refreshBtn) {\n                const originalColor = refreshBtn.style.color;\n                refreshBtn.style.color = '#3b82c4';\n                setTimeout(() => {\n                    refreshBtn.style.color = originalColor;\n                }, 300);\n            }\n        }\n\n        render(origin) {\n            // Increment render counter\n            this.renders++;\n            origin = origin || 'unknown';\n            this.renderOrigins[origin] = (this.renderOrigins[origin] || 0) + 1;\n            this.updateRenderCount();\n\n            // Use cached vars from Firebase\n            const vars = this.varsCache;\n\n            if (this.isPopupOpen && this.popupWindow) {\n                // Render only the specific property type in popup\n                if (this.viewMode === 'struct') {\n                    // Render in struct view\n                    if (this.popupType === 'public') {\n                        this.renderStructView('public', vars, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderStructView('protected', vars, true);\n                    }\n                } else if (this.viewMode === 'sync') {\n                    // Render in sync status view\n                    if (this.popupType === 'public') {\n                        this.renderSyncView('public', vars, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderSyncView('protected', vars, true);\n                    }\n                } else {\n                    // Render in flat view\n                    if (this.popupType === 'public') {\n                        this.renderPropsList('public', vars, true);\n                    } else if (this.popupType === 'protected') {\n                        this.renderPropsList('protected', vars, true);\n                    }\n                }\n            } else {\n                // Render both in inline panel (always flat view for inline)\n                this.renderPropsList('public', vars, false);\n                this.renderPropsList('protected', vars, false);\n            }\n        }\n\n        /**\n         * Update render count display\n         */\n        updateRenderCount() {\n            // Update in popup if open\n            if (this.popupWindow) {\n                const popupCounter = this.popupWindow.querySelector('#SpacePropsRenderCount');\n                if (popupCounter) {\n                    popupCounter.textContent = this.renders;\n                }\n            }\n\n            // Update in inline panel headers - we'll add these elements in addPopupButtons\n            const publicCounter = document.querySelector('#publicPropsRenderCount');\n            if (publicCounter) {\n                publicCounter.textContent = this.renders;\n            }\n\n            const protectedCounter = document.querySelector('#protectedPropsRenderCount');\n            if (protectedCounter) {\n                protectedCounter.textContent = this.renders;\n            }\n        }\n\n        /**\n         * Render properties list\n         */\n        renderPropsList(type, props, isPopup = false) {\n            const suffix = isPopup ? 'Popup' : '';\n            const listElement = document.getElementById(`${type}PropsList${suffix}`);\n            const countElement = document.getElementById(`${type}PropsCount${suffix}`);\n\n            if (!listElement || !countElement) return;\n\n            const propKeys = Object.keys(props);\n\n            // Filter properties for inline view\n            let filteredKeys = propKeys;\n            if (!isPopup && !this.showAllInline) {\n                // Only show pinned properties in inline view\n                filteredKeys = propKeys.filter(key => {\n                    const propKey = `${type}_${key}`;\n                    return this.pinnedProps.has(propKey);\n                });\n            }\n\n            // Apply search filter for popup flat view\n            if (isPopup && this.searchQuery && this.viewMode === 'flat') {\n                filteredKeys = filteredKeys.filter(key =>\n                    key.toLowerCase().includes(this.searchQuery)\n                );\n            }\n\n            // Update count display\n            if (!isPopup && !this.showAllInline) {\n                countElement.textContent = `${filteredKeys.length} pinned / ${propKeys.length} total`;\n            } else if (isPopup && this.searchQuery && this.viewMode === 'flat') {\n                // Show filtered count when searching\n                countElement.textContent = `${filteredKeys.length} / ${propKeys.length}`;\n            } else {\n                countElement.textContent = propKeys.length;\n            }\n\n            if (filteredKeys.length === 0) {\n                if (!isPopup && !this.showAllInline && propKeys.length > 0) {\n                    listElement.innerHTML = `<div class=\"empty-props\">No pinned ${type} properties<br><small style=\"opacity:0.7\">${propKeys.length} total available</small></div>`;\n                } else if (isPopup && this.searchQuery && this.viewMode === 'flat') {\n                    listElement.innerHTML = `<div class=\"empty-props\">No properties matching \"<strong>${this.searchQuery}</strong>\"<br><small style=\"opacity:0.7\">${propKeys.length} total properties</small></div>`;\n                } else {\n                    listElement.innerHTML = `<div class=\"empty-props\">No ${type} properties</div>`;\n                }\n                return;\n            }\n\n            listElement.innerHTML = '';\n\n            // Sort properties: pinned first, then alphabetical\n            const sortedKeys = filteredKeys.sort((a, b) => {\n                const aKey = `${type}_${a}`;\n                const bKey = `${type}_${b}`;\n                const aPinned = this.pinnedProps.has(aKey);\n                const bPinned = this.pinnedProps.has(bKey);\n\n                if (aPinned && !bPinned) return -1;\n                if (!aPinned && bPinned) return 1;\n                return a.localeCompare(b);\n            });\n\n            sortedKeys.forEach(key => {\n                const value = props[key];\n\n                if(value === \"null\" || value === \"undefined\") return;\n                const propItem = this.createPropItem(type, key, value, isPopup);\n                listElement.appendChild(propItem);\n            });\n        }\n\n        /**\n         * Create property item element\n         */\n        createPropItem(type, key, value, isPopup = false) {\n            const item = document.createElement('div');\n            const propKey = `${type}_${key}`;\n            const isPinned = this.pinnedProps.has(propKey);\n\n            item.className = isPinned ? 'prop-item pinned' : 'prop-item';\n\n            // Pin button\n            const pinBtn = document.createElement('button');\n            pinBtn.className = isPinned ? 'prop-pin-button pinned' : 'prop-pin-button';\n            pinBtn.innerHTML = '\uD83D\uDCCC';\n            pinBtn.title = isPinned ? 'Unpin' : 'Pin to top';\n            pinBtn.onmousedown = (e) => {\n                e.stopPropagation();\n                this.togglePinProp(type, key);\n            };\n\n            const keyElement = document.createElement('div');\n            keyElement.className = 'prop-key';\n            keyElement.textContent = key;\n            keyElement.title = key;\n            keyElement.style.marginLeft = \"4px\";\n            \n            const valueContainer = document.createElement('div');\n            valueContainer.className = 'prop-value';\n            \n            const isEditing = this.editingProps.has(`${type}_${key}`);\n            \n            if (isQuaternion(value)) {\n                // Quaternion - display as read-only Euler angles\n                const eulerAngles = quaternionToEuler(value);\n                const valueDisplay = document.createElement('span');\n                valueDisplay.className = 'prop-value-display quaternion-euler';\n                valueDisplay.textContent = `(${formatNumber(eulerAngles.x, 2)}, ${formatNumber(eulerAngles.y, 2)}, ${formatNumber(eulerAngles.z, 2)})`;\n                valueDisplay.title = 'Rotation in Euler angles (read-only)';\n                \n                valueContainer.appendChild(valueDisplay);\n                \n                // Only delete button for quaternions (no edit)\n                const actions = document.createElement('div');\n                actions.className = 'prop-actions';\n                \n                const deleteBtn = document.createElement('button');\n                deleteBtn.className = 'prop-button delete';\n                deleteBtn.innerHTML = '\u00D7';\n                deleteBtn.title = 'Delete';\n                deleteBtn.onmousedown = () => this.deleteProp(type, key);\n                \n                actions.appendChild(deleteBtn);\n                valueContainer.appendChild(actions);\n                \n            } else if (isVector3Object(value)) {\n                // Vector3 always shows input fields\n                const vectorGroup = document.createElement('div');\n                vectorGroup.className = 'vector-group';\n                \n                ['x', 'y', 'z'].forEach(axis => {\n                    const input = document.createElement('input');\n                    input.type = 'number';\n                    input.className = 'property-input number';\n                    const suffix = isPopup ? '_popup' : '';\n                    input.id = `${type}_prop_${key}_${axis}${suffix}`;\n                    input.value = value[axis] || 0;\n                    input.step = 'any';\n                    \n                    // Auto-save on change\n                    input.addEventListener('change', () => {\n                        this.saveVector3Prop(type, key, isPopup);\n                    });\n\n                    // Handle Enter and Escape keys\n                    input.addEventListener('keydown', (e) => {\n                        if (e.key === 'Enter') {\n                            this.saveVector3Prop(type, key, isPopup);\n                            e.preventDefault();\n                        }\n                    });\n                    \n                    const label = document.createElement('span');\n                    label.className = 'vector-label';\n                    label.textContent = axis.toUpperCase();\n                    \n                    vectorGroup.appendChild(label);\n                    vectorGroup.appendChild(input);\n                });\n                \n                valueContainer.appendChild(vectorGroup);\n                \n                // Delete button for Vector3\n                const actions = document.createElement('div');\n                actions.className = 'prop-actions';\n                \n                const deleteBtn = document.createElement('button');\n                deleteBtn.className = 'prop-button delete';\n                deleteBtn.innerHTML = '\u00D7';\n                deleteBtn.title = 'Delete';\n                deleteBtn.onmousedown = () => this.deleteProp(type, key);\n                \n                actions.appendChild(deleteBtn);\n                valueContainer.appendChild(actions);\n                \n            } else if (isEditing) {\n                // Edit mode for non-Vector3\n                const input = document.createElement('input');\n                input.type = 'text';\n                input.className = 'prop-input';\n                const suffix = isPopup ? '_popup' : '';\n                input.id = `${type}_prop_${key}${suffix}`;\n                input.value = typeof value === 'object' ? JSON.stringify(value) : value;\n                input.addEventListener('keypress', (e) => {\n                    this.handlePropKeyPress(e, type, key, isPopup);\n                });\n                valueContainer.appendChild(input);\n                \n                // Save/Cancel buttons\n                const actions = document.createElement('div');\n                actions.className = 'prop-actions';\n                \n                const saveBtn = document.createElement('button');\n                saveBtn.className = 'prop-button save';\n                saveBtn.innerHTML = '\u2713';\n                saveBtn.title = 'Save';\n                saveBtn.onmousedown = () => this.saveProp(type, key, isPopup);\n\n                const cancelBtn = document.createElement('button');\n                cancelBtn.className = 'prop-button';\n                cancelBtn.innerHTML = '\u00D7';\n                cancelBtn.title = 'Cancel';\n                cancelBtn.onmousedown = () => this.cancelEditProp(type, key);\n                \n                actions.appendChild(saveBtn);\n                actions.appendChild(cancelBtn);\n                valueContainer.appendChild(actions);\n                \n            } else {\n                // Display mode for non-Vector3 and non-Quaternion\n                const valueDisplay = document.createElement('span');\n                valueDisplay.className = 'prop-value-display';\n                \n                if (typeof value === 'object') {\n                    valueDisplay.textContent = JSON.stringify(value);\n                } else {\n                    valueDisplay.textContent = value;\n                }\n                \n                valueContainer.appendChild(valueDisplay);\n                \n                // Edit/Delete buttons\n                const actions = document.createElement('div');\n                actions.className = 'prop-actions';\n                \n                const editBtn = document.createElement('button');\n                editBtn.className = 'prop-button';\n                editBtn.innerHTML = '\u270E';\n                editBtn.title = 'Edit';\n                editBtn.onmousedown = () => this.editProp(type, key, isPopup);\n\n                const deleteBtn = document.createElement('button');\n                deleteBtn.className = 'prop-button delete';\n                deleteBtn.innerHTML = '\u00D7';\n                deleteBtn.title = 'Delete';\n                deleteBtn.onmousedown = () => this.deleteProp(type, key);\n                \n                actions.appendChild(editBtn);\n                actions.appendChild(deleteBtn);\n                valueContainer.appendChild(actions);\n            }\n            \n            item.appendChild(pinBtn);\n            item.appendChild(keyElement);\n            item.appendChild(valueContainer);\n\n            return item;\n        }\n\n        /**\n         * Start editing a property\n         */\n        editProp(type, key, isPopup = false) {\n            this.editingProps.set(`${type}_${key}`, true);\n            // Always render when starting edit mode to show the edit UI\n            this.render();\n\n            // Focus the input after render\n            setTimeout(() => {\n                const value = this.varsCache[key];\n                const suffix = isPopup ? '_popup' : '';\n\n                if (isVector3Object(value)) {\n                    // Focus the first Vector3 input (x)\n                    const xInput = document.getElementById(`${type}_prop_${key}_x${suffix}`);\n                    if (xInput) {\n                        xInput.dataset.input = \"propertyPanelEditProp\";\n                        xInput.focus();\n                        xInput.select();\n                    }\n                } else {\n                    // Focus regular input\n                    const input = document.getElementById(`${type}_prop_${key}${suffix}`);\n                    if (input) {\n                        input.dataset.input = \"propertyPanelEditProp\";\n                        input.focus();\n                        input.select();\n                    }\n                }\n            }, 0);\n        }\n\n        /**\n         * Save edited property\n         */\n        saveProp(type, key, isPopup = false) {\n            const currentValue = this.varsCache[key];\n            const suffix = isPopup ? '_popup' : '';\n\n            if (isVector3Object(currentValue)) {\n                // Save Vector3\n                const xInput = document.getElementById(`${type}_prop_${key}_x${suffix}`);\n                const yInput = document.getElementById(`${type}_prop_${key}_y${suffix}`);\n                const zInput = document.getElementById(`${type}_prop_${key}_z${suffix}`);\n\n                if (xInput && yInput && zInput) {\n                    const newValue = {\n                        x: parseFloat(xInput.value) || 0,\n                        y: parseFloat(yInput.value) || 0,\n                        z: parseFloat(zInput.value) || 0\n                    };\n                    const change = new SpacePropertyChange(key, newValue, type === 'protected', { source: 'ui' });\n                    changeManager.applyChange(change);\n                }\n            } else {\n                // Save regular value\n                const input = document.getElementById(`${type}_prop_${key}${suffix}`);\n                if (input) {\n                    // Use parseValue method to handle all value types including Vector3\n                    const newValue = this.parseValue(input.value);\n                    const change = new SpacePropertyChange(key, newValue, type === 'protected', { source: 'ui' });\n                    changeManager.applyChange(change);\n                }\n            }\n\n            this.cancelEditProp(type, key);\n        }\n\n        /**\n         * Cancel editing a property\n         */\n        cancelEditProp(type, key) {\n            this.editingProps.delete(`${type}_${key}`);\n            // Use smart render - only render if property is visible\n            this.smartRender(key, type === 'protected');\n        }\n\n        /**\n         * Cleanup method to remove all Firebase listeners\n         */\n        cleanup() {\n            // Remove all granular listeners\n            this.listeners.forEach(listener => {\n                net.removeListener(listener);\n            });\n            this.listeners = [];\n\n            // Clean up any popup windows\n            if (this.popupWindow && !this.popupWindow.closed) {\n                this.popupWindow.close();\n            }\n        }\n\n        /**\n         * View script content in a modal\n         */\n        viewScript(type, key) {\n            const scriptContent = this.varsCache[key];\n            const scriptName = key.substring(1); // Remove # prefix\n\n            // Create modal\n            const modal = document.createElement('div');\n            modal.className = 'script-view-modal';\n            modal.style.cssText = `\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: 80%;\n                max-width: 800px;\n                height: 80%;\n                background: #1e1e1e;\n                border: 1px solid #444;\n                border-radius: 8px;\n                z-index: 10000;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);\n            `;\n\n            // Modal header\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 12px 16px;\n                background: #2a2a2a;\n                border-bottom: 1px solid #444;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n            `;\n            header.innerHTML = `\n                <h3 style=\"margin: 0; color: #e0e0e0;\">\uD83D\uDCC4 ${scriptName}</h3>\n                <button onclick=\"this.closest('.script-view-modal').remove()\" style=\"background: none; border: none; color: #888; cursor: pointer; font-size: 20px;\">\u00D7</button>\n            `;\n\n            // Script content with line numbers\n            const contentContainer = document.createElement('div');\n            contentContainer.style.cssText = `\n                flex: 1;\n                overflow: auto;\n                padding: 16px;\n                font-family: 'Consolas', 'Monaco', monospace;\n                font-size: 12px;\n            `;\n\n            // Add line numbers and content\n            const lines = scriptContent.split('\\n');\n            const lineNumberWidth = lines.length.toString().length;\n\n            const pre = document.createElement('pre');\n            pre.style.cssText = 'margin: 0; color: #888;';\n\n            lines.forEach((line, index) => {\n                const lineNumber = (index + 1).toString().padStart(lineNumberWidth, ' ');\n                const lineElement = document.createElement('div');\n                lineElement.style.cssText = 'white-space: pre-wrap; word-break: break-word;';\n                lineElement.innerHTML = `<span style=\"color: #555; margin-right: 12px;\">${lineNumber}</span><span style=\"color: #e0e0e0;\">${this.escapeHtml(line)}</span>`;\n                pre.appendChild(lineElement);\n            });\n\n            contentContainer.appendChild(pre);\n\n            // Modal footer with metadata\n            const footer = document.createElement('div');\n            footer.style.cssText = `\n                padding: 8px 16px;\n                background: #2a2a2a;\n                border-top: 1px solid #444;\n                color: #888;\n                font-size: 11px;\n            `;\n            const sizeKB = (scriptContent.length / 1024).toFixed(1);\n            footer.textContent = `${lines.length} lines \u2022 ${sizeKB} KB`;\n\n            modal.appendChild(header);\n            modal.appendChild(contentContainer);\n            modal.appendChild(footer);\n\n            // Add to document\n            document.body.appendChild(modal);\n\n            // Close on Escape key\n            const closeOnEscape = (e) => {\n                if (e.key === 'Escape') {\n                    modal.remove();\n                    document.removeEventListener('keydown', closeOnEscape);\n                }\n            };\n            document.addEventListener('keydown', closeOnEscape);\n        }\n\n        /**\n         * Escape HTML for safe display\n         */\n        escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        /**\n         * Delete a property\n         */\n        async deleteProp(type, key) {\n            if (await confirm(`Are you sure you want to delete the ${type} property \"${key}\"?`)) {\n                const change = new SpacePropertyChange(key, undefined, type === 'protected', { source: 'ui' });\n                await changeManager.applyChange(change);\n                // The change will use net.DelVar which will trigger Firebase listeners\n                // No need to manually delete from cache as Firebase listener will handle it\n            }\n        }\n\n        /**\n         * Add public property\n         */\n        async addPublicProp() {\n            const keyInput = document.getElementById('addPublicKey');\n            const valueInput = document.getElementById('addPublicValue');\n\n            if (!keyInput || !valueInput) return;\n\n            const key = keyInput.value.trim();\n            const value = this.parseValue(valueInput.value);\n\n            if (key) {\n                const change = new SpacePropertyChange(key, value, false, { source: 'ui' });\n                await changeManager.applyChange(change);\n                // The change will use net.SetVar which will trigger Firebase listeners\n                keyInput.value = '';\n                valueInput.value = '';\n            }\n        }\n\n        /**\n         * Add public property from popup\n         */\n        async addPublicPropPopup() {\n            const keyInput = this.popupWindow?.querySelector('#addPublicKeyPopup');\n            const valueInput = this.popupWindow?.querySelector('#addPublicValuePopup');\n\n            if (!keyInput || !valueInput) return;\n\n            const key = keyInput.value.trim();\n            const value = this.parseValue(valueInput.value);\n\n            if (key) {\n                const change = new SpacePropertyChange(key, value, false, { source: 'ui' });\n                await changeManager.applyChange(change);\n                // The change will use net.SetVar which will trigger Firebase listeners\n                keyInput.value = '';\n                valueInput.value = '';\n            }\n        }\n\n        /**\n         * Add protected property\n         */\n        async addProtectedProp() {\n            const keyInput = document.getElementById('addProtectedKey');\n            const valueInput = document.getElementById('addProtectedValue');\n\n            if (!keyInput || !valueInput) return;\n\n            const key = keyInput.value.trim();\n            const value = this.parseValue(valueInput.value);\n\n            if (key) {\n                const change = new SpacePropertyChange(key, value, true, { source: 'ui' });\n                await changeManager.applyChange(change);\n                // The change will use net.SetVar which will trigger Firebase listeners\n                keyInput.value = '';\n                valueInput.value = '';\n            }\n        }\n\n        /**\n         * Add protected property from popup\n         */\n        async addProtectedPropPopup() {\n            const keyInput = this.popupWindow?.querySelector('#addProtectedKeyPopup');\n            const valueInput = this.popupWindow?.querySelector('#addProtectedValuePopup');\n\n            if (!keyInput || !valueInput) return;\n\n            const key = keyInput.value.trim();\n            const value = this.parseValue(valueInput.value);\n\n            if (key) {\n                const change = new SpacePropertyChange(key, value, true, { source: 'ui' });\n                await changeManager.applyChange(change);\n                // The change will use net.SetVar which will trigger Firebase listeners\n                keyInput.value = '';\n                valueInput.value = '';\n            }\n        }\n\n        /**\n         * Parse value from string input\n         */\n        parseValue(value) {\n            value = value.trim();\n            \n            // Try to parse as JSON\n            if (value.startsWith('{') || value.startsWith('[')) {\n                try {\n                    return JSON.parse(value);\n                } catch (e) {\n                    // Keep as string if JSON parse fails\n                }\n            }\n            \n            // Check for Vector3 format: \"(x, y, z)\" or \"x y z\" or \"x,y,z\"\n            const vector3Pattern = /^\\(?\\s*(-?\\d*\\.?\\d+)\\s*[,\\s]\\s*(-?\\d*\\.?\\d+)\\s*[,\\s]\\s*(-?\\d*\\.?\\d+)\\s*\\)?$/;\n            const match = value.match(vector3Pattern);\n            if (match) {\n                return {\n                    x: parseFloat(match[1]),\n                    y: parseFloat(match[2]),\n                    z: parseFloat(match[3])\n                };\n            }\n            \n            // Check for boolean\n            if (value === 'true') return true;\n            if (value === 'false') return false;\n            \n            // Check for number\n            if (!isNaN(value) && value !== '') {\n                return parseFloat(value);\n            }\n            \n            // Return as string\n            return value;\n        }\n\n        /**\n         * Save Vector3 property directly\n         */\n        saveVector3Prop(type, key, isPopup = false) {\n            const suffix = isPopup ? '_popup' : '';\n            const xInput = document.getElementById(`${type}_prop_${key}_x${suffix}`);\n            const yInput = document.getElementById(`${type}_prop_${key}_y${suffix}`);\n            const zInput = document.getElementById(`${type}_prop_${key}_z${suffix}`);\n\n            if (xInput && yInput && zInput) {\n                const newValue = {\n                    x: parseFloat(xInput.value) || 0,\n                    y: parseFloat(yInput.value) || 0,\n                    z: parseFloat(zInput.value) || 0\n                };\n                const change = new SpacePropertyChange(key, newValue, type === 'protected', { source: 'ui' });\n                changeManager.applyChange(change);\n\n                // Firebase will automatically sync the update through listeners\n                // No need to manually update the cache\n            }\n        }\n\n        /**\n         * Handle key press in property input\n         */\n        handlePropKeyPress(event, type, key, isPopup = false) {\n            if (event.key === 'Enter') {\n                this.saveProp(type, key, isPopup);\n            } else if (event.key === 'Escape') {\n                this.cancelEditProp(type, key);\n            }\n        }\n\n        /**\n         * Toggle pin status for a property\n         */\n        togglePinProp(type, key) {\n            const propKey = `${type}_${key}`;\n            if (this.pinnedProps.has(propKey)) {\n                this.pinnedProps.delete(propKey);\n            } else {\n                this.pinnedProps.add(propKey);\n            }\n            this.savePinnedProps();\n            this.render();\n        }\n\n        /**\n         * Save pinned properties to localStorage\n         */\n        savePinnedProps() {\n            localStorage.setItem('spacePropsPinned', JSON.stringify([...this.pinnedProps]));\n        }\n\n        /**\n         * Load pinned properties from localStorage\n         */\n        loadPinnedProps() {\n            const saved = localStorage.getItem('spacePropsPinned');\n            if (saved) {\n                try {\n                    const props = JSON.parse(saved);\n                    this.pinnedProps = new Set(props);\n                } catch (e) {\n                    this.pinnedProps = new Set();\n                }\n            }\n        }\n\n        /**\n         * Load view preferences from localStorage\n         */\n        loadViewPreferences() {\n            const saved = localStorage.getItem('spacePropsViewMode');\n            if (saved) {\n                this.viewMode = saved;\n            }\n\n            const expandedSaved = localStorage.getItem('spacePropsExpandedNodes');\n            if (expandedSaved) {\n                try {\n                    const nodes = JSON.parse(expandedSaved);\n                    this.expandedNodes = new Set(nodes);\n                } catch (e) {\n                    this.expandedNodes = new Set();\n                }\n            }\n\n            // Load property filters\n            const filtersSaved = localStorage.getItem('spacePropsPropertyFilters');\n            if (filtersSaved) {\n                try {\n                    const filters = JSON.parse(filtersSaved);\n                    // Only use saved filters if it's a non-empty array\n                    if (Array.isArray(filters) && filters.length > 0) {\n                        this.propertyFilters = new Set(filters);\n                    }\n                    // Otherwise keep the default filters that were set in the constructor\n                } catch (e) {\n                    // Keep default filters on error\n                }\n            }\n        }\n\n        /**\n         * Save view preferences to localStorage\n         */\n        saveViewPreferences() {\n            localStorage.setItem('spacePropsViewMode', this.viewMode);\n            localStorage.setItem('spacePropsExpandedNodes', JSON.stringify([...this.expandedNodes]));\n            localStorage.setItem('spacePropsPropertyFilters', JSON.stringify([...this.propertyFilters]));\n        }\n\n        /**\n         * Parse flat key-value properties into a tree structure\n         * Handles Banter's property structure:\n         * - # prefix for scripts\n         * - $ prefix for entities with / path separator and : property separator\n         * - __ prefix for components with : property separator\n         * - Simple properties with no prefix\n         */\n        parseKeysToTree(props) {\n            const tree = {\n                simple: {},      // Properties with no prefix\n                scripts: {},     // # prefixed (script files)\n                entities: {},    // $ prefixed (entity properties)\n                components: {}   // __ prefixed (component properties)\n            };\n\n            for (const [key, value] of Object.entries(props)) {\n                if (key.startsWith('#')) {\n                    // Script file: #FlipController.js\n                    const scriptName = key.substring(1); // Remove # prefix\n                    tree.scripts[scriptName] = {\n                        content: value,\n                        size: value ? value.length : 0,\n                        lines: value ? value.split('\\n').length : 0,\n                        _originalKey: key\n                    };\n                } else if (key.startsWith('$')) {\n                    // Entity property: $Scene/Ground:position\n                    this.parseEntityProperty(tree.entities, key, value);\n                } else if (key.startsWith('__')) {\n                    // Component property: __BoxCollider_87459:center\n                    this.parseComponentProperty(tree.components, key, value);\n                } else {\n                    // Simple property: passcode\n                    tree.simple[key] = value;\n                }\n            }\n\n            return tree;\n        }\n\n        /**\n         * Parse entity properties with $ prefix\n         * Format: $EntityPath/SubPath:PropertyName\n         */\n        parseEntityProperty(tree, key, value) {\n            // Remove $ prefix\n            const cleanKey = key.substring(1);\n\n            // Split by : to separate path from property\n            const colonIndex = cleanKey.lastIndexOf(':');\n\n            if (colonIndex === -1) {\n                // No property part, just entity path\n                tree[cleanKey] = {\n                    _value: value,\n                    _originalKey: key,\n                    _type: 'entity'\n                };\n            } else {\n                const entityPath = cleanKey.substring(0, colonIndex);\n                const propertyName = cleanKey.substring(colonIndex + 1);\n\n                // Split entity path by /\n                const pathParts = entityPath.split('/');\n\n                // Build nested structure\n                let current = tree;\n                for (let i = 0; i < pathParts.length; i++) {\n                    const part = pathParts[i];\n                    if (!current[part]) {\n                        current[part] = {\n                            _properties: {},\n                            _children: {},\n                            _type: 'entity',\n                            _path: pathParts.slice(0, i + 1).join('/')\n                        };\n                    }\n                    if (i < pathParts.length - 1) {\n                        current = current[part]._children || (current[part]._children = {});\n                    } else {\n                        // Last part - add the property\n                        current[part]._properties = current[part]._properties || {};\n                        current[part]._properties[propertyName] = {\n                            value: value,\n                            originalKey: key\n                        };\n                    }\n                }\n            }\n        }\n\n        /**\n         * Parse component properties with __ prefix\n         * Format: __ComponentType_ID:PropertyName\n         */\n        parseComponentProperty(tree, key, value) {\n            // Remove __ prefix\n            const cleanKey = key.substring(2);\n\n            // Split by : to separate component from property\n            const colonIndex = cleanKey.indexOf(':');\n\n            if (colonIndex === -1) {\n                tree[cleanKey] = {\n                    _value: value,\n                    _originalKey: key,\n                    _type: 'component'\n                };\n            } else {\n                const componentName = cleanKey.substring(0, colonIndex);\n                const propertyName = cleanKey.substring(colonIndex + 1);\n\n                // Extract component type and ID\n                const lastUnderscore = componentName.lastIndexOf('_');\n                let componentType, componentId;\n\n                if (lastUnderscore !== -1) {\n                    componentType = componentName.substring(0, lastUnderscore);\n                    componentId = componentName.substring(lastUnderscore + 1);\n                } else {\n                    componentType = componentName;\n                    componentId = 'default';\n                }\n\n                // Group by component type\n                if (!tree[componentType]) {\n                    tree[componentType] = {\n                        _type: 'componentGroup',\n                        _instances: {}\n                    };\n                }\n                if (!tree[componentType]._instances[componentId]) {\n                    tree[componentType]._instances[componentId] = {\n                        _properties: {},\n                        _originalName: componentName\n                    };\n                }\n\n                tree[componentType]._instances[componentId]._properties[propertyName] = {\n                    value: value,\n                    originalKey: key\n                };\n            }\n        }\n\n        /**\n         * Render struct view with three sections\n         */\n        renderStructView(type, props, isPopup = false) {\n            const suffix = isPopup ? 'Popup' : '';\n            const listElement = document.getElementById(`${type}PropsList${suffix}`);\n            const countElement = document.getElementById(`${type}PropsCount${suffix}`);\n\n            if (!listElement || !countElement) return;\n\n            const propKeys = Object.keys(props);\n            countElement.textContent = propKeys.length;\n\n            if (propKeys.length === 0) {\n                listElement.innerHTML = `<div class=\"empty-props\">No ${type} properties</div>`;\n                return;\n            }\n\n            // Parse properties into tree structure\n            const tree = this.parseKeysToTree(props);\n\n            // Render the tree\n            listElement.innerHTML = '';\n            const treeContainer = document.createElement('div');\n            treeContainer.className = 'struct-tree';\n\n            // Section 1: Simple Properties\n            if (Object.keys(tree.simple).length > 0) {\n                const simpleSection = document.createElement('div');\n                simpleSection.className = 'tree-section';\n\n                const simpleHeader = document.createElement('div');\n                simpleHeader.className = 'tree-section-header';\n                simpleHeader.innerHTML = '<span class=\"section-icon\">\uD83D\uDCDD</span> Simple Properties';\n                simpleSection.appendChild(simpleHeader);\n\n                const simpleContent = document.createElement('div');\n                simpleContent.className = 'tree-section-content';\n                for (const [key, value] of Object.entries(tree.simple)) {\n                    const propElement = this.renderSimpleProperty(type, key, value, isPopup);\n                    simpleContent.appendChild(propElement);\n                }\n                simpleSection.appendChild(simpleContent);\n                treeContainer.appendChild(simpleSection);\n            }\n\n            // Section 2: Scripts\n            if (Object.keys(tree.scripts).length > 0) {\n                const scriptsSection = document.createElement('div');\n                scriptsSection.className = 'tree-section';\n\n                const scriptsHeader = document.createElement('div');\n                scriptsHeader.className = 'tree-section-header';\n                scriptsHeader.innerHTML = '<span class=\"section-icon\">\uD83D\uDCDC</span> Scripts';\n                scriptsSection.appendChild(scriptsHeader);\n\n                const scriptsContent = document.createElement('div');\n                scriptsContent.className = 'tree-section-content';\n                for (const [scriptName, scriptData] of Object.entries(tree.scripts)) {\n                    const scriptElement = this.renderScriptProperty(type, scriptName, scriptData, isPopup);\n                    scriptsContent.appendChild(scriptElement);\n                }\n                scriptsSection.appendChild(scriptsContent);\n                treeContainer.appendChild(scriptsSection);\n            }\n\n            // Section 3: Entity Hierarchy\n            if (Object.keys(tree.entities).length > 0) {\n                const entitySection = document.createElement('div');\n                entitySection.className = 'tree-section';\n\n                const entityHeader = document.createElement('div');\n                entityHeader.className = 'tree-section-header';\n                entityHeader.innerHTML = '<span class=\"section-icon\">\uD83D\uDCE6</span> Entity Properties';\n                entitySection.appendChild(entityHeader);\n\n                const entityContent = document.createElement('div');\n                entityContent.className = 'tree-section-content';\n                for (const [key, node] of Object.entries(tree.entities)) {\n                    const nodeElement = this.renderEntityNode(type, key, node, 0, '', isPopup);\n                    entityContent.appendChild(nodeElement);\n                }\n                entitySection.appendChild(entityContent);\n                treeContainer.appendChild(entitySection);\n            }\n\n            // Section 4: Components\n            if (Object.keys(tree.components).length > 0) {\n                const componentSection = document.createElement('div');\n                componentSection.className = 'tree-section';\n\n                const componentHeader = document.createElement('div');\n                componentHeader.className = 'tree-section-header';\n                componentHeader.innerHTML = '<span class=\"section-icon\">\u2699\uFE0F</span> Component Properties';\n                componentSection.appendChild(componentHeader);\n\n                const componentContent = document.createElement('div');\n                componentContent.className = 'tree-section-content';\n                for (const [componentType, componentGroup] of Object.entries(tree.components)) {\n                    const groupElement = this.renderComponentGroup(type, componentType, componentGroup, isPopup);\n                    componentContent.appendChild(groupElement);\n                }\n                componentSection.appendChild(componentContent);\n                treeContainer.appendChild(componentSection);\n            }\n\n            listElement.appendChild(treeContainer);\n        }\n\n        /**\n         * Render a simple property (no prefix)\n         */\n        renderSimpleProperty(type, key, value, isPopup = false) {\n            const propElement = document.createElement('div');\n            propElement.className = 'tree-simple-prop';\n\n            const keySpan = document.createElement('span');\n            keySpan.className = 'tree-key simple-key';\n            keySpan.textContent = key;\n\n            const valueSpan = document.createElement('span');\n            valueSpan.className = 'tree-value';\n            valueSpan.textContent = this.formatValue(value);\n\n            const actions = document.createElement('span');\n            actions.className = 'tree-actions';\n            actions.innerHTML = `\n                <button onclick=\"spacePropsPanel.editProp('${type}', '${key}', ${isPopup})\" class=\"edit-btn\" title=\"Edit\">\u270E</button>\n                <button onclick=\"spacePropsPanel.deleteProp('${type}', '${key}')\" class=\"delete-btn\" title=\"Delete\">\u00D7</button>\n            `;\n\n            propElement.appendChild(keySpan);\n            propElement.appendChild(valueSpan);\n            propElement.appendChild(actions);\n\n            return propElement;\n        }\n\n        /**\n         * Render a script property (# prefix)\n         */\n        renderScriptProperty(type, scriptName, scriptData, isPopup = false) {\n            const propElement = document.createElement('div');\n            propElement.className = 'tree-script-prop';\n            propElement.style.cssText = 'display: flex; align-items: center; padding: 4px 0;';\n\n            // Expandable preview arrow\n            const previewId = `script_preview_${scriptName.replace(/\\./g, '_')}`;\n            const expandBtn = document.createElement('button');\n            expandBtn.className = 'tree-arrow';\n            expandBtn.textContent = this.expandedNodes.has(previewId) ? '\u25BC' : '\u25B6';\n            expandBtn.style.cssText = 'background: none; border: none; color: #888; cursor: pointer; padding: 0 4px;';\n            expandBtn.onclick = () => {\n                this.toggleTreeNode(previewId);\n                // Update arrow\n                expandBtn.textContent = this.expandedNodes.has(previewId) ? '\u25BC' : '\u25B6';\n            };\n\n            // Script icon and name\n            const nameSpan = document.createElement('span');\n            nameSpan.className = 'tree-key script-key';\n            nameSpan.innerHTML = `\uD83D\uDCC4 ${scriptName}`;\n            nameSpan.style.cssText = 'flex: 0 0 auto; margin-right: 10px;';\n\n            // Script metadata\n            const metaSpan = document.createElement('span');\n            metaSpan.className = 'tree-value script-meta';\n            const sizeKB = (scriptData.size / 1024).toFixed(1);\n            metaSpan.innerHTML = `<span style=\"color: #888; font-size: 11px;\">${scriptData.lines} lines \u2022 ${sizeKB} KB</span>`;\n            metaSpan.style.cssText = 'flex: 1; margin-right: 10px;';\n\n            // Actions (view/edit/delete) - make them more visible\n            const actions = document.createElement('span');\n            actions.className = 'tree-actions';\n            actions.style.cssText = 'display: flex; gap: 4px; opacity: 1;';\n            actions.innerHTML = `\n                <button onclick=\"spacePropsPanel.viewScript('${type}', '${scriptData._originalKey}')\"\n                        class=\"view-btn\"\n                        title=\"View full script\"\n                        style=\"background: #3b82c4; border: none; color: white; cursor: pointer; padding: 2px 6px; border-radius: 3px; font-size: 14px;\">\n                    \uD83D\uDC41 View\n                </button>\n                <button onclick=\"spacePropsPanel.editProp('${type}', '${scriptData._originalKey}', ${isPopup})\"\n                        class=\"edit-btn\"\n                        title=\"Edit script\"\n                        style=\"background: #444; border: none; color: #888; cursor: pointer; padding: 2px 6px; border-radius: 3px;\">\n                    \u270E\n                </button>\n                <button onclick=\"spacePropsPanel.deleteProp('${type}', '${scriptData._originalKey}')\"\n                        class=\"delete-btn\"\n                        title=\"Delete script\"\n                        style=\"background: #444; border: none; color: #888; cursor: pointer; padding: 2px 6px; border-radius: 3px;\">\n                    \u00D7\n                </button>\n            `;\n\n            propElement.appendChild(expandBtn);\n            propElement.appendChild(nameSpan);\n            propElement.appendChild(metaSpan);\n            propElement.appendChild(actions);\n\n            // Create a wrapper for the whole script item including preview\n            const wrapperElement = document.createElement('div');\n            wrapperElement.appendChild(propElement);\n\n            // Preview container\n            const previewContainer = document.createElement('div');\n            previewContainer.className = 'script-preview-container';\n            previewContainer.id = previewId;\n            previewContainer.style.display = this.expandedNodes.has(previewId) ? 'block' : 'none';\n            previewContainer.style.marginLeft = '20px';\n            previewContainer.style.marginTop = '5px';\n\n            // Show first 10 lines of script\n            const lines = scriptData.content.split('\\n').slice(0, 10);\n            const preview = document.createElement('pre');\n            preview.className = 'script-preview';\n            preview.style.cssText = 'background: #1a1a1a; padding: 8px; border-radius: 4px; font-size: 11px; color: #888; overflow-x: auto; margin: 0;';\n            preview.textContent = lines.join('\\n') + (scriptData.lines > 10 ? '\\n...' : '');\n            previewContainer.appendChild(preview);\n\n            wrapperElement.appendChild(previewContainer);\n\n            return wrapperElement;\n        }\n\n        /**\n         * Render an entity node with hierarchy\n         */\n        renderEntityNode(type, key, node, depth, parentPath, isPopup = false) {\n            const nodeElement = document.createElement('div');\n            nodeElement.className = 'tree-node entity-node';\n            nodeElement.setAttribute('data-depth', depth);\n\n            const fullPath = parentPath ? `${parentPath}/${key}` : key;\n            const nodeId = `entity_${fullPath}`;\n\n            // Node header\n            const headerElement = document.createElement('div');\n            headerElement.className = 'tree-node-header';\n            headerElement.style.paddingLeft = `${depth * 20}px`;\n\n            // Check if node has children or properties\n            const hasChildren = node._children && Object.keys(node._children).length > 0;\n            const hasProperties = node._properties && Object.keys(node._properties).length > 0;\n            const canExpand = hasChildren || hasProperties;\n\n            // Expand/collapse arrow\n            if (canExpand) {\n                const arrow = document.createElement('span');\n                arrow.className = 'tree-arrow';\n                arrow.textContent = this.expandedNodes.has(nodeId) ? '\u25BC' : '\u25B6';\n                arrow.onclick = () => this.toggleTreeNode(nodeId);\n                headerElement.appendChild(arrow);\n            } else {\n                const spacer = document.createElement('span');\n                spacer.className = 'tree-arrow invisible';\n                headerElement.appendChild(spacer);\n            }\n\n            // Node name\n            const nameSpan = document.createElement('span');\n            nameSpan.className = 'tree-key entity-key';\n            nameSpan.textContent = key;\n            headerElement.appendChild(nameSpan);\n\n            nodeElement.appendChild(headerElement);\n\n            // Children container\n            if (canExpand) {\n                const childrenContainer = document.createElement('div');\n                childrenContainer.className = 'tree-children';\n                childrenContainer.id = nodeId;\n                childrenContainer.style.display = this.expandedNodes.has(nodeId) ? 'block' : 'none';\n\n                // Render properties\n                if (hasProperties) {\n                    for (const [propName, propData] of Object.entries(node._properties)) {\n                        // Check if property should be shown based on filters\n                        if (this.propertyFilters.has(propName)) {\n                            const propElement = this.renderEntityProperty(type, propName, propData, depth + 1, isPopup);\n                            childrenContainer.appendChild(propElement);\n                        }\n                    }\n                }\n\n                // Render child entities\n                if (hasChildren) {\n                    for (const [childKey, childNode] of Object.entries(node._children)) {\n                        const childElement = this.renderEntityNode(type, childKey, childNode, depth + 1, fullPath, isPopup);\n                        childrenContainer.appendChild(childElement);\n                    }\n                }\n\n                nodeElement.appendChild(childrenContainer);\n            }\n\n            return nodeElement;\n        }\n\n        /**\n         * Render an entity property\n         */\n        renderEntityProperty(type, propName, propData, depth, isPopup = false) {\n            const propElement = document.createElement('div');\n            propElement.className = 'tree-entity-prop';\n            propElement.style.paddingLeft = `${depth * 20}px`;\n\n            const spacer = document.createElement('span');\n            spacer.className = 'tree-arrow invisible';\n\n            const keySpan = document.createElement('span');\n            keySpan.className = 'tree-key entity-prop-key';\n            keySpan.textContent = propName;\n\n            const valueSpan = document.createElement('span');\n            valueSpan.className = 'tree-value';\n            valueSpan.textContent = this.formatValue(propData.value);\n\n            const actions = document.createElement('span');\n            actions.className = 'tree-actions';\n            actions.innerHTML = `\n                <button onclick=\"spacePropsPanel.editProp('${type}', '${propData.originalKey}', ${isPopup})\" class=\"edit-btn\" title=\"Edit\">\u270E</button>\n                <button onclick=\"spacePropsPanel.deleteProp('${type}', '${propData.originalKey}')\" class=\"delete-btn\" title=\"Delete\">\u00D7</button>\n            `;\n\n            propElement.appendChild(spacer);\n            propElement.appendChild(keySpan);\n            propElement.appendChild(valueSpan);\n            propElement.appendChild(actions);\n\n            return propElement;\n        }\n\n        /**\n         * Render a component group\n         */\n        renderComponentGroup(type, componentType, componentGroup, isPopup = false) {\n            const groupElement = document.createElement('div');\n            groupElement.className = 'tree-component-group';\n\n            const groupId = `component_${componentType}`;\n\n            // Group header\n            const headerElement = document.createElement('div');\n            headerElement.className = 'tree-node-header component-group-header';\n\n            const hasInstances = Object.keys(componentGroup._instances).length > 0;\n\n            if (hasInstances) {\n                const arrow = document.createElement('span');\n                arrow.className = 'tree-arrow';\n                arrow.textContent = this.expandedNodes.has(groupId) ? '\u25BC' : '\u25B6';\n                arrow.onclick = () => this.toggleTreeNode(groupId);\n                headerElement.appendChild(arrow);\n            } else {\n                const spacer = document.createElement('span');\n                spacer.className = 'tree-arrow invisible';\n                headerElement.appendChild(spacer);\n            }\n\n            const nameSpan = document.createElement('span');\n            nameSpan.className = 'tree-key component-type';\n            nameSpan.textContent = componentType;\n            headerElement.appendChild(nameSpan);\n\n            const countSpan = document.createElement('span');\n            countSpan.className = 'component-count';\n            countSpan.textContent = `(${Object.keys(componentGroup._instances).length})`;\n            headerElement.appendChild(countSpan);\n\n            groupElement.appendChild(headerElement);\n\n            // Instances container\n            if (hasInstances) {\n                const instancesContainer = document.createElement('div');\n                instancesContainer.className = 'tree-children';\n                instancesContainer.id = groupId;\n                instancesContainer.style.display = this.expandedNodes.has(groupId) ? 'block' : 'none';\n\n                for (const [instanceId, instance] of Object.entries(componentGroup._instances)) {\n                    const instanceElement = this.renderComponentInstance(type, componentType, instanceId, instance, isPopup);\n                    instancesContainer.appendChild(instanceElement);\n                }\n\n                groupElement.appendChild(instancesContainer);\n            }\n\n            return groupElement;\n        }\n\n        /**\n         * Render a component instance as an expandable node\n         */\n        renderComponentInstance(type, componentType, instanceId, instance, isPopup = false) {\n            const instanceElement = document.createElement('div');\n            instanceElement.className = 'tree-component-instance';\n\n            const instanceIdDisplay = instanceId !== 'default' ? instanceId : instance._originalName;\n            const instanceNodeId = `component_${componentType}_${instanceId}`;\n\n            // Create instance header (expandable)\n            const instanceHeader = document.createElement('div');\n            instanceHeader.className = 'tree-node-header component-instance-header';\n            instanceHeader.style.paddingLeft = '20px';\n\n            // Check if instance has properties\n            const hasProperties = Object.keys(instance._properties).length > 0;\n\n            if (hasProperties) {\n                const arrow = document.createElement('span');\n                arrow.className = 'tree-arrow';\n                arrow.textContent = this.expandedNodes.has(instanceNodeId) ? '\u25BC' : '\u25B6';\n                arrow.onclick = () => this.toggleTreeNode(instanceNodeId);\n                instanceHeader.appendChild(arrow);\n            } else {\n                const spacer = document.createElement('span');\n                spacer.className = 'tree-arrow invisible';\n                instanceHeader.appendChild(spacer);\n            }\n\n            // Instance name/ID\n            const instanceNameSpan = document.createElement('span');\n            instanceNameSpan.className = 'tree-key component-instance-key';\n            instanceNameSpan.textContent = `Instance ${instanceIdDisplay}`;\n            instanceHeader.appendChild(instanceNameSpan);\n\n            // Property count\n            const propCountSpan = document.createElement('span');\n            propCountSpan.className = 'component-prop-count';\n            propCountSpan.textContent = ` (${Object.keys(instance._properties).length} props)`;\n            instanceHeader.appendChild(propCountSpan);\n\n            instanceElement.appendChild(instanceHeader);\n\n            // Properties container\n            if (hasProperties) {\n                const propertiesContainer = document.createElement('div');\n                propertiesContainer.className = 'tree-children component-properties';\n                propertiesContainer.id = instanceNodeId;\n                propertiesContainer.style.display = this.expandedNodes.has(instanceNodeId) ? 'block' : 'none';\n\n                // Render each property\n                for (const [propName, propData] of Object.entries(instance._properties)) {\n                    const propElement = document.createElement('div');\n                    propElement.className = 'tree-component-prop';\n                    propElement.style.paddingLeft = '40px';\n\n                    const spacer = document.createElement('span');\n                    spacer.className = 'tree-arrow invisible';\n\n                    const keySpan = document.createElement('span');\n                    keySpan.className = 'tree-key component-prop-key';\n                    keySpan.textContent = propName;\n\n                    const valueSpan = document.createElement('span');\n                    valueSpan.className = 'tree-value';\n                    valueSpan.textContent = this.formatValue(propData.value);\n\n                    const actions = document.createElement('span');\n                    actions.className = 'tree-actions';\n                    actions.innerHTML = `\n                        <button onclick=\"spacePropsPanel.editProp('${type}', '${propData.originalKey}', ${isPopup})\" class=\"edit-btn\" title=\"Edit\">\u270E</button>\n                        <button onclick=\"spacePropsPanel.deleteProp('${type}', '${propData.originalKey}')\" class=\"delete-btn\" title=\"Delete\">\u00D7</button>\n                    `;\n\n                    propElement.appendChild(spacer);\n                    propElement.appendChild(keySpan);\n                    propElement.appendChild(valueSpan);\n                    propElement.appendChild(actions);\n\n                    propertiesContainer.appendChild(propElement);\n                }\n\n                instanceElement.appendChild(propertiesContainer);\n            }\n\n            return instanceElement;\n        }\n\n        /**\n         * Format value for display\n         */\n        formatValue(value) {\n            if (value === null || value === undefined) return 'null';\n            if (typeof value === 'object') {\n                if (value.x !== undefined && value.y !== undefined && value.z !== undefined) {\n                    return `(${value.x}, ${value.y}, ${value.z})`;\n                }\n                return JSON.stringify(value);\n            }\n            return String(value);\n        }\n\n\n        /**\n         * Toggle tree node expansion\n         */\n        toggleTreeNode(path) {\n            if (this.expandedNodes.has(path)) {\n                this.expandedNodes.delete(path);\n            } else {\n                this.expandedNodes.add(path);\n            }\n            this.saveViewPreferences();\n            this.render('spaceprop:toggleTreeNode');\n        }\n\n        /**\n         * Add struct view CSS styles\n         */\n        injectStructViewStyles() {\n            if (document.getElementById('struct-view-styles')) return;\n\n            const styleEl = document.createElement('style');\n            styleEl.id = 'struct-view-styles';\n            styleEl.textContent = `\n                .popup-controls {\n                    display: flex;\n                    gap: 8px;\n                    align-items: center;\n                }\n\n                .view-toggle-btn {\n                    background: #444;\n                    border: 1px solid #555;\n                    color: #888;\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    display: flex;\n                    align-items: center;\n                    gap: 4px;\n                    transition: all 0.2s;\n                }\n\n                .view-toggle-btn:hover {\n                    background: #555;\n                    color: #e0e0e0;\n                }\n\n                .view-toggle-btn.active {\n                    background: #3b82c4;\n                    border-color: #2563eb;\n                    color: white;\n                }\n\n                .struct-tree {\n                    padding: 5px;\n                }\n\n                /* Section styles */\n                .tree-section {\n                    margin-bottom: 16px;\n                    border: 1px solid #333;\n                    border-radius: 4px;\n                    overflow: hidden;\n                }\n\n                .tree-section-header {\n                    background: #2a2a2a;\n                    padding: 8px 12px;\n                    font-weight: bold;\n                    color: #e0e0e0;\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                    border-bottom: 1px solid #333;\n                }\n\n                .section-icon {\n                    font-size: 16px;\n                }\n\n                .tree-section-content {\n                    padding: 8px;\n                    background: #1a1a1a;\n                }\n\n                /* Tree nodes */\n                .tree-node {\n                    margin: 1px 0;\n                }\n\n                .tree-node-header {\n                    display: flex;\n                    align-items: center;\n                    padding: 4px;\n                    border-radius: 3px;\n                    cursor: default;\n                    transition: background 0.2s;\n                }\n\n                .tree-node-header:hover {\n                    background: rgba(255, 255, 255, 0.05);\n                }\n\n                .tree-arrow {\n                    width: 16px;\n                    display: inline-block;\n                    text-align: center;\n                    cursor: pointer;\n                    user-select: none;\n                    color: #888;\n                    transition: transform 0.2s;\n                }\n\n                .tree-arrow.invisible {\n                    visibility: hidden;\n                }\n\n                /* Key styles by type */\n                .tree-key {\n                    font-weight: 600;\n                    margin-right: 8px;\n                }\n\n                .simple-key {\n                    color: #888;\n                }\n\n                .entity-key {\n                    color: #3b82c4;\n                }\n\n                .entity-prop-key {\n                    color: #60a5fa;\n                    font-weight: normal;\n                }\n\n                .component-type {\n                    color: #10b981;\n                }\n\n                .component-prop-key {\n                    color: #34d399;\n                    font-weight: normal;\n                }\n\n                .component-count {\n                    color: #666;\n                    font-size: 12px;\n                    margin-left: 4px;\n                }\n\n                /* Value display */\n                .tree-value {\n                    color: #e0e0e0;\n                    flex: 1;\n                    margin-left: 8px;\n                    word-break: break-all;\n                    font-family: monospace;\n                }\n\n                /* Property rows */\n                .tree-simple-prop,\n                .tree-entity-prop,\n                .tree-component-prop {\n                    display: flex;\n                    align-items: center;\n                    padding: 4px 8px;\n                    border-radius: 3px;\n                    transition: background 0.2s;\n                }\n\n                .tree-simple-prop:hover,\n                .tree-entity-prop:hover,\n                .tree-component-prop:hover {\n                    background: rgba(255, 255, 255, 0.05);\n                }\n\n                /* Hierarchy indentation */\n                .tree-children {\n                    border-left: 1px solid #333;\n                    margin-left: 8px;\n                }\n\n                .entity-node .tree-children {\n                    margin-left: 12px;\n                    border-left-color: #2563eb;\n                }\n\n                .tree-component-group .tree-children {\n                    margin-left: 12px;\n                    border-left-color: #10b981;\n                }\n\n                /* Actions */\n                .tree-actions {\n                    display: flex;\n                    gap: 4px;\n                    opacity: 0;\n                    transition: opacity 0.2s;\n                    margin-left: auto;\n                }\n\n                .tree-simple-prop:hover .tree-actions,\n                .tree-entity-prop:hover .tree-actions,\n                .tree-component-prop:hover .tree-actions,\n                .tree-node-header:hover .tree-actions {\n                    opacity: 1;\n                }\n\n                .edit-btn, .delete-btn {\n                    background: transparent;\n                    border: 1px solid #444;\n                    color: #888;\n                    padding: 2px 6px;\n                    border-radius: 3px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    transition: all 0.2s;\n                }\n\n                .edit-btn:hover {\n                    background: #444;\n                    color: #e0e0e0;\n                    border-color: #555;\n                }\n\n                .delete-btn:hover {\n                    background: #c44;\n                    border-color: #c44;\n                    color: white;\n                }\n\n                /* Component instance styles */\n                .tree-component-instance {\n                    margin-bottom: 4px;\n                }\n\n                .tree-component-group-header {\n                    font-weight: bold;\n                }\n\n                .component-instance-header {\n                    background: rgba(16, 185, 129, 0.1);\n                    border-left: 2px solid #10b981;\n                    margin: 2px 0;\n                }\n\n                .component-instance-header:hover {\n                    background: rgba(16, 185, 129, 0.15);\n                }\n\n                .component-instance-key {\n                    color: #10b981;\n                    font-weight: 600;\n                }\n\n                .component-prop-count {\n                    color: #666;\n                    font-size: 11px;\n                    margin-left: 8px;\n                    opacity: 0.8;\n                }\n\n                .component-properties {\n                    border-left: 1px dashed #10b98133;\n                    margin-left: 12px;\n                }\n\n                /* Empty state */\n                .empty-props {\n                    color: #666;\n                    font-style: italic;\n                    padding: 20px;\n                    text-align: center;\n                }\n            `;\n            document.head.appendChild(styleEl);\n        }\n\n        /**\n         * Render sync status view showing divergences between local and network state\n         */\n        async renderSyncView(type, _props, isPopup = false) {\n            const suffix = isPopup ? 'Popup' : '';\n            const listElement = document.getElementById(`${type}PropsList${suffix}`);\n            const countElement = document.getElementById(`${type}PropsCount${suffix}`);\n\n            if (!listElement || !countElement) return;\n\n            // Get divergences\n            const divergences = await this.syncComparator.compare();\n            const summary = this.syncComparator.getSummary();\n\n            // Update count\n            countElement.textContent = `${summary.total} divergences`;\n\n            if (divergences.size === 0) {\n                listElement.innerHTML = `\n                    <div class=\"sync-status-header\" style=\"padding: 20px; text-align: center; color: #10b981;\">\n                        <div style=\"font-size: 32px; margin-bottom: 10px;\">\u2705</div>\n                        <div style=\"font-size: 16px; font-weight: bold;\">All Synced!</div>\n                        <div style=\"font-size: 14px; color: #888; margin-top: 5px;\">Local and network hierarchies are identical</div>\n                    </div>\n                `;\n                return;\n            }\n\n            // Build tree structure from divergences\n            const treeHTML = this.renderSyncTree(divergences);\n\n            listElement.innerHTML = `\n                <div class=\"sync-status-container\">\n                    <div class=\"sync-summary\" style=\"padding: 10px; background: #1e1e1e; border-bottom: 1px solid #333;\">\n                        <div style=\"font-size: 12px; color: #888; margin-bottom: 8px;\">DIVERGENCE SUMMARY</div>\n                        <div style=\"display: flex; gap: 15px; flex-wrap: wrap;\">\n                            ${summary.bySeverity.high > 0 ? `<div style=\"color: #ef4444;\">\uD83D\uDD34 High: ${summary.bySeverity.high}</div>` : ''}\n                            ${summary.bySeverity.medium > 0 ? `<div style=\"color: #f59e0b;\">\uD83D\uDFE1 Medium: ${summary.bySeverity.medium}</div>` : ''}\n                            ${summary.bySeverity.low > 0 ? `<div style=\"color: #3b82f6;\">\uD83D\uDD35 Low: ${summary.bySeverity.low}</div>` : ''}\n                            ${summary.bySeverity.info > 0 ? `<div style=\"color: #6b7280;\">\u2139\uFE0F Info: ${summary.bySeverity.info}</div>` : ''}\n                        </div>\n                    </div>\n                    <div class=\"sync-tree\" style=\"padding: 10px;\">\n                        ${treeHTML}\n                    </div>\n                </div>\n            `;\n\n            // Add event listeners for resolution buttons\n            this.attachSyncResolutionListeners();\n        }\n\n        /**\n         * Render the sync status tree\n         */\n        renderSyncTree(divergences) {\n            // Get both hierarchies for structure\n            const localHierarchy = entities();\n            const networkHierarchy = {roots: []} //networking.getSpaceHeir();\n\n            // Build a unified tree with divergence indicators\n            const treeHTML = [];\n\n            // Helper function to render entity with sync status\n            const renderEntity = (entity, path = '', depth = 0) => {\n                const currentPath = path ? `${path}/${entity.name}` : entity.name;\n                const divergence = divergences.get(currentPath);\n                const status = this.syncComparator.getEntityStatus(currentPath);\n\n                const indent = depth * 20;\n                let statusIcon = '\uD83D\uDFE2';\n                let statusClass = 'sync-status-synced';\n                let statusTooltip = 'Synced';\n\n                if (status === 'missing') {\n                    statusIcon = '\uD83D\uDFE1';\n                    statusClass = 'sync-status-missing';\n                    if (divergence && divergence.types.has('missing-local')) {\n                        statusTooltip = 'Only in network';\n                    } else {\n                        statusTooltip = 'Only in local';\n                    }\n                } else if (status === 'error') {\n                    statusIcon = '\uD83D\uDD34';\n                    statusClass = 'sync-status-conflict';\n                    statusTooltip = 'Property conflicts';\n                } else if (status === 'warning') {\n                    statusIcon = '\u26A0\uFE0F';\n                    statusClass = 'sync-status-warning';\n                    statusTooltip = 'Has divergences';\n                }\n\n                let html = `\n                    <div class=\"sync-tree-node ${statusClass}\" style=\"margin-left: ${indent}px; padding: 4px; border-radius: 3px; margin-bottom: 2px;\">\n                        <div class=\"sync-node-header\" style=\"display: flex; align-items: center; gap: 8px;\">\n                            <span class=\"sync-status-icon\" title=\"${statusTooltip}\">${statusIcon}</span>\n                            <span class=\"sync-entity-name\" style=\"font-weight: bold; color: #64b5f6;\">${entity.name}</span>\n                `;\n\n                // Add divergence details if any\n                if (divergence) {\n                    html += `<div class=\"sync-divergence-details\" style=\"margin-left: 10px; font-size: 12px; color: #888;\">`;\n\n                    if (divergence.details.active) {\n                        html += `<span style=\"color: #ef4444;\">active: local=${divergence.details.active.local}, network=${divergence.details.active.network}</span>`;\n                    }\n\n                    if (divergence.details.layer) {\n                        html += `<span style=\"color: #f59e0b; margin-left: 10px;\">layer: local=${divergence.details.layer.local}, network=${divergence.details.layer.network}</span>`;\n                    }\n\n                    if (divergence.details.components) {\n                        html += `<span style=\"color: #3b82f6; margin-left: 10px;\">components: local=${divergence.details.components.localCount}, network=${divergence.details.components.networkCount}</span>`;\n                    }\n\n                    if (divergence.details.children) {\n                        html += `<span style=\"color: #f59e0b; margin-left: 10px;\">children: local=${divergence.details.children.localCount}, network=${divergence.details.children.networkCount}</span>`;\n                    }\n\n                    html += `</div>`;\n\n                    // Show component property divergences\n                    if (divergence.details.componentProperties) {\n                        html += `<div style=\"margin-left: 20px; margin-top: 5px; padding: 5px; background: rgba(0,0,0,0.2); border-radius: 3px;\">`;\n                        html += `<div style=\"font-size: 11px; color: #888; margin-bottom: 4px;\">Component Property Divergences:</div>`;\n\n                        divergence.details.componentProperties.forEach(compDivergence => {\n                            html += `<div style=\"margin-bottom: 8px; padding: 4px; background: rgba(255,255,255,0.05); border-radius: 2px;\">`;\n                            html += `<div style=\"font-weight: bold; color: #64b5f6; font-size: 12px; margin-bottom: 4px;\">${compDivergence.type} (${compDivergence.componentId})</div>`;\n\n                            Object.entries(compDivergence.differences).forEach(([propName, values]) => {\n                                let localVal = values.local;\n                                let networkVal = values.network;\n\n                                // Format values for display\n                                if (typeof localVal === 'object' && localVal !== null) {\n                                    if (localVal.r !== undefined && localVal.g !== undefined && localVal.b !== undefined) {\n                                        // Color - show as color swatch\n                                        const localColor = `rgba(${Math.round(localVal.r * 255)}, ${Math.round(localVal.g * 255)}, ${Math.round(localVal.b * 255)}, ${localVal.a || 1})`;\n                                        const networkColor = networkVal ? `rgba(${Math.round(networkVal.r * 255)}, ${Math.round(networkVal.g * 255)}, ${Math.round(networkVal.b * 255)}, ${networkVal.a || 1})` : 'none';\n\n                                        html += `<div style=\"margin-left: 10px; font-size: 11px; display: flex; align-items: center; gap: 10px;\">`;\n                                        html += `<span style=\"color: #888;\">${propName}:</span>`;\n                                        html += `<div style=\"display: flex; align-items: center; gap: 5px;\">`;\n                                        html += `<span style=\"color: #888;\">local:</span>`;\n                                        html += `<div style=\"width: 20px; height: 20px; background: ${localColor}; border: 1px solid #555; border-radius: 2px;\" title=\"${JSON.stringify(localVal)}\"></div>`;\n                                        html += `</div>`;\n                                        html += `<div style=\"display: flex; align-items: center; gap: 5px;\">`;\n                                        html += `<span style=\"color: #888;\">network:</span>`;\n                                        html += `<div style=\"width: 20px; height: 20px; background: ${networkColor}; border: 1px solid #555; border-radius: 2px;\" title=\"${JSON.stringify(networkVal)}\"></div>`;\n                                        html += `</div>`;\n                                        html += `</div>`;\n                                    } else if (localVal.x !== undefined || localVal.y !== undefined || localVal.z !== undefined) {\n                                        // Vector3 or similar\n                                        html += `<div style=\"margin-left: 10px; font-size: 11px;\">`;\n                                        html += `<span style=\"color: #888;\">${propName}:</span>`;\n                                        html += `<span style=\"color: #ef4444; margin-left: 5px;\">local: (${localVal.x?.toFixed(2) || 0}, ${localVal.y?.toFixed(2) || 0}, ${localVal.z?.toFixed(2) || 0})</span>`;\n                                        html += `<span style=\"color: #10b981; margin-left: 10px;\">network: ${networkVal ? `(${networkVal.x?.toFixed(2) || 0}, ${networkVal.y?.toFixed(2) || 0}, ${networkVal.z?.toFixed(2) || 0})` : 'null'}</span>`;\n                                        html += `</div>`;\n                                    } else {\n                                        // Other objects\n                                        html += `<div style=\"margin-left: 10px; font-size: 11px;\">`;\n                                        html += `<span style=\"color: #888;\">${propName}:</span>`;\n                                        html += `<span style=\"color: #ef4444; margin-left: 5px;\">local: ${JSON.stringify(localVal)}</span>`;\n                                        html += `<span style=\"color: #10b981; margin-left: 10px;\">network: ${JSON.stringify(networkVal)}</span>`;\n                                        html += `</div>`;\n                                    }\n                                } else {\n                                    // Simple values\n                                    html += `<div style=\"margin-left: 10px; font-size: 11px;\">`;\n                                    html += `<span style=\"color: #888;\">${propName}:</span>`;\n                                    html += `<span style=\"color: #ef4444; margin-left: 5px;\">local: ${localVal}</span>`;\n                                    html += `<span style=\"color: #10b981; margin-left: 10px;\">network: ${networkVal}</span>`;\n                                    html += `</div>`;\n                                }\n                            });\n\n                            html += `</div>`;\n                        });\n\n                        html += `</div>`;\n                    }\n\n                    // Add resolution buttons for conflicts\n                    if (status === 'error' || status === 'missing') {\n                        html += `\n                            <div class=\"sync-resolution-buttons\" style=\"margin-left: auto; display: flex; gap: 5px;\">\n                                <button class=\"sync-push-btn\" data-path=\"${currentPath}\" style=\"padding: 2px 8px; font-size: 11px; background: #065f46; border: 1px solid #10b981; border-radius: 3px; color: #10b981; cursor: pointer;\" title=\"Push local to network\">\u2192 Push</button>\n                                <button class=\"sync-pull-btn\" data-path=\"${currentPath}\" style=\"padding: 2px 8px; font-size: 11px; background: #7c2d12; border: 1px solid #f59e0b; border-radius: 3px; color: #f59e0b; cursor: pointer;\" title=\"Pull from network\">\u2190 Pull</button>\n                            </div>\n                        `;\n                    }\n                }\n\n                html += `\n                        </div>\n                    </div>\n                `;\n\n                treeHTML.push(html);\n\n                // Render children\n                if (entity.children && entity.children.length > 0) {\n                    entity.children.forEach(child => renderEntity(child, currentPath, depth + 1));\n                }\n            };\n\n            // Render all root entities\n            if (Array.isArray(localHierarchy)) {\n                localHierarchy.forEach(entity => renderEntity(entity));\n            }\n\n            // Also check for entities only in network\n            if (networkHierarchy && networkHierarchy.roots) {\n                networkHierarchy.roots.forEach(netEntity => {\n                    // Check if this entity exists in local\n                    const existsInLocal = localHierarchy && localHierarchy.some(e => e.name === netEntity.name);\n                    if (!existsInLocal) {\n                        renderEntity(netEntity);\n                    }\n                });\n            }\n\n            return treeHTML.join('');\n        }\n\n        /**\n         * Attach event listeners for sync resolution buttons\n         */\n        attachSyncResolutionListeners() {\n            // Push buttons\n            document.querySelectorAll('.sync-push-btn').forEach(btn => {\n                btn.addEventListener('click', async (e) => {\n                    const path = e.target.dataset.path;\n                    console.log(`Push local state to network for: ${path}`);\n                    // TODO: Implement push logic\n                    alert(`Push to network: ${path}\\n(Not yet implemented)`);\n                });\n            });\n\n            // Pull buttons\n            document.querySelectorAll('.sync-pull-btn').forEach(btn => {\n                btn.addEventListener('click', async (e) => {\n                    const path = e.target.dataset.path;\n                    console.log(`Pull network state to local for: ${path}`);\n\n                    try {\n                        // Get the divergence for this path\n                        const divergences = await this.syncComparator.compare();\n                        const divergence = divergences.get(path);\n\n                        if (!divergence) {\n                            console.warn(`No divergence found for path: ${path}`);\n                            return;\n                        }\n\n                        // Find the local entity\n                        const pathParts = path.split('/');\n                        let entity = null;\n\n                        // Navigate through the hierarchy to find the entity\n                        const localHierarchy = entities();\n                        if (localHierarchy && Array.isArray(localHierarchy)) {\n                            // Start with root entities\n                            const rootName = pathParts[0];\n                            entity = localHierarchy.find(e => e.name === rootName);\n\n                            // Navigate through children\n                            for (let i = 1; i < pathParts.length && entity; i++) {\n                                if (entity.children) {\n                                    entity = entity.children.find(c => c.name === pathParts[i]);\n                                }\n                            }\n                        }\n\n                        if (!entity) {\n                            console.error(`Entity not found for path: ${path}`);\n                            alert(`Cannot find entity: ${path}`);\n                            return;\n                        }\n\n                        // Get network state for this entity\n                        const networkHierarchy = {roots: []} // networking.getSpaceHeir();\n                        let networkEntity = null;\n\n                        if (networkHierarchy && networkHierarchy.roots) {\n                            const rootName = pathParts[0];\n                            networkEntity = networkHierarchy.roots.find(e => e.name === rootName);\n\n                            for (let i = 1; i < pathParts.length && networkEntity; i++) {\n                                if (networkEntity.children) {\n                                    networkEntity = networkEntity.children.find(c => c.name === pathParts[i]);\n                                }\n                            }\n                        }\n\n                        if (!networkEntity) {\n                            console.error(`Network entity not found for path: ${path}`);\n                            alert(`Cannot find network state for: ${path}`);\n                            return;\n                        }\n\n                        // Apply updates directly to the local entity using _set (local-only updates)\n                        let updateCount = 0;\n\n                        // Handle active state divergence\n                        if (divergence.details.active && divergence.details.active.network !== undefined) {\n                            console.log(`Updating ${path} active: ${entity.active} -> ${networkEntity.active}`);\n                            await entity._set('active', networkEntity.active);\n                            updateCount++;\n                        }\n\n                        // Handle layer divergence\n                        if (divergence.details.layer && divergence.details.layer.network !== undefined) {\n                            console.log(`Updating ${path} layer: ${entity.layer} -> ${networkEntity.layer}`);\n                            await entity._set('layer', networkEntity.layer);\n                            updateCount++;\n                        }\n\n                        // Handle position divergence\n                        if (divergence.details.position && networkEntity.position) {\n                            console.log(`Updating ${path} position:`, entity.position, '->', networkEntity.position);\n                            await entity._set('position', networkEntity.position);\n                            updateCount++;\n                        }\n\n                        // Handle rotation divergence\n                        if (divergence.details.rotation && networkEntity.rotation) {\n                            console.log(`Updating ${path} rotation:`, entity.rotation, '->', networkEntity.rotation);\n                            await entity._set('rotation', networkEntity.rotation);\n                            updateCount++;\n                        }\n\n                        // Handle scale divergence\n                        if (divergence.details.scale && networkEntity.scale) {\n                            console.log(`Updating ${path} scale:`, entity.scale, '->', networkEntity.scale);\n                            await entity._set('scale', networkEntity.scale);\n                            updateCount++;\n                        }\n\n                        // Handle localPosition divergence\n                        if (divergence.details.localPosition && networkEntity.localPosition) {\n                            console.log(`Updating ${path} localPosition:`, entity.transform?.localPosition, '->', networkEntity.localPosition);\n                            await entity._set('localPosition', networkEntity.localPosition);\n                            updateCount++;\n                        }\n\n                        // Handle localRotation divergence\n                        if (divergence.details.localRotation && networkEntity.localRotation) {\n                            console.log(`Updating ${path} localRotation:`, entity.transform?.localRotation, '->', networkEntity.localRotation);\n                            await entity._set('localRotation', networkEntity.localRotation);\n                            updateCount++;\n                        }\n\n                        // Handle localScale divergence\n                        if (divergence.details.localScale && networkEntity.localScale) {\n                            console.log(`Updating ${path} localScale:`, entity.transform?.localScale, '->', networkEntity.localScale);\n                            await entity._set('localScale', networkEntity.localScale);\n                            updateCount++;\n                        }\n\n                        // TODO: Handle component property divergences\n                        if (divergence.details.componentProperties && divergence.details.componentProperties.length > 0) {\n                            console.log(`Component property divergences detected for ${path}, but pull for components not yet implemented`);\n                        }\n\n                        // Refresh the hierarchy panel to reflect changes\n                        if (inspector?.hierarchyPanel) {\n                            inspector.hierarchyPanel.render();\n                        }\n\n                        // Refresh the sync view to show updated state\n                        setTimeout(() => {\n                            this.renderSyncView('public', net.state, this.isPopupOpen);\n                        }, 500);\n\n                        console.log(`\u2705 Pull completed for ${path}: ${updateCount} properties updated locally`);\n\n                    } catch (error) {\n                        console.error('Error pulling network state:', error);\n                        alert(`Error pulling network state: ${error.message}`);\n                    }\n                });\n            });\n        }\n    }\n\n// Make functions globally available for inline onmousedown handlers\nwindow.addPublicProp = () => {\n    const panel = window.spacePropsPanel;\n    if (panel) panel.addPublicProp();\n};\n\nwindow.addProtectedProp = () => {\n    const panel = window.spacePropsPanel;\n    if (panel) panel.addProtectedProp();\n};", "/**\n * Component Menu\n * Handles the component selection menu overlay\n */\n\nimport { changeManager } from '../../change-manager.js';\nimport { AddComponentChange } from '../../change-types.js';\nimport { componentBundleMap } from '../../entity-components/index.js';\n\nexport class ComponentMenu {\n    constructor() {\n        this.overlay = document.getElementById('componentMenuOverlay');\n        this.searchInput = document.getElementById('componentSearchInput');\n        this.closeBtn = document.getElementById('closeComponentMenu');\n        this.categoryStates = new Map(); // Track expanded/collapsed state\n        this.setupEventListeners();\n        this.initializeCategories();\n    }\n\n    /**\n     * Initialize categories with default expanded state\n     */\n    initializeCategories() {\n        const categories = document.querySelectorAll('.component-category');\n        categories.forEach((category, index) => {\n            const categoryName = category.querySelector('.category-name')?.textContent || `category-${index}`;\n            this.categoryStates.set(categoryName, false); // All expanded by default\n            \n            // Add expand/collapse indicator\n            const header = category.querySelector('.category-header');\n            if (header && !header.querySelector('.category-toggle')) {\n                const toggleIcon = document.createElement('span');\n                toggleIcon.className = 'category-toggle';\n                toggleIcon.textContent = '\u25BC';\n                header.insertBefore(toggleIcon, header.firstChild);\n            }\n        });\n        categories.forEach((category, index) => {\n            this.toggleCategory(category);\n        });\n    }\n\n    /**\n     * Setup event listeners\n     */\n    setupEventListeners() {\n        // Listen for show component menu events\n        document.addEventListener('showComponentMenu', (event) => {\n            this.show();\n        });\n\n        // Close button\n        this.closeBtn?.addEventListener('mousedown', () => {\n            this.hide();\n        });\n\n        // Overlay click (close on background click)\n        this.overlay?.addEventListener('mousedown', (e) => {\n            if (e.target === this.overlay) {\n                this.hide();\n            }\n        });\n\n        // Search input\n        this.searchInput?.addEventListener('input', (e) => {\n            this.filterComponents(e.target.value);\n        });\n\n        // Category header clicks\n        document.addEventListener('mousedown', (e) => {\n            const header = e.target.closest('.category-header');\n            if (header && this.overlay?.contains(header)) {\n                e.stopPropagation();\n                this.toggleCategory(header.closest('.component-category'));\n            }\n        });\n\n        // Component item clicks\n        document.addEventListener('mousedown', (e) => {\n            const item = e.target.closest('.component-item');\n            if (item && this.overlay?.contains(item)) {\n                const componentType = item.dataset.component;\n                if (componentType) {\n                    this.addComponent(componentType);\n                }\n            }\n        });\n\n        // Keyboard shortcuts\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Escape' && this.overlay?.style.display !== 'none') {\n                this.hide();\n            }\n        });\n    }\n\n    /**\n     * Toggle category expanded/collapsed state\n     */\n    toggleCategory(categoryElement) {\n        const categoryName = categoryElement.querySelector('.category-name')?.textContent;\n        if (!categoryName) return;\n        \n        const isExpanded = this.categoryStates.get(categoryName) ?? true;\n        this.categoryStates.set(categoryName, !isExpanded);\n        \n        // Update UI\n        const toggleIcon = categoryElement.querySelector('.category-toggle');\n        const itemsContainer = categoryElement.querySelector('.category-items');\n        \n        if (toggleIcon) {\n            toggleIcon.textContent = isExpanded ? '\u25B6' : '\u25BC';\n        }\n        \n        if (itemsContainer) {\n            itemsContainer.classList.toggle('collapsed', isExpanded);\n        }\n        \n        categoryElement.classList.toggle('collapsed', isExpanded);\n    }\n\n    /**\n     * Show the component menu\n     */\n    show() {\n        if (!this.overlay || !SM.selectedEntity) return;\n        \n        this.overlay.style.display = 'flex';\n        this.searchInput.value = '';\n        this.filterComponents('');\n        \n        // Re-initialize categories in case DOM changed\n        this.initializeCategories();\n        \n        // Focus search input\n        setTimeout(() => {\n            this.searchInput?.focus();\n        }, 100);\n    }\n\n    /**\n     * Hide the component menu\n     */\n    hide() {\n        if (!this.overlay) return;\n        \n        this.overlay.style.display = 'none';\n    }\n\n    /**\n     * Filter components based on search term\n     */\n    filterComponents(searchTerm) {\n        const term = searchTerm.toLowerCase();\n        const items = document.querySelectorAll('.component-item');\n        const categories = document.querySelectorAll('.component-category');\n        \n        items.forEach(item => {\n            const name = item.querySelector('.component-item-name')?.textContent.toLowerCase() || '';\n            const desc = item.querySelector('.component-item-desc')?.textContent.toLowerCase() || '';\n            const matches = name.includes(term) || desc.includes(term);\n            \n            item.classList.toggle('hidden', !matches);\n        });\n        \n        // Handle categories\n        categories.forEach(category => {\n            const visibleItems = category.querySelectorAll('.component-item:not(.hidden)');\n            const hasVisibleItems = visibleItems.length > 0;\n            \n            category.style.display = hasVisibleItems ? 'block' : 'none';\n            \n            // Auto-expand categories with matching items when searching\n            if (term && hasVisibleItems) {\n                const categoryName = category.querySelector('.category-name')?.textContent;\n                if (categoryName && !this.categoryStates.get(categoryName)) {\n                    this.categoryStates.set(categoryName, true);\n                    category.classList.remove('collapsed');\n                    \n                    const toggleIcon = category.querySelector('.category-toggle');\n                    if (toggleIcon) {\n                        toggleIcon.textContent = '\u25BC';\n                    }\n                    \n                    const itemsContainer = category.querySelector('.category-items');\n                    if (itemsContainer) {\n                        itemsContainer.classList.remove('collapsed');\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * Add component to selected entity\n     */\n    async addComponent(componentType) {\n        log(\"component-menu\", \"adding component =>\", componentType)\n        if (!SM.selectedEntity) return;\n        \n        const entity = SM.getSelectedEntity();\n        if (!entity) return;\n          \n        // Create and apply the component add change\n        const change = new AddComponentChange(\n            entity.id, \n            componentType,\n            { source: 'ui' }\n        );\n        \n        await changeManager.applyChange(change);\n        await this.handleComponentBundles(componentType);\n        // Hide menu and refresh UI\n        this.hide();\n        SM.selectEntity(entity.id);\n    }\n\n    async handleComponentBundles(componentType){\n        let bundles = componentBundleMap[componentType];\n        if(bundles){\n            for(let bundle of bundles){\n                await this.addComponent(bundle);\n            }\n        }\n    }\n\n}\n", "/**\n * Lifecycle Panel\n * UI for displaying and managing ScriptRunner scripts from lifecycle-manager\n */\n\nimport { isVector3Object, isQuaternion, quaternionToEuler, formatNumber } from '../../utils.js';\nimport { lifecycle } from '../../lifecycle-manager.js';\n\nexport class LifecyclePanel {\n        constructor() {\n            this.selectedLogs = new Set(); // Set of componentIds that have logging enabled\n            this.shellBuffer = [];\n            this.maxShellLines = 1000;\n            this.setupEventListeners();\n            this.setupCollapsible();\n            this.render();\n        }\n\n        /**\n         * Setup collapsible functionality\n         */\n        setupCollapsible() {\n            const collapseBtn = document.getElementById('lifecycleCollapseBtn');\n            const panel = document.getElementById('lifecyclePanel');\n\n            if (collapseBtn && panel) {\n                // Load saved state from localStorage\n                const isCollapsed = localStorage.getItem('lifecyclePanelCollapsed') === 'true';\n                if (isCollapsed) {\n                    panel.classList.add('collapsed');\n                    collapseBtn.classList.add('collapsed');\n                }\n\n                // Add click handler\n                collapseBtn.addEventListener('click', () => {\n                    const isCurrentlyCollapsed = panel.classList.contains('collapsed');\n                    if (isCurrentlyCollapsed) {\n                        panel.classList.remove('collapsed');\n                        collapseBtn.classList.remove('collapsed');\n                        localStorage.setItem('lifecyclePanelCollapsed', 'false');\n                    } else {\n                        panel.classList.add('collapsed');\n                        collapseBtn.classList.add('collapsed');\n                        localStorage.setItem('lifecyclePanelCollapsed', 'true');\n                    }\n                });\n            }\n        }\n\n        /**\n         * Setup event listeners\n         */\n        setupEventListeners() {\n            // Listen for lifecycle manager changes\n            document.addEventListener('scriptrunnerRegistered', () => {\n                this.render();\n            });\n\n            document.addEventListener('scriptrunnerUnregistered', () => {\n                this.render();\n            });\n\n            // Listen for scene state changes\n            document.addEventListener('sceneStateChanged', () => {\n                this.render();\n            });\n\n            // Listen for component changes\n            document.addEventListener('componentChanged', (e) => {\n                if (e.detail?.componentType === 'ScriptRunner') {\n                    this.render();\n                }\n            });\n        }\n\n        /**\n         * Get entity information for a ScriptRunner\n         */\n        getEntityInfo(scriptRunner) {\n            // ScriptRunner component has a direct reference to its entity\n            if (scriptRunner._entity) {\n                return [scriptRunner._entity.name || 'Unnamed Entity'];\n            }\n            return ['No entity'];\n        }\n\n        /**\n         * Render the lifecycle panel\n         */\n        render() {\n            const listElement = document.getElementById('lifecycleList');\n            if (!listElement) return;\n            \n            listElement.innerHTML = '';\n            let scriptRunners = SM.getAllScriptRunners();\n            if (scriptRunners.length === 0) {\n                listElement.innerHTML = '<div class=\"empty-lifecycle\">No active ScriptRunner scripts</div>';\n                return;\n            }\n            \n            // Create table\n            const table = document.createElement('table');\n            table.className = 'lifecycle-table';\n            \n            // Create header\n            const thead = document.createElement('thead');\n            thead.innerHTML = `\n                <tr>\n                    <th>Name</th>\n                    <th>Owner</th>\n                    <th>Usage</th>\n                    <th>Log</th>\n                    <th>Actions</th>\n                </tr>\n            `;\n            table.appendChild(thead);\n            \n            // Create body\n            const tbody = document.createElement('tbody');\n            \n            scriptRunners.forEach((scriptRunner) => {\n                const row = this.createScriptRunnerRow(scriptRunner);\n                tbody.appendChild(row);\n            });\n            \n            table.appendChild(tbody);\n            listElement.appendChild(table);\n        }\n\n        /**\n         * Create a row for a ScriptRunner\n         */\n        createScriptRunnerRow(scriptRunner) {\n            const row = document.createElement('tr');\n            row.className = 'lifecycle-row';\n            \n            // Name column\n            const nameCell = document.createElement('td');\n            nameCell.className = 'lifecycle-name';\n            const scriptName = scriptRunner.properties?.file || scriptRunner.properties?.name || 'Unknown Script';\n            nameCell.textContent = scriptName;\n            nameCell.title = `Script: ${scriptRunner.properties?.file || 'No script'}`;\n            nameCell.style.cursor = 'pointer';\n            nameCell.onmousedown = () => {\n                const scriptItem = window.inventory.items[scriptRunner.properties.file];\n                if (scriptItem && scriptItem.itemType === 'script') {\n                    const event = new CustomEvent('open-script-editor', {\n                        detail: {\n                            name: scriptRunner.properties.file,\n                            content: scriptItem.data,\n                            author: scriptItem.author,\n                            created: scriptItem.created\n                        }\n                    });\n                    window.dispatchEvent(event);\n                }\n            }\n\n\n            // Owner column\n            const ownerCell = document.createElement('td');\n            ownerCell.className = 'lifecycle-owner';\n            ownerCell.textContent = scriptRunner.properties?.owner || 'Unknown Owner';\n            ownerCell.title = `Owner: ${scriptRunner.properties?.owner || 'No owner'}`;\n            ownerCell.style.cursor = 'pointer';\n            ownerCell.onmousedown = () => {\n                if(scriptRunner.amOwner()){\n                    SetComponentProp(scriptRunner.id, \"owner\", \"global\");\n                    setTimeout(()=>{\n                        this.render();\n                    }, 150)\n                }else{\n                    SetComponentProp(scriptRunner.id, \"owner\", SM.myName());\n                    setTimeout(()=>{\n                        this.render();\n                    }, 150)\n                }\n            }\n            \n            // Usage column\n            const usageCell = document.createElement('td');\n            usageCell.className = 'lifecycle-usage';\n            const entities = this.getEntityInfo(scriptRunner);\n            const entitiesText = entities.join(', ') || 'No entities';\n            if (entitiesText.length > 32) {\n                usageCell.textContent = entitiesText.substring(0, 32) + '...';\n                usageCell.title = entitiesText;\n            } else {\n                usageCell.textContent = entitiesText;\n            }\n            \n            // Log checkbox column\n            const logCell = document.createElement('td');\n            logCell.className = 'lifecycle-log';\n            const logCheckbox = document.createElement('input');\n            logCheckbox.type = 'checkbox';\n            logCheckbox.checked = this.selectedLogs.has(scriptRunner.id);\n            logCheckbox.onchange = () => this.toggleLogging(scriptRunner.id, logCheckbox.checked);\n            logCell.appendChild(logCheckbox);\n            \n            // Actions column\n            const actionsCell = document.createElement('td');\n            actionsCell.className = 'lifecycle-actions';\n            \n            // Stop button\n            const stopBtn = document.createElement('button');\n            stopBtn.className = 'lifecycle-button stop';\n            stopBtn.innerHTML = '\u23F9';\n            stopBtn.title = 'Stop';\n            if(scriptRunner.ctx._running){\n                stopBtn.onmousedown = () => {\n                    scriptRunner.Stop();\n                    this.addShellOutput(scriptName, '[Stopped]', scriptRunner.id);\n                    this.render();\n                }\n            }else{\n                stopBtn.disabled = true;\n                stopBtn.title = 'Not running';\n                stopBtn.style.opacity = 0.25;\n                stopBtn.style.pointerEvents = 'none';\n            }\n            \n            // Refresh button\n            const refreshBtn = document.createElement('button');\n            refreshBtn.className = 'lifecycle-button refresh';\n            refreshBtn.innerHTML = '\uD83D\uDD04';\n            refreshBtn.title = 'Refresh';\n            refreshBtn.onmousedown = () => {\n                scriptRunner.Refresh();\n                this.addShellOutput(scriptName, '[Refreshed]', scriptRunner.id);\n                this.render();\n            }\n            \n            actionsCell.appendChild(stopBtn);\n            actionsCell.appendChild(refreshBtn);\n            \n            row.appendChild(nameCell);\n            row.appendChild(ownerCell);\n            row.appendChild(usageCell);\n            row.appendChild(logCell);\n            row.appendChild(actionsCell);\n            \n            return row;\n        }\n\n        /**\n         * Toggle logging for a scriptrunner\n         */\n        toggleLogging(componentId, enabled) {\n            if (enabled) {\n                this.selectedLogs.add(componentId);\n                // Add initial message\n                const scriptRunner = lifecycle.scriptRunners.get(componentId);\n                if (scriptRunner) {\n                    const scriptName = scriptRunner.properties?.file || scriptRunner.properties?.name || 'Unknown';\n                    this.addShellOutput(scriptName, '[Logging enabled]', scriptRunner.id);\n                }\n            } else {\n                this.selectedLogs.delete(componentId);\n            }\n        }\n\n\n        /**\n         * Add output to the shell\n         */\n        addShellOutput(scriptName, output, id) {\n            let outputStr = `[${scriptName}]: ${output}`;\n            //appendToShell(\"script\", \"script_\"+id+\"_\"+Math.floor(Math.random()*1000000), outputStr);\n        }\n\n\n\n        /**\n         * Clear the shell\n         */\n        clearShell() {\n            let shellEl = document.getElementById(\"lifecycleShell\");\n            shellEl.innerHTML = \"\";\n        }\n    }\n\n// Export for global access\nwindow.LifecyclePanel = LifecyclePanel;", "import { SaveEntityItemChange } from './change-types.js';\n\nexport class Navigation {\n    constructor() {\n        this.currentPage = 'world-inspector';\n        this.pages = new Map();\n        this.navItems = new Map();\n        this.dynamicPages = new Map();\n        this.tabOrder = [];\n        this.draggedTab = null;\n        this.insertIndicator = null;\n        \n        this.init();\n    }\n    \n    init() {\n        const pageElements = document.querySelectorAll('.page');\n        pageElements.forEach(page => {\n            const pageId = page.id.replace('-page', '');\n            this.pages.set(pageId, page);\n        });\n        \n        const navElements = document.querySelectorAll('.nav-item');\n        navElements.forEach((navItem, index) => {\n            const pageId = navItem.getAttribute('data-page');\n            this.navItems.set(pageId, navItem);\n            this.tabOrder.push(pageId);\n            \n            navItem.addEventListener('mousedown', () => this.switchPage(pageId));\n            \n            // Setup tab dragging\n            this.setupTabDragging(navItem, pageId);\n            \n            // Add drop handling for inventory tab\n            if (pageId === 'inventory') {\n                this.setupInventoryTabDrop(navItem);\n            }\n        });\n        \n        // Create insertion indicator\n        this.createInsertIndicator();\n    }\n    \n    switchPage(pageId) {\n        if (pageId === this.currentPage) return;\n        \n        this.pages.forEach((page, id) => {\n            if (id === pageId) {\n                page.classList.add('active');\n            } else {\n                page.classList.remove('active');\n            }\n        });\n        \n        this.navItems.forEach((navItem, id) => {\n            if (id === pageId) {\n                navItem.classList.add('active');\n            } else {\n                navItem.classList.remove('active');\n            }\n        });\n        \n        this.currentPage = pageId;\n        \n        const event = new CustomEvent('page-switched', { \n            detail: { pageId } \n        });\n        window.dispatchEvent(event);\n    }\n    \n    getCurrentPage() {\n        return this.currentPage;\n    }\n    \n    setupInventoryTabDrop(navItem) {\n        const originalDragOver = navItem.ondragover;\n        navItem.addEventListener('dragover', (e) => {\n            // Check if this is a tab reorder - if so, let the tab drag handler handle it\n            if (e.dataTransfer.types.includes('text/tab-reorder')) {\n                return;\n            }\n            \n            e.preventDefault();\n            e.dataTransfer.dropEffect = 'copy';\n            navItem.classList.add('drag-over');\n        });\n        \n        navItem.addEventListener('dragleave', (e) => {\n            // Don't remove drag-over if it's a tab reorder operation\n            if (!e.dataTransfer || !e.dataTransfer.types.includes('text/tab-reorder')) {\n                navItem.classList.remove('drag-over');\n            }\n        });\n        \n        navItem.addEventListener('drop', async (e) => {\n            // Check if this is a tab reorder - if so, let the tab drag handler handle it\n            if (e.dataTransfer.types.includes('text/tab-reorder')) {\n                return;\n            }\n            \n            e.preventDefault();\n            navItem.classList.remove('drag-over');\n            \n            // Switch to inventory page\n            this.switchPage('inventory');\n            \n            // Get the entity data\n            const entityId = e.dataTransfer.getData('text/plain');\n            if (entityId && typeof SaveEntityItemChange !== 'undefined' && typeof changeManager !== 'undefined') {\n                let change = new SaveEntityItemChange(entityId, null, null, {source: 'ui'});\n                changeManager.applyChange(change);\n            }\n        });\n    }\n    \n    addDynamicPage(pageId, pageElement, navElement) {\n        // Remove existing if any\n        this.removeDynamicPage(pageId);\n        \n        // Add page element\n        this.pages.set(pageId, pageElement);\n        this.dynamicPages.set(pageId, { pageElement, navElement });\n        \n        // Add nav element\n        const navItems = document.querySelector('.nav-items');\n        navItems.insertBefore(navElement, this.insertIndicator);\n        this.navItems.set(pageId, navElement);\n        \n        // Add to tab order\n        this.tabOrder.push(pageId);\n        \n        // Setup click handler\n        navElement.addEventListener('mousedown', (e) => {\n            if (!e.target.closest('.close-tab-btn')) {\n                this.switchPage(pageId);\n            }\n        });\n        \n        // Setup tab dragging for dynamic tabs\n        this.setupTabDragging(navElement, pageId);\n    }\n    \n    removeDynamicPage(pageId) {\n        const dynamicPage = this.dynamicPages.get(pageId);\n        if (!dynamicPage) return;\n        \n        // Remove elements\n        dynamicPage.pageElement.remove();\n        dynamicPage.navElement.remove();\n        \n        // Clean up maps\n        this.pages.delete(pageId);\n        this.navItems.delete(pageId);\n        this.dynamicPages.delete(pageId);\n        \n        // Remove from tab order\n        const index = this.tabOrder.indexOf(pageId);\n        if (index > -1) {\n            this.tabOrder.splice(index, 1);\n        }\n        \n        // Switch to default page if current page was removed\n        if (this.currentPage === pageId) {\n            this.switchPage('world-inspector');\n        }\n    }\n    \n    createInsertIndicator() {\n        // Create the insertion indicator element\n        this.insertIndicator = document.createElement('div');\n        this.insertIndicator.className = 'tab-insert-indicator';\n        this.insertIndicator.style.display = 'none';\n        document.querySelector('.nav-items').appendChild(this.insertIndicator);\n    }\n    \n    setupTabDragging(navItem, pageId) {\n        // Make the tab draggable\n        navItem.draggable = true;\n        navItem.setAttribute('data-page-id', pageId);\n        \n        navItem.addEventListener('dragstart', (e) => {\n            // Don't drag if clicking on close button\n            if (e.target.closest('.close-tab-btn')) {\n                e.preventDefault();\n                return;\n            }\n            \n            this.draggedTab = navItem;\n            navItem.classList.add('dragging');\n            \n            // Store the page ID in the data transfer\n            e.dataTransfer.effectAllowed = 'move';\n            e.dataTransfer.setData('text/tab-reorder', pageId);\n            \n            // Create a custom drag image\n            const dragImage = navItem.cloneNode(true);\n            dragImage.style.position = 'absolute';\n            dragImage.style.top = '-1000px';\n            dragImage.style.opacity = '0.8';\n            document.body.appendChild(dragImage);\n            e.dataTransfer.setDragImage(dragImage, e.offsetX, e.offsetY);\n            setTimeout(() => dragImage.remove(), 0);\n        });\n        \n        navItem.addEventListener('dragend', (e) => {\n            navItem.classList.remove('dragging');\n            this.hideInsertIndicator();\n            this.draggedTab = null;\n        });\n        \n        navItem.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            \n            // Check if this is a tab reorder operation\n            if (!e.dataTransfer.types.includes('text/tab-reorder')) {\n                // This might be the inventory drop operation\n                return;\n            }\n            \n            if (!this.draggedTab || this.draggedTab === navItem) return;\n            \n            e.dataTransfer.dropEffect = 'move';\n            \n            // Calculate position for insert indicator\n            const rect = navItem.getBoundingClientRect();\n            const midpoint = rect.left + rect.width / 2;\n            const insertBefore = e.clientX < midpoint;\n            \n            this.showInsertIndicator(navItem, insertBefore);\n        });\n        \n        navItem.addEventListener('drop', (e) => {\n            e.preventDefault();\n            \n            // Check if this is a tab reorder operation\n            if (!e.dataTransfer.types.includes('text/tab-reorder')) {\n                // Let the inventory drop handler deal with it\n                return;\n            }\n            \n            if (!this.draggedTab || this.draggedTab === navItem) return;\n            \n            const draggedPageId = e.dataTransfer.getData('text/tab-reorder');\n            const targetPageId = navItem.getAttribute('data-page-id');\n            \n            // Calculate if we should insert before or after\n            const rect = navItem.getBoundingClientRect();\n            const midpoint = rect.left + rect.width / 2;\n            const insertBefore = e.clientX < midpoint;\n            \n            this.reorderTabs(draggedPageId, targetPageId, insertBefore);\n        });\n        \n        navItem.addEventListener('dragleave', (e) => {\n            // Only hide indicator if we're leaving the tab area entirely\n            if (!e.relatedTarget || !e.relatedTarget.closest('.nav-items')) {\n                this.hideInsertIndicator();\n            }\n        });\n    }\n    \n    showInsertIndicator(targetTab, insertBefore) {\n        const rect = targetTab.getBoundingClientRect();\n        const navItems = document.querySelector('.nav-items');\n        const navRect = navItems.getBoundingClientRect();\n        \n        this.insertIndicator.style.display = 'block';\n        this.insertIndicator.style.position = 'absolute';\n        this.insertIndicator.style.top = `${rect.top - navRect.top}px`;\n        \n        if (insertBefore) {\n            this.insertIndicator.style.left = `${rect.left - navRect.left - 2}px`;\n        } else {\n            this.insertIndicator.style.left = `${rect.right - navRect.left - 2}px`;\n        }\n        \n        this.insertIndicator.style.height = `${rect.height}px`;\n    }\n    \n    hideInsertIndicator() {\n        if (this.insertIndicator) {\n            this.insertIndicator.style.display = 'none';\n        }\n    }\n    \n    reorderTabs(draggedPageId, targetPageId, insertBefore) {\n        // Get current indices\n        const draggedIndex = this.tabOrder.indexOf(draggedPageId);\n        let targetIndex = this.tabOrder.indexOf(targetPageId);\n        \n        if (draggedIndex === -1 || targetIndex === -1) return;\n        \n        // Remove dragged tab from array\n        this.tabOrder.splice(draggedIndex, 1);\n        \n        // Adjust target index if necessary\n        if (draggedIndex < targetIndex) {\n            targetIndex--;\n        }\n        \n        // Insert at new position\n        if (!insertBefore) {\n            targetIndex++;\n        }\n        \n        this.tabOrder.splice(targetIndex, 0, draggedPageId);\n        \n        // Reorder DOM elements\n        this.updateTabOrder();\n    }\n    \n    updateTabOrder() {\n        const navItemsContainer = document.querySelector('.nav-items');\n        const fragment = document.createDocumentFragment();\n        \n        // Reorder tabs according to tabOrder array\n        this.tabOrder.forEach(pageId => {\n            const navItem = this.navItems.get(pageId);\n            if (navItem) {\n                fragment.appendChild(navItem);\n            }\n        });\n        \n        // Clear and re-append in correct order\n        navItemsContainer.innerHTML = '';\n        navItemsContainer.appendChild(fragment);\n        navItemsContainer.appendChild(this.insertIndicator);\n    }\n}", "/**\n * InventoryAPI - Client-side API for inventory operations\n * Proxies all write operations through the auth server\n * Following the same pattern as feedback-api.js\n */\nexport class InventoryAPI {\n    constructor(baseUrl) {\n        // Auto-detect environment\n        const isLocalhost = window.location.hostname === 'localhost' ||\n                           window.location.hostname === '127.0.0.1';\n\n        if (baseUrl) {\n            this.baseUrl = baseUrl;\n        } else if (isLocalhost) {\n            // Development environment\n            this.baseUrl = 'http://localhost:3303';\n        } else {\n            // Production environment\n            this.baseUrl = 'https://auth.tippy.dev';\n        }\n\n        this.apiPath = '/api/inventory';\n        console.log('InventoryAPI initialized with base URL:', this.baseUrl);\n    }\n\n    /**\n     * Generic request method with error handling\n     */\n    async _request(endpoint, options = {}) {\n        const url = `${this.baseUrl}${this.apiPath}${endpoint}`;\n\n        try {\n            const response = await fetch(url, {\n                ...options,\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...options.headers\n                },\n                credentials: 'include'\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                throw new Error(data.error || `HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            if (data.success === false) {\n                throw new Error(data.error || 'Operation failed');\n            }\n\n            return data;\n        } catch (error) {\n            console.error('InventoryAPI request failed:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Item operations\n     */\n    async createItem(item) {\n        return this._request('/items', {\n            method: 'POST',\n            body: JSON.stringify({\n                item,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    async updateItem(itemName, updates) {\n        return this._request(`/items/${encodeURIComponent(itemName)}`, {\n            method: 'PUT',\n            body: JSON.stringify({\n                updates,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    async deleteItem(itemName) {\n        return this._request(`/items/${encodeURIComponent(itemName)}`, {\n            method: 'DELETE',\n            body: JSON.stringify({\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Folder operations\n     */\n    async createFolder(folderData) {\n        return this._request('/folders', {\n            method: 'POST',\n            body: JSON.stringify({\n                folder: folderData,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    async updateFolder(folderKey, updates) {\n        return this._request(`/folders/${encodeURIComponent(folderKey)}`, {\n            method: 'PUT',\n            body: JSON.stringify({\n                updates,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    async deleteFolder(folderKey) {\n        return this._request(`/folders/${encodeURIComponent(folderKey)}`, {\n            method: 'DELETE',\n            body: JSON.stringify({\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Bulk operations\n     */\n    async bulkUpload(contents) {\n        return this._request('/bulk', {\n            method: 'POST',\n            body: JSON.stringify({\n                contents,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Image upload operation\n     */\n    async uploadImage(file, metadata) {\n        const formData = new FormData();\n        formData.append('image', file);\n        formData.append('metadata', JSON.stringify({\n            ...metadata,\n            userName: SM.myName(),\n            secret: net.secret,\n            folder: metadata.folder || null\n        }));\n\n        const url = `${this.baseUrl}${this.apiPath}/images`;\n\n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                body: formData,\n                credentials: 'include'\n            });\n\n            const data = await response.json();\n\n            if (!response.ok || data.success === false) {\n                throw new Error(data.error || 'Image upload failed');\n            }\n\n            return data;\n        } catch (error) {\n            console.error('Image upload failed:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Public folder discovery\n     */\n    async getPublicFolders(username) {\n        return this._request(`/public/${encodeURIComponent(username)}`, {\n            method: 'GET'\n        });\n    }\n\n    /**\n     * Get user's inventory structure (folders and items)\n     */\n    async getUserInventory(userName = null) {\n        const user = userName || SM.myName();\n        return this._request(`/users/${encodeURIComponent(user)}`, {\n            method: 'GET'\n        });\n    }\n\n    /**\n     * Sync item to Firebase (write operation)\n     */\n    async syncItem(itemName, item) {\n        // For items in folders, we need to include the full path\n        let path = item.folder ? `${item.folder}/${itemName}` : itemName;\n        // Sanitize path: replace dots and other Firebase-invalid chars with underscores\n        path = path.replace(/[\\.\\$#\\[\\]]/g, \"_\");\n        return this._request('/sync/item', {\n            method: 'POST',\n            body: JSON.stringify({\n                path,\n                item,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Sync folder metadata to Firebase\n     */\n    async syncFolder(folderKey, folder) {\n        return this._request('/sync/folder', {\n            method: 'POST',\n            body: JSON.stringify({\n                folderKey,\n                folder,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Delete item from Firebase\n     */\n    async removeFromFirebase(itemPath) {\n        return this._request('/sync/remove', {\n            method: 'DELETE',\n            body: JSON.stringify({\n                path: itemPath,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Import data from a Firebase reference\n     */\n    async importFromFirebase(firebaseRef, parentFolder = null, minUpdateTime = null) {\n        return this._request('/import/firebase', {\n            method: 'POST',\n            body: JSON.stringify({\n                firebaseRef,\n                parentFolder,\n                minUpdateTime,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Import public folders from a user\n     */\n    async importPublicUserFolders(targetUsername) {\n        return this._request('/import/user-public', {\n            method: 'POST',\n            body: JSON.stringify({\n                targetUsername,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Import folder contents\n     */\n    async importFolderContents(folderPath) {\n        return this._request('/import/folder', {\n            method: 'POST',\n            body: JSON.stringify({\n                folderPath,\n                userName: SM.myName(),\n                secret: net.secret\n            })\n        });\n    }\n\n    /**\n     * Check if API is available (health check)\n     */\n    async healthCheck() {\n        try {\n            const response = await fetch(`${this.baseUrl}${this.apiPath}/health`, {\n                method: 'GET',\n                credentials: 'include'\n            });\n            return response.ok;\n        } catch (error) {\n            console.error('Health check failed:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Offline queue management (for future implementation)\n     */\n    queueOfflineOperation(operation) {\n        // Store operation in localStorage for later retry\n        const queue = JSON.parse(localStorage.getItem('inventory_offline_queue') || '[]');\n        queue.push({\n            ...operation,\n            timestamp: Date.now()\n        });\n        localStorage.setItem('inventory_offline_queue', JSON.stringify(queue));\n    }\n\n    async processOfflineQueue() {\n        const queue = JSON.parse(localStorage.getItem('inventory_offline_queue') || '[]');\n        const failed = [];\n\n        for (const operation of queue) {\n            try {\n                await this[operation.method](...operation.args);\n            } catch (error) {\n                failed.push(operation);\n            }\n        }\n\n        // Save failed operations back to queue\n        localStorage.setItem('inventory_offline_queue', JSON.stringify(failed));\n        return { processed: queue.length - failed.length, failed: failed.length };\n    }\n}", "/**\n * WebSocket adapter for Firebase real-time listeners\n * Provides a Firebase-like interface over WebSocket connection\n */\nexport class InventoryWebSocket {\n    constructor(config = {}) {\n        this.url = config.url || this._getWebSocketUrl();\n        this.ws = null;\n        this.listeners = new Map(); // listenerId -> { path, event, callback }\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = config.maxReconnectAttempts || 5;\n        this.reconnectDelay = config.reconnectDelay || 1000;\n        this.messageQueue = [];\n        this.authenticated = false;\n        this.userName = config.userName;\n        this.secret = config.secret;\n        this.debug = config.debug || false;\n\n        // Event callbacks\n        this.onConnect = config.onConnect || null;\n        this.onDisconnect = config.onDisconnect || null;\n        this.onError = config.onError || null;\n    }\n\n    _getWebSocketUrl() {\n        // Auto-detect environment\n        const isLocalhost = window.location.hostname === 'localhost' ||\n                           window.location.hostname === '127.0.0.1';\n\n        if (isLocalhost) {\n            // Development environment - use local auth server\n            return 'ws://localhost:3303';\n        } else {\n            // Production environment - use auth.tippy.dev with secure WebSocket\n            return 'wss://auth.tippy.dev';\n        }\n    }\n\n    connect() {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            console.log('WebSocket already connected');\n            return Promise.resolve();\n        }\n\n        return new Promise((resolve, reject) => {\n            try {\n                this.ws = new WebSocket(this.url);\n                this.setupEventHandlers(resolve, reject);\n            } catch (error) {\n                console.error('Failed to create WebSocket:', error);\n                reject(error);\n            }\n        });\n    }\n\n    setupEventHandlers(connectResolve, connectReject) {\n        this.ws.onopen = () => {\n            console.log('WebSocket connected');\n            this.reconnectAttempts = 0;\n\n            // Authenticate immediately\n            if (this.userName && this.secret) {\n                this.authenticate(this.userName, this.secret)\n                    .then(() => {\n                        // Process any queued messages\n                        this.processMessageQueue();\n\n                        // Re-establish listeners after reconnection\n                        this.reestablishListeners();\n\n                        if (this.onConnect) {\n                            this.onConnect();\n                        }\n\n                        if (connectResolve) {\n                            connectResolve();\n                        }\n                    })\n                    .catch((error) => {\n                        console.error('Authentication failed:', error);\n                        if (connectReject) {\n                            connectReject(error);\n                        }\n                    });\n            } else {\n                console.warn('No credentials provided for WebSocket authentication');\n                if (connectReject) {\n                    connectReject(new Error('No credentials provided'));\n                }\n            }\n        };\n\n        this.ws.onmessage = (event) => {\n            try {\n                const message = JSON.parse(event.data);\n                this.handleMessage(message);\n            } catch (error) {\n                console.error('Error parsing WebSocket message:', error);\n            }\n        };\n\n        this.ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n            if (this.onError) {\n                this.onError(error);\n            }\n        };\n\n        this.ws.onclose = () => {\n            console.log('WebSocket disconnected');\n            this.authenticated = false;\n\n            if (this.onDisconnect) {\n                this.onDisconnect();\n            }\n\n            // Attempt to reconnect\n            this.attemptReconnect();\n        };\n    }\n\n    authenticate(userName, secret) {\n        this.userName = userName;\n        this.secret = secret;\n\n        return new Promise((resolve, reject) => {\n            const authTimeout = setTimeout(() => {\n                reject(new Error('Authentication timeout'));\n            }, 5000);\n\n            // Store the resolve/reject for handling auth response\n            this.pendingAuth = { resolve, reject, timeout: authTimeout };\n\n            this.sendMessage({\n                type: 'auth',\n                userName: userName,\n                secret: secret\n            });\n        });\n    }\n\n    handleMessage(message) {\n        if (this.debug) {\n            console.log('WebSocket message received:', message);\n        }\n\n        switch (message.type) {\n            case 'authenticated':\n                this.authenticated = true;\n                if (this.pendingAuth) {\n                    clearTimeout(this.pendingAuth.timeout);\n                    this.pendingAuth.resolve();\n                    this.pendingAuth = null;\n                }\n                break;\n\n            case 'event':\n                this.handleFirebaseEvent(message);\n                break;\n\n            case 'subscribed':\n                console.log(`Subscribed to ${message.path} with event ${message.event}`);\n                break;\n\n            case 'unsubscribed':\n                console.log(`Unsubscribed listener ${message.listenerId}`);\n                break;\n\n            case 'error':\n                console.error('WebSocket error message:', message.error);\n                if (message.error === 'Invalid credentials' && this.pendingAuth) {\n                    clearTimeout(this.pendingAuth.timeout);\n                    this.pendingAuth.reject(new Error(message.error));\n                    this.pendingAuth = null;\n                }\n                break;\n\n            case 'pong':\n                // Keepalive response\n                break;\n\n            default:\n                console.warn('Unknown message type:', message.type);\n        }\n    }\n\n    handleFirebaseEvent(message) {\n        const { listenerId, event, data, key } = message;\n        const listener = this.listeners.get(listenerId);\n\n        if (listener && listener.callback) {\n            // Create a Firebase-like snapshot object\n            const snapshot = {\n                val: () => data,\n                key: key,\n                exists: () => data !== null && data !== undefined\n            };\n\n            try {\n                listener.callback(snapshot);\n            } catch (error) {\n                console.error(`Error in listener callback for ${listenerId}:`, error);\n            }\n        }\n    }\n\n    /**\n     * Mimics Firebase .on() interface\n     * @param {string} path - The database path to listen to\n     * @param {string} event - The event type (value, child_added, child_changed, child_removed)\n     * @param {function} callback - The callback to invoke when the event occurs\n     * @returns {string} - The listener ID for later removal\n     */\n    on(path, event, callback) {\n        const listenerId = this.generateListenerId();\n\n        // Store listener info\n        this.listeners.set(listenerId, {\n            path,\n            event,\n            callback\n        });\n\n        // Send subscribe message if connected\n        if (this.isConnected() && this.authenticated) {\n            this.sendMessage({\n                type: 'subscribe',\n                path,\n                event,\n                listenerId\n            });\n        } else {\n            // Queue the subscription for when we're connected\n            this.messageQueue.push({\n                type: 'subscribe',\n                path,\n                event,\n                listenerId\n            });\n        }\n\n        return listenerId;\n    }\n\n    /**\n     * Mimics Firebase .off() interface\n     * @param {string} listenerId - The listener ID to remove\n     */\n    off(listenerId) {\n        if (this.listeners.has(listenerId)) {\n            // Send unsubscribe message if connected\n            if (this.isConnected() && this.authenticated) {\n                this.sendMessage({\n                    type: 'unsubscribe',\n                    listenerId\n                });\n            }\n\n            // Remove from local tracking\n            this.listeners.delete(listenerId);\n        }\n    }\n\n    /**\n     * Remove all listeners for a specific path and event\n     */\n    offPath(path, event = null) {\n        const toRemove = [];\n\n        for (const [listenerId, listener] of this.listeners.entries()) {\n            if (listener.path === path && (!event || listener.event === event)) {\n                toRemove.push(listenerId);\n            }\n        }\n\n        toRemove.forEach(listenerId => this.off(listenerId));\n    }\n\n    /**\n     * Remove all listeners\n     */\n    offAll() {\n        const listenerIds = Array.from(this.listeners.keys());\n        listenerIds.forEach(listenerId => this.off(listenerId));\n    }\n\n    sendMessage(message) {\n        if (this.isConnected()) {\n            try {\n                this.ws.send(JSON.stringify(message));\n                return true;\n            } catch (error) {\n                console.error('Error sending WebSocket message:', error);\n                this.messageQueue.push(message);\n                return false;\n            }\n        } else {\n            // Queue message for later\n            this.messageQueue.push(message);\n            return false;\n        }\n    }\n\n    processMessageQueue() {\n        while (this.messageQueue.length > 0 && this.isConnected() && this.authenticated) {\n            const message = this.messageQueue.shift();\n            this.sendMessage(message);\n        }\n    }\n\n    reestablishListeners() {\n        console.log('Re-establishing listeners after reconnection');\n\n        for (const [listenerId, listener] of this.listeners.entries()) {\n            this.sendMessage({\n                type: 'subscribe',\n                path: listener.path,\n                event: listener.event,\n                listenerId\n            });\n        }\n    }\n\n    attemptReconnect() {\n        if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n            console.error('Max reconnection attempts reached');\n            return;\n        }\n\n        this.reconnectAttempts++;\n        const delay = this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1);\n\n        console.log(`Attempting to reconnect in ${delay}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n\n        setTimeout(() => {\n            this.connect().catch(error => {\n                console.error('Reconnection failed:', error);\n            });\n        }, delay);\n    }\n\n    isConnected() {\n        return this.ws && this.ws.readyState === WebSocket.OPEN;\n    }\n\n    disconnect() {\n        if (this.ws) {\n            // Clear all listeners\n            this.offAll();\n\n            // Close WebSocket connection\n            this.ws.close();\n            this.ws = null;\n            this.authenticated = false;\n        }\n    }\n\n    generateListenerId() {\n        return `listener_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    // Utility method to send keepalive\n    ping() {\n        this.sendMessage({ type: 'ping' });\n    }\n\n    // Start keepalive interval\n    startKeepalive(interval = 30000) {\n        this.stopKeepalive();\n        this.keepaliveInterval = setInterval(() => {\n            if (this.isConnected()) {\n                this.ping();\n            }\n        }, interval);\n    }\n\n    stopKeepalive() {\n        if (this.keepaliveInterval) {\n            clearInterval(this.keepaliveInterval);\n            this.keepaliveInterval = null;\n        }\n    }\n}\n\n// Export as default for convenience\nexport default InventoryWebSocket;", "\nimport { InventoryAPI } from './inventory-api.js';\nimport { InventoryWebSocket } from './inventory-websocket.js';\n\n/**\n * InventoryFirebase - Handles all remote storage operations for the inventory\n * Uses WebSocket for real-time updates and REST API for CRUD operations\n */\nexport class InventoryFirebase {\n    constructor(inventory) {\n        this.inventory = inventory;\n        this.api = new InventoryAPI(); // Initialize API client\n        this.ws = null;\n        this.wsListeners = new Map(); // Track WebSocket listeners\n        this.isInitialized = false;\n    }\n\n    /**\n     * Initialize WebSocket connection for real-time updates\n     */\n    async initWebSocket() {\n        if (this.isInitialized) return;\n\n        try {\n            // Get user credentials\n            const userName = SM.scene?.localUser?.name;\n            const secret = window.net?.secret;\n\n            if (!userName || !secret) {\n                console.warn('Missing credentials for WebSocket connection');\n                return;\n            }\n\n            this.ws = new InventoryWebSocket({\n                userName: this.sanitizeFirebasePath(userName),\n                secret: secret,\n                debug: false,\n                onConnect: () => {\n                    log('net', 'WebSocket connected for inventory');\n                    // Re-establish listeners after reconnection\n                    this.reestablishListeners();\n                },\n                onDisconnect: () => {\n                    log('net', 'WebSocket disconnected, attempting reconnection...');\n                },\n                onError: (error) => {\n                    err('net', 'WebSocket error:', error);\n                }\n            });\n\n            await this.ws.connect();\n            this.isInitialized = true;\n            log('net', 'WebSocket initialized successfully');\n        } catch (error) {\n            err('net', 'Failed to initialize WebSocket:', error);\n            showNotification('Real-time updates unavailable - WebSocket connection failed');\n        }\n    }\n\n    /**\n     * Re-establish all listeners after reconnection\n     */\n    reestablishListeners() {\n        // Re-setup listeners for all remote folders\n        Object.entries(this.inventory.folders).forEach(([folderName, folder]) => {\n            if (this.folderLinkable(folder)) {\n                // Clear old listener IDs\n                const existingPath = this.getFolderPath(folderName, folder);\n                if (this.wsListeners.has(existingPath)) {\n                    this.wsListeners.delete(existingPath);\n                }\n                // Re-setup listener\n                this.setupFolderListener(folderName, folder);\n            }\n        });\n    }\n\n    folderIsMine(folder){\n        if(!folder.imported) return true;\n        if(folder.importedFrom){\n            let origin = folder.importedFrom.split('/');\n            return origin[1] === SM.myName()\n        }\n        return false;\n    }\n\n    \n    folderLinkable(folder){\n        if(!folder.remote) return false;\n        if(folder.autoUpdate) return true;\n        if(folder.importedFrom){\n            let origin = folder.importedFrom.split('/');\n            if(origin[1] !== SM.myName()){\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Get the Firebase path for a folder\n     */\n    getFolderPath(folderName, folder) {\n        if (folder.importedFrom !== undefined) {\n            return folder.importedFrom;\n        }\n\n        let userName = SM.scene?.localUser?.name;\n        if (!userName) return null;\n\n        userName = this.sanitizeFirebasePath(userName);\n        let firebasePath = `inventory/${userName}`;\n\n        if (folder.parent) {\n            const sanitizedParent = this.sanitizeFirebasePath(folder.parent);\n            firebasePath += `/${sanitizedParent}`;\n        }\n\n        const sanitizedFolderName = this.sanitizeFirebasePath(folderName);\n        firebasePath += `/${sanitizedFolderName}`;\n\n        return firebasePath;\n    }\n\n    /**\n     * Setup WebSocket listeners for remote folders\n     */\n    async setupFirebaseListeners() {\n        // Clear any existing listeners\n        this.clearFirebaseListeners();\n\n        // Initialize WebSocket if not already done\n        if (!this.ws) {\n            await this.initWebSocket();\n            if (!this.ws) {\n                log('net', 'WebSocket not available, real-time updates disabled');\n                return;\n            }\n        }\n\n        const userName = this.sanitizeFirebasePath(SM.scene?.localUser?.name || 'default');\n\n        // Check all folders for remote status and setup listeners\n        Object.entries(this.inventory.folders).forEach(([folderName, folder]) => {\n            if (this.folderLinkable(folder)) {\n                this.setupFolderListener(folderName, folder);\n            }\n        });\n\n        // Setup GLB loader listener via WebSocket\n        const glbLoaderKey = `glb_loader/${userName}_${window.net?.secret || ''}`;\n        log(\"glb_loader\", \"setting up listener for\", glbLoaderKey);\n\n        if (this.ws && this.ws.isConnected()) {\n            let firstCall = true;\n            const glbListenerId = this.ws.on(glbLoaderKey, 'value', async (snapshot) => {\n                if (firstCall) {\n                    firstCall = false;\n                    return;\n                }\n\n                const value = snapshot.val();\n                if (!value) return;\n\n                const glb_url = value.url;\n                const mesh_name = value.mesh_name;\n                log(\"glb_loader\", \"change\", snapshot.key, glb_url, mesh_name);\n\n                // AddEntity is a global function from the main app\n                if (typeof AddEntity !== 'undefined') {\n                    const entity = await AddEntity(\"Scene\", mesh_name);\n                    await AddComponent(entity.id, \"GLTF\", {\n                        componentProperties: {\n                            url: `${window.ngrokUrl}${glb_url}`,\n                            addColliders: true\n                        }\n                    });\n                    await AddComponent(entity.id, \"ScriptRunner\", {\n                        componentProperties: {\n                            file: \"GLTFGrabbable.js\"\n                        }\n                    });\n                }\n            });\n\n            // Track this special listener\n            this.wsListeners.set(glbLoaderKey, [glbListenerId]);\n        }\n    }\n\n    /**\n     * Setup WebSocket listener for a specific folder\n     */\n    setupFolderListener(folderName, folder) {\n        log(\"net\", \"[SETUP WEBSOCKET LISTENER for folder: \", folderName, \"]\")\n\n        if (!this.ws || !this.ws.isConnected()) {\n            log(\"net\", \"WebSocket not connected, skipping listener setup\");\n            return;\n        }\n\n        try {\n            // Get the Firebase path for this folder\n            const firebasePath = this.getFolderPath(folderName, folder);\n\n            if (!firebasePath) {\n                log(\"net\", \"No user name found, waiting for 100ms\")\n                setTimeout(() => {\n                    this.setupFolderListener(folderName, folder);\n                }, 100);\n                return;\n            }\n\n            // Check if listener already exists\n            if (this.wsListeners.has(firebasePath)) {\n                log(\"net\", \"[WEBSOCKET LISTENER ALREADY SETUP for folder: \", folderName, \"]\")\n                return;\n            }\n\n            // Setup WebSocket listeners\n            const listeners = [];\n\n            // Child added listener\n            const addedListenerId = this.ws.on(firebasePath, 'child_added', (snapshot) => {\n                this.handleFirebaseItemAdded(snapshot, folderName);\n            });\n            listeners.push(addedListenerId);\n\n            // Child removed listener\n            const removedListenerId = this.ws.on(firebasePath, 'child_removed', (snapshot) => {\n                this.handleFirebaseItemRemoved(snapshot, folderName);\n            });\n            listeners.push(removedListenerId);\n\n            // Child changed listener\n            const changedListenerId = this.ws.on(firebasePath, 'child_changed', (snapshot) => {\n                this.handleFirebaseItemChanged(snapshot, folderName);\n            });\n            listeners.push(changedListenerId);\n\n            // Store listener IDs for cleanup\n            this.wsListeners.set(firebasePath, listeners);\n\n            log(\"net\", 'WebSocket listeners setup for folder:', firebasePath);\n        } catch (error) {\n            err(\"net\", 'Failed to setup WebSocket listener:', error);\n        }\n    }\n\n\n    /**\n     * Handle Firebase item added event\n     */\n    handleFirebaseItemAdded(snapshot, folderName) {\n        const key = snapshot.key;\n        const data = snapshot.val();\n        \n        // Skip folder metadata\n        if (key === '_folder') return;\n        \n        // Check if it's a subfolder\n        if (data._folder) {\n            const subfolderName = data._folder.name || key;\n            const fullFolderName = folderName ? `${folderName}/${subfolderName}` : subfolderName;\n            \n            // Check if folder already exists locally\n            if (!this.inventory.folders[fullFolderName]) {\n                const folder = {\n                    ...data._folder,\n                    name: subfolderName,\n                    parent: folderName,\n                    remote: true\n                };\n                \n                // Save to localStorage\n                const storageKey = `inventory_folder_${fullFolderName}`;\n                localStorage.setItem(storageKey, JSON.stringify(folder));\n                this.inventory.folders[fullFolderName] = folder;\n                \n                // Setup listener for the new remote folder\n                this.setupFolderListener(fullFolderName, folder);\n                \n                log(\"net\", 'Remote folder added:', fullFolderName);\n                this.inventory.ui.render();\n            }\n        } else if (data.itemType) {\n            // It's an item\n            const itemName = data.name || key;\n            \n            // Check if item already exists locally\n            if (!this.inventory.items[itemName]) {\n                const item = {\n                    ...data,\n                    folder: folderName\n                };\n                \n                // Save to localStorage\n                const storageKey = `inventory_${itemName}`;\n                localStorage.setItem(storageKey, JSON.stringify(item));\n                this.inventory.items[itemName] = item;\n                \n                log(\"inspector\", 'Remote item added:', itemName);\n                showNotification(`New item \"${itemName}\" added from remote`);\n                this.inventory.ui.render();\n            }\n        }\n    }\n\n    /**\n     * Handle Firebase item removed event\n     */\n    handleFirebaseItemRemoved(snapshot, folderName) {\n        const key = snapshot.key;\n        const data = snapshot.val();\n        \n        // Skip folder metadata\n        if (key === '_folder') return;\n        \n        // Check if it's a subfolder\n        if (data && data._folder) {\n            const subfolderName = data._folder.name || key;\n            const fullFolderName = folderName ? `${folderName}/${subfolderName}` : subfolderName;\n            \n            // Remove folder locally if it exists\n            if (this.inventory.folders[fullFolderName]) {\n                // Remove all items in the folder\n                Object.entries(this.inventory.items).forEach(([itemKey, item]) => {\n                    if (item.folder === fullFolderName) {\n                        const storageKey = `inventory_${itemKey}`;\n                        localStorage.removeItem(storageKey);\n                        delete this.inventory.items[itemKey];\n                    }\n                });\n                \n                // Remove the folder\n                const storageKey = `inventory_folder_${fullFolderName}`;\n                localStorage.removeItem(storageKey);\n                delete this.inventory.folders[fullFolderName];\n                \n                log('inspector', 'Remote folder removed:', fullFolderName);\n                this.inventory.ui.render();\n            }\n        } else if (data && data.itemType) {\n            // It's an item\n            const itemName = data.name || key;\n            \n            // Remove item locally if it exists\n            if (this.inventory.items[itemName]) {\n                const storageKey = `inventory_${itemName}`;\n                localStorage.removeItem(storageKey);\n                delete this.inventory.items[itemName];\n                \n                log('inspector', 'Remote item removed:', itemName);\n                showNotification(`Item \"${itemName}\" removed from remote`);\n                this.inventory.ui.render();\n            }\n        }\n    }\n\n    /**\n     * Handle Firebase item changed event\n     */\n    handleFirebaseItemChanged(snapshot, folderName) {\n        log(\"net\", \"handleFirebaseItemChanged\")\n        const key = snapshot.key;\n        const data = snapshot.val();\n        // Skip folder metadata\n        if (key === '_folder') return;\n        \n        if (data && data.itemType) {\n            const itemName = data.name || key;\n            log(\"net\", `${itemName}`, data)\n\n            // Update item locally if it exists\n            if (this.inventory.items[itemName]) {\n                const item = {\n                    ...data,\n                    folder: folderName\n                };\n                \n                // Save to localStorage\n                const storageKey = `inventory_${itemName}`;\n                localStorage.setItem(storageKey, JSON.stringify(item));\n                this.inventory.items[itemName] = item;\n                \n                log('inspector', 'Remote item updated:', itemName);\n                \n\n\n                if(item.itemType === \"script\" || item.itemType === \"markdown\"){\n\t\t\t\t\t// If a script editor is open for this script, update its text and save\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (window.scriptEditors && window.scriptEditors.size > 0) {\n\t\t\t\t\t\t\tfor (const [key, editor] of window.scriptEditors) {\n\t\t\t\t\t\t\t\tif (editor?.currentScript?.name === itemName) {\n                                    log(\"script\", \"updating script editor\", itemName)\n\t\t\t\t\t\t\t\t\tconst newContent = item.data || data.data || '';\n\t\t\t\t\t\t\t\t\t// Update editor content\n\t\t\t\t\t\t\t\t\tif (editor.codemirror && typeof editor.codemirror.setValue === 'function') {\n\t\t\t\t\t\t\t\t\t\teditor.codemirror.setValue(newContent);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Keep ScriptEditor's model in sync\n\t\t\t\t\t\t\t\t\teditor.currentScript.content = newContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n                       \n\n                        let assetEnt = SM.getEntityByName(itemName.replace(\".\",\"_\"))\n                        if(assetEnt){\n                            let assetComp = assetEnt.getComponent(\"ScriptAsset\");\n                            if(assetComp){\n                                assetComp.Set(\"data\", item.data);\n                                if(assetEnt.id === SM.selectedEntity){\n                                    //inspector.propertiesPanel.updateComponent(assetComp.id, \"data\", item.data); //TODO\n                                    inspector.propertiesPanel.render();\n                                }\n                            }\n                        }\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terr('inspector', 'Failed to sync open script editor with remote update:', e);\n\t\t\t\t\t}\n                }\n\n                // Update preview if this item is selected\n                if (this.inventory.selectedItem === itemName) {\n                    this.inventory.ui.showPreview(itemName);\n                }\n                \n                this.inventory.ui.render();\n            }\n        }\n    }\n\n    /**\n     * Clear all WebSocket listeners\n     */\n    clearFirebaseListeners() {\n        if (!this.ws) return;\n\n        // Clear all WebSocket listeners\n        this.wsListeners.forEach((listenerIds, path) => {\n            listenerIds.forEach(listenerId => {\n                this.ws.off(listenerId);\n            });\n        });\n\n        this.wsListeners.clear();\n        log('net', 'WebSocket listeners cleared');\n    }\n\n    /**\n     * Check if current folder is remote\n     */\n    async checkRemoteStatus() {\n        if (this.inventory.currentFolder) {\n            // Check if current folder has remote attribute set to true\n            const folder = this.inventory.folders[this.inventory.currentFolder];\n            this.inventory.isRemote = folder && folder.remote;\n        } else {\n            // // For root directory, check localStorage flag\n            // const rootRemoteKey = `inventory_root_remote_${this.sanitizeFirebasePath(SM.scene?.localUser?.name || 'default')}`;\n            // this.inventory.isRemote = localStorage.getItem(rootRemoteKey) === 'true';\n        }\n    }\n\n    /**\n     * Copy Firebase reference to clipboard\n     */\n    async copyFirebaseRef() {\n        const firebasePath = this.getCurrentFirebasePath();\n        if (!firebasePath) {\n            showNotification('Unable to get Firebase path');\n            return;\n        }\n        \n        try {\n            await navigator.clipboard.writeText(firebasePath);\n            showNotification('Firebase path copied to clipboard!');\n        } catch (error) {\n            err('net', 'Failed to copy to clipboard:', error);\n            showNotification('Failed to copy path');\n        }\n    }\n\n    /**\n     * Get current Firebase path\n     */\n    getCurrentFirebasePath() {\n        if (!SM.scene?.localUser?.name) return null;\n        \n        const userName = this.sanitizeFirebasePath(SM.scene.localUser.name);\n        const basePath = `inventory/${userName}`;\n        \n        if (this.inventory.currentFolder) {\n            const sanitizedFolder = this.sanitizeFirebasePath(this.inventory.currentFolder); //TODO: Math this path\n            return `${basePath}/${sanitizedFolder}`;\n        }\n        \n        return basePath;\n    }\n\n    /**\n     * Recursively remove undefined properties from an object\n     */\n    removeUndefined(obj) {\n        if (obj === null || typeof obj !== 'object') {\n            return obj;\n        }\n\n        if (Array.isArray(obj)) {\n            return obj.map(item => this.removeUndefined(item));\n        }\n\n        const cleaned = {};\n        for (const [key, value] of Object.entries(obj)) {\n            if (value !== undefined) {\n                cleaned[key] = this.removeUndefined(value);\n            }\n        }\n        return cleaned;\n    }\n\n    /**\n     * Sync item to Firebase\n     */\n    async syncToFirebase(inventoryItem) { \n        log(\"net\", \"syncToFirebase via API\", inventoryItem)\n        // Check if item is in a remote folder or root is remote\n        const isRemote = this.isItemInRemoteLocation(inventoryItem);\n        if (!isRemote) return;\n\n        try {\n            // Remove undefined properties before syncing\n            const cleanedItem = this.removeUndefined(inventoryItem);\n\n            // Use API to sync the item\n            await this.api.syncItem(inventoryItem.name, cleanedItem);\n            log('net', `Synced item \"${inventoryItem.name}\" to Firebase via API`);\n        } catch (error) {\n            err('net', 'Failed to sync item via API:', error);\n            showNotification(`Failed to sync item: ${error.message}`);\n        }\n    }\n    \n    /**\n     * Sync folder to Firebase (including description)\n     */\n    async syncFolderToFirebase(folderKey, folder) {\n        // Only sync if folder is marked as remote\n        if (!folder.remote) return;\n\n        try {\n            // Create folder metadata object with description and public status\n            const folderMetadata = {\n                author: SM.myName(),\n                name: folder.name,\n                created: folder.created || Date.now(),\n                remote: true,\n                parent: folder.parent || null,\n                _description: folder._description || '',\n                public: folder.public || false\n            };\n\n            // Use API to sync the folder\n            await this.api.syncFolder(folderKey, folderMetadata);\n            log('net', `Synced folder \"${folderKey}\" to Firebase via API`);\n        } catch (error) {\n            err('net', 'Failed to sync folder via API:', error);\n            showNotification(`Failed to sync folder: ${error.message}`);\n        }\n    }\n\n    /**\n     * Check if item is in remote location\n     */\n    isItemInRemoteLocation(item) {\n        let folder = (item && item.folder)? item.folder : this.inventory.currentFolder;\n        if (folder) {\n            const folderData = this.inventory.folders[folder];\n            return folderData && folderData.remote;\n        } \n        return false;\n    }\n\n    /**\n     * Force sync all items in current folder to Firebase\n     */\n    async forceSyncAll() {\n        if (!SM.scene?.localUser?.name) {\n            showNotification('User not logged in. Cannot sync to Firebase.');\n            return;\n        }\n\n        // Check if current folder is remote\n        if (!this.isItemInRemoteLocation()) {\n            showNotification('Current folder is not remote. Cannot sync.');\n            return;\n        }\n\n        try {\n            // Get all items in the current folder\n            const itemsInFolder = Object.entries(this.inventory.items).filter(([key, item]) =>\n                item.folder === this.inventory.currentFolder\n            );\n\n            if (itemsInFolder.length === 0) {\n                showNotification('No items to sync in current folder');\n                return;\n            }\n\n            showNotification(`Syncing ${itemsInFolder.length} item(s) to Firebase...`);\n\n            let syncedCount = 0;\n            for (const [itemName, item] of itemsInFolder) {\n                await this.syncToFirebase(item);\n                syncedCount++;\n            }\n\n            showNotification(`Successfully synced ${syncedCount} item(s) to Firebase!`);\n        } catch (error) {\n            err('net', 'Failed to force sync items:', error);\n            showNotification('Failed to sync items to Firebase');\n        }\n    }\n\n    /**\n     * Make current location remote - upload to Firebase\n     */\n    async makeRemote() {\n        if (!SM.scene?.localUser?.name) {\n            showNotification('User not logged in. Cannot upload to Firebase.');\n            return;\n        }\n\n        const userName = this.sanitizeFirebasePath(SM.scene.localUser.name);\n        const contents = this.inventory.getCurrentViewContents();\n        let totalSize = 0;\n\n        // Calculate total size\n        Object.keys(contents.items).forEach(itemName => {\n            totalSize += this.inventory.calculateSize(itemName, false);\n        });\n\n        Object.keys(contents.folders).forEach(folderName => {\n            totalSize += this.inventory.calculateSize(folderName, true);\n        });\n\n\n         // Check if total size exceeds 1MB\n         const oneMB = 1024 * 1024;\n         if (totalSize > oneMB) {\n             showNotification(`Total size (${(totalSize / oneMB).toFixed(2)}MB) exceeds 1MB limit.`);\n             return;\n         }\n\n        // Show confirmation modal\n        const itemCount = Object.keys(contents.items).length;\n        const folderCount = Object.keys(contents.folders).length;\n        const sizeInMB = (totalSize / oneMB).toFixed(2);\n\n        this.inventory.ui.showConfirmModal(\n            `Upload ${itemCount} items and ${folderCount} folders (${sizeInMB}MB) to Firebase?`,\n            async () => {\n                await this.uploadToFirebase(contents, userName);\n            },\n            'Upload to Firebase'\n        );\n    }\n\n    /**\n     * Upload contents to Firebase\n     */\n    async uploadToFirebase(contents, userName) {\n        try {\n            // Prepare bulk upload data with all items and folders\n            const bulkData = {\n                items: {},\n                folders: {}\n            };\n\n            // Process items\n            for (const [itemName, item] of Object.entries(contents.items)) {\n                const sanitizedItemName = this.sanitizeFirebasePath(itemName);\n                // Ensure folder property is set correctly\n                if (this.inventory.currentFolder) {\n                    item.folder = this.inventory.currentFolder;\n                }\n                bulkData.items[sanitizedItemName] = item;\n            }\n\n            // Process folders and their contents recursively\n            for (const [folderName, folder] of Object.entries(contents.folders)) {\n                const sanitizedFolderName = this.sanitizeFirebasePath(folderName);\n                // Set parent folder if we're in a folder\n                if (this.inventory.currentFolder) {\n                    folder.parent = this.inventory.currentFolder;\n                }\n                bulkData.folders[sanitizedFolderName] = folder;\n\n                // Get and include folder contents recursively\n                const folderContents = this.inventory.getFolderContentsRecursive(folderName);\n\n                // Include items in folder\n                for (const [itemName, item] of Object.entries(folderContents.items)) {\n                    const sanitizedItemName = this.sanitizeFirebasePath(itemName);\n                    bulkData.items[sanitizedItemName] = item;\n                }\n\n                // Include subfolders\n                for (const [subfolderName, subfolder] of Object.entries(folderContents.folders)) {\n                    const sanitizedSubfolderName = this.sanitizeFirebasePath(subfolderName);\n                    bulkData.folders[sanitizedSubfolderName] = subfolder;\n                }\n            }\n\n            // Use API for bulk upload\n            const result = await this.api.bulkUpload(bulkData);\n            log('net', `Bulk uploaded ${result.count} items/folders via API`);\n\n            // Mark uploaded folders as remote\n            for (const folderName of Object.keys(contents.folders)) {\n                if (this.inventory.folders[folderName]) {\n                    this.inventory.folders[folderName].remote = true;\n                    // Update localStorage\n                    const storageKey = `inventory_folder_${folderName}`;\n                    localStorage.setItem(storageKey, JSON.stringify(this.inventory.folders[folderName]));\n                }\n            }\n\n            // Mark current folder as remote if we're in a folder\n            if (this.inventory.currentFolder && this.inventory.folders[this.inventory.currentFolder]) {\n                this.inventory.folders[this.inventory.currentFolder].remote = true;\n                const storageKey = `inventory_folder_${this.inventory.currentFolder}`;\n                localStorage.setItem(storageKey, JSON.stringify(this.inventory.folders[this.inventory.currentFolder]));\n            }\n\n            showNotification('Successfully uploaded to Firebase!');\n            this.inventory.ui.render();\n            this.setupFirebaseListeners();\n\n        } catch (error) {\n            err('net', 'Upload failed:', error);\n            showNotification(`Upload failed: ${error.message}`);\n        }\n    }\n\n    /**\n     * Import public folders from a username\n     */\n    async importPublicUserFolders(username) {\n        // Check if a folder with this username already exists at root level\n        if (this.inventory.folders[username]) {\n            showNotification(`A folder named \"${username}\" already exists`);\n            return false;\n        }\n\n        try {\n            // Use API to get public folders for the user\n            const result = await this.api.importPublicUserFolders(username);\n\n            if (!result.userData) {\n                return false; // User doesn't exist\n            }\n\n            // Create the public user folder\n            const now = Date.now();\n            const userFolder = {\n                name: username,\n                created: now,\n                last_used: now,\n                path: username,\n                parent: null,\n                itemType: \"folder\",\n                icon: \"\uD83D\uDC64\",\n                remote: true,\n                importedFrom: result.userPath,\n                author: username,\n                public: true,\n                userFolder: true\n            };\n\n            // Save user folder to localStorage\n            const folderStorageKey = `inventory_folder_${username}`;\n            localStorage.setItem(folderStorageKey, JSON.stringify(userFolder));\n            this.inventory.folders[username] = userFolder;\n\n            // Process public folders\n            let folderRefsCreated = 0;\n\n            for (const [folderKey, folderInfo] of Object.entries(result.publicFolders)) {\n                // Create a folderRef item for this public folder\n                const folderRefKey = `${username}/${folderKey}`;\n                const folderRef = {\n                    itemType: \"folderRef\",\n                    author: username,\n                    public: true,\n                    name: folderKey,\n                    folder: username, // Parent folder is the user folder\n                    path: folderRefKey,\n                    importedFrom: folderInfo.path,\n                    created: now,\n                    last_used: now,\n                    icon: \"\uD83D\uDCC1\",\n                    _description: folderInfo.metadata?._description || ''\n                };\n\n                // Save folderRef to localStorage\n                const itemStorageKey = `inventory_${folderRefKey}`;\n                localStorage.setItem(itemStorageKey, JSON.stringify(folderRef));\n                this.inventory.items[folderRefKey] = folderRef;\n                folderRefsCreated++;\n            }\n\n            // Update UI\n            this.inventory.ui.render();\n\n            if (folderRefsCreated > 0) {\n                showNotification(`Created folder for user \"${username}\" with ${folderRefsCreated} public folder${folderRefsCreated > 1 ? 's' : ''}`);\n            } else {\n                showNotification(`Created folder for user \"${username}\" (no public folders found)`);\n            }\n\n            return true;\n\n        } catch (error) {\n            console.error('Error importing public user folders:', error);\n            showNotification(`Error: ${error.message}`);\n            return false;\n        }\n    }\n    \n    /**\n     * Import from Firebase reference\n     */\n    async importFromFirebase(firebaseRef, parentFolder, minUpdateTime) {\n        let subjectName = firebaseRef.split('/').pop();\n        let path = subjectName;\n\n        // Check if parentFolder is explicitly provided and valid (not undefined, null, or empty string)\n        if(parentFolder !== undefined && parentFolder !== \"\" && parentFolder !== null){\n            path = `${parentFolder}/${subjectName}`;\n        } else if (this.inventory.currentFolder) {\n            // If no parent folder provided but we're in a folder, use current folder\n            parentFolder = this.inventory.currentFolder;\n            path = `${parentFolder}/${subjectName}`;\n        } else {\n            // Import to root\n            parentFolder = null;\n        }\n\n        try {\n            // Check if folder already exists and was imported recently\n            if (minUpdateTime && this.inventory.folders[path]) {\n                const existingFolder = this.inventory.folders[path];\n                // Check if the folder has a lastImportTime and if it's after minUpdateTime\n                if (existingFolder.lastImportTime && existingFolder.lastImportTime > minUpdateTime) {\n                    log(\"net\", `Skipping import of ${path} - already imported after ${new Date(minUpdateTime).toISOString()}`);\n                    return false;\n                }\n            }\n\n            // Use API to get data from Firebase reference\n            const result = await this.api.importFromFirebase(firebaseRef, parentFolder, minUpdateTime);\n            const data = result.data;\n            if(!data) return false;\n            let importedCount = 0;\n\n            // Extract the folder name from the Firebase path\n\n\n            // Check if we're importing a single folder with _folder metadata\n            const isSingleFolder = data._folder && typeof data._folder === 'object';\n\n            // Determine if this looks like a folder (has items with itemType or nested folders)\n            const hasInventoryContent = Object.entries(data).some(([key, value]) =>\n                key !== '_folder' && (value.itemType || value._folder)\n            );\n\n            if (isSingleFolder || hasInventoryContent) {\n                // If folder already exists, clear its contents first\n                if (this.inventory.folders[path]) {\n                    // Remove all items in this folder and its subfolders\n                    Object.entries(this.inventory.items).forEach(([itemKey, item]) => {\n                        if (item.folder === path ||\n                            (item.folder && item.folder.startsWith(path + '/'))) {\n                            const storageKey = `inventory_${itemKey}`;\n                            localStorage.removeItem(storageKey);\n                            delete this.inventory.items[itemKey];\n                        }\n                    });\n\n                    // Remove all subfolders\n                    Object.entries(this.inventory.folders).forEach(([folderKey, folder]) => {\n                        if (folder.parent === path ||\n                            (folder.parent && folder.parent.startsWith(path + '/'))) {\n                            const storageKey = `inventory_folder_${folderKey}`;\n                            localStorage.removeItem(storageKey);\n                            delete this.inventory.folders[folderKey];\n                        }\n                    });\n                }\n\n                const now = Date.now();\n                // Create or update the container folder\n                const containerFolder = {\n                    name: subjectName,\n                    created: this.inventory.folders[path]?.created || now,\n                    last_used: now,\n                    lastImportTime: now,  // Track when this folder was last imported\n                    path: path,\n                    parent: parentFolder,\n                    itemType: \"folder\",\n                    icon:\"\uD83D\uDCC2\",\n                    remote: true,\n                    imported: true,\n                    importedFrom: firebaseRef\n                };\n\n                // Save container folder to localStorage\n                const folderStorageKey = `inventory_folder_${path}`;\n                localStorage.setItem(folderStorageKey, JSON.stringify(containerFolder));\n                this.inventory.folders[path] = containerFolder;\n                importedCount++;\n\n                // Now import all contents into this folder\n                await this.importFolderContents(data, path, firebaseRef);\n\n                // Count imported items\n                const itemsInFolder = Object.values(this.inventory.items).filter(item =>\n                    item.folder === path ||\n                    (item.folder && item.folder.startsWith(path + '/'))\n                ).length;\n\n                const foldersInFolder = Object.values(this.inventory.folders).filter(folder =>\n                    folder.parent === path ||\n                    (folder.parent && folder.parent.startsWith(path + '/'))\n                ).length;\n\n                importedCount += itemsInFolder + foldersInFolder;\n                \n            } else {\n                // Direct items import (backward compatibility)\n                for (const [key, value] of Object.entries(data)) {\n                    if (key === '_folder') continue;\n\n                    if (value.itemType) {\n                        const itemName = value.name || key;\n                        let finalItemName = itemName;\n                        let counter = 1;\n                        while (this.inventory.items[finalItemName]) {\n                            finalItemName = `${itemName}_imported_${counter}`;\n                            counter++;\n                        }\n\n                        const now = Date.now();\n                        const item = {\n                            ...value,\n                            folder: parentFolder,\n                            imported: true,\n                            remote: true,\n                            importedFrom: firebaseRef,\n                            importedAt: now,\n                            lastImportTime: now\n                        };\n\n                        const storageKey = `inventory_${finalItemName}`;\n                        localStorage.setItem(storageKey, JSON.stringify(item));\n                        this.inventory.items[finalItemName] = item;\n                        importedCount++;\n                    }\n                }\n            }\n            \n            if (importedCount > 0) {\n                // Reload and re-render\n                this.inventory.reload();\n                showNotification(`Successfully imported ${importedCount} item(s)`);\n                \n                // Setup Firebase listeners for imported remote folders\n                this.setupFirebaseListeners();\n                \n                return true;\n            } else {\n                showNotification('No new items to import');\n                return false;\n            }\n            \n        } catch (error) {\n            console.error('Firebase import error:', error);\n            showNotification(`Import failed: ${error.message}`);\n            return false;\n        }\n    }\n\n    /**\n     * Import folder contents recursively\n     */\n    async importFolderContents(data, parentFolderName, firebaseRef) {\n        for (const [key, value] of Object.entries(data)) {\n            // Skip the _folder metadata\n            if (key === '_folder') continue;\n            \n            // Check if it's a subfolder\n            if (value._folder) {\n                const folderData = value._folder;\n                const folderName = folderData.name || key;\n                \n                // Create full folder path\n                const fullFolderName = `${parentFolderName}/${folderName}`;\n                \n                // Check if folder already exists\n                if (!this.inventory.folders[fullFolderName]) {\n                    const folder = {\n                        ...folderData,\n                        name: folderName,\n                        parent: parentFolderName,\n                        remote: true,\n                        imported: true,\n                        importedFrom: firebaseRef\n                    };\n                    \n                    const storageKey = `inventory_folder_${fullFolderName}`;\n                    localStorage.setItem(storageKey, JSON.stringify(folder));\n                    this.inventory.folders[fullFolderName] = folder;\n                    \n                    // Recursively import subfolder contents\n                    await this.importFolderContents(value, fullFolderName, firebaseRef);\n                }\n            } else if (value.itemType) {\n                // It's an item\n                const itemName = value.name || key;\n                let finalItemName = itemName;\n                let counter = 1;\n                \n                // Check for conflicts in the target folder\n                while (this.inventory.items[finalItemName] && this.inventory.items[finalItemName].folder === parentFolderName) {\n                    finalItemName = `${itemName}_imported_${counter}`;\n                    counter++;\n                }\n                \n                const item = {\n                    ...value,\n                    name: finalItemName,\n                    folder: parentFolderName,\n                    imported: true,\n                    remote: true,\n                    importedFrom: firebaseRef,\n                    importedAt: Date.now()\n                };\n                \n                const storageKey = `inventory_${finalItemName}`;\n                localStorage.setItem(storageKey, JSON.stringify(item));\n                this.inventory.items[finalItemName] = item;\n            }\n        }\n    }\n\n    /**\n     * Upload image to Firebase storage\n     */\n    async uploadImageToFirebase(file) {\n        try {\n            // Show upload notification\n            showNotification('Uploading image...');\n\n            // Prepare metadata for upload\n            const metadata = {\n                name: file.name,\n                folder: this.inventory.currentFolder || null,\n                author: SM.scene?.localUser?.name || 'Unknown',\n                size: file.size,\n                type: file.type\n            };\n\n            // Use API to upload image\n            const result = await this.api.uploadImage(file, metadata);\n\n            // Create image item from API response\n            const now = Date.now();\n            const imageItem = {\n                author: metadata.author,\n                name: file.name,\n                created: now,\n                last_used: now,\n                itemType: 'image',\n                icon: \"\uD83D\uDDBC\uFE0F\",\n                description: '',\n                data: {\n                    url: result.url,\n                    storagePath: result.path,\n                    size: file.size,\n                    type: file.type,\n                    width: 0,  // Will be updated when image loads\n                    height: 0\n                }\n            };\n\n            // Load image to get dimensions\n            const img = new Image();\n            img.onload = () => {\n                imageItem.data.width = img.width;\n                imageItem.data.height = img.height;\n\n                // Save to localStorage\n                this.inventory.saveImageItem(file.name, imageItem);\n            };\n            img.onerror = () => {\n                // Save anyway even if dimensions couldn't be loaded\n                this.inventory.saveImageItem(file.name, imageItem);\n            };\n            img.src = result.url;\n\n            log('net', `Uploaded image \"${file.name}\" via API`);\n\n        } catch (error) {\n            err('net', 'Image upload failed:', error);\n            showNotification(`Image upload failed: ${error.message}`);\n        }\n    }\n\n    /**\n     * Sanitize string for Firebase path\n     */\n    sanitizeFirebasePath(str) {\n        if (!str) return '';\n        let clean = (str)=>{\n            return str\n            .trim()\n            .replace(/[\\.\\$#\\[\\]\\/]/g, '_')\n            .replace(/\\s+/g, '_') // Replace spaces with underscores\n            .replace(/_{2,}/g, '_') // Replace multiple underscores with single\n            .replace(/^_|_$/g, ''); // Remove leading/trailing underscores\n        }\n        return str.split('/').map(clean).join('/');\n    }\n\n    /**\n     * Check if string is valid Firebase path\n     */\n    isValidFirebasePath(str) {\n        // Check if string contains any invalid characters\n        const invalidChars = /[\\.\\$#\\[\\]\\/]/;\n        return str && str.trim().length > 0 && !invalidChars.test(str);\n    }\n}", "export const emojiCategories = {\n  \"Objects\": [\n    \"\u231A\",\n    \"\u231B\",\n    \"\u23F0\",\n    \"\u23F1\uFE0F\",\n    \"\u23F2\uFE0F\",\n    \"\u23F3\",\n    \"\u26B0\uFE0F\",\n    \"\u26B1\uFE0F\",\n    \"\u2702\uFE0F\",\n    \"\u270F\uFE0F\",\n    \"\u2712\uFE0F\",\n    \"\uD83C\uDFF7\uFE0F\",\n    \"\uD83D\uDCB0\",\n    \"\uD83D\uDCB3\",\n    \"\uD83D\uDCB4\",\n    \"\uD83D\uDCB5\",\n    \"\uD83D\uDCB6\",\n    \"\uD83D\uDCB7\",\n    \"\uD83D\uDCB8\",\n    \"\uD83D\uDCB9\",\n    \"\uD83D\uDCBC\",\n    \"\uD83D\uDCC1\",\n    \"\uD83D\uDCC2\",\n    \"\uD83D\uDCC3\",\n    \"\uD83D\uDCC4\",\n    \"\uD83D\uDCC5\",\n    \"\uD83D\uDCC6\",\n    \"\uD83D\uDCC7\",\n    \"\uD83D\uDCC8\",\n    \"\uD83D\uDCC9\",\n    \"\uD83D\uDCCA\",\n    \"\uD83D\uDCCB\",\n    \"\uD83D\uDCCC\",\n    \"\uD83D\uDCCD\",\n    \"\uD83D\uDCCE\",\n    \"\uD83D\uDCCF\",\n    \"\uD83D\uDCD0\",\n    \"\uD83D\uDCD1\",\n    \"\uD83D\uDCD2\",\n    \"\uD83D\uDCD3\",\n    \"\uD83D\uDCD4\",\n    \"\uD83D\uDCD5\",\n    \"\uD83D\uDCD6\",\n    \"\uD83D\uDCD7\",\n    \"\uD83D\uDCD8\",\n    \"\uD83D\uDCD9\",\n    \"\uD83D\uDCDA\",\n    \"\uD83D\uDCDC\",\n    \"\uD83D\uDCDD\",\n    \"\uD83D\uDCF0\",\n    \"\uD83D\uDD16\",\n    \"\uD83D\uDD50\",\n    \"\uD83D\uDD51\",\n    \"\uD83D\uDD52\",\n    \"\uD83D\uDD53\",\n    \"\uD83D\uDD54\",\n    \"\uD83D\uDD55\",\n    \"\uD83D\uDD56\",\n    \"\uD83D\uDD57\",\n    \"\uD83D\uDD58\",\n    \"\uD83D\uDD59\",\n    \"\uD83D\uDD5A\",\n    \"\uD83D\uDD5B\",\n    \"\uD83D\uDD5C\",\n    \"\uD83D\uDD5D\",\n    \"\uD83D\uDD5E\",\n    \"\uD83D\uDD5F\",\n    \"\uD83D\uDD60\",\n    \"\uD83D\uDD61\",\n    \"\uD83D\uDD62\",\n    \"\uD83D\uDD63\",\n    \"\uD83D\uDD64\",\n    \"\uD83D\uDD65\",\n    \"\uD83D\uDD66\",\n    \"\uD83D\uDD67\",\n    \"\uD83D\uDD70\uFE0F\",\n    \"\uD83D\uDD87\uFE0F\",\n    \"\uD83D\uDD8A\uFE0F\",\n    \"\uD83D\uDD8B\uFE0F\",\n    \"\uD83D\uDD8C\uFE0F\",\n    \"\uD83D\uDD8D\uFE0F\",\n    \"\uD83D\uDDC2\uFE0F\",\n    \"\uD83D\uDDC3\uFE0F\",\n    \"\uD83D\uDDC4\uFE0F\",\n    \"\uD83D\uDDD1\uFE0F\",\n    \"\uD83D\uDDD2\uFE0F\",\n    \"\uD83D\uDDD3\uFE0F\",\n    \"\uD83D\uDDDE\uFE0F\",\n    \"\uD83D\uDDFF\",\n    \"\uD83D\uDEAA\",\n    \"\uD83D\uDEAC\",\n    \"\uD83D\uDEBD\",\n    \"\uD83D\uDEBF\",\n    \"\uD83D\uDEC1\",\n    \"\uD83D\uDECB\uFE0F\",\n    \"\uD83D\uDECE\uFE0F\",\n    \"\uD83D\uDECF\uFE0F\",\n    \"\uD83D\uDED2\",\n    \"\uD83D\uDED7\",\n    \"\uD83E\uDDEF\",\n    \"\uD83E\uDDF3\",\n    \"\uD83E\uDDF4\",\n    \"\uD83E\uDDF7\",\n    \"\uD83E\uDDF9\",\n    \"\uD83E\uDDFA\",\n    \"\uD83E\uDDFB\",\n    \"\uD83E\uDDFC\",\n    \"\uD83E\uDDFD\",\n    \"\uD83E\uDDFE\",\n    \"\uD83E\uDDFF\",\n    \"\uD83E\uDE91\",\n    \"\uD83E\uDE92\",\n    \"\uD83E\uDE99\",\n    \"\uD83E\uDE9E\",\n    \"\uD83E\uDE9F\",\n    \"\uD83E\uDEA0\",\n    \"\uD83E\uDEA3\",\n    \"\uD83E\uDEA4\",\n    \"\uD83E\uDEA5\",\n    \"\uD83E\uDEA6\",\n    \"\uD83E\uDEA7\",\n    \"\uD83E\uDEAA\",\n    \"\uD83E\uDEAC\",\n    \"\uD83E\uDEE7\"\n  ],\n  \"Tech\": [\n    \"\u2328\uFE0F\",\n    \"\u260E\uFE0F\",\n    \"\u2709\uFE0F\",\n    \"\uD83C\uDF9E\uFE0F\",\n    \"\uD83C\uDFA5\",\n    \"\uD83C\uDFAC\",\n    \"\uD83C\uDFEE\",\n    \"\uD83D\uDCA1\",\n    \"\uD83D\uDCBB\",\n    \"\uD83D\uDCBD\",\n    \"\uD83D\uDCBE\",\n    \"\uD83D\uDCBF\",\n    \"\uD83D\uDCC0\",\n    \"\uD83D\uDCDE\",\n    \"\uD83D\uDCDF\",\n    \"\uD83D\uDCE0\",\n    \"\uD83D\uDCE4\",\n    \"\uD83D\uDCE5\",\n    \"\uD83D\uDCE6\",\n    \"\uD83D\uDCE7\",\n    \"\uD83D\uDCE8\",\n    \"\uD83D\uDCE9\",\n    \"\uD83D\uDCEA\",\n    \"\uD83D\uDCEB\",\n    \"\uD83D\uDCEC\",\n    \"\uD83D\uDCED\",\n    \"\uD83D\uDCEE\",\n    \"\uD83D\uDCF1\",\n    \"\uD83D\uDCF2\",\n    \"\uD83D\uDCF7\",\n    \"\uD83D\uDCF8\",\n    \"\uD83D\uDCF9\",\n    \"\uD83D\uDCFA\",\n    \"\uD83D\uDCFC\",\n    \"\uD83D\uDCFD\uFE0F\",\n    \"\uD83D\uDD0B\",\n    \"\uD83D\uDD0C\",\n    \"\uD83D\uDD0D\",\n    \"\uD83D\uDD0E\",\n    \"\uD83D\uDD0F\",\n    \"\uD83D\uDD10\",\n    \"\uD83D\uDD11\",\n    \"\uD83D\uDD12\",\n    \"\uD83D\uDD13\",\n    \"\uD83D\uDD26\",\n    \"\uD83D\uDD6F\uFE0F\",\n    \"\uD83D\uDDA5\uFE0F\",\n    \"\uD83D\uDDA8\uFE0F\",\n    \"\uD83D\uDDB1\uFE0F\",\n    \"\uD83D\uDDB2\uFE0F\",\n    \"\uD83D\uDDDD\uFE0F\",\n    \"\uD83D\uDDF3\uFE0F\",\n    \"\uD83E\uDDEE\",\n    \"\uD83E\uDE94\",\n    \"\uD83E\uDEAB\"\n  ],\n  \"Tools\": [\n    \"\u2692\uFE0F\",\n    \"\u2694\uFE0F\",\n    \"\u2696\uFE0F\",\n    \"\u2697\uFE0F\",\n    \"\u2699\uFE0F\",\n    \"\u26CF\uFE0F\",\n    \"\u26D3\uFE0F\",\n    \"\u26D3\uFE0F\u200D\uD83D\uDCA5\",\n    \"\uD83C\uDFF9\",\n    \"\uD83D\uDC89\",\n    \"\uD83D\uDC8A\",\n    \"\uD83D\uDCA3\",\n    \"\uD83D\uDCE1\",\n    \"\uD83D\uDD17\",\n    \"\uD83D\uDD27\",\n    \"\uD83D\uDD28\",\n    \"\uD83D\uDD29\",\n    \"\uD83D\uDD2C\",\n    \"\uD83D\uDD2D\",\n    \"\uD83D\uDDDC\uFE0F\",\n    \"\uD83D\uDDE1\uFE0F\",\n    \"\uD83D\uDEE0\uFE0F\",\n    \"\uD83D\uDEE1\uFE0F\",\n    \"\uD83E\uDDAF\",\n    \"\uD83E\uDDEA\",\n    \"\uD83E\uDDEB\",\n    \"\uD83E\uDDEC\",\n    \"\uD83E\uDDF0\",\n    \"\uD83E\uDDF2\",\n    \"\uD83E\uDE78\",\n    \"\uD83E\uDE79\",\n    \"\uD83E\uDE7A\",\n    \"\uD83E\uDE7B\",\n    \"\uD83E\uDE7C\",\n    \"\uD83E\uDE83\",\n    \"\uD83E\uDE8F\",\n    \"\uD83E\uDE93\",\n    \"\uD83E\uDE9A\",\n    \"\uD83E\uDE9B\",\n    \"\uD83E\uDE9C\",\n    \"\uD83E\uDE9D\"\n  ],\n  \"Media\": [\n    \"\u23CF\uFE0F\",\n    \"\u23E9\",\n    \"\u23EA\",\n    \"\u23EB\",\n    \"\u23EC\",\n    \"\u23ED\uFE0F\",\n    \"\u23EE\uFE0F\",\n    \"\u23EF\uFE0F\",\n    \"\u23F8\uFE0F\",\n    \"\u23F9\uFE0F\",\n    \"\u23FA\uFE0F\",\n    \"\u25B6\uFE0F\",\n    \"\u25C0\uFE0F\",\n    \"\u26D1\uFE0F\",\n    \"\uD83C\uDF92\",\n    \"\uD83C\uDF93\",\n    \"\uD83C\uDF99\uFE0F\",\n    \"\uD83C\uDF9A\uFE0F\",\n    \"\uD83C\uDF9B\uFE0F\",\n    \"\uD83C\uDFA4\",\n    \"\uD83C\uDFA6\",\n    \"\uD83C\uDFA7\",\n    \"\uD83C\uDFA8\",\n    \"\uD83C\uDFA9\",\n    \"\uD83C\uDFAD\",\n    \"\uD83C\uDFB5\",\n    \"\uD83C\uDFB6\",\n    \"\uD83C\uDFB7\",\n    \"\uD83C\uDFB8\",\n    \"\uD83C\uDFB9\",\n    \"\uD83C\uDFBA\",\n    \"\uD83C\uDFBB\",\n    \"\uD83C\uDFBC\",\n    \"\uD83D\uDC51\",\n    \"\uD83D\uDC52\",\n    \"\uD83D\uDC53\",\n    \"\uD83D\uDC54\",\n    \"\uD83D\uDC55\",\n    \"\uD83D\uDC56\",\n    \"\uD83D\uDC57\",\n    \"\uD83D\uDC58\",\n    \"\uD83D\uDC59\",\n    \"\uD83D\uDC5A\",\n    \"\uD83D\uDC5B\",\n    \"\uD83D\uDC5C\",\n    \"\uD83D\uDC5D\",\n    \"\uD83D\uDC5E\",\n    \"\uD83D\uDC5F\",\n    \"\uD83D\uDC60\",\n    \"\uD83D\uDC61\",\n    \"\uD83D\uDC62\",\n    \"\uD83D\uDC84\",\n    \"\uD83D\uDC8D\",\n    \"\uD83D\uDC8E\",\n    \"\uD83D\uDCE2\",\n    \"\uD83D\uDCE3\",\n    \"\uD83D\uDCEF\",\n    \"\uD83D\uDCF3\",\n    \"\uD83D\uDCF4\",\n    \"\uD83D\uDCF6\",\n    \"\uD83D\uDCFB\",\n    \"\uD83D\uDCFF\",\n    \"\uD83D\uDD00\",\n    \"\uD83D\uDD01\",\n    \"\uD83D\uDD02\",\n    \"\uD83D\uDD05\",\n    \"\uD83D\uDD06\",\n    \"\uD83D\uDD07\",\n    \"\uD83D\uDD08\",\n    \"\uD83D\uDD09\",\n    \"\uD83D\uDD0A\",\n    \"\uD83D\uDD14\",\n    \"\uD83D\uDD15\",\n    \"\uD83D\uDD3C\",\n    \"\uD83D\uDD3D\",\n    \"\uD83D\uDD76\uFE0F\",\n    \"\uD83D\uDDBC\uFE0F\",\n    \"\uD83D\uDECD\uFE0F\",\n    \"\uD83D\uDEDC\",\n    \"\uD83E\uDD41\",\n    \"\uD83E\uDD7B\",\n    \"\uD83E\uDD7C\",\n    \"\uD83E\uDD7D\",\n    \"\uD83E\uDD7E\",\n    \"\uD83E\uDD7F\",\n    \"\uD83E\uDDBA\",\n    \"\uD83E\uDDE2\",\n    \"\uD83E\uDDE3\",\n    \"\uD83E\uDDE4\",\n    \"\uD83E\uDDE5\",\n    \"\uD83E\uDDE6\",\n    \"\uD83E\uDDF5\",\n    \"\uD83E\uDDF6\",\n    \"\uD83E\uDE70\",\n    \"\uD83E\uDE71\",\n    \"\uD83E\uDE72\",\n    \"\uD83E\uDE73\",\n    \"\uD83E\uDE74\",\n    \"\uD83E\uDE87\",\n    \"\uD83E\uDE88\",\n    \"\uD83E\uDE89\",\n    \"\uD83E\uDE95\",\n    \"\uD83E\uDE96\",\n    \"\uD83E\uDE97\",\n    \"\uD83E\uDE98\",\n    \"\uD83E\uDEA1\",\n    \"\uD83E\uDEA2\",\n    \"\uD83E\uDEAD\",\n    \"\uD83E\uDEAE\"\n  ],\n  \"Nature\": [\n    \"\u2600\uFE0F\",\n    \"\u2601\uFE0F\",\n    \"\u2602\uFE0F\",\n    \"\u2603\uFE0F\",\n    \"\u2604\uFE0F\",\n    \"\u2614\",\n    \"\u2618\uFE0F\",\n    \"\u26A1\",\n    \"\u26C4\",\n    \"\u26C5\",\n    \"\u26C8\uFE0F\",\n    \"\u26F1\uFE0F\",\n    \"\u2744\uFE0F\",\n    \"\u2B50\",\n    \"\uD83C\uDF00\",\n    \"\uD83C\uDF02\",\n    \"\uD83C\uDF08\",\n    \"\uD83C\uDF0A\",\n    \"\uD83C\uDF0C\",\n    \"\uD83C\uDF11\",\n    \"\uD83C\uDF12\",\n    \"\uD83C\uDF13\",\n    \"\uD83C\uDF14\",\n    \"\uD83C\uDF15\",\n    \"\uD83C\uDF16\",\n    \"\uD83C\uDF17\",\n    \"\uD83C\uDF18\",\n    \"\uD83C\uDF19\",\n    \"\uD83C\uDF1A\",\n    \"\uD83C\uDF1B\",\n    \"\uD83C\uDF1C\",\n    \"\uD83C\uDF1D\",\n    \"\uD83C\uDF1E\",\n    \"\uD83C\uDF1F\",\n    \"\uD83C\uDF20\",\n    \"\uD83C\uDF21\uFE0F\",\n    \"\uD83C\uDF24\uFE0F\",\n    \"\uD83C\uDF25\uFE0F\",\n    \"\uD83C\uDF26\uFE0F\",\n    \"\uD83C\uDF27\uFE0F\",\n    \"\uD83C\uDF28\uFE0F\",\n    \"\uD83C\uDF29\uFE0F\",\n    \"\uD83C\uDF2A\uFE0F\",\n    \"\uD83C\uDF2B\uFE0F\",\n    \"\uD83C\uDF2C\uFE0F\",\n    \"\uD83C\uDF31\",\n    \"\uD83C\uDF32\",\n    \"\uD83C\uDF33\",\n    \"\uD83C\uDF34\",\n    \"\uD83C\uDF35\",\n    \"\uD83C\uDF37\",\n    \"\uD83C\uDF38\",\n    \"\uD83C\uDF39\",\n    \"\uD83C\uDF3A\",\n    \"\uD83C\uDF3B\",\n    \"\uD83C\uDF3C\",\n    \"\uD83C\uDF3E\",\n    \"\uD83C\uDF3F\",\n    \"\uD83C\uDF40\",\n    \"\uD83C\uDF41\",\n    \"\uD83C\uDF42\",\n    \"\uD83C\uDF43\",\n    \"\uD83C\uDF44\",\n    \"\uD83C\uDFF5\uFE0F\",\n    \"\uD83D\uDC90\",\n    \"\uD83D\uDCA7\",\n    \"\uD83D\uDCAE\",\n    \"\uD83D\uDD25\",\n    \"\uD83E\uDD40\",\n    \"\uD83E\uDE90\",\n    \"\uD83E\uDEB4\",\n    \"\uD83E\uDEB7\",\n    \"\uD83E\uDEB9\",\n    \"\uD83E\uDEBA\",\n    \"\uD83E\uDEBB\",\n    \"\uD83E\uDEBE\"\n  ],\n  \"Symbols\": [\n    \"*\uFE0F\u20E3\",\n    \"0\uFE0F\u20E3\",\n    \"1\uFE0F\u20E3\",\n    \"2\uFE0F\u20E3\",\n    \"3\uFE0F\u20E3\",\n    \"4\uFE0F\u20E3\",\n    \"5\uFE0F\u20E3\",\n    \"6\uFE0F\u20E3\",\n    \"7\uFE0F\u20E3\",\n    \"8\uFE0F\u20E3\",\n    \"9\uFE0F\u20E3\",\n    \"\u00A9\uFE0F\",\n    \"\u00AE\uFE0F\",\n    \"\u203C\uFE0F\",\n    \"\u2049\uFE0F\",\n    \"\u2122\uFE0F\",\n    \"\u2139\uFE0F\",\n    \"\u2194\uFE0F\",\n    \"\u2195\uFE0F\",\n    \"\u2196\uFE0F\",\n    \"\u2197\uFE0F\",\n    \"\u2198\uFE0F\",\n    \"\u2199\uFE0F\",\n    \"\u21A9\uFE0F\",\n    \"\u21AA\uFE0F\",\n    \"\u24C2\uFE0F\",\n    \"\u2611\uFE0F\",\n    \"\u2622\uFE0F\",\n    \"\u2623\uFE0F\",\n    \"\u2626\uFE0F\",\n    \"\u262A\uFE0F\",\n    \"\u262E\uFE0F\",\n    \"\u262F\uFE0F\",\n    \"\u2638\uFE0F\",\n    \"\u2640\uFE0F\",\n    \"\u2642\uFE0F\",\n    \"\u2648\",\n    \"\u2649\",\n    \"\u264A\",\n    \"\u264B\",\n    \"\u264C\",\n    \"\u264D\",\n    \"\u264E\",\n    \"\u264F\",\n    \"\u2650\",\n    \"\u2651\",\n    \"\u2652\",\n    \"\u2653\",\n    \"\u267B\uFE0F\",\n    \"\u267E\uFE0F\",\n    \"\u267F\",\n    \"\u2695\uFE0F\",\n    \"\u269B\uFE0F\",\n    \"\u269C\uFE0F\",\n    \"\u26A0\uFE0F\",\n    \"\u26A7\uFE0F\",\n    \"\u26CE\",\n    \"\u26D4\",\n    \"\u2705\",\n    \"\u2714\uFE0F\",\n    \"\u2716\uFE0F\",\n    \"\u271D\uFE0F\",\n    \"\u2721\uFE0F\",\n    \"\u2733\uFE0F\",\n    \"\u2734\uFE0F\",\n    \"\u2747\uFE0F\",\n    \"\u274C\",\n    \"\u274E\",\n    \"\u2753\",\n    \"\u2754\",\n    \"\u2755\",\n    \"\u2757\",\n    \"\u2763\uFE0F\",\n    \"\u2764\uFE0F\",\n    \"\u2764\uFE0F\u200D\uD83D\uDD25\",\n    \"\u2764\uFE0F\u200D\uD83E\uDE79\",\n    \"\u2795\",\n    \"\u2796\",\n    \"\u2797\",\n    \"\u27A1\uFE0F\",\n    \"\u27B0\",\n    \"\u27BF\",\n    \"\u2934\uFE0F\",\n    \"\u2935\uFE0F\",\n    \"\u2B05\uFE0F\",\n    \"\u2B06\uFE0F\",\n    \"\u2B07\uFE0F\",\n    \"\u2B55\",\n    \"\u3030\uFE0F\",\n    \"\u303D\uFE0F\",\n    \"\u3297\uFE0F\",\n    \"\u3299\uFE0F\",\n    \"\uD83C\uDD70\uFE0F\",\n    \"\uD83C\uDD71\uFE0F\",\n    \"\uD83C\uDD7E\uFE0F\",\n    \"\uD83C\uDD7F\uFE0F\",\n    \"\uD83C\uDD8E\",\n    \"\uD83C\uDD91\",\n    \"\uD83C\uDD92\",\n    \"\uD83C\uDD93\",\n    \"\uD83C\uDD94\",\n    \"\uD83C\uDD95\",\n    \"\uD83C\uDD96\",\n    \"\uD83C\uDD97\",\n    \"\uD83C\uDD98\",\n    \"\uD83C\uDD99\",\n    \"\uD83C\uDD9A\",\n    \"\uD83C\uDE01\",\n    \"\uD83C\uDE02\uFE0F\",\n    \"\uD83C\uDE1A\",\n    \"\uD83C\uDE2F\",\n    \"\uD83C\uDE32\",\n    \"\uD83C\uDE33\",\n    \"\uD83C\uDE34\",\n    \"\uD83C\uDE35\",\n    \"\uD83C\uDE36\",\n    \"\uD83C\uDE37\uFE0F\",\n    \"\uD83C\uDE38\",\n    \"\uD83C\uDE39\",\n    \"\uD83C\uDE3A\",\n    \"\uD83C\uDE50\",\n    \"\uD83C\uDE51\",\n    \"\uD83C\uDFE7\",\n    \"\uD83D\uDC8C\",\n    \"\uD83D\uDC93\",\n    \"\uD83D\uDC94\",\n    \"\uD83D\uDC95\",\n    \"\uD83D\uDC96\",\n    \"\uD83D\uDC97\",\n    \"\uD83D\uDC98\",\n    \"\uD83D\uDC99\",\n    \"\uD83D\uDC9A\",\n    \"\uD83D\uDC9B\",\n    \"\uD83D\uDC9C\",\n    \"\uD83D\uDC9D\",\n    \"\uD83D\uDC9E\",\n    \"\uD83D\uDC9F\",\n    \"\uD83D\uDCB1\",\n    \"\uD83D\uDCB2\",\n    \"\uD83D\uDCDB\",\n    \"\uD83D\uDCF5\",\n    \"\uD83D\uDD03\",\n    \"\uD83D\uDD04\",\n    \"\uD83D\uDD19\",\n    \"\uD83D\uDD1A\",\n    \"\uD83D\uDD1B\",\n    \"\uD83D\uDD1C\",\n    \"\uD83D\uDD1D\",\n    \"\uD83D\uDD1E\",\n    \"\uD83D\uDD1F\",\n    \"\uD83D\uDD20\",\n    \"\uD83D\uDD21\",\n    \"\uD83D\uDD22\",\n    \"\uD83D\uDD23\",\n    \"\uD83D\uDD24\",\n    \"\uD83D\uDD2F\",\n    \"\uD83D\uDD30\",\n    \"\uD83D\uDD31\",\n    \"\uD83D\uDD49\uFE0F\",\n    \"\uD83D\uDD4E\",\n    \"\uD83D\uDDA4\",\n    \"\uD83D\uDEAB\",\n    \"\uD83D\uDEAD\",\n    \"\uD83D\uDEAE\",\n    \"\uD83D\uDEAF\",\n    \"\uD83D\uDEB0\",\n    \"\uD83D\uDEB1\",\n    \"\uD83D\uDEB3\",\n    \"\uD83D\uDEB7\",\n    \"\uD83D\uDEB8\",\n    \"\uD83D\uDEB9\",\n    \"\uD83D\uDEBA\",\n    \"\uD83D\uDEBB\",\n    \"\uD83D\uDEBC\",\n    \"\uD83D\uDEBE\",\n    \"\uD83D\uDEC2\",\n    \"\uD83D\uDEC3\",\n    \"\uD83D\uDEC4\",\n    \"\uD83D\uDEC5\",\n    \"\uD83D\uDED0\",\n    \"\uD83D\uDFF0\",\n    \"\uD83E\uDD0D\",\n    \"\uD83E\uDD0E\",\n    \"\uD83E\uDDE1\",\n    \"\uD83E\uDE75\",\n    \"\uD83E\uDE76\",\n    \"\uD83E\uDE77\",\n    \"\uD83E\uDEAF\",\n    \"\uD83E\uDEDF\"\n  ],\n  \"Shapes\": [\n    \"\u25AA\uFE0F\",\n    \"\u25AB\uFE0F\",\n    \"\u25FB\uFE0F\",\n    \"\u25FC\uFE0F\",\n    \"\u25FD\",\n    \"\u25FE\",\n    \"\u26AA\",\n    \"\u26AB\",\n    \"\u2B1B\",\n    \"\u2B1C\",\n    \"\uD83D\uDCA0\",\n    \"\uD83D\uDD18\",\n    \"\uD83D\uDD32\",\n    \"\uD83D\uDD33\",\n    \"\uD83D\uDD34\",\n    \"\uD83D\uDD35\",\n    \"\uD83D\uDD36\",\n    \"\uD83D\uDD37\",\n    \"\uD83D\uDD38\",\n    \"\uD83D\uDD39\",\n    \"\uD83D\uDD3A\",\n    \"\uD83D\uDD3B\",\n    \"\uD83D\uDFE0\",\n    \"\uD83D\uDFE1\",\n    \"\uD83D\uDFE2\",\n    \"\uD83D\uDFE3\",\n    \"\uD83D\uDFE4\",\n    \"\uD83D\uDFE5\",\n    \"\uD83D\uDFE6\",\n    \"\uD83D\uDFE7\",\n    \"\uD83D\uDFE8\",\n    \"\uD83D\uDFE9\",\n    \"\uD83D\uDFEA\",\n    \"\uD83D\uDFEB\"\n  ],\n  \"People\": [\n    \"\u261D\uFE0F\",\n    \"\u261D\uD83C\uDFFB\",\n    \"\u261D\uD83C\uDFFC\",\n    \"\u261D\uD83C\uDFFD\",\n    \"\u261D\uD83C\uDFFE\",\n    \"\u261D\uD83C\uDFFF\",\n    \"\u2620\uFE0F\",\n    \"\u2639\uFE0F\",\n    \"\u263A\uFE0F\",\n    \"\u26F7\uFE0F\",\n    \"\u26F9\uFE0F\",\n    \"\u26F9\uFE0F\u200D\u2640\uFE0F\",\n    \"\u26F9\uFE0F\u200D\u2642\uFE0F\",\n    \"\u26F9\uD83C\uDFFB\",\n    \"\u26F9\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\u26F9\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\u26F9\uD83C\uDFFC\",\n    \"\u26F9\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\u26F9\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\u26F9\uD83C\uDFFD\",\n    \"\u26F9\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\u26F9\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\u26F9\uD83C\uDFFE\",\n    \"\u26F9\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\u26F9\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\u26F9\uD83C\uDFFF\",\n    \"\u26F9\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\u26F9\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\u270A\",\n    \"\u270A\uD83C\uDFFB\",\n    \"\u270A\uD83C\uDFFC\",\n    \"\u270A\uD83C\uDFFD\",\n    \"\u270A\uD83C\uDFFE\",\n    \"\u270A\uD83C\uDFFF\",\n    \"\u270B\",\n    \"\u270B\uD83C\uDFFB\",\n    \"\u270B\uD83C\uDFFC\",\n    \"\u270B\uD83C\uDFFD\",\n    \"\u270B\uD83C\uDFFE\",\n    \"\u270B\uD83C\uDFFF\",\n    \"\u270C\uFE0F\",\n    \"\u270C\uD83C\uDFFB\",\n    \"\u270C\uD83C\uDFFC\",\n    \"\u270C\uD83C\uDFFD\",\n    \"\u270C\uD83C\uDFFE\",\n    \"\u270C\uD83C\uDFFF\",\n    \"\u270D\uFE0F\",\n    \"\u270D\uD83C\uDFFB\",\n    \"\u270D\uD83C\uDFFC\",\n    \"\u270D\uD83C\uDFFD\",\n    \"\u270D\uD83C\uDFFE\",\n    \"\u270D\uD83C\uDFFF\",\n    \"\uD83C\uDF85\",\n    \"\uD83C\uDF85\uD83C\uDFFB\",\n    \"\uD83C\uDF85\uD83C\uDFFC\",\n    \"\uD83C\uDF85\uD83C\uDFFD\",\n    \"\uD83C\uDF85\uD83C\uDFFE\",\n    \"\uD83C\uDF85\uD83C\uDFFF\",\n    \"\uD83C\uDFC2\",\n    \"\uD83C\uDFC2\uD83C\uDFFB\",\n    \"\uD83C\uDFC2\uD83C\uDFFC\",\n    \"\uD83C\uDFC2\uD83C\uDFFD\",\n    \"\uD83C\uDFC2\uD83C\uDFFE\",\n    \"\uD83C\uDFC2\uD83C\uDFFF\",\n    \"\uD83C\uDFC3\",\n    \"\uD83C\uDFC3\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFB\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFC\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFD\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFE\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC3\uD83C\uDFFF\u200D\u27A1\uFE0F\",\n    \"\uD83C\uDFC4\",\n    \"\uD83C\uDFC4\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFB\",\n    \"\uD83C\uDFC4\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFC\",\n    \"\uD83C\uDFC4\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFD\",\n    \"\uD83C\uDFC4\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFE\",\n    \"\uD83C\uDFC4\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFF\",\n    \"\uD83C\uDFC4\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFC4\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFC7\",\n    \"\uD83C\uDFC7\uD83C\uDFFB\",\n    \"\uD83C\uDFC7\uD83C\uDFFC\",\n    \"\uD83C\uDFC7\uD83C\uDFFD\",\n    \"\uD83C\uDFC7\uD83C\uDFFE\",\n    \"\uD83C\uDFC7\uD83C\uDFFF\",\n    \"\uD83C\uDFCA\",\n    \"\uD83C\uDFCA\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFB\",\n    \"\uD83C\uDFCA\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFC\",\n    \"\uD83C\uDFCA\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFD\",\n    \"\uD83C\uDFCA\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFE\",\n    \"\uD83C\uDFCA\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFF\",\n    \"\uD83C\uDFCA\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCA\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uFE0F\",\n    \"\uD83C\uDFCB\uFE0F\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uFE0F\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFB\",\n    \"\uD83C\uDFCB\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFC\",\n    \"\uD83C\uDFCB\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFD\",\n    \"\uD83C\uDFCB\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFE\",\n    \"\uD83C\uDFCB\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFF\",\n    \"\uD83C\uDFCB\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCB\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uFE0F\",\n    \"\uD83C\uDFCC\uFE0F\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uFE0F\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFB\",\n    \"\uD83C\uDFCC\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFC\",\n    \"\uD83C\uDFCC\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFD\",\n    \"\uD83C\uDFCC\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFE\",\n    \"\uD83C\uDFCC\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFF\",\n    \"\uD83C\uDFCC\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83C\uDFCC\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC40\",\n    \"\uD83D\uDC41\uFE0F\",\n    \"\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8\uFE0F\",\n    \"\uD83D\uDC42\",\n    \"\uD83D\uDC42\uD83C\uDFFB\",\n    \"\uD83D\uDC42\uD83C\uDFFC\",\n    \"\uD83D\uDC42\uD83C\uDFFD\",\n    \"\uD83D\uDC42\uD83C\uDFFE\",\n    \"\uD83D\uDC42\uD83C\uDFFF\",\n    \"\uD83D\uDC43\",\n    \"\uD83D\uDC43\uD83C\uDFFB\",\n    \"\uD83D\uDC43\uD83C\uDFFC\",\n    \"\uD83D\uDC43\uD83C\uDFFD\",\n    \"\uD83D\uDC43\uD83C\uDFFE\",\n    \"\uD83D\uDC43\uD83C\uDFFF\",\n    \"\uD83D\uDC44\",\n    \"\uD83D\uDC45\",\n    \"\uD83D\uDC46\",\n    \"\uD83D\uDC46\uD83C\uDFFB\",\n    \"\uD83D\uDC46\uD83C\uDFFC\",\n    \"\uD83D\uDC46\uD83C\uDFFD\",\n    \"\uD83D\uDC46\uD83C\uDFFE\",\n    \"\uD83D\uDC46\uD83C\uDFFF\",\n    \"\uD83D\uDC47\",\n    \"\uD83D\uDC47\uD83C\uDFFB\",\n    \"\uD83D\uDC47\uD83C\uDFFC\",\n    \"\uD83D\uDC47\uD83C\uDFFD\",\n    \"\uD83D\uDC47\uD83C\uDFFE\",\n    \"\uD83D\uDC47\uD83C\uDFFF\",\n    \"\uD83D\uDC48\",\n    \"\uD83D\uDC48\uD83C\uDFFB\",\n    \"\uD83D\uDC48\uD83C\uDFFC\",\n    \"\uD83D\uDC48\uD83C\uDFFD\",\n    \"\uD83D\uDC48\uD83C\uDFFE\",\n    \"\uD83D\uDC48\uD83C\uDFFF\",\n    \"\uD83D\uDC49\",\n    \"\uD83D\uDC49\uD83C\uDFFB\",\n    \"\uD83D\uDC49\uD83C\uDFFC\",\n    \"\uD83D\uDC49\uD83C\uDFFD\",\n    \"\uD83D\uDC49\uD83C\uDFFE\",\n    \"\uD83D\uDC49\uD83C\uDFFF\",\n    \"\uD83D\uDC4A\",\n    \"\uD83D\uDC4A\uD83C\uDFFB\",\n    \"\uD83D\uDC4A\uD83C\uDFFC\",\n    \"\uD83D\uDC4A\uD83C\uDFFD\",\n    \"\uD83D\uDC4A\uD83C\uDFFE\",\n    \"\uD83D\uDC4A\uD83C\uDFFF\",\n    \"\uD83D\uDC4B\",\n    \"\uD83D\uDC4B\uD83C\uDFFB\",\n    \"\uD83D\uDC4B\uD83C\uDFFC\",\n    \"\uD83D\uDC4B\uD83C\uDFFD\",\n    \"\uD83D\uDC4B\uD83C\uDFFE\",\n    \"\uD83D\uDC4B\uD83C\uDFFF\",\n    \"\uD83D\uDC4C\",\n    \"\uD83D\uDC4C\uD83C\uDFFB\",\n    \"\uD83D\uDC4C\uD83C\uDFFC\",\n    \"\uD83D\uDC4C\uD83C\uDFFD\",\n    \"\uD83D\uDC4C\uD83C\uDFFE\",\n    \"\uD83D\uDC4C\uD83C\uDFFF\",\n    \"\uD83D\uDC4D\",\n    \"\uD83D\uDC4D\uD83C\uDFFB\",\n    \"\uD83D\uDC4D\uD83C\uDFFC\",\n    \"\uD83D\uDC4D\uD83C\uDFFD\",\n    \"\uD83D\uDC4D\uD83C\uDFFE\",\n    \"\uD83D\uDC4D\uD83C\uDFFF\",\n    \"\uD83D\uDC4E\",\n    \"\uD83D\uDC4E\uD83C\uDFFB\",\n    \"\uD83D\uDC4E\uD83C\uDFFC\",\n    \"\uD83D\uDC4E\uD83C\uDFFD\",\n    \"\uD83D\uDC4E\uD83C\uDFFE\",\n    \"\uD83D\uDC4E\uD83C\uDFFF\",\n    \"\uD83D\uDC4F\",\n    \"\uD83D\uDC4F\uD83C\uDFFB\",\n    \"\uD83D\uDC4F\uD83C\uDFFC\",\n    \"\uD83D\uDC4F\uD83C\uDFFD\",\n    \"\uD83D\uDC4F\uD83C\uDFFE\",\n    \"\uD83D\uDC4F\uD83C\uDFFF\",\n    \"\uD83D\uDC50\",\n    \"\uD83D\uDC50\uD83C\uDFFB\",\n    \"\uD83D\uDC50\uD83C\uDFFC\",\n    \"\uD83D\uDC50\uD83C\uDFFD\",\n    \"\uD83D\uDC50\uD83C\uDFFE\",\n    \"\uD83D\uDC50\uD83C\uDFFF\",\n    \"\uD83D\uDC63\",\n    \"\uD83D\uDC64\",\n    \"\uD83D\uDC65\",\n    \"\uD83D\uDC66\",\n    \"\uD83D\uDC66\uD83C\uDFFB\",\n    \"\uD83D\uDC66\uD83C\uDFFC\",\n    \"\uD83D\uDC66\uD83C\uDFFD\",\n    \"\uD83D\uDC66\uD83C\uDFFE\",\n    \"\uD83D\uDC66\uD83C\uDFFF\",\n    \"\uD83D\uDC67\",\n    \"\uD83D\uDC67\uD83C\uDFFB\",\n    \"\uD83D\uDC67\uD83C\uDFFC\",\n    \"\uD83D\uDC67\uD83C\uDFFD\",\n    \"\uD83D\uDC67\uD83C\uDFFE\",\n    \"\uD83D\uDC67\uD83C\uDFFF\",\n    \"\uD83D\uDC68\",\n    \"\uD83D\uDC68\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68\",\n    \"\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\",\n    \"\uD83D\uDC68\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC66\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC67\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC67\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC68\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC68\u200D\uD83D\uDC66\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC68\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC68\u200D\uD83D\uDC67\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC68\u200D\uD83D\uDC67\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC69\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC69\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC68\u200D\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC68\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\",\n    \"\uD83D\uDC69\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC68\",\n    \"\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC69\",\n    \"\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\",\n    \"\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\",\n    \"\uD83D\uDC69\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC66\",\n    \"\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC67\",\n    \"\uD83D\uDC69\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2695\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2696\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2708\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC69\uD83C\uDFFF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDF3E\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDF73\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDF7C\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDF93\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDFA4\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDFA8\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDFEB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83C\uDFED\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDCBB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDCBC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDD27\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDD2C\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDE80\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83D\uDE92\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFB\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC69\uD83C\uDFFE\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDAF\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDB0\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDB1\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDB2\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDB3\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDBC\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDBD\",\n    \"\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDC6A\",\n    \"\uD83D\uDC6B\",\n    \"\uD83D\uDC6B\uD83C\uDFFB\",\n    \"\uD83D\uDC6B\uD83C\uDFFC\",\n    \"\uD83D\uDC6B\uD83C\uDFFD\",\n    \"\uD83D\uDC6B\uD83C\uDFFE\",\n    \"\uD83D\uDC6B\uD83C\uDFFF\",\n    \"\uD83D\uDC6C\",\n    \"\uD83D\uDC6C\uD83C\uDFFB\",\n    \"\uD83D\uDC6C\uD83C\uDFFC\",\n    \"\uD83D\uDC6C\uD83C\uDFFD\",\n    \"\uD83D\uDC6C\uD83C\uDFFE\",\n    \"\uD83D\uDC6C\uD83C\uDFFF\",\n    \"\uD83D\uDC6D\",\n    \"\uD83D\uDC6D\uD83C\uDFFB\",\n    \"\uD83D\uDC6D\uD83C\uDFFC\",\n    \"\uD83D\uDC6D\uD83C\uDFFD\",\n    \"\uD83D\uDC6D\uD83C\uDFFE\",\n    \"\uD83D\uDC6D\uD83C\uDFFF\",\n    \"\uD83D\uDC6E\",\n    \"\uD83D\uDC6E\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFB\",\n    \"\uD83D\uDC6E\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFC\",\n    \"\uD83D\uDC6E\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFD\",\n    \"\uD83D\uDC6E\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFE\",\n    \"\uD83D\uDC6E\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFF\",\n    \"\uD83D\uDC6E\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6E\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC6F\",\n    \"\uD83D\uDC6F\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC6F\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\",\n    \"\uD83D\uDC70\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFB\",\n    \"\uD83D\uDC70\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFC\",\n    \"\uD83D\uDC70\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFD\",\n    \"\uD83D\uDC70\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFE\",\n    \"\uD83D\uDC70\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFF\",\n    \"\uD83D\uDC70\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC70\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\",\n    \"\uD83D\uDC71\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFB\",\n    \"\uD83D\uDC71\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFC\",\n    \"\uD83D\uDC71\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFD\",\n    \"\uD83D\uDC71\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFE\",\n    \"\uD83D\uDC71\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFF\",\n    \"\uD83D\uDC71\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC71\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC72\",\n    \"\uD83D\uDC72\uD83C\uDFFB\",\n    \"\uD83D\uDC72\uD83C\uDFFC\",\n    \"\uD83D\uDC72\uD83C\uDFFD\",\n    \"\uD83D\uDC72\uD83C\uDFFE\",\n    \"\uD83D\uDC72\uD83C\uDFFF\",\n    \"\uD83D\uDC73\",\n    \"\uD83D\uDC73\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFB\",\n    \"\uD83D\uDC73\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFC\",\n    \"\uD83D\uDC73\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFD\",\n    \"\uD83D\uDC73\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFE\",\n    \"\uD83D\uDC73\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFF\",\n    \"\uD83D\uDC73\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC73\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC74\",\n    \"\uD83D\uDC74\uD83C\uDFFB\",\n    \"\uD83D\uDC74\uD83C\uDFFC\",\n    \"\uD83D\uDC74\uD83C\uDFFD\",\n    \"\uD83D\uDC74\uD83C\uDFFE\",\n    \"\uD83D\uDC74\uD83C\uDFFF\",\n    \"\uD83D\uDC75\",\n    \"\uD83D\uDC75\uD83C\uDFFB\",\n    \"\uD83D\uDC75\uD83C\uDFFC\",\n    \"\uD83D\uDC75\uD83C\uDFFD\",\n    \"\uD83D\uDC75\uD83C\uDFFE\",\n    \"\uD83D\uDC75\uD83C\uDFFF\",\n    \"\uD83D\uDC76\",\n    \"\uD83D\uDC76\uD83C\uDFFB\",\n    \"\uD83D\uDC76\uD83C\uDFFC\",\n    \"\uD83D\uDC76\uD83C\uDFFD\",\n    \"\uD83D\uDC76\uD83C\uDFFE\",\n    \"\uD83D\uDC76\uD83C\uDFFF\",\n    \"\uD83D\uDC77\",\n    \"\uD83D\uDC77\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFB\",\n    \"\uD83D\uDC77\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFC\",\n    \"\uD83D\uDC77\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFD\",\n    \"\uD83D\uDC77\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFE\",\n    \"\uD83D\uDC77\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFF\",\n    \"\uD83D\uDC77\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC77\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC78\",\n    \"\uD83D\uDC78\uD83C\uDFFB\",\n    \"\uD83D\uDC78\uD83C\uDFFC\",\n    \"\uD83D\uDC78\uD83C\uDFFD\",\n    \"\uD83D\uDC78\uD83C\uDFFE\",\n    \"\uD83D\uDC78\uD83C\uDFFF\",\n    \"\uD83D\uDC79\",\n    \"\uD83D\uDC7A\",\n    \"\uD83D\uDC7B\",\n    \"\uD83D\uDC7C\",\n    \"\uD83D\uDC7C\uD83C\uDFFB\",\n    \"\uD83D\uDC7C\uD83C\uDFFC\",\n    \"\uD83D\uDC7C\uD83C\uDFFD\",\n    \"\uD83D\uDC7C\uD83C\uDFFE\",\n    \"\uD83D\uDC7C\uD83C\uDFFF\",\n    \"\uD83D\uDC7D\",\n    \"\uD83D\uDC7E\",\n    \"\uD83D\uDC7F\",\n    \"\uD83D\uDC80\",\n    \"\uD83D\uDC81\",\n    \"\uD83D\uDC81\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFB\",\n    \"\uD83D\uDC81\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFC\",\n    \"\uD83D\uDC81\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFD\",\n    \"\uD83D\uDC81\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFE\",\n    \"\uD83D\uDC81\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFF\",\n    \"\uD83D\uDC81\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC81\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\",\n    \"\uD83D\uDC82\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFB\",\n    \"\uD83D\uDC82\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFC\",\n    \"\uD83D\uDC82\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFD\",\n    \"\uD83D\uDC82\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFE\",\n    \"\uD83D\uDC82\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFF\",\n    \"\uD83D\uDC82\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC82\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC83\",\n    \"\uD83D\uDC83\uD83C\uDFFB\",\n    \"\uD83D\uDC83\uD83C\uDFFC\",\n    \"\uD83D\uDC83\uD83C\uDFFD\",\n    \"\uD83D\uDC83\uD83C\uDFFE\",\n    \"\uD83D\uDC83\uD83C\uDFFF\",\n    \"\uD83D\uDC85\",\n    \"\uD83D\uDC85\uD83C\uDFFB\",\n    \"\uD83D\uDC85\uD83C\uDFFC\",\n    \"\uD83D\uDC85\uD83C\uDFFD\",\n    \"\uD83D\uDC85\uD83C\uDFFE\",\n    \"\uD83D\uDC85\uD83C\uDFFF\",\n    \"\uD83D\uDC86\",\n    \"\uD83D\uDC86\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFB\",\n    \"\uD83D\uDC86\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFC\",\n    \"\uD83D\uDC86\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFD\",\n    \"\uD83D\uDC86\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFE\",\n    \"\uD83D\uDC86\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFF\",\n    \"\uD83D\uDC86\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC86\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\",\n    \"\uD83D\uDC87\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFB\",\n    \"\uD83D\uDC87\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFC\",\n    \"\uD83D\uDC87\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFD\",\n    \"\uD83D\uDC87\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFE\",\n    \"\uD83D\uDC87\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFF\",\n    \"\uD83D\uDC87\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDC87\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDC8B\",\n    \"\uD83D\uDC8F\",\n    \"\uD83D\uDC8F\uD83C\uDFFB\",\n    \"\uD83D\uDC8F\uD83C\uDFFC\",\n    \"\uD83D\uDC8F\uD83C\uDFFD\",\n    \"\uD83D\uDC8F\uD83C\uDFFE\",\n    \"\uD83D\uDC8F\uD83C\uDFFF\",\n    \"\uD83D\uDC91\",\n    \"\uD83D\uDC91\uD83C\uDFFB\",\n    \"\uD83D\uDC91\uD83C\uDFFC\",\n    \"\uD83D\uDC91\uD83C\uDFFD\",\n    \"\uD83D\uDC91\uD83C\uDFFE\",\n    \"\uD83D\uDC91\uD83C\uDFFF\",\n    \"\uD83D\uDCA2\",\n    \"\uD83D\uDCA4\",\n    \"\uD83D\uDCA5\",\n    \"\uD83D\uDCA6\",\n    \"\uD83D\uDCA8\",\n    \"\uD83D\uDCA9\",\n    \"\uD83D\uDCAA\",\n    \"\uD83D\uDCAA\uD83C\uDFFB\",\n    \"\uD83D\uDCAA\uD83C\uDFFC\",\n    \"\uD83D\uDCAA\uD83C\uDFFD\",\n    \"\uD83D\uDCAA\uD83C\uDFFE\",\n    \"\uD83D\uDCAA\uD83C\uDFFF\",\n    \"\uD83D\uDCAB\",\n    \"\uD83D\uDCAC\",\n    \"\uD83D\uDCAD\",\n    \"\uD83D\uDCAF\",\n    \"\uD83D\uDD73\uFE0F\",\n    \"\uD83D\uDD74\uFE0F\",\n    \"\uD83D\uDD74\uD83C\uDFFB\",\n    \"\uD83D\uDD74\uD83C\uDFFC\",\n    \"\uD83D\uDD74\uD83C\uDFFD\",\n    \"\uD83D\uDD74\uD83C\uDFFE\",\n    \"\uD83D\uDD74\uD83C\uDFFF\",\n    \"\uD83D\uDD75\uFE0F\",\n    \"\uD83D\uDD75\uFE0F\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uFE0F\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFB\",\n    \"\uD83D\uDD75\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFC\",\n    \"\uD83D\uDD75\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFD\",\n    \"\uD83D\uDD75\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFE\",\n    \"\uD83D\uDD75\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFF\",\n    \"\uD83D\uDD75\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDD75\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDD7A\",\n    \"\uD83D\uDD7A\uD83C\uDFFB\",\n    \"\uD83D\uDD7A\uD83C\uDFFC\",\n    \"\uD83D\uDD7A\uD83C\uDFFD\",\n    \"\uD83D\uDD7A\uD83C\uDFFE\",\n    \"\uD83D\uDD7A\uD83C\uDFFF\",\n    \"\uD83D\uDD90\uFE0F\",\n    \"\uD83D\uDD90\uD83C\uDFFB\",\n    \"\uD83D\uDD90\uD83C\uDFFC\",\n    \"\uD83D\uDD90\uD83C\uDFFD\",\n    \"\uD83D\uDD90\uD83C\uDFFE\",\n    \"\uD83D\uDD90\uD83C\uDFFF\",\n    \"\uD83D\uDD95\",\n    \"\uD83D\uDD95\uD83C\uDFFB\",\n    \"\uD83D\uDD95\uD83C\uDFFC\",\n    \"\uD83D\uDD95\uD83C\uDFFD\",\n    \"\uD83D\uDD95\uD83C\uDFFE\",\n    \"\uD83D\uDD95\uD83C\uDFFF\",\n    \"\uD83D\uDD96\",\n    \"\uD83D\uDD96\uD83C\uDFFB\",\n    \"\uD83D\uDD96\uD83C\uDFFC\",\n    \"\uD83D\uDD96\uD83C\uDFFD\",\n    \"\uD83D\uDD96\uD83C\uDFFE\",\n    \"\uD83D\uDD96\uD83C\uDFFF\",\n    \"\uD83D\uDDE3\uFE0F\",\n    \"\uD83D\uDDE8\uFE0F\",\n    \"\uD83D\uDDEF\uFE0F\",\n    \"\uD83D\uDE00\",\n    \"\uD83D\uDE01\",\n    \"\uD83D\uDE02\",\n    \"\uD83D\uDE03\",\n    \"\uD83D\uDE04\",\n    \"\uD83D\uDE05\",\n    \"\uD83D\uDE06\",\n    \"\uD83D\uDE07\",\n    \"\uD83D\uDE08\",\n    \"\uD83D\uDE09\",\n    \"\uD83D\uDE0A\",\n    \"\uD83D\uDE0B\",\n    \"\uD83D\uDE0C\",\n    \"\uD83D\uDE0D\",\n    \"\uD83D\uDE0E\",\n    \"\uD83D\uDE0F\",\n    \"\uD83D\uDE10\",\n    \"\uD83D\uDE11\",\n    \"\uD83D\uDE12\",\n    \"\uD83D\uDE13\",\n    \"\uD83D\uDE14\",\n    \"\uD83D\uDE15\",\n    \"\uD83D\uDE16\",\n    \"\uD83D\uDE17\",\n    \"\uD83D\uDE18\",\n    \"\uD83D\uDE19\",\n    \"\uD83D\uDE1A\",\n    \"\uD83D\uDE1B\",\n    \"\uD83D\uDE1C\",\n    \"\uD83D\uDE1D\",\n    \"\uD83D\uDE1E\",\n    \"\uD83D\uDE1F\",\n    \"\uD83D\uDE20\",\n    \"\uD83D\uDE21\",\n    \"\uD83D\uDE22\",\n    \"\uD83D\uDE23\",\n    \"\uD83D\uDE24\",\n    \"\uD83D\uDE25\",\n    \"\uD83D\uDE26\",\n    \"\uD83D\uDE27\",\n    \"\uD83D\uDE28\",\n    \"\uD83D\uDE29\",\n    \"\uD83D\uDE2A\",\n    \"\uD83D\uDE2B\",\n    \"\uD83D\uDE2C\",\n    \"\uD83D\uDE2D\",\n    \"\uD83D\uDE2E\",\n    \"\uD83D\uDE2E\u200D\uD83D\uDCA8\",\n    \"\uD83D\uDE2F\",\n    \"\uD83D\uDE30\",\n    \"\uD83D\uDE31\",\n    \"\uD83D\uDE32\",\n    \"\uD83D\uDE33\",\n    \"\uD83D\uDE34\",\n    \"\uD83D\uDE35\",\n    \"\uD83D\uDE35\u200D\uD83D\uDCAB\",\n    \"\uD83D\uDE36\",\n    \"\uD83D\uDE36\u200D\uD83C\uDF2B\uFE0F\",\n    \"\uD83D\uDE37\",\n    \"\uD83D\uDE38\",\n    \"\uD83D\uDE39\",\n    \"\uD83D\uDE3A\",\n    \"\uD83D\uDE3B\",\n    \"\uD83D\uDE3C\",\n    \"\uD83D\uDE3D\",\n    \"\uD83D\uDE3E\",\n    \"\uD83D\uDE3F\",\n    \"\uD83D\uDE40\",\n    \"\uD83D\uDE41\",\n    \"\uD83D\uDE42\",\n    \"\uD83D\uDE42\u200D\u2194\uFE0F\",\n    \"\uD83D\uDE42\u200D\u2195\uFE0F\",\n    \"\uD83D\uDE43\",\n    \"\uD83D\uDE44\",\n    \"\uD83D\uDE45\",\n    \"\uD83D\uDE45\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFB\",\n    \"\uD83D\uDE45\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFC\",\n    \"\uD83D\uDE45\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFD\",\n    \"\uD83D\uDE45\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFE\",\n    \"\uD83D\uDE45\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFF\",\n    \"\uD83D\uDE45\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE45\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\",\n    \"\uD83D\uDE46\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFB\",\n    \"\uD83D\uDE46\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFC\",\n    \"\uD83D\uDE46\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFD\",\n    \"\uD83D\uDE46\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFE\",\n    \"\uD83D\uDE46\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFF\",\n    \"\uD83D\uDE46\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE46\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\",\n    \"\uD83D\uDE47\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFB\",\n    \"\uD83D\uDE47\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFC\",\n    \"\uD83D\uDE47\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFD\",\n    \"\uD83D\uDE47\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFE\",\n    \"\uD83D\uDE47\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFF\",\n    \"\uD83D\uDE47\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE47\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE48\",\n    \"\uD83D\uDE49\",\n    \"\uD83D\uDE4A\",\n    \"\uD83D\uDE4B\",\n    \"\uD83D\uDE4B\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFB\",\n    \"\uD83D\uDE4B\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFC\",\n    \"\uD83D\uDE4B\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFD\",\n    \"\uD83D\uDE4B\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFE\",\n    \"\uD83D\uDE4B\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFF\",\n    \"\uD83D\uDE4B\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4B\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4C\",\n    \"\uD83D\uDE4C\uD83C\uDFFB\",\n    \"\uD83D\uDE4C\uD83C\uDFFC\",\n    \"\uD83D\uDE4C\uD83C\uDFFD\",\n    \"\uD83D\uDE4C\uD83C\uDFFE\",\n    \"\uD83D\uDE4C\uD83C\uDFFF\",\n    \"\uD83D\uDE4D\",\n    \"\uD83D\uDE4D\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFB\",\n    \"\uD83D\uDE4D\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFC\",\n    \"\uD83D\uDE4D\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFD\",\n    \"\uD83D\uDE4D\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFE\",\n    \"\uD83D\uDE4D\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFF\",\n    \"\uD83D\uDE4D\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4D\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\",\n    \"\uD83D\uDE4E\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFB\",\n    \"\uD83D\uDE4E\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFC\",\n    \"\uD83D\uDE4E\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFD\",\n    \"\uD83D\uDE4E\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFE\",\n    \"\uD83D\uDE4E\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFF\",\n    \"\uD83D\uDE4E\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDE4E\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDE4F\",\n    \"\uD83D\uDE4F\uD83C\uDFFB\",\n    \"\uD83D\uDE4F\uD83C\uDFFC\",\n    \"\uD83D\uDE4F\uD83C\uDFFD\",\n    \"\uD83D\uDE4F\uD83C\uDFFE\",\n    \"\uD83D\uDE4F\uD83C\uDFFF\",\n    \"\uD83D\uDEA3\",\n    \"\uD83D\uDEA3\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFB\",\n    \"\uD83D\uDEA3\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFC\",\n    \"\uD83D\uDEA3\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFD\",\n    \"\uD83D\uDEA3\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFE\",\n    \"\uD83D\uDEA3\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFF\",\n    \"\uD83D\uDEA3\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEA3\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\",\n    \"\uD83D\uDEB4\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFB\",\n    \"\uD83D\uDEB4\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFC\",\n    \"\uD83D\uDEB4\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFD\",\n    \"\uD83D\uDEB4\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFE\",\n    \"\uD83D\uDEB4\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFF\",\n    \"\uD83D\uDEB4\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB4\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\",\n    \"\uD83D\uDEB5\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFB\",\n    \"\uD83D\uDEB5\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFC\",\n    \"\uD83D\uDEB5\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFD\",\n    \"\uD83D\uDEB5\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFE\",\n    \"\uD83D\uDEB5\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFF\",\n    \"\uD83D\uDEB5\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB5\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\",\n    \"\uD83D\uDEB6\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFB\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFC\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFD\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFE\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEB6\uD83C\uDFFF\u200D\u27A1\uFE0F\",\n    \"\uD83D\uDEC0\",\n    \"\uD83D\uDEC0\uD83C\uDFFB\",\n    \"\uD83D\uDEC0\uD83C\uDFFC\",\n    \"\uD83D\uDEC0\uD83C\uDFFD\",\n    \"\uD83D\uDEC0\uD83C\uDFFE\",\n    \"\uD83D\uDEC0\uD83C\uDFFF\",\n    \"\uD83D\uDECC\",\n    \"\uD83D\uDECC\uD83C\uDFFB\",\n    \"\uD83D\uDECC\uD83C\uDFFC\",\n    \"\uD83D\uDECC\uD83C\uDFFD\",\n    \"\uD83D\uDECC\uD83C\uDFFE\",\n    \"\uD83D\uDECC\uD83C\uDFFF\",\n    \"\uD83E\uDD0C\",\n    \"\uD83E\uDD0C\uD83C\uDFFB\",\n    \"\uD83E\uDD0C\uD83C\uDFFC\",\n    \"\uD83E\uDD0C\uD83C\uDFFD\",\n    \"\uD83E\uDD0C\uD83C\uDFFE\",\n    \"\uD83E\uDD0C\uD83C\uDFFF\",\n    \"\uD83E\uDD0F\",\n    \"\uD83E\uDD0F\uD83C\uDFFB\",\n    \"\uD83E\uDD0F\uD83C\uDFFC\",\n    \"\uD83E\uDD0F\uD83C\uDFFD\",\n    \"\uD83E\uDD0F\uD83C\uDFFE\",\n    \"\uD83E\uDD0F\uD83C\uDFFF\",\n    \"\uD83E\uDD10\",\n    \"\uD83E\uDD11\",\n    \"\uD83E\uDD12\",\n    \"\uD83E\uDD13\",\n    \"\uD83E\uDD14\",\n    \"\uD83E\uDD15\",\n    \"\uD83E\uDD16\",\n    \"\uD83E\uDD17\",\n    \"\uD83E\uDD18\",\n    \"\uD83E\uDD18\uD83C\uDFFB\",\n    \"\uD83E\uDD18\uD83C\uDFFC\",\n    \"\uD83E\uDD18\uD83C\uDFFD\",\n    \"\uD83E\uDD18\uD83C\uDFFE\",\n    \"\uD83E\uDD18\uD83C\uDFFF\",\n    \"\uD83E\uDD19\",\n    \"\uD83E\uDD19\uD83C\uDFFB\",\n    \"\uD83E\uDD19\uD83C\uDFFC\",\n    \"\uD83E\uDD19\uD83C\uDFFD\",\n    \"\uD83E\uDD19\uD83C\uDFFE\",\n    \"\uD83E\uDD19\uD83C\uDFFF\",\n    \"\uD83E\uDD1A\",\n    \"\uD83E\uDD1A\uD83C\uDFFB\",\n    \"\uD83E\uDD1A\uD83C\uDFFC\",\n    \"\uD83E\uDD1A\uD83C\uDFFD\",\n    \"\uD83E\uDD1A\uD83C\uDFFE\",\n    \"\uD83E\uDD1A\uD83C\uDFFF\",\n    \"\uD83E\uDD1B\",\n    \"\uD83E\uDD1B\uD83C\uDFFB\",\n    \"\uD83E\uDD1B\uD83C\uDFFC\",\n    \"\uD83E\uDD1B\uD83C\uDFFD\",\n    \"\uD83E\uDD1B\uD83C\uDFFE\",\n    \"\uD83E\uDD1B\uD83C\uDFFF\",\n    \"\uD83E\uDD1C\",\n    \"\uD83E\uDD1C\uD83C\uDFFB\",\n    \"\uD83E\uDD1C\uD83C\uDFFC\",\n    \"\uD83E\uDD1C\uD83C\uDFFD\",\n    \"\uD83E\uDD1C\uD83C\uDFFE\",\n    \"\uD83E\uDD1C\uD83C\uDFFF\",\n    \"\uD83E\uDD1D\",\n    \"\uD83E\uDD1D\uD83C\uDFFB\",\n    \"\uD83E\uDD1D\uD83C\uDFFC\",\n    \"\uD83E\uDD1D\uD83C\uDFFD\",\n    \"\uD83E\uDD1D\uD83C\uDFFE\",\n    \"\uD83E\uDD1D\uD83C\uDFFF\",\n    \"\uD83E\uDD1E\",\n    \"\uD83E\uDD1E\uD83C\uDFFB\",\n    \"\uD83E\uDD1E\uD83C\uDFFC\",\n    \"\uD83E\uDD1E\uD83C\uDFFD\",\n    \"\uD83E\uDD1E\uD83C\uDFFE\",\n    \"\uD83E\uDD1E\uD83C\uDFFF\",\n    \"\uD83E\uDD1F\",\n    \"\uD83E\uDD1F\uD83C\uDFFB\",\n    \"\uD83E\uDD1F\uD83C\uDFFC\",\n    \"\uD83E\uDD1F\uD83C\uDFFD\",\n    \"\uD83E\uDD1F\uD83C\uDFFE\",\n    \"\uD83E\uDD1F\uD83C\uDFFF\",\n    \"\uD83E\uDD20\",\n    \"\uD83E\uDD21\",\n    \"\uD83E\uDD22\",\n    \"\uD83E\uDD23\",\n    \"\uD83E\uDD24\",\n    \"\uD83E\uDD25\",\n    \"\uD83E\uDD26\",\n    \"\uD83E\uDD26\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFB\",\n    \"\uD83E\uDD26\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFC\",\n    \"\uD83E\uDD26\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFD\",\n    \"\uD83E\uDD26\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFE\",\n    \"\uD83E\uDD26\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFF\",\n    \"\uD83E\uDD26\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD26\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD27\",\n    \"\uD83E\uDD28\",\n    \"\uD83E\uDD29\",\n    \"\uD83E\uDD2A\",\n    \"\uD83E\uDD2B\",\n    \"\uD83E\uDD2C\",\n    \"\uD83E\uDD2D\",\n    \"\uD83E\uDD2E\",\n    \"\uD83E\uDD2F\",\n    \"\uD83E\uDD30\",\n    \"\uD83E\uDD30\uD83C\uDFFB\",\n    \"\uD83E\uDD30\uD83C\uDFFC\",\n    \"\uD83E\uDD30\uD83C\uDFFD\",\n    \"\uD83E\uDD30\uD83C\uDFFE\",\n    \"\uD83E\uDD30\uD83C\uDFFF\",\n    \"\uD83E\uDD31\",\n    \"\uD83E\uDD31\uD83C\uDFFB\",\n    \"\uD83E\uDD31\uD83C\uDFFC\",\n    \"\uD83E\uDD31\uD83C\uDFFD\",\n    \"\uD83E\uDD31\uD83C\uDFFE\",\n    \"\uD83E\uDD31\uD83C\uDFFF\",\n    \"\uD83E\uDD32\",\n    \"\uD83E\uDD32\uD83C\uDFFB\",\n    \"\uD83E\uDD32\uD83C\uDFFC\",\n    \"\uD83E\uDD32\uD83C\uDFFD\",\n    \"\uD83E\uDD32\uD83C\uDFFE\",\n    \"\uD83E\uDD32\uD83C\uDFFF\",\n    \"\uD83E\uDD33\",\n    \"\uD83E\uDD33\uD83C\uDFFB\",\n    \"\uD83E\uDD33\uD83C\uDFFC\",\n    \"\uD83E\uDD33\uD83C\uDFFD\",\n    \"\uD83E\uDD33\uD83C\uDFFE\",\n    \"\uD83E\uDD33\uD83C\uDFFF\",\n    \"\uD83E\uDD34\",\n    \"\uD83E\uDD34\uD83C\uDFFB\",\n    \"\uD83E\uDD34\uD83C\uDFFC\",\n    \"\uD83E\uDD34\uD83C\uDFFD\",\n    \"\uD83E\uDD34\uD83C\uDFFE\",\n    \"\uD83E\uDD34\uD83C\uDFFF\",\n    \"\uD83E\uDD35\",\n    \"\uD83E\uDD35\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFB\",\n    \"\uD83E\uDD35\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFC\",\n    \"\uD83E\uDD35\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFD\",\n    \"\uD83E\uDD35\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFE\",\n    \"\uD83E\uDD35\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFF\",\n    \"\uD83E\uDD35\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD35\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD36\",\n    \"\uD83E\uDD36\uD83C\uDFFB\",\n    \"\uD83E\uDD36\uD83C\uDFFC\",\n    \"\uD83E\uDD36\uD83C\uDFFD\",\n    \"\uD83E\uDD36\uD83C\uDFFE\",\n    \"\uD83E\uDD36\uD83C\uDFFF\",\n    \"\uD83E\uDD37\",\n    \"\uD83E\uDD37\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFB\",\n    \"\uD83E\uDD37\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFC\",\n    \"\uD83E\uDD37\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFD\",\n    \"\uD83E\uDD37\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFE\",\n    \"\uD83E\uDD37\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFF\",\n    \"\uD83E\uDD37\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD37\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\",\n    \"\uD83E\uDD38\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFB\",\n    \"\uD83E\uDD38\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFC\",\n    \"\uD83E\uDD38\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFD\",\n    \"\uD83E\uDD38\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFE\",\n    \"\uD83E\uDD38\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFF\",\n    \"\uD83E\uDD38\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD38\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\",\n    \"\uD83E\uDD39\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFB\",\n    \"\uD83E\uDD39\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFC\",\n    \"\uD83E\uDD39\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFD\",\n    \"\uD83E\uDD39\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFE\",\n    \"\uD83E\uDD39\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFF\",\n    \"\uD83E\uDD39\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD39\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3A\",\n    \"\uD83E\uDD3C\",\n    \"\uD83E\uDD3C\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3C\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\",\n    \"\uD83E\uDD3D\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFB\",\n    \"\uD83E\uDD3D\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFC\",\n    \"\uD83E\uDD3D\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFD\",\n    \"\uD83E\uDD3D\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFE\",\n    \"\uD83E\uDD3D\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFF\",\n    \"\uD83E\uDD3D\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3D\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\",\n    \"\uD83E\uDD3E\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFB\",\n    \"\uD83E\uDD3E\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFC\",\n    \"\uD83E\uDD3E\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFD\",\n    \"\uD83E\uDD3E\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFE\",\n    \"\uD83E\uDD3E\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFF\",\n    \"\uD83E\uDD3E\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDD3E\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDD70\",\n    \"\uD83E\uDD71\",\n    \"\uD83E\uDD72\",\n    \"\uD83E\uDD73\",\n    \"\uD83E\uDD74\",\n    \"\uD83E\uDD75\",\n    \"\uD83E\uDD76\",\n    \"\uD83E\uDD77\",\n    \"\uD83E\uDD77\uD83C\uDFFB\",\n    \"\uD83E\uDD77\uD83C\uDFFC\",\n    \"\uD83E\uDD77\uD83C\uDFFD\",\n    \"\uD83E\uDD77\uD83C\uDFFE\",\n    \"\uD83E\uDD77\uD83C\uDFFF\",\n    \"\uD83E\uDD78\",\n    \"\uD83E\uDD79\",\n    \"\uD83E\uDD7A\",\n    \"\uD83E\uDDB4\",\n    \"\uD83E\uDDB5\",\n    \"\uD83E\uDDB5\uD83C\uDFFB\",\n    \"\uD83E\uDDB5\uD83C\uDFFC\",\n    \"\uD83E\uDDB5\uD83C\uDFFD\",\n    \"\uD83E\uDDB5\uD83C\uDFFE\",\n    \"\uD83E\uDDB5\uD83C\uDFFF\",\n    \"\uD83E\uDDB6\",\n    \"\uD83E\uDDB6\uD83C\uDFFB\",\n    \"\uD83E\uDDB6\uD83C\uDFFC\",\n    \"\uD83E\uDDB6\uD83C\uDFFD\",\n    \"\uD83E\uDDB6\uD83C\uDFFE\",\n    \"\uD83E\uDDB6\uD83C\uDFFF\",\n    \"\uD83E\uDDB7\",\n    \"\uD83E\uDDB8\",\n    \"\uD83E\uDDB8\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFB\",\n    \"\uD83E\uDDB8\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFC\",\n    \"\uD83E\uDDB8\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFD\",\n    \"\uD83E\uDDB8\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFE\",\n    \"\uD83E\uDDB8\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFF\",\n    \"\uD83E\uDDB8\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB8\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\",\n    \"\uD83E\uDDB9\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFB\",\n    \"\uD83E\uDDB9\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFC\",\n    \"\uD83E\uDDB9\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFD\",\n    \"\uD83E\uDDB9\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFE\",\n    \"\uD83E\uDDB9\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFF\",\n    \"\uD83E\uDDB9\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDB9\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDBB\",\n    \"\uD83E\uDDBB\uD83C\uDFFB\",\n    \"\uD83E\uDDBB\uD83C\uDFFC\",\n    \"\uD83E\uDDBB\uD83C\uDFFD\",\n    \"\uD83E\uDDBB\uD83C\uDFFE\",\n    \"\uD83E\uDDBB\uD83C\uDFFF\",\n    \"\uD83E\uDDBE\",\n    \"\uD83E\uDDBF\",\n    \"\uD83E\uDDCC\",\n    \"\uD83E\uDDCD\",\n    \"\uD83E\uDDCD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFB\",\n    \"\uD83E\uDDCD\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFC\",\n    \"\uD83E\uDDCD\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFD\",\n    \"\uD83E\uDDCD\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFE\",\n    \"\uD83E\uDDCD\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFF\",\n    \"\uD83E\uDDCD\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCD\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\",\n    \"\uD83E\uDDCE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFB\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFE\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\u200D\u2640\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\u200D\u2642\uFE0F\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCE\uD83C\uDFFF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDCF\",\n    \"\uD83E\uDDCF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFB\",\n    \"\uD83E\uDDCF\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFC\",\n    \"\uD83E\uDDCF\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFD\",\n    \"\uD83E\uDDCF\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFE\",\n    \"\uD83E\uDDCF\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFF\",\n    \"\uD83E\uDDCF\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDCF\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD0\",\n    \"\uD83E\uDDD1\",\n    \"\uD83E\uDDD1\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDD1\u200D\uD83E\uDDD2\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDD1\u200D\uD83E\uDDD2\u200D\uD83E\uDDD2\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDD2\",\n    \"\uD83E\uDDD1\u200D\uD83E\uDDD2\u200D\uD83E\uDDD2\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2695\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2696\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2708\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDF3E\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDF73\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDF7C\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDF84\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDF93\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDFA4\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDFA8\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDFEB\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83C\uDFED\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDCBB\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDCBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDD27\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDD2C\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDE80\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83D\uDE92\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFB\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFC\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFD\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFE\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1\uD83C\uDFFF\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDAF\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDAF\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDB0\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDB1\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDB2\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDB3\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDBC\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDBC\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDBD\",\n    \"\uD83E\uDDD1\uD83C\uDFFF\u200D\uD83E\uDDBD\u200D\u27A1\uFE0F\",\n    \"\uD83E\uDDD2\",\n    \"\uD83E\uDDD2\uD83C\uDFFB\",\n    \"\uD83E\uDDD2\uD83C\uDFFC\",\n    \"\uD83E\uDDD2\uD83C\uDFFD\",\n    \"\uD83E\uDDD2\uD83C\uDFFE\",\n    \"\uD83E\uDDD2\uD83C\uDFFF\",\n    \"\uD83E\uDDD3\",\n    \"\uD83E\uDDD3\uD83C\uDFFB\",\n    \"\uD83E\uDDD3\uD83C\uDFFC\",\n    \"\uD83E\uDDD3\uD83C\uDFFD\",\n    \"\uD83E\uDDD3\uD83C\uDFFE\",\n    \"\uD83E\uDDD3\uD83C\uDFFF\",\n    \"\uD83E\uDDD4\",\n    \"\uD83E\uDDD4\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFB\",\n    \"\uD83E\uDDD4\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFC\",\n    \"\uD83E\uDDD4\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFD\",\n    \"\uD83E\uDDD4\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFE\",\n    \"\uD83E\uDDD4\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFF\",\n    \"\uD83E\uDDD4\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD4\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD5\",\n    \"\uD83E\uDDD5\uD83C\uDFFB\",\n    \"\uD83E\uDDD5\uD83C\uDFFC\",\n    \"\uD83E\uDDD5\uD83C\uDFFD\",\n    \"\uD83E\uDDD5\uD83C\uDFFE\",\n    \"\uD83E\uDDD5\uD83C\uDFFF\",\n    \"\uD83E\uDDD6\",\n    \"\uD83E\uDDD6\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFB\",\n    \"\uD83E\uDDD6\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFC\",\n    \"\uD83E\uDDD6\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFD\",\n    \"\uD83E\uDDD6\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFE\",\n    \"\uD83E\uDDD6\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFF\",\n    \"\uD83E\uDDD6\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD6\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\",\n    \"\uD83E\uDDD7\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFB\",\n    \"\uD83E\uDDD7\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFC\",\n    \"\uD83E\uDDD7\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFD\",\n    \"\uD83E\uDDD7\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFE\",\n    \"\uD83E\uDDD7\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFF\",\n    \"\uD83E\uDDD7\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD7\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\",\n    \"\uD83E\uDDD8\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFB\",\n    \"\uD83E\uDDD8\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFC\",\n    \"\uD83E\uDDD8\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFD\",\n    \"\uD83E\uDDD8\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFE\",\n    \"\uD83E\uDDD8\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFF\",\n    \"\uD83E\uDDD8\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD8\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\",\n    \"\uD83E\uDDD9\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFB\",\n    \"\uD83E\uDDD9\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFC\",\n    \"\uD83E\uDDD9\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFD\",\n    \"\uD83E\uDDD9\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFE\",\n    \"\uD83E\uDDD9\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFF\",\n    \"\uD83E\uDDD9\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDD9\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\",\n    \"\uD83E\uDDDA\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFB\",\n    \"\uD83E\uDDDA\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFC\",\n    \"\uD83E\uDDDA\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFD\",\n    \"\uD83E\uDDDA\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFE\",\n    \"\uD83E\uDDDA\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFF\",\n    \"\uD83E\uDDDA\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDA\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\",\n    \"\uD83E\uDDDB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFB\",\n    \"\uD83E\uDDDB\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFC\",\n    \"\uD83E\uDDDB\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFD\",\n    \"\uD83E\uDDDB\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFE\",\n    \"\uD83E\uDDDB\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFF\",\n    \"\uD83E\uDDDB\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDB\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\",\n    \"\uD83E\uDDDC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFB\",\n    \"\uD83E\uDDDC\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFC\",\n    \"\uD83E\uDDDC\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFD\",\n    \"\uD83E\uDDDC\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFE\",\n    \"\uD83E\uDDDC\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFF\",\n    \"\uD83E\uDDDC\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDC\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\",\n    \"\uD83E\uDDDD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFB\",\n    \"\uD83E\uDDDD\uD83C\uDFFB\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFB\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFC\",\n    \"\uD83E\uDDDD\uD83C\uDFFC\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFC\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFD\",\n    \"\uD83E\uDDDD\uD83C\uDFFD\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFD\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFE\",\n    \"\uD83E\uDDDD\uD83C\uDFFE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFF\",\n    \"\uD83E\uDDDD\uD83C\uDFFF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDD\uD83C\uDFFF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDE\",\n    \"\uD83E\uDDDE\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDE\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDDF\",\n    \"\uD83E\uDDDF\u200D\u2640\uFE0F\",\n    \"\uD83E\uDDDF\u200D\u2642\uFE0F\",\n    \"\uD83E\uDDE0\",\n    \"\uD83E\uDEC0\",\n    \"\uD83E\uDEC1\",\n    \"\uD83E\uDEC2\",\n    \"\uD83E\uDEC3\",\n    \"\uD83E\uDEC3\uD83C\uDFFB\",\n    \"\uD83E\uDEC3\uD83C\uDFFC\",\n    \"\uD83E\uDEC3\uD83C\uDFFD\",\n    \"\uD83E\uDEC3\uD83C\uDFFE\",\n    \"\uD83E\uDEC3\uD83C\uDFFF\",\n    \"\uD83E\uDEC4\",\n    \"\uD83E\uDEC4\uD83C\uDFFB\",\n    \"\uD83E\uDEC4\uD83C\uDFFC\",\n    \"\uD83E\uDEC4\uD83C\uDFFD\",\n    \"\uD83E\uDEC4\uD83C\uDFFE\",\n    \"\uD83E\uDEC4\uD83C\uDFFF\",\n    \"\uD83E\uDEC5\",\n    \"\uD83E\uDEC5\uD83C\uDFFB\",\n    \"\uD83E\uDEC5\uD83C\uDFFC\",\n    \"\uD83E\uDEC5\uD83C\uDFFD\",\n    \"\uD83E\uDEC5\uD83C\uDFFE\",\n    \"\uD83E\uDEC5\uD83C\uDFFF\",\n    \"\uD83E\uDEC6\",\n    \"\uD83E\uDEE0\",\n    \"\uD83E\uDEE1\",\n    \"\uD83E\uDEE2\",\n    \"\uD83E\uDEE3\",\n    \"\uD83E\uDEE4\",\n    \"\uD83E\uDEE5\",\n    \"\uD83E\uDEE6\",\n    \"\uD83E\uDEE8\",\n    \"\uD83E\uDEE9\",\n    \"\uD83E\uDEF0\",\n    \"\uD83E\uDEF0\uD83C\uDFFB\",\n    \"\uD83E\uDEF0\uD83C\uDFFC\",\n    \"\uD83E\uDEF0\uD83C\uDFFD\",\n    \"\uD83E\uDEF0\uD83C\uDFFE\",\n    \"\uD83E\uDEF0\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\",\n    \"\uD83E\uDEF1\uD83C\uDFFB\",\n    \"\uD83E\uDEF1\uD83C\uDFFB\u200D\uD83E\uDEF2\uD83C\uDFFC\",\n    \"\uD83E\uDEF1\uD83C\uDFFB\u200D\uD83E\uDEF2\uD83C\uDFFD\",\n    \"\uD83E\uDEF1\uD83C\uDFFB\u200D\uD83E\uDEF2\uD83C\uDFFE\",\n    \"\uD83E\uDEF1\uD83C\uDFFB\u200D\uD83E\uDEF2\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\uD83C\uDFFC\",\n    \"\uD83E\uDEF1\uD83C\uDFFC\u200D\uD83E\uDEF2\uD83C\uDFFB\",\n    \"\uD83E\uDEF1\uD83C\uDFFC\u200D\uD83E\uDEF2\uD83C\uDFFD\",\n    \"\uD83E\uDEF1\uD83C\uDFFC\u200D\uD83E\uDEF2\uD83C\uDFFE\",\n    \"\uD83E\uDEF1\uD83C\uDFFC\u200D\uD83E\uDEF2\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\uD83C\uDFFD\",\n    \"\uD83E\uDEF1\uD83C\uDFFD\u200D\uD83E\uDEF2\uD83C\uDFFB\",\n    \"\uD83E\uDEF1\uD83C\uDFFD\u200D\uD83E\uDEF2\uD83C\uDFFC\",\n    \"\uD83E\uDEF1\uD83C\uDFFD\u200D\uD83E\uDEF2\uD83C\uDFFE\",\n    \"\uD83E\uDEF1\uD83C\uDFFD\u200D\uD83E\uDEF2\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\uD83C\uDFFE\",\n    \"\uD83E\uDEF1\uD83C\uDFFE\u200D\uD83E\uDEF2\uD83C\uDFFB\",\n    \"\uD83E\uDEF1\uD83C\uDFFE\u200D\uD83E\uDEF2\uD83C\uDFFC\",\n    \"\uD83E\uDEF1\uD83C\uDFFE\u200D\uD83E\uDEF2\uD83C\uDFFD\",\n    \"\uD83E\uDEF1\uD83C\uDFFE\u200D\uD83E\uDEF2\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\uD83C\uDFFF\",\n    \"\uD83E\uDEF1\uD83C\uDFFF\u200D\uD83E\uDEF2\uD83C\uDFFB\",\n    \"\uD83E\uDEF1\uD83C\uDFFF\u200D\uD83E\uDEF2\uD83C\uDFFC\",\n    \"\uD83E\uDEF1\uD83C\uDFFF\u200D\uD83E\uDEF2\uD83C\uDFFD\",\n    \"\uD83E\uDEF1\uD83C\uDFFF\u200D\uD83E\uDEF2\uD83C\uDFFE\",\n    \"\uD83E\uDEF2\",\n    \"\uD83E\uDEF2\uD83C\uDFFB\",\n    \"\uD83E\uDEF2\uD83C\uDFFC\",\n    \"\uD83E\uDEF2\uD83C\uDFFD\",\n    \"\uD83E\uDEF2\uD83C\uDFFE\",\n    \"\uD83E\uDEF2\uD83C\uDFFF\",\n    \"\uD83E\uDEF3\",\n    \"\uD83E\uDEF3\uD83C\uDFFB\",\n    \"\uD83E\uDEF3\uD83C\uDFFC\",\n    \"\uD83E\uDEF3\uD83C\uDFFD\",\n    \"\uD83E\uDEF3\uD83C\uDFFE\",\n    \"\uD83E\uDEF3\uD83C\uDFFF\",\n    \"\uD83E\uDEF4\",\n    \"\uD83E\uDEF4\uD83C\uDFFB\",\n    \"\uD83E\uDEF4\uD83C\uDFFC\",\n    \"\uD83E\uDEF4\uD83C\uDFFD\",\n    \"\uD83E\uDEF4\uD83C\uDFFE\",\n    \"\uD83E\uDEF4\uD83C\uDFFF\",\n    \"\uD83E\uDEF5\",\n    \"\uD83E\uDEF5\uD83C\uDFFB\",\n    \"\uD83E\uDEF5\uD83C\uDFFC\",\n    \"\uD83E\uDEF5\uD83C\uDFFD\",\n    \"\uD83E\uDEF5\uD83C\uDFFE\",\n    \"\uD83E\uDEF5\uD83C\uDFFF\",\n    \"\uD83E\uDEF6\",\n    \"\uD83E\uDEF6\uD83C\uDFFB\",\n    \"\uD83E\uDEF6\uD83C\uDFFC\",\n    \"\uD83E\uDEF6\uD83C\uDFFD\",\n    \"\uD83E\uDEF6\uD83C\uDFFE\",\n    \"\uD83E\uDEF6\uD83C\uDFFF\",\n    \"\uD83E\uDEF7\",\n    \"\uD83E\uDEF7\uD83C\uDFFB\",\n    \"\uD83E\uDEF7\uD83C\uDFFC\",\n    \"\uD83E\uDEF7\uD83C\uDFFD\",\n    \"\uD83E\uDEF7\uD83C\uDFFE\",\n    \"\uD83E\uDEF7\uD83C\uDFFF\",\n    \"\uD83E\uDEF8\",\n    \"\uD83E\uDEF8\uD83C\uDFFB\",\n    \"\uD83E\uDEF8\uD83C\uDFFC\",\n    \"\uD83E\uDEF8\uD83C\uDFFD\",\n    \"\uD83E\uDEF8\uD83C\uDFFE\",\n    \"\uD83E\uDEF8\uD83C\uDFFF\"\n  ],\n  \"Animals\": [\n    \"\uD83D\uDC00\",\n    \"\uD83D\uDC01\",\n    \"\uD83D\uDC02\",\n    \"\uD83D\uDC03\",\n    \"\uD83D\uDC04\",\n    \"\uD83D\uDC05\",\n    \"\uD83D\uDC06\",\n    \"\uD83D\uDC07\",\n    \"\uD83D\uDC08\",\n    \"\uD83D\uDC08\u200D\u2B1B\",\n    \"\uD83D\uDC09\",\n    \"\uD83D\uDC0A\",\n    \"\uD83D\uDC0B\",\n    \"\uD83D\uDC0C\",\n    \"\uD83D\uDC0D\",\n    \"\uD83D\uDC0E\",\n    \"\uD83D\uDC0F\",\n    \"\uD83D\uDC10\",\n    \"\uD83D\uDC11\",\n    \"\uD83D\uDC12\",\n    \"\uD83D\uDC13\",\n    \"\uD83D\uDC14\",\n    \"\uD83D\uDC15\",\n    \"\uD83D\uDC15\u200D\uD83E\uDDBA\",\n    \"\uD83D\uDC16\",\n    \"\uD83D\uDC17\",\n    \"\uD83D\uDC18\",\n    \"\uD83D\uDC19\",\n    \"\uD83D\uDC1A\",\n    \"\uD83D\uDC1B\",\n    \"\uD83D\uDC1C\",\n    \"\uD83D\uDC1D\",\n    \"\uD83D\uDC1E\",\n    \"\uD83D\uDC1F\",\n    \"\uD83D\uDC20\",\n    \"\uD83D\uDC21\",\n    \"\uD83D\uDC22\",\n    \"\uD83D\uDC23\",\n    \"\uD83D\uDC24\",\n    \"\uD83D\uDC25\",\n    \"\uD83D\uDC26\",\n    \"\uD83D\uDC26\u200D\u2B1B\",\n    \"\uD83D\uDC26\u200D\uD83D\uDD25\",\n    \"\uD83D\uDC27\",\n    \"\uD83D\uDC28\",\n    \"\uD83D\uDC29\",\n    \"\uD83D\uDC2A\",\n    \"\uD83D\uDC2B\",\n    \"\uD83D\uDC2C\",\n    \"\uD83D\uDC2D\",\n    \"\uD83D\uDC2E\",\n    \"\uD83D\uDC2F\",\n    \"\uD83D\uDC30\",\n    \"\uD83D\uDC31\",\n    \"\uD83D\uDC32\",\n    \"\uD83D\uDC33\",\n    \"\uD83D\uDC34\",\n    \"\uD83D\uDC35\",\n    \"\uD83D\uDC36\",\n    \"\uD83D\uDC37\",\n    \"\uD83D\uDC38\",\n    \"\uD83D\uDC39\",\n    \"\uD83D\uDC3A\",\n    \"\uD83D\uDC3B\",\n    \"\uD83D\uDC3B\u200D\u2744\uFE0F\",\n    \"\uD83D\uDC3C\",\n    \"\uD83D\uDC3D\",\n    \"\uD83D\uDC3E\",\n    \"\uD83D\uDC3F\uFE0F\",\n    \"\uD83D\uDD4A\uFE0F\",\n    \"\uD83D\uDD77\uFE0F\",\n    \"\uD83D\uDD78\uFE0F\",\n    \"\uD83E\uDD80\",\n    \"\uD83E\uDD81\",\n    \"\uD83E\uDD82\",\n    \"\uD83E\uDD83\",\n    \"\uD83E\uDD84\",\n    \"\uD83E\uDD85\",\n    \"\uD83E\uDD86\",\n    \"\uD83E\uDD87\",\n    \"\uD83E\uDD88\",\n    \"\uD83E\uDD89\",\n    \"\uD83E\uDD8A\",\n    \"\uD83E\uDD8B\",\n    \"\uD83E\uDD8C\",\n    \"\uD83E\uDD8D\",\n    \"\uD83E\uDD8E\",\n    \"\uD83E\uDD8F\",\n    \"\uD83E\uDD90\",\n    \"\uD83E\uDD91\",\n    \"\uD83E\uDD92\",\n    \"\uD83E\uDD93\",\n    \"\uD83E\uDD94\",\n    \"\uD83E\uDD95\",\n    \"\uD83E\uDD96\",\n    \"\uD83E\uDD97\",\n    \"\uD83E\uDD98\",\n    \"\uD83E\uDD99\",\n    \"\uD83E\uDD9A\",\n    \"\uD83E\uDD9B\",\n    \"\uD83E\uDD9C\",\n    \"\uD83E\uDD9D\",\n    \"\uD83E\uDD9E\",\n    \"\uD83E\uDD9F\",\n    \"\uD83E\uDDA0\",\n    \"\uD83E\uDDA1\",\n    \"\uD83E\uDDA2\",\n    \"\uD83E\uDDA3\",\n    \"\uD83E\uDDA4\",\n    \"\uD83E\uDDA5\",\n    \"\uD83E\uDDA6\",\n    \"\uD83E\uDDA7\",\n    \"\uD83E\uDDA8\",\n    \"\uD83E\uDDA9\",\n    \"\uD83E\uDDAA\",\n    \"\uD83E\uDDAB\",\n    \"\uD83E\uDDAC\",\n    \"\uD83E\uDDAD\",\n    \"\uD83E\uDDAE\",\n    \"\uD83E\uDEB0\",\n    \"\uD83E\uDEB1\",\n    \"\uD83E\uDEB2\",\n    \"\uD83E\uDEB3\",\n    \"\uD83E\uDEB6\",\n    \"\uD83E\uDEB8\",\n    \"\uD83E\uDEBC\",\n    \"\uD83E\uDEBD\",\n    \"\uD83E\uDEBF\",\n    \"\uD83E\uDECE\",\n    \"\uD83E\uDECF\"\n  ],\n  \"Food\": [\n    \"\u2615\",\n    \"\uD83C\uDF2D\",\n    \"\uD83C\uDF2E\",\n    \"\uD83C\uDF2F\",\n    \"\uD83C\uDF30\",\n    \"\uD83C\uDF36\uFE0F\",\n    \"\uD83C\uDF3D\",\n    \"\uD83C\uDF44\u200D\uD83D\uDFEB\",\n    \"\uD83C\uDF45\",\n    \"\uD83C\uDF46\",\n    \"\uD83C\uDF47\",\n    \"\uD83C\uDF48\",\n    \"\uD83C\uDF49\",\n    \"\uD83C\uDF4A\",\n    \"\uD83C\uDF4B\",\n    \"\uD83C\uDF4B\u200D\uD83D\uDFE9\",\n    \"\uD83C\uDF4C\",\n    \"\uD83C\uDF4D\",\n    \"\uD83C\uDF4E\",\n    \"\uD83C\uDF4F\",\n    \"\uD83C\uDF50\",\n    \"\uD83C\uDF51\",\n    \"\uD83C\uDF52\",\n    \"\uD83C\uDF53\",\n    \"\uD83C\uDF54\",\n    \"\uD83C\uDF55\",\n    \"\uD83C\uDF56\",\n    \"\uD83C\uDF57\",\n    \"\uD83C\uDF58\",\n    \"\uD83C\uDF59\",\n    \"\uD83C\uDF5A\",\n    \"\uD83C\uDF5B\",\n    \"\uD83C\uDF5C\",\n    \"\uD83C\uDF5D\",\n    \"\uD83C\uDF5E\",\n    \"\uD83C\uDF5F\",\n    \"\uD83C\uDF60\",\n    \"\uD83C\uDF61\",\n    \"\uD83C\uDF62\",\n    \"\uD83C\uDF63\",\n    \"\uD83C\uDF64\",\n    \"\uD83C\uDF65\",\n    \"\uD83C\uDF66\",\n    \"\uD83C\uDF67\",\n    \"\uD83C\uDF68\",\n    \"\uD83C\uDF69\",\n    \"\uD83C\uDF6A\",\n    \"\uD83C\uDF6B\",\n    \"\uD83C\uDF6C\",\n    \"\uD83C\uDF6D\",\n    \"\uD83C\uDF6E\",\n    \"\uD83C\uDF6F\",\n    \"\uD83C\uDF70\",\n    \"\uD83C\uDF71\",\n    \"\uD83C\uDF72\",\n    \"\uD83C\uDF73\",\n    \"\uD83C\uDF74\",\n    \"\uD83C\uDF75\",\n    \"\uD83C\uDF76\",\n    \"\uD83C\uDF77\",\n    \"\uD83C\uDF78\",\n    \"\uD83C\uDF79\",\n    \"\uD83C\uDF7A\",\n    \"\uD83C\uDF7B\",\n    \"\uD83C\uDF7C\",\n    \"\uD83C\uDF7D\uFE0F\",\n    \"\uD83C\uDF7E\",\n    \"\uD83C\uDF7F\",\n    \"\uD83C\uDF82\",\n    \"\uD83C\uDFFA\",\n    \"\uD83D\uDD2A\",\n    \"\uD83E\uDD42\",\n    \"\uD83E\uDD43\",\n    \"\uD83E\uDD44\",\n    \"\uD83E\uDD50\",\n    \"\uD83E\uDD51\",\n    \"\uD83E\uDD52\",\n    \"\uD83E\uDD53\",\n    \"\uD83E\uDD54\",\n    \"\uD83E\uDD55\",\n    \"\uD83E\uDD56\",\n    \"\uD83E\uDD57\",\n    \"\uD83E\uDD58\",\n    \"\uD83E\uDD59\",\n    \"\uD83E\uDD5A\",\n    \"\uD83E\uDD5B\",\n    \"\uD83E\uDD5C\",\n    \"\uD83E\uDD5D\",\n    \"\uD83E\uDD5E\",\n    \"\uD83E\uDD5F\",\n    \"\uD83E\uDD60\",\n    \"\uD83E\uDD61\",\n    \"\uD83E\uDD62\",\n    \"\uD83E\uDD63\",\n    \"\uD83E\uDD64\",\n    \"\uD83E\uDD65\",\n    \"\uD83E\uDD66\",\n    \"\uD83E\uDD67\",\n    \"\uD83E\uDD68\",\n    \"\uD83E\uDD69\",\n    \"\uD83E\uDD6A\",\n    \"\uD83E\uDD6B\",\n    \"\uD83E\uDD6C\",\n    \"\uD83E\uDD6D\",\n    \"\uD83E\uDD6E\",\n    \"\uD83E\uDD6F\",\n    \"\uD83E\uDDC0\",\n    \"\uD83E\uDDC1\",\n    \"\uD83E\uDDC2\",\n    \"\uD83E\uDDC3\",\n    \"\uD83E\uDDC4\",\n    \"\uD83E\uDDC5\",\n    \"\uD83E\uDDC6\",\n    \"\uD83E\uDDC7\",\n    \"\uD83E\uDDC8\",\n    \"\uD83E\uDDC9\",\n    \"\uD83E\uDDCA\",\n    \"\uD83E\uDDCB\",\n    \"\uD83E\uDED0\",\n    \"\uD83E\uDED1\",\n    \"\uD83E\uDED2\",\n    \"\uD83E\uDED3\",\n    \"\uD83E\uDED4\",\n    \"\uD83E\uDED5\",\n    \"\uD83E\uDED6\",\n    \"\uD83E\uDED7\",\n    \"\uD83E\uDED8\",\n    \"\uD83E\uDED9\",\n    \"\uD83E\uDEDA\",\n    \"\uD83E\uDEDB\",\n    \"\uD83E\uDEDC\"\n  ],\n  \"Transport\": [\n    \"\u2693\",\n    \"\u26F4\uFE0F\",\n    \"\u26F5\",\n    \"\u26FD\",\n    \"\u2708\uFE0F\",\n    \"\uD83C\uDFCD\uFE0F\",\n    \"\uD83C\uDFCE\uFE0F\",\n    \"\uD83D\uDCBA\",\n    \"\uD83D\uDE80\",\n    \"\uD83D\uDE81\",\n    \"\uD83D\uDE82\",\n    \"\uD83D\uDE83\",\n    \"\uD83D\uDE84\",\n    \"\uD83D\uDE85\",\n    \"\uD83D\uDE86\",\n    \"\uD83D\uDE87\",\n    \"\uD83D\uDE88\",\n    \"\uD83D\uDE89\",\n    \"\uD83D\uDE8A\",\n    \"\uD83D\uDE8B\",\n    \"\uD83D\uDE8C\",\n    \"\uD83D\uDE8D\",\n    \"\uD83D\uDE8E\",\n    \"\uD83D\uDE8F\",\n    \"\uD83D\uDE90\",\n    \"\uD83D\uDE91\",\n    \"\uD83D\uDE92\",\n    \"\uD83D\uDE93\",\n    \"\uD83D\uDE94\",\n    \"\uD83D\uDE95\",\n    \"\uD83D\uDE96\",\n    \"\uD83D\uDE97\",\n    \"\uD83D\uDE98\",\n    \"\uD83D\uDE99\",\n    \"\uD83D\uDE9A\",\n    \"\uD83D\uDE9B\",\n    \"\uD83D\uDE9C\",\n    \"\uD83D\uDE9D\",\n    \"\uD83D\uDE9E\",\n    \"\uD83D\uDE9F\",\n    \"\uD83D\uDEA0\",\n    \"\uD83D\uDEA1\",\n    \"\uD83D\uDEA2\",\n    \"\uD83D\uDEA4\",\n    \"\uD83D\uDEA5\",\n    \"\uD83D\uDEA6\",\n    \"\uD83D\uDEA7\",\n    \"\uD83D\uDEA8\",\n    \"\uD83D\uDEB2\",\n    \"\uD83D\uDED1\",\n    \"\uD83D\uDEDE\",\n    \"\uD83D\uDEDF\",\n    \"\uD83D\uDEE2\uFE0F\",\n    \"\uD83D\uDEE3\uFE0F\",\n    \"\uD83D\uDEE4\uFE0F\",\n    \"\uD83D\uDEE5\uFE0F\",\n    \"\uD83D\uDEE9\uFE0F\",\n    \"\uD83D\uDEEB\",\n    \"\uD83D\uDEEC\",\n    \"\uD83D\uDEF0\uFE0F\",\n    \"\uD83D\uDEF3\uFE0F\",\n    \"\uD83D\uDEF4\",\n    \"\uD83D\uDEF5\",\n    \"\uD83D\uDEF6\",\n    \"\uD83D\uDEF8\",\n    \"\uD83D\uDEF9\",\n    \"\uD83D\uDEFA\",\n    \"\uD83D\uDEFB\",\n    \"\uD83D\uDEFC\",\n    \"\uD83E\uDDBC\",\n    \"\uD83E\uDDBD\",\n    \"\uD83E\uDE82\"\n  ],\n  \"Places\": [\n    \"\u2668\uFE0F\",\n    \"\u26E9\uFE0F\",\n    \"\u26EA\",\n    \"\u26F0\uFE0F\",\n    \"\u26F2\",\n    \"\u26FA\",\n    \"\uD83C\uDF01\",\n    \"\uD83C\uDF03\",\n    \"\uD83C\uDF04\",\n    \"\uD83C\uDF05\",\n    \"\uD83C\uDF06\",\n    \"\uD83C\uDF07\",\n    \"\uD83C\uDF09\",\n    \"\uD83C\uDF0B\",\n    \"\uD83C\uDF0D\",\n    \"\uD83C\uDF0E\",\n    \"\uD83C\uDF0F\",\n    \"\uD83C\uDF10\",\n    \"\uD83C\uDFA0\",\n    \"\uD83C\uDFA1\",\n    \"\uD83C\uDFA2\",\n    \"\uD83C\uDFAA\",\n    \"\uD83C\uDFD4\uFE0F\",\n    \"\uD83C\uDFD5\uFE0F\",\n    \"\uD83C\uDFD6\uFE0F\",\n    \"\uD83C\uDFD7\uFE0F\",\n    \"\uD83C\uDFD8\uFE0F\",\n    \"\uD83C\uDFD9\uFE0F\",\n    \"\uD83C\uDFDA\uFE0F\",\n    \"\uD83C\uDFDB\uFE0F\",\n    \"\uD83C\uDFDC\uFE0F\",\n    \"\uD83C\uDFDD\uFE0F\",\n    \"\uD83C\uDFDE\uFE0F\",\n    \"\uD83C\uDFDF\uFE0F\",\n    \"\uD83C\uDFE0\",\n    \"\uD83C\uDFE1\",\n    \"\uD83C\uDFE2\",\n    \"\uD83C\uDFE3\",\n    \"\uD83C\uDFE4\",\n    \"\uD83C\uDFE5\",\n    \"\uD83C\uDFE6\",\n    \"\uD83C\uDFE8\",\n    \"\uD83C\uDFE9\",\n    \"\uD83C\uDFEA\",\n    \"\uD83C\uDFEB\",\n    \"\uD83C\uDFEC\",\n    \"\uD83C\uDFED\",\n    \"\uD83C\uDFEF\",\n    \"\uD83C\uDFF0\",\n    \"\uD83D\uDC88\",\n    \"\uD83D\uDC92\",\n    \"\uD83D\uDD4B\",\n    \"\uD83D\uDD4C\",\n    \"\uD83D\uDD4D\",\n    \"\uD83D\uDDFA\uFE0F\",\n    \"\uD83D\uDDFB\",\n    \"\uD83D\uDDFC\",\n    \"\uD83D\uDDFD\",\n    \"\uD83D\uDDFE\",\n    \"\uD83D\uDED5\",\n    \"\uD83D\uDED6\",\n    \"\uD83D\uDEDD\",\n    \"\uD83E\uDDED\",\n    \"\uD83E\uDDF1\",\n    \"\uD83E\uDEA8\",\n    \"\uD83E\uDEB5\"\n  ],\n  \"Activities\": [\n    \"\u265F\uFE0F\",\n    \"\u2660\uFE0F\",\n    \"\u2663\uFE0F\",\n    \"\u2665\uFE0F\",\n    \"\u2666\uFE0F\",\n    \"\u26BD\",\n    \"\u26BE\",\n    \"\u26F3\",\n    \"\u26F8\uFE0F\",\n    \"\u2728\",\n    \"\uD83C\uDC04\",\n    \"\uD83C\uDCCF\",\n    \"\uD83C\uDF80\",\n    \"\uD83C\uDF81\",\n    \"\uD83C\uDF83\",\n    \"\uD83C\uDF84\",\n    \"\uD83C\uDF86\",\n    \"\uD83C\uDF87\",\n    \"\uD83C\uDF88\",\n    \"\uD83C\uDF89\",\n    \"\uD83C\uDF8A\",\n    \"\uD83C\uDF8B\",\n    \"\uD83C\uDF8D\",\n    \"\uD83C\uDF8E\",\n    \"\uD83C\uDF8F\",\n    \"\uD83C\uDF90\",\n    \"\uD83C\uDF91\",\n    \"\uD83C\uDF96\uFE0F\",\n    \"\uD83C\uDF97\uFE0F\",\n    \"\uD83C\uDF9F\uFE0F\",\n    \"\uD83C\uDFA3\",\n    \"\uD83C\uDFAB\",\n    \"\uD83C\uDFAE\",\n    \"\uD83C\uDFAF\",\n    \"\uD83C\uDFB0\",\n    \"\uD83C\uDFB1\",\n    \"\uD83C\uDFB2\",\n    \"\uD83C\uDFB3\",\n    \"\uD83C\uDFB4\",\n    \"\uD83C\uDFBD\",\n    \"\uD83C\uDFBE\",\n    \"\uD83C\uDFBF\",\n    \"\uD83C\uDFC0\",\n    \"\uD83C\uDFC5\",\n    \"\uD83C\uDFC6\",\n    \"\uD83C\uDFC8\",\n    \"\uD83C\uDFC9\",\n    \"\uD83C\uDFCF\",\n    \"\uD83C\uDFD0\",\n    \"\uD83C\uDFD1\",\n    \"\uD83C\uDFD2\",\n    \"\uD83C\uDFD3\",\n    \"\uD83C\uDFF8\",\n    \"\uD83D\uDD2B\",\n    \"\uD83D\uDD2E\",\n    \"\uD83D\uDD79\uFE0F\",\n    \"\uD83D\uDEF7\",\n    \"\uD83E\uDD3F\",\n    \"\uD83E\uDD45\",\n    \"\uD83E\uDD47\",\n    \"\uD83E\uDD48\",\n    \"\uD83E\uDD49\",\n    \"\uD83E\uDD4A\",\n    \"\uD83E\uDD4B\",\n    \"\uD83E\uDD4C\",\n    \"\uD83E\uDD4D\",\n    \"\uD83E\uDD4E\",\n    \"\uD83E\uDD4F\",\n    \"\uD83E\uDDE7\",\n    \"\uD83E\uDDE8\",\n    \"\uD83E\uDDE9\",\n    \"\uD83E\uDDF8\",\n    \"\uD83E\uDE80\",\n    \"\uD83E\uDE81\",\n    \"\uD83E\uDE84\",\n    \"\uD83E\uDE85\",\n    \"\uD83E\uDE86\",\n    \"\uD83E\uDEA9\"\n  ],\n  \"Flags\": [\n    \"\uD83C\uDDE6\uD83C\uDDE8\",\n    \"\uD83C\uDDE6\uD83C\uDDE9\",\n    \"\uD83C\uDDE6\uD83C\uDDEA\",\n    \"\uD83C\uDDE6\uD83C\uDDEB\",\n    \"\uD83C\uDDE6\uD83C\uDDEC\",\n    \"\uD83C\uDDE6\uD83C\uDDEE\",\n    \"\uD83C\uDDE6\uD83C\uDDF1\",\n    \"\uD83C\uDDE6\uD83C\uDDF2\",\n    \"\uD83C\uDDE6\uD83C\uDDF4\",\n    \"\uD83C\uDDE6\uD83C\uDDF6\",\n    \"\uD83C\uDDE6\uD83C\uDDF7\",\n    \"\uD83C\uDDE6\uD83C\uDDF8\",\n    \"\uD83C\uDDE6\uD83C\uDDF9\",\n    \"\uD83C\uDDE6\uD83C\uDDFA\",\n    \"\uD83C\uDDE6\uD83C\uDDFC\",\n    \"\uD83C\uDDE6\uD83C\uDDFD\",\n    \"\uD83C\uDDE6\uD83C\uDDFF\",\n    \"\uD83C\uDDE7\uD83C\uDDE6\",\n    \"\uD83C\uDDE7\uD83C\uDDE7\",\n    \"\uD83C\uDDE7\uD83C\uDDE9\",\n    \"\uD83C\uDDE7\uD83C\uDDEA\",\n    \"\uD83C\uDDE7\uD83C\uDDEB\",\n    \"\uD83C\uDDE7\uD83C\uDDEC\",\n    \"\uD83C\uDDE7\uD83C\uDDED\",\n    \"\uD83C\uDDE7\uD83C\uDDEE\",\n    \"\uD83C\uDDE7\uD83C\uDDEF\",\n    \"\uD83C\uDDE7\uD83C\uDDF1\",\n    \"\uD83C\uDDE7\uD83C\uDDF2\",\n    \"\uD83C\uDDE7\uD83C\uDDF3\",\n    \"\uD83C\uDDE7\uD83C\uDDF4\",\n    \"\uD83C\uDDE7\uD83C\uDDF6\",\n    \"\uD83C\uDDE7\uD83C\uDDF7\",\n    \"\uD83C\uDDE7\uD83C\uDDF8\",\n    \"\uD83C\uDDE7\uD83C\uDDF9\",\n    \"\uD83C\uDDE7\uD83C\uDDFB\",\n    \"\uD83C\uDDE7\uD83C\uDDFC\",\n    \"\uD83C\uDDE7\uD83C\uDDFE\",\n    \"\uD83C\uDDE7\uD83C\uDDFF\",\n    \"\uD83C\uDDE8\uD83C\uDDE6\",\n    \"\uD83C\uDDE8\uD83C\uDDE8\",\n    \"\uD83C\uDDE8\uD83C\uDDE9\",\n    \"\uD83C\uDDE8\uD83C\uDDEB\",\n    \"\uD83C\uDDE8\uD83C\uDDEC\",\n    \"\uD83C\uDDE8\uD83C\uDDED\",\n    \"\uD83C\uDDE8\uD83C\uDDEE\",\n    \"\uD83C\uDDE8\uD83C\uDDF0\",\n    \"\uD83C\uDDE8\uD83C\uDDF1\",\n    \"\uD83C\uDDE8\uD83C\uDDF2\",\n    \"\uD83C\uDDE8\uD83C\uDDF3\",\n    \"\uD83C\uDDE8\uD83C\uDDF4\",\n    \"\uD83C\uDDE8\uD83C\uDDF5\",\n    \"\uD83C\uDDE8\uD83C\uDDF6\",\n    \"\uD83C\uDDE8\uD83C\uDDF7\",\n    \"\uD83C\uDDE8\uD83C\uDDFA\",\n    \"\uD83C\uDDE8\uD83C\uDDFB\",\n    \"\uD83C\uDDE8\uD83C\uDDFC\",\n    \"\uD83C\uDDE8\uD83C\uDDFD\",\n    \"\uD83C\uDDE8\uD83C\uDDFE\",\n    \"\uD83C\uDDE8\uD83C\uDDFF\",\n    \"\uD83C\uDDE9\uD83C\uDDEA\",\n    \"\uD83C\uDDE9\uD83C\uDDEC\",\n    \"\uD83C\uDDE9\uD83C\uDDEF\",\n    \"\uD83C\uDDE9\uD83C\uDDF0\",\n    \"\uD83C\uDDE9\uD83C\uDDF2\",\n    \"\uD83C\uDDE9\uD83C\uDDF4\",\n    \"\uD83C\uDDE9\uD83C\uDDFF\",\n    \"\uD83C\uDDEA\uD83C\uDDE6\",\n    \"\uD83C\uDDEA\uD83C\uDDE8\",\n    \"\uD83C\uDDEA\uD83C\uDDEA\",\n    \"\uD83C\uDDEA\uD83C\uDDEC\",\n    \"\uD83C\uDDEA\uD83C\uDDED\",\n    \"\uD83C\uDDEA\uD83C\uDDF7\",\n    \"\uD83C\uDDEA\uD83C\uDDF8\",\n    \"\uD83C\uDDEA\uD83C\uDDF9\",\n    \"\uD83C\uDDEA\uD83C\uDDFA\",\n    \"\uD83C\uDDEB\uD83C\uDDEE\",\n    \"\uD83C\uDDEB\uD83C\uDDEF\",\n    \"\uD83C\uDDEB\uD83C\uDDF0\",\n    \"\uD83C\uDDEB\uD83C\uDDF2\",\n    \"\uD83C\uDDEB\uD83C\uDDF4\",\n    \"\uD83C\uDDEB\uD83C\uDDF7\",\n    \"\uD83C\uDDEC\uD83C\uDDE6\",\n    \"\uD83C\uDDEC\uD83C\uDDE7\",\n    \"\uD83C\uDDEC\uD83C\uDDE9\",\n    \"\uD83C\uDDEC\uD83C\uDDEA\",\n    \"\uD83C\uDDEC\uD83C\uDDEB\",\n    \"\uD83C\uDDEC\uD83C\uDDEC\",\n    \"\uD83C\uDDEC\uD83C\uDDED\",\n    \"\uD83C\uDDEC\uD83C\uDDEE\",\n    \"\uD83C\uDDEC\uD83C\uDDF1\",\n    \"\uD83C\uDDEC\uD83C\uDDF2\",\n    \"\uD83C\uDDEC\uD83C\uDDF3\",\n    \"\uD83C\uDDEC\uD83C\uDDF5\",\n    \"\uD83C\uDDEC\uD83C\uDDF6\",\n    \"\uD83C\uDDEC\uD83C\uDDF7\",\n    \"\uD83C\uDDEC\uD83C\uDDF8\",\n    \"\uD83C\uDDEC\uD83C\uDDF9\",\n    \"\uD83C\uDDEC\uD83C\uDDFA\",\n    \"\uD83C\uDDEC\uD83C\uDDFC\",\n    \"\uD83C\uDDEC\uD83C\uDDFE\",\n    \"\uD83C\uDDED\uD83C\uDDF0\",\n    \"\uD83C\uDDED\uD83C\uDDF2\",\n    \"\uD83C\uDDED\uD83C\uDDF3\",\n    \"\uD83C\uDDED\uD83C\uDDF7\",\n    \"\uD83C\uDDED\uD83C\uDDF9\",\n    \"\uD83C\uDDED\uD83C\uDDFA\",\n    \"\uD83C\uDDEE\uD83C\uDDE8\",\n    \"\uD83C\uDDEE\uD83C\uDDE9\",\n    \"\uD83C\uDDEE\uD83C\uDDEA\",\n    \"\uD83C\uDDEE\uD83C\uDDF1\",\n    \"\uD83C\uDDEE\uD83C\uDDF2\",\n    \"\uD83C\uDDEE\uD83C\uDDF3\",\n    \"\uD83C\uDDEE\uD83C\uDDF4\",\n    \"\uD83C\uDDEE\uD83C\uDDF6\",\n    \"\uD83C\uDDEE\uD83C\uDDF7\",\n    \"\uD83C\uDDEE\uD83C\uDDF8\",\n    \"\uD83C\uDDEE\uD83C\uDDF9\",\n    \"\uD83C\uDDEF\uD83C\uDDEA\",\n    \"\uD83C\uDDEF\uD83C\uDDF2\",\n    \"\uD83C\uDDEF\uD83C\uDDF4\",\n    \"\uD83C\uDDEF\uD83C\uDDF5\",\n    \"\uD83C\uDDF0\uD83C\uDDEA\",\n    \"\uD83C\uDDF0\uD83C\uDDEC\",\n    \"\uD83C\uDDF0\uD83C\uDDED\",\n    \"\uD83C\uDDF0\uD83C\uDDEE\",\n    \"\uD83C\uDDF0\uD83C\uDDF2\",\n    \"\uD83C\uDDF0\uD83C\uDDF3\",\n    \"\uD83C\uDDF0\uD83C\uDDF5\",\n    \"\uD83C\uDDF0\uD83C\uDDF7\",\n    \"\uD83C\uDDF0\uD83C\uDDFC\",\n    \"\uD83C\uDDF0\uD83C\uDDFE\",\n    \"\uD83C\uDDF0\uD83C\uDDFF\",\n    \"\uD83C\uDDF1\uD83C\uDDE6\",\n    \"\uD83C\uDDF1\uD83C\uDDE7\",\n    \"\uD83C\uDDF1\uD83C\uDDE8\",\n    \"\uD83C\uDDF1\uD83C\uDDEE\",\n    \"\uD83C\uDDF1\uD83C\uDDF0\",\n    \"\uD83C\uDDF1\uD83C\uDDF7\",\n    \"\uD83C\uDDF1\uD83C\uDDF8\",\n    \"\uD83C\uDDF1\uD83C\uDDF9\",\n    \"\uD83C\uDDF1\uD83C\uDDFA\",\n    \"\uD83C\uDDF1\uD83C\uDDFB\",\n    \"\uD83C\uDDF1\uD83C\uDDFE\",\n    \"\uD83C\uDDF2\uD83C\uDDE6\",\n    \"\uD83C\uDDF2\uD83C\uDDE8\",\n    \"\uD83C\uDDF2\uD83C\uDDE9\",\n    \"\uD83C\uDDF2\uD83C\uDDEA\",\n    \"\uD83C\uDDF2\uD83C\uDDEB\",\n    \"\uD83C\uDDF2\uD83C\uDDEC\",\n    \"\uD83C\uDDF2\uD83C\uDDED\",\n    \"\uD83C\uDDF2\uD83C\uDDF0\",\n    \"\uD83C\uDDF2\uD83C\uDDF1\",\n    \"\uD83C\uDDF2\uD83C\uDDF2\",\n    \"\uD83C\uDDF2\uD83C\uDDF3\",\n    \"\uD83C\uDDF2\uD83C\uDDF4\",\n    \"\uD83C\uDDF2\uD83C\uDDF5\",\n    \"\uD83C\uDDF2\uD83C\uDDF6\",\n    \"\uD83C\uDDF2\uD83C\uDDF7\",\n    \"\uD83C\uDDF2\uD83C\uDDF8\",\n    \"\uD83C\uDDF2\uD83C\uDDF9\",\n    \"\uD83C\uDDF2\uD83C\uDDFA\",\n    \"\uD83C\uDDF2\uD83C\uDDFB\",\n    \"\uD83C\uDDF2\uD83C\uDDFC\",\n    \"\uD83C\uDDF2\uD83C\uDDFD\",\n    \"\uD83C\uDDF2\uD83C\uDDFE\",\n    \"\uD83C\uDDF2\uD83C\uDDFF\",\n    \"\uD83C\uDDF3\uD83C\uDDE6\",\n    \"\uD83C\uDDF3\uD83C\uDDE8\",\n    \"\uD83C\uDDF3\uD83C\uDDEA\",\n    \"\uD83C\uDDF3\uD83C\uDDEB\",\n    \"\uD83C\uDDF3\uD83C\uDDEC\",\n    \"\uD83C\uDDF3\uD83C\uDDEE\",\n    \"\uD83C\uDDF3\uD83C\uDDF1\",\n    \"\uD83C\uDDF3\uD83C\uDDF4\",\n    \"\uD83C\uDDF3\uD83C\uDDF5\",\n    \"\uD83C\uDDF3\uD83C\uDDF7\",\n    \"\uD83C\uDDF3\uD83C\uDDFA\",\n    \"\uD83C\uDDF3\uD83C\uDDFF\",\n    \"\uD83C\uDDF4\uD83C\uDDF2\",\n    \"\uD83C\uDDF5\uD83C\uDDE6\",\n    \"\uD83C\uDDF5\uD83C\uDDEA\",\n    \"\uD83C\uDDF5\uD83C\uDDEB\",\n    \"\uD83C\uDDF5\uD83C\uDDEC\",\n    \"\uD83C\uDDF5\uD83C\uDDED\",\n    \"\uD83C\uDDF5\uD83C\uDDF0\",\n    \"\uD83C\uDDF5\uD83C\uDDF1\",\n    \"\uD83C\uDDF5\uD83C\uDDF2\",\n    \"\uD83C\uDDF5\uD83C\uDDF3\",\n    \"\uD83C\uDDF5\uD83C\uDDF7\",\n    \"\uD83C\uDDF5\uD83C\uDDF8\",\n    \"\uD83C\uDDF5\uD83C\uDDF9\",\n    \"\uD83C\uDDF5\uD83C\uDDFC\",\n    \"\uD83C\uDDF5\uD83C\uDDFE\",\n    \"\uD83C\uDDF6\uD83C\uDDE6\",\n    \"\uD83C\uDDF7\uD83C\uDDEA\",\n    \"\uD83C\uDDF7\uD83C\uDDF4\",\n    \"\uD83C\uDDF7\uD83C\uDDF8\",\n    \"\uD83C\uDDF7\uD83C\uDDFA\",\n    \"\uD83C\uDDF7\uD83C\uDDFC\",\n    \"\uD83C\uDDF8\uD83C\uDDE6\",\n    \"\uD83C\uDDF8\uD83C\uDDE7\",\n    \"\uD83C\uDDF8\uD83C\uDDE8\",\n    \"\uD83C\uDDF8\uD83C\uDDE9\",\n    \"\uD83C\uDDF8\uD83C\uDDEA\",\n    \"\uD83C\uDDF8\uD83C\uDDEC\",\n    \"\uD83C\uDDF8\uD83C\uDDED\",\n    \"\uD83C\uDDF8\uD83C\uDDEE\",\n    \"\uD83C\uDDF8\uD83C\uDDEF\",\n    \"\uD83C\uDDF8\uD83C\uDDF0\",\n    \"\uD83C\uDDF8\uD83C\uDDF1\",\n    \"\uD83C\uDDF8\uD83C\uDDF2\",\n    \"\uD83C\uDDF8\uD83C\uDDF3\",\n    \"\uD83C\uDDF8\uD83C\uDDF4\",\n    \"\uD83C\uDDF8\uD83C\uDDF7\",\n    \"\uD83C\uDDF8\uD83C\uDDF8\",\n    \"\uD83C\uDDF8\uD83C\uDDF9\",\n    \"\uD83C\uDDF8\uD83C\uDDFB\",\n    \"\uD83C\uDDF8\uD83C\uDDFD\",\n    \"\uD83C\uDDF8\uD83C\uDDFE\",\n    \"\uD83C\uDDF8\uD83C\uDDFF\",\n    \"\uD83C\uDDF9\uD83C\uDDE6\",\n    \"\uD83C\uDDF9\uD83C\uDDE8\",\n    \"\uD83C\uDDF9\uD83C\uDDE9\",\n    \"\uD83C\uDDF9\uD83C\uDDEB\",\n    \"\uD83C\uDDF9\uD83C\uDDEC\",\n    \"\uD83C\uDDF9\uD83C\uDDED\",\n    \"\uD83C\uDDF9\uD83C\uDDEF\",\n    \"\uD83C\uDDF9\uD83C\uDDF0\",\n    \"\uD83C\uDDF9\uD83C\uDDF1\",\n    \"\uD83C\uDDF9\uD83C\uDDF2\",\n    \"\uD83C\uDDF9\uD83C\uDDF3\",\n    \"\uD83C\uDDF9\uD83C\uDDF4\",\n    \"\uD83C\uDDF9\uD83C\uDDF7\",\n    \"\uD83C\uDDF9\uD83C\uDDF9\",\n    \"\uD83C\uDDF9\uD83C\uDDFB\",\n    \"\uD83C\uDDF9\uD83C\uDDFC\",\n    \"\uD83C\uDDF9\uD83C\uDDFF\",\n    \"\uD83C\uDDFA\uD83C\uDDE6\",\n    \"\uD83C\uDDFA\uD83C\uDDEC\",\n    \"\uD83C\uDDFA\uD83C\uDDF2\",\n    \"\uD83C\uDDFA\uD83C\uDDF3\",\n    \"\uD83C\uDDFA\uD83C\uDDF8\",\n    \"\uD83C\uDDFA\uD83C\uDDFE\",\n    \"\uD83C\uDDFA\uD83C\uDDFF\",\n    \"\uD83C\uDDFB\uD83C\uDDE6\",\n    \"\uD83C\uDDFB\uD83C\uDDE8\",\n    \"\uD83C\uDDFB\uD83C\uDDEA\",\n    \"\uD83C\uDDFB\uD83C\uDDEC\",\n    \"\uD83C\uDDFB\uD83C\uDDEE\",\n    \"\uD83C\uDDFB\uD83C\uDDF3\",\n    \"\uD83C\uDDFB\uD83C\uDDFA\",\n    \"\uD83C\uDDFC\uD83C\uDDEB\",\n    \"\uD83C\uDDFC\uD83C\uDDF8\",\n    \"\uD83C\uDDFD\uD83C\uDDF0\",\n    \"\uD83C\uDDFE\uD83C\uDDEA\",\n    \"\uD83C\uDDFE\uD83C\uDDF9\",\n    \"\uD83C\uDDFF\uD83C\uDDE6\",\n    \"\uD83C\uDDFF\uD83C\uDDF2\",\n    \"\uD83C\uDDFF\uD83C\uDDFC\",\n    \"\uD83C\uDF8C\",\n    \"\uD83C\uDFC1\",\n    \"\uD83C\uDFF3\uFE0F\",\n    \"\uD83C\uDFF3\uFE0F\u200D\u26A7\uFE0F\",\n    \"\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08\",\n    \"\uD83C\uDFF4\",\n    \"\uD83C\uDFF4\u200D\u2620\uFE0F\",\n    \"\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67\uDB40\uDC7F\",\n    \"\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74\uDB40\uDC7F\",\n    \"\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73\uDB40\uDC7F\",\n    \"\uD83D\uDEA9\"\n  ],\n  \"Games\": []\n}", "import { LoadItemChange, CreateFolderChange, DeleteItemChange, SaveEntityItemChange, RenameItemChange, RenameFolderChange, RemoveFolderChange, MoveItemDirectoryChange, CreateScriptItemChange, EditScriptItemChange} from '../../change-types.js';\nimport { emojiCategories } from './emoji_categories.js';\n\n/**\n * InventoryUI - Handles all UI rendering, preview, drag-drop, and modal functions\n */\nexport class InventoryUI {\n    constructor(inventory) {\n        this.inventory = inventory;\n        this.container = inventory.container;\n        this.previewPane = inventory.previewPane;\n        this.containerEventListenerAdded = false;\n\n    }\n\n    /**\n     * Main render function\n     */\n    async render() {\n        // Check remote status\n        await this.inventory.firebase.checkRemoteStatus();\n        const inventoryContainer = this.container.querySelector('.inventory-container');\n        \n        // Show empty preview if no item is selected\n        if (!this.inventory.selectedItem && this.previewPane) {\n            this.showEmptyPreview();\n        }\n        \n        if (Object.keys(this.inventory.items).length === 0 && Object.keys(this.inventory.folders).length === 0) {\n            this.renderEmptyState(inventoryContainer);    \n            return;\n        }\n        \n        const totalItems = Object.keys(this.inventory.items).length;\n        const folderPath = this.inventory.getCurrentFolderPath();\n        let makeRemoteBtn = this.renderMakeRemoteBtn();\n        inventoryContainer.innerHTML = `\n            <div class=\"inventory-header\">\n                <h2>${folderPath ? `\uD83D\uDCC1 ${folderPath}` : `Saved Items (${totalItems})`}</h2>\n                <div class=\"inventory-sorting\">\n                    <select id=\"sortDropdown\" class=\"sort-dropdown\">\n                        <option value=\"alphabetical\" ${this.inventory.sortBy === 'alphabetical' ? 'selected' : ''}>Alphabetical</option>\n                        <option value=\"date\" ${this.inventory.sortBy === 'date' ? 'selected' : ''}>Creation Date</option>\n                        <option value=\"last_used\" ${this.inventory.sortBy === 'last_used' ? 'selected' : ''}>Last Used</option>\n                    </select>\n                    <button id=\"sortDirectionBtn\" class=\"sort-direction-btn\" title=\"${this.inventory.sortDirection === 'asc' ? 'Ascending' : 'Descending'}\">\n                        ${this.inventory.sortDirection === 'asc' ? '\u2191' : '\u2193'}\n                    </button>\n                </div>\n                <div class=\"inventory-actions\">\n                    ${this.inventory.selectedItem ? `\n                        <button class=\"export-button\" id=\"exportBtn\">\n                            <span class=\"export-icon\">\u2B06\uFE0F</span>\n                            Export\n                        </button>\n                    ` : ''}\n                    <button class=\"new-folder-button\" id=\"newFolderBtn\">\n                        <span class=\"folder-icon\">\uD83D\uDCC1</span>\n                        New Folder\n                    </button>\n                    <button class=\"new-script-button\" id=\"newScriptBtn\">\n                        <span class=\"new-icon\">\uD83D\uDCDC</span>\n                        New Script\n                    </button>\n                    <button class=\"upload-button\" id=\"uploadFileBtn\">\n                        <span class=\"upload-icon\">\u2B07\uFE0F</span>\n                        Import\n                    </button>\n                    <button class=\"import-firebase-button\" id=\"importFirebaseBtn\" title=\"Import from Firebase\">\n                        <span class=\"import-firebase-icon\">\u2601\uFE0F\u2B07\uFE0F</span>\n                        Import Remote\n                    </button>\n                    ${makeRemoteBtn}\n                    <input type=\"file\" id=\"fileInput\" accept=\".js,.md,.json,.png,.jpg,.jpeg,.bmp,.gif\" style=\"display: none;\">\n                </div>\n            </div>\n            ${this.inventory.currentFolder ? `\n                <div class=\"folder-breadcrumb\">\n                    <span class=\"breadcrumb-item\" data-folder=\"\">Home</span>\n                    ${this.renderBreadcrumb()}\n                </div>\n            ` : ''}\n            <div class=\"inventory-grid\">\n                ${this.renderFoldersAndItems()}\n            </div>\n        `;\n        \n        \n        // Add event listeners\n        this.attachEventListeners(inventoryContainer);\n    }\n\n    trailName(name){\n        if(name.length > 15){\n            return name.slice(0, 14) + \"...\";\n        }\n        return name;\n    }\n\n    renderMakeRemoteBtn(){\n        if(!this.inventory.currentFolder){\n            return ``;\n        }\n\n        if(this.inventory.isRemote){\n            return `<button class=\"make-remote-button remote-status\" id=\"remoteStatusBtn\" disabled>\n                <span class=\"remote-icon\">\u2601\uFE0F</span>\n                Remote\n            </button>\n            <button class=\"force-sync-button\" id=\"forceSyncBtn\" title=\"Force sync all items to Firebase\">\n                <span class=\"sync-icon\">\uD83D\uDD04</span>\n                Force Sync\n            </button>\n            <button class=\"link-button\" id=\"copyLinkBtn\" title=\"Copy Firebase path\">\n                <span class=\"link-icon\">\uD83D\uDD17</span>\n            </button>`\n        }\n\n        return `\n            <button class=\"make-remote-button\" id=\"makeRemoteBtn\">\n                <span class=\"remote-icon\">\u2601\uFE0F</span>\n                Make Remote\n            </button>\n        `\n    }\n\n\n\n    renderEmptyState(inventoryContainer) {\n            inventoryContainer.innerHTML = `\n            <div class=\"inventory-header\">\n                <h2>Saved Items (0)</h2>\n                <div class=\"inventory-sorting\">\n                    <select id=\"sortDropdown\" class=\"sort-dropdown\">\n                        <option value=\"alphabetical\" ${this.inventory.sortBy === 'alphabetical' ? 'selected' : ''}>Alphabetical</option>\n                        <option value=\"date\" ${this.inventory.sortBy === 'date' ? 'selected' : ''}>Creation Date</option>\n                        <option value=\"last_used\" ${this.inventory.sortBy === 'last_used' ? 'selected' : ''}>Last Used</option>\n                    </select>\n                    <button id=\"sortDirectionBtn\" class=\"sort-direction-btn\" title=\"${this.inventory.sortDirection === 'asc' ? 'Ascending' : 'Descending'}\">\n                        ${this.inventory.sortDirection === 'asc' ? '\u2191' : '\u2193'}\n                    </button>\n                </div>\n                <div class=\"inventory-actions\">\n                    <button class=\"upload-button\" id=\"uploadFileBtn\">\n                        <span class=\"upload-icon\">\u2B07\uFE0F</span>\n                        Import\n                    </button>\n                    <input type=\"file\" id=\"fileInput\" accept=\".js,.md,.json,.png,.jpg,.jpeg,.bmp,.gif\" style=\"display: none;\">\n                </div>\n            </div>\n            <div class=\"inventory-empty\">\n                <div class=\"empty-icon\">\uD83D\uDCE6</div>\n                <h3>Your inventory is empty</h3>\n                <p>Drag entities from the World Inspector or upload files to save them here</p>\n            </div>\n        `;\n        \n        // Add event listeners for file upload even in empty state\n        const uploadBtn = inventoryContainer.querySelector('#uploadFileBtn');\n        const fileInput = inventoryContainer.querySelector('#fileInput');\n        const sortDropdown = inventoryContainer.querySelector('#sortDropdown');\n        const newFolderBtn = inventoryContainer.querySelector('#newFolderBtn');\n        const sortDirectionBtn = inventoryContainer.querySelector('#sortDirectionBtn');\n        \n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('mousedown', () => fileInput.click());\n            fileInput.addEventListener('change', (e) => this.inventory.fileHandler.handleFileUpload(e));\n        }\n\n        if (newFolderBtn) {\n            newFolderBtn.addEventListener('mousedown', () => this.createNewFolder());\n        }\n        \n        if (sortDropdown) {\n            sortDropdown.addEventListener('change', (e) => {\n                this.inventory.sortBy = e.target.value;\n                this.render();\n            });\n        }\n        \n        if (sortDirectionBtn) {\n            sortDirectionBtn.addEventListener('mousedown', () => {\n                this.inventory.sortDirection = this.inventory.sortDirection === 'asc' ? 'desc' : 'asc';\n                this.render();\n            });\n        }\n    }\n\n    /**\n     * Attach event listeners to rendered elements\n     */\n    attachEventListeners(container) {\n        // Sort controls\n        const sortDropdown = container.querySelector('#sortDropdown');\n        const sortDirectionBtn = container.querySelector('#sortDirectionBtn');\n        const inventoryContainer = this.container.querySelector('.inventory-container');\n\n        // Add click handler to inventory container for deselecting items - only once\n        if (!this.containerEventListenerAdded && inventoryContainer) {\n            this.containerEventListenerAdded = true;\n            inventoryContainer.addEventListener('mousedown', (e) => {\n                // Check if click is on empty space (not on items, folders, or buttons)\n                const clickedOnItem = e.target.closest('.inventory-item');\n                const clickedOnFolder = e.target.closest('.folder-item');\n                const clickedOnButton = e.target.closest('button');\n                const clickedOnInput = e.target.closest('input, select');\n                const clickedOnBreadcrumb = e.target.closest('.folder-breadcrumb');\n                const clickedOnPreviewPane = e.target.closest('.inventory-preview-pane')\n                // Removed debug log that was firing multiple times\n                if (!clickedOnItem && !clickedOnFolder && !clickedOnButton && !clickedOnInput && !clickedOnBreadcrumb && !clickedOnPreviewPane) {\n                    // Clicked on empty space - deselect item\n                    if (this.inventory.selectedItem) {\n                        this.inventory.selectedItem = null;\n                        this.showEmptyPreview();\n                        this.render();\n                    }\n                }\n            });\n        }\n\n        \n        if (sortDropdown) {\n            sortDropdown.addEventListener('change', (e) => {\n                this.inventory.sortBy = e.target.value;\n                this.render();\n            });\n        }\n        \n        if (sortDirectionBtn) {\n            sortDirectionBtn.addEventListener('mousedown', () => {\n                this.inventory.sortDirection = this.inventory.sortDirection === 'asc' ? 'desc' : 'asc';\n                this.render();\n            });\n        }\n        \n        // Breadcrumb navigation\n        inventoryContainer.querySelectorAll('.breadcrumb-item').forEach(item => {\n            item.addEventListener('mousedown', () => {\n                const folder = item.dataset.folder;\n                this.inventory.navigateToFolder(folder);\n            });\n        });\n\n        // Folder operations\n        \n        // Add event listeners for inventory items\n        inventoryContainer.querySelectorAll('.inventory-item').forEach(item => {\n            item.addEventListener('mousedown', (e) => {\n                if (!e.target.closest('.remove-item-btn') && !e.target.closest('.action-btn')) {\n                    this.inventory.selectItem(item.dataset.itemName);\n                }\n            });\n        });\n        \n        // Add event listeners for remove buttons\n        inventoryContainer.querySelectorAll('.remove-item-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                this.inventory.removeItem(itemName);\n            });\n        });\n        \n        // Add event listeners for remove folder buttons\n        inventoryContainer.querySelectorAll('.remove-folder-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const folderName = btn.dataset.folderName;\n                this.inventory.removeFolder(folderName);\n            });\n        });\n        \n        // Add event listeners for edit script buttons\n        inventoryContainer.querySelectorAll('.edit-script-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                const item = this.inventory.items[itemName];\n                if (item && item.itemType === 'markdown') {\n                    this.inventory.openMarkdownEditor(itemName);\n                } else {\n                    this.inventory.openScriptEditor(itemName);\n                }\n            });\n        });\n\n        // Add event listeners for load script buttons\n        inventoryContainer.querySelectorAll('.load-script-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                window.LoadScript(itemName);\n            });\n        });\n\n        // Add event listeners for add to scene buttons\n        inventoryContainer.querySelectorAll('.add-to-scene-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                this.inventory.loadEntityToSceneByName(itemName);\n            });\n        });\n        \n        // Add event listeners for view image buttons\n        inventoryContainer.querySelectorAll('.view-image-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                this.inventory.selectItem(itemName);\n            });\n        });\n        \n        // Add event listeners for copy URL buttons\n        inventoryContainer.querySelectorAll('.copy-url-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                const item = this.inventory.items[itemName];\n                if (item && item.itemType === 'image' && item.data.url) {\n                    navigator.clipboard.writeText(item.data.url).then(() => {\n                        showNotification('Image URL copied to clipboard');\n                    }).catch(err => {\n                        console.error('Failed to copy URL:', err);\n                        showNotification('Failed to copy URL');\n                    });\n                }\n            });\n        });\n        \n        // Add event listeners for import folderRef buttons\n        inventoryContainer.querySelectorAll('.import-folderref-btn').forEach(btn => {\n            btn.addEventListener('mousedown', async (e) => {\n                e.stopPropagation();\n                const itemName = btn.dataset.itemName;\n                const folderRef = this.inventory.items[itemName];\n                \n                if (folderRef && folderRef.itemType === 'folderRef' && folderRef.importedFrom) {\n                    btn.disabled = true;\n                    btn.textContent = '\u23F3';\n                    \n                    try {\n                        // Import the actual folder from Firebase\n                        const success = await this.inventory.firebase.importFromFirebase(\n                            folderRef.importedFrom,\n                            folderRef.folder // Import into the same parent folder\n                        );\n                        \n                        if (success) {\n                            // Remove the folderRef item now that it's been imported\n                            delete this.inventory.items[itemName];\n                            localStorage.removeItem(`inventory_${itemName}`);\n                            \n                            // Re-render\n                            this.render();\n                            showNotification(`Imported folder \"${folderRef.name}\"`);\n                        } else {\n                            btn.disabled = false;\n                            btn.textContent = '\uD83D\uDCE5';\n                            showNotification('Failed to import folder');\n                        }\n                    } catch (error) {\n                        console.error('Error importing folderRef:', error);\n                        btn.disabled = false;\n                        btn.textContent = '\uD83D\uDCE5';\n                        showNotification('Error importing folder');\n                    }\n                }\n            });\n        });\n        \n        // Add event listeners for file upload\n        const uploadBtn = inventoryContainer.querySelector('#uploadFileBtn');\n        const fileInput = inventoryContainer.querySelector('#fileInput');\n        \n        if (uploadBtn && fileInput) {\n            uploadBtn.addEventListener('mousedown', () => fileInput.click());\n            fileInput.addEventListener('change', (e) => this.inventory.fileHandler.handleFileUpload(e));\n        }\n        \n        // Add event listener for export button\n        const exportBtn = inventoryContainer.querySelector('#exportBtn');\n        if (exportBtn) {\n            exportBtn.addEventListener('mousedown', () => this.inventory.downloadSelectedItem());\n        }\n        \n        // Add event listener for new script button\n        const newScriptBtn = inventoryContainer.querySelector('#newScriptBtn');\n        if (newScriptBtn) {\n            newScriptBtn.addEventListener('mousedown', () => this.inventory.createNewScript());\n        }\n        \n        // Add event listener for new folder button\n        const newFolderBtn = inventoryContainer.querySelector('#newFolderBtn');\n        if (newFolderBtn) {\n            newFolderBtn.addEventListener('mousedown', () => this.inventory.createNewFolder());\n        }\n        \n        // Add event listener for make remote button\n        const makeRemoteBtn = inventoryContainer.querySelector('#makeRemoteBtn');\n        if (makeRemoteBtn) {\n            makeRemoteBtn.addEventListener('mousedown', () => this.inventory.firebase.makeRemote());\n        }\n        \n        // Add event listener for copy link button\n        const copyLinkBtn = inventoryContainer.querySelector('#copyLinkBtn');\n        if (copyLinkBtn) {\n            copyLinkBtn.addEventListener('mousedown', () => this.inventory.firebase.copyFirebaseRef());\n        }\n\n        // Add event listener for force sync button\n        const forceSyncBtn = inventoryContainer.querySelector('#forceSyncBtn');\n        if (forceSyncBtn) {\n            forceSyncBtn.addEventListener('mousedown', () => this.inventory.firebase.forceSyncAll());\n        }\n\n        // Add event listener for import from Firebase button\n        const importFirebaseBtn = inventoryContainer.querySelector('#importFirebaseBtn');\n        if (importFirebaseBtn) {\n            importFirebaseBtn.addEventListener('mousedown', () => this.showImportFirebaseModal());\n        }\n        \n        // Add event listeners for folder items\n        inventoryContainer.querySelectorAll('.folder-item').forEach(folder => {\n            const folderName = folder.dataset.folderName;\n            \n            // Add drag handlers for the folder itself\n            folder.addEventListener('dragstart', (e) => {\n                e.stopPropagation();\n                this.draggedFolder = folderName;\n                e.dataTransfer.setData('text/inventory-folder', folderName);\n                e.dataTransfer.effectAllowed = 'move';\n                folder.classList.add('dragging');\n            });\n            \n            folder.addEventListener('dragend', (e) => {\n                e.stopPropagation();\n                folder.classList.remove('dragging');\n                this.draggedFolder = null;\n            });\n            \n            // Only add click handler to the folder header, not the entire folder\n            const folderHeader = folder.querySelector('.folder-header');\n            if (folderHeader) {\n                folderHeader.addEventListener('mousedown', (e) => {\n                    if (!e.target.closest('.folder-expand-btn') && !e.target.closest('.remove-folder-btn')) {\n                        const folderName = folder.dataset.folderName;\n                        this.inventory.openFolder(folderName);\n                    }\n                });\n            }\n            \n            // Setup drag and drop for folders - only on the header to avoid conflicts\n            if (folderHeader) {\n                folderHeader.addEventListener('dragover', (e) => {\n                    // Accept both items and folders (but not a folder into itself)\n                    if ((this.draggedItem || this.draggedFolder) && this.draggedFolder !== folderName) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        e.dataTransfer.dropEffect = 'move';\n                        folder.classList.add('drag-over');\n                    }\n                });\n                \n                folderHeader.addEventListener('dragleave', (e) => {\n                    e.stopPropagation();\n                    folder.classList.remove('drag-over');\n                });\n                \n                folderHeader.addEventListener('drop', async(e) => {\n                    if ((this.draggedItem || this.draggedFolder) && this.draggedFolder !== folderName) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        folder.classList.remove('drag-over');\n                        \n                        // Check if we're dropping an item or a folder\n                        const itemName = e.dataTransfer.getData('text/inventory-item');\n                        const draggedFolderName = e.dataTransfer.getData('text/inventory-folder');\n                        \n                        if (itemName) {\n                            await this.inventory.moveItemToFolder(itemName, folderName);\n                        } else if (draggedFolderName) {\n                            await this.inventory.moveFolderToFolder(draggedFolderName, folderName);\n                        }\n                    }\n                });\n            }\n            \n            // Folder contents drops are handled by the main grid drop zone\n            // to ensure consistent behavior when dragging items out of folders\n        });\n        \n        // Add event listeners for expand/collapse buttons\n        inventoryContainer.querySelectorAll('.folder-expand-btn').forEach(btn => {\n            btn.addEventListener('mousedown', (e) => {\n                e.stopPropagation();\n                const folderName = btn.dataset.folderName;\n                this.inventory.toggleFolderExpansion(folderName);\n            });\n        });\n        \n        // Make inventory items draggable (including items in expanded folders)\n        inventoryContainer.querySelectorAll('.inventory-item').forEach(item => {\n            // The draggable attribute is already set in the HTML\n            item.addEventListener('dragstart', (e) => {\n                e.stopPropagation(); // Prevent event bubbling\n                this.draggedItem = item.dataset.itemName;\n                e.dataTransfer.setData('text/inventory-item', this.draggedItem);\n                e.dataTransfer.effectAllowed = 'move';\n                item.classList.add('dragging');\n            });\n            \n            item.addEventListener('dragend', (e) => {\n                e.stopPropagation(); // Prevent event bubbling\n                item.classList.remove('dragging');\n                this.draggedItem = null;\n            });\n        });\n        \n      \n        \n        // Add drop zone for inventory grid to move items to root or current folder\n        const inventoryGrid = inventoryContainer.querySelector('.inventory-grid');\n        if (inventoryGrid) {\n            inventoryGrid.addEventListener('dragover', (e) => {\n                // Handle internal drags (both items and folders)\n                if (this.draggedItem || this.draggedFolder) {\n                    const isOverFolderHeader = e.target.closest('.folder-header');\n                    const isOverSameFolder = this.draggedFolder && e.target.closest(`.folder-item[data-folder-name=\"${this.draggedFolder}\"]`);\n                    \n                    // Always prevent default to allow dropping, unless over a folder header or same folder\n                    if (!isOverFolderHeader && !isOverSameFolder) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        e.dataTransfer.dropEffect = 'move';\n                        inventoryGrid.classList.add('drag-over-grid');\n                    } else {\n                        inventoryGrid.classList.remove('drag-over-grid');\n                    }\n                }\n            });\n            \n            inventoryGrid.addEventListener('dragleave', (e) => {\n                // Only remove class if we're leaving the grid entirely\n                if (!inventoryGrid.contains(e.relatedTarget)) {\n                    inventoryGrid.classList.remove('drag-over-grid');\n                }\n            });\n            \n            inventoryGrid.addEventListener('drop', async (e) => {\n                inventoryGrid.classList.remove('drag-over-grid');\n                \n                // Handle drops anywhere except on folder headers\n                if (this.draggedItem || this.draggedFolder) {\n                    const isOverFolderHeader = e.target.closest('.folder-header');\n                    const isOverSameFolder = this.draggedFolder && e.target.closest(`.folder-item[data-folder-name=\"${this.draggedFolder}\"]`);\n                    \n                    if (!isOverFolderHeader && !isOverSameFolder) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        \n                        const itemName = e.dataTransfer.getData('text/inventory-item');\n                        const folderName = e.dataTransfer.getData('text/inventory-folder');\n                        \n                        if (itemName) {\n                            // Move item to current folder (or root if no current folder)\n                            await this.inventory.moveItemToFolder(itemName, this.inventory.currentFolder);\n                        } else if (folderName) {\n                            // Move folder to current folder (or root if no current folder)\n                            await this.inventory.moveFolderToFolder(folderName, this.inventory.currentFolder);\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Render breadcrumb navigation\n     */\n    renderBreadcrumb() {\n        if (!this.inventory.currentFolder) return '';\n        const parts = this.inventory.currentFolder.split('/');\n        let path = '';\n        return parts.map((part, index) => {\n            path += (index > 0 ? '/' : '') + part;\n            return `<span class=\"breadcrumb-separator\">/</span><span class=\"breadcrumb-item\" data-folder=\"${path}\">${part}</span>`;\n        }).join('');\n    }\n\n    /**\n     * Render folders and items\n     */\n    renderFoldersAndItems() {\n        const foldersHtml = [];\n        const itemsHtml = [];\n        \n        // Get folders in current directory\n        let foldersArray = Object.entries(this.inventory.folders)\n            .filter(([key, folder]) => folder.parent === this.inventory.currentFolder)\n            .map(([key, folder]) => ({key, ...folder}));\n        \n        // Sort folders\n        foldersArray = this.inventory.sortItems(foldersArray, true);\n        \n        // Render sorted folders\n        foldersArray.forEach(folder => {\n            foldersHtml.push(this.renderFolder(folder.key, folder));\n        });\n        \n        // Get items in current directory\n        let itemsArray = Object.entries(this.inventory.items)\n            .filter(([key, item]) => (item.folder || null) === this.inventory.currentFolder)\n            .map(([key, item]) => ({key, ...item}));\n        \n        // Sort items\n        itemsArray = this.inventory.sortItems(itemsArray, false);\n        \n        // Render sorted items\n        itemsArray.forEach(item => {\n            itemsHtml.push(this.renderItem(item.key, item));\n        });\n        \n        return foldersHtml.join('') + itemsHtml.join('');\n    }\n\n    /**\n     * Render a single folder\n     */\n    renderFolder(key, folder) {\n        const itemCount = this.inventory.getItemCountInFolder(key);\n        const isExpanded = this.inventory.expandedFolders.has(key);\n        // <span class=\"folder-count\">${itemCount} items</span>\n        return `\n            <div class=\"folder-item\" data-folder-name=\"${key}\" draggable=\"true\">\n                <div class=\"folder-header\">\n                    <button class=\"folder-expand-btn\" data-folder-name=\"${key}\">\n                        ${isExpanded ? '\u25BC' : '\u25B6'}\n                    </button>\n                    <span class=\"folder-icon\">\uD83D\uDCC1</span>\n                    <h3 class=\"folder-name\">${this.trailName(folder.name)}</h3>\n                    <button class=\"remove-folder-btn\" data-folder-name=\"${key}\">\u00D7</button>\n                </div>\n                ${isExpanded ? `\n                    <div class=\"folder-contents\">\n                        ${this.renderFolderContents(key)}\n                    </div>\n                ` : ''}\n            </div>\n        `;\n    }\n\n    /**\n     * Render folder contents\n     */\n    renderFolderContents(folderKey) {\n        const items = [];\n        const subfolders = [];\n        \n        // Get subfolders\n        Object.entries(this.inventory.folders).forEach(([key, folder]) => {\n            if (folder.parent === folderKey) {\n                subfolders.push(this.renderFolder(key, folder));\n            }\n        });\n        \n        // Get items\n        Object.entries(this.inventory.items).forEach(([key, item]) => {\n            if (item.folder === folderKey) {\n                items.push(this.renderItem(key, item, true)); // Pass true to indicate item is in folder\n            }\n        });\n        \n        if (subfolders.length === 0 && items.length === 0) {\n            return '<div class=\"folder-empty\">Empty folder</div>';\n        }\n        \n        return subfolders.join('') + items.join('');\n    }\n\n    /**\n     * Render a single item\n     */\n    renderItem(key, item, isInFolder = false) {\n        const dateStr = new Date(item.created).toLocaleDateString();\n        const itemType = item.itemType || 'entity';\n        // Use item's custom icon if available, otherwise use defaults\n        const itemIcon = item.icon || (itemType === 'script' ? '\uD83D\uDCDC' : itemType === 'markdown' ? '\uD83D\uDCDD' : itemType === 'image' ? '\uD83D\uDDBC\uFE0F' : '\uD83D\uDCE6');\n        const isSelected = this.inventory.selectedItem === key;\n        \n        \n\n\n        // Different actions based on item type\n        let itemActions = '';\n        if (itemType === 'folderRef') {\n            // Special handling for folder references\n            itemActions = `\n                <div class=\"item-actions\">\n                    <button class=\"action-btn import-folderref-btn\" data-item-name=\"${key}\" title=\"Import this folder\">\n                        \uD83D\uDCE5\n                    </button>\n                </div>\n            `;\n        } else if (itemType === 'script' || itemType === 'markdown') {\n            // Scripts get both + and edit buttons, markdown only gets edit\n            const loadScriptBtn = itemType === 'script' ? `\n                    <button class=\"action-btn load-script-btn\" data-item-name=\"${key}\" title=\"Load script to scene\">\n                        \u2795\n                    </button>` : '';\n            itemActions = `\n                <div class=\"item-actions\">\n                    ${loadScriptBtn}\n                    <button class=\"action-btn edit-script-btn\" data-item-name=\"${key}\">\n                        \u270F\uFE0F\n                    </button>\n                </div>\n            `;\n        } else if (itemType === 'image') {\n            itemActions = `\n                <div class=\"item-actions\">\n                    <button class=\"action-btn copy-url-btn\" data-item-name=\"${key}\">\n                        \uD83D\uDCCB\n                    </button>\n                </div>\n            `;\n        } else {\n            itemActions = `\n                <div class=\"item-actions\">\n                    <button class=\"action-btn add-to-scene-btn\" data-item-name=\"${key}\">\n                        \u2795\n                    </button>\n                </div>\n            `;\n        }\n        \n        // Add draggable attribute - items are draggable whether in folder or not\n        const draggableAttr = 'draggable=\"true\"';\n        \n        return `\n        <div class=\"inventory-item ${isSelected ? 'selected' : ''}\" data-item-name=\"${key}\" ${draggableAttr}>\n            <div class=\"item-header\">\n                <div class=\"item-title\">\n                    <span class=\"item-type-icon\" title=\"${itemType}\">${itemIcon}</span>\n                    <h3 class=\"item-name\">${this.trailName(item.name)}</h3>\n                </div>\n                ${itemActions}\n                <button class=\"remove-item-btn\" data-item-name=\"${key}\">\u00D7</button>\n            </div>\n        </div>\n    `;\n    }\n\n    /**\n     * Show preview pane\n     */\n    showPreview(itemName) {\n        const item = this.inventory.items[itemName];\n        if (!item || !this.previewPane) return;\n        \n        // Generate preview content\n        const previewContent = this.generatePreviewContent(item, itemName);\n        this.previewPane.innerHTML = previewContent;\n        this.previewPane.style.display = 'block';\n        \n        // Add event listeners for preview interactions\n        this.attachPreviewEventListeners(itemName, item);\n    }\n\n    /**\n     * Attach event listeners for preview pane\n     */\n    attachPreviewEventListeners(itemName, item) {\n        // Move here button\n        const moveHereBtn = this.previewPane.querySelector('.move-here-btn');\n        if (moveHereBtn) {\n            moveHereBtn.addEventListener('mousedown', async () => {\n                await this.inventory.moveItemToFolder(itemName, this.inventory.currentFolder);\n                // Re-show the preview to update the button visibility\n                this.showPreview(itemName);\n            });\n        }\n        \n        // Close button\n        const closeBtn = this.previewPane.querySelector('.preview-close-btn');\n        if (closeBtn) {\n            closeBtn.addEventListener('mousedown', () => {\n                this.inventory.selectedItem = null;\n                this.showEmptyPreview();\n                this.render();\n            });\n        }\n        \n        // Icon button\n        const iconBtn = this.previewPane.querySelector('.preview-icon-btn');\n        if (iconBtn) {\n            iconBtn.addEventListener('mousedown', () => {\n                this.showEmojiPicker(itemName, item);\n            });\n        }\n        \n        // Edit script button\n        const editBtn = this.previewPane.querySelector('.edit-script-preview-btn');\n        if (editBtn) {\n            editBtn.addEventListener('mousedown', () => {\n                if (item.itemType === 'markdown') {\n                    this.inventory.openMarkdownEditor(itemName);\n                } else {\n                    this.inventory.openScriptEditor(itemName);\n                }\n            });\n        }\n        \n        // Copy image URL button\n        const copyUrlBtn = this.previewPane.querySelector('.copy-image-url-btn');\n        if (copyUrlBtn) {\n            copyUrlBtn.addEventListener('mousedown', () => {\n                const url = copyUrlBtn.dataset.url;\n                navigator.clipboard.writeText(url).then(() => {\n                    this.notify('Image URL copied to clipboard');\n                }).catch(err => {\n                    console.error('Failed to copy URL:', err);\n                    this.notify('Failed to copy URL');\n                });\n            });\n        }\n        \n        // Open image button\n        const openImageBtn = this.previewPane.querySelector('.open-image-btn');\n        if (openImageBtn) {\n            openImageBtn.addEventListener('mousedown', () => {\n                const url = openImageBtn.dataset.url;\n                window.open(url, '_blank');\n            });\n        }\n\n\n        \n        // Script startup toggle\n        const startupToggle = this.previewPane.querySelector('.script-startup-toggle');\n        if (startupToggle) {\n            startupToggle.addEventListener('change', () => {\n                const item = this.inventory.items[itemName];\n                if(item){\n                    item.startup = startupToggle.checked;\n                    this.inventory.syncItem(itemName, item);\n                    showNotification(`Updated startup setting for \"${itemName}\"`);\n                    // Re-render preview to show/hide startup sequence dropdown\n                    this.showPreview(itemName);\n                }\n            });\n        }\n\n        // Startup sequence dropdown\n        const startupSequenceSelect = this.previewPane.querySelector('.script-startup-sequence');\n        if (startupSequenceSelect) {\n            startupSequenceSelect.addEventListener('change', () => {\n                const item = this.inventory.items[itemName];\n                if (!item) return;\n\n                const value = startupSequenceSelect.value;\n                const afterInput = this.previewPane.querySelector('.script-after-input');\n\n                if (value === 'after') {\n                    // Show the input field\n                    if (afterInput) {\n                        afterInput.style.display = 'inline-block';\n                        const scriptName = afterInput.value || 'ScriptName';\n                        item.startupSequence = `after:${scriptName}`;\n                    }\n                } else {\n                    // Hide the input field and set the simple value\n                    if (afterInput) {\n                        afterInput.style.display = 'none';\n                    }\n                    item.startupSequence = value;\n                }\n\n                this.inventory.syncItem(itemName, item);\n                showNotification(`Updated startup sequence for \"${itemName}\"`);\n            });\n        }\n\n        // After script input field\n        const afterInput = this.previewPane.querySelector('.script-after-input');\n        if (afterInput) {\n            afterInput.addEventListener('input', () => {\n                const item = this.inventory.items[itemName];\n                if (!item) return;\n\n                const scriptName = afterInput.value || 'ScriptName';\n                item.startupSequence = `after:${scriptName}`;\n                this.inventory.syncItem(itemName, item);\n            });\n\n            afterInput.addEventListener('blur', () => {\n                showNotification(`Updated startup sequence for \"${itemName}\"`);\n            });\n        }\n        \n        // Script active toggle\n        const activeToggle = this.previewPane.querySelector('.script-active-toggle');\n        if (activeToggle) {\n            activeToggle.addEventListener('change', () => {\n                const item = this.inventory.items[itemName];\n                if(item){\n                    item.active = activeToggle.checked;\n                    this.inventory.syncItem(itemName, item);\n                    showNotification(`Updated active setting for \"${itemName}\"`);\n                }\n            });\n        }\n\n        // Script global toggle\n        const globalToggle = this.previewPane.querySelector('.script-global-toggle');\n        if (globalToggle) {\n            globalToggle.addEventListener('change', () => {\n                const item = this.inventory.items[itemName];\n                if(item){\n                    item.global = globalToggle.checked;\n                    this.inventory.syncItem(itemName, item);\n                    showNotification(`Updated global setting for \"${itemName}\"`);\n                }\n            });\n        }\n\n        const autoUpdateToggle = this.previewPane.querySelector('.script-auto-update-toggle');\n        if (autoUpdateToggle) {\n            autoUpdateToggle.addEventListener('change', () => {\n                const item = this.inventory.items[itemName];\n                if(item){\n                    item.autoUpdate = autoUpdateToggle.checked;\n                    this.inventory.syncItem(itemName, item);\n                    showNotification(`Updated auto update setting for \"${itemName}\"`);\n                }\n            });\n        }\n        \n        \n        // Description textarea\n        const descriptionTextarea = this.previewPane.querySelector('.description-textarea');\n        if (descriptionTextarea) {\n            descriptionTextarea.addEventListener('blur', () => {\n                const item = this.inventory.items[itemName];\n                if(item){\n                    item.description = descriptionTextarea.value;\n                    this.inventory.syncItem(itemName, item);\n                    showNotification(`Updated description for \"${itemName}\"`);\n                }\n            });\n            \n            descriptionTextarea.addEventListener('keydown', (e) => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    descriptionTextarea.blur();\n                }\n            });\n        }\n        \n        // Handle import button for folderRef in preview\n        const importFolderRefBtn = this.previewPane.querySelector('.import-folderref-preview-btn');\n        if (importFolderRefBtn) {\n            importFolderRefBtn.addEventListener('click', async () => {\n                const folderRef = item;\n                if (folderRef && folderRef.itemType === 'folderRef' && folderRef.importedFrom) {\n                    importFolderRefBtn.disabled = true;\n                    importFolderRefBtn.textContent = '\u23F3 Importing...';\n                    \n                    try {\n                        const success = await this.inventory.firebase.importFromFirebase(\n                            folderRef.importedFrom,\n                            folderRef.folder\n                        );\n                        \n                        if (success) {\n                            delete this.inventory.items[itemName];\n                            localStorage.removeItem(`inventory_${itemName}`);\n                            this.render();\n                            this.showEmptyPreview();\n                            showNotification(`Imported folder \"${folderRef.name}\"`);\n                        } else {\n                            importFolderRefBtn.disabled = false;\n                            importFolderRefBtn.textContent = '\uD83D\uDCE5 Import Folder';\n                            showNotification('Failed to import folder');\n                        }\n                    } catch (error) {\n                        console.error('Error importing folderRef from preview:', error);\n                        importFolderRefBtn.disabled = false;\n                        importFolderRefBtn.textContent = '\uD83D\uDCE5 Import Folder';\n                        showNotification('Error importing folder');\n                    }\n                }\n            });\n        }\n        \n        // Editable name\n        const editableName = this.previewPane.querySelector('.editable-name');\n        if (editableName) {\n            const originalName = itemName;\n            \n            editableName.addEventListener('keydown', (e) => {\n                if (e.key === 'Enter') {\n                    e.preventDefault();\n                    editableName.blur();\n                }\n                if (e.key === 'Escape') {\n                    e.preventDefault();\n                    editableName.textContent = originalName;\n                    editableName.blur();\n                }\n            });\n            \n            editableName.addEventListener('blur', () => {\n                const newName = editableName.textContent.trim();\n                if (newName && newName !== originalName) {\n                    let change = new RenameItemChange(originalName, newName, {source: 'ui'});\n                    changeManager.applyChange(change);\n                } else if (!newName) {\n                    editableName.textContent = originalName;\n                }\n            });\n            \n            editableName.addEventListener('focus', () => {\n                const range = document.createRange();\n                range.selectNodeContents(editableName);\n                const selection = window.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n            });\n        }\n    }\n\n    /**\n     * Hide preview pane\n     */\n    hidePreview() {\n        if (this.previewPane) {\n            this.previewPane.style.display = 'none';\n            this.previewPane.innerHTML = '';\n        }\n    }\n    \n    /**\n     * Show empty preview pane or folder details\n     */\n    showEmptyPreview() {\n        if (!this.previewPane) return;\n        \n        // If we're in a folder, show folder details\n        if (this.inventory.currentFolder) {\n            const folder = this.inventory.folders[this.inventory.currentFolder];\n            if (folder) {\n                this.showFolderDetails(this.inventory.currentFolder, folder);\n                return;\n            }\n        }\n        \n        // Show root inventory overview\n        this.showInventoryOverview();\n    }\n    \n    /**\n     * Show inventory overview when at root level with no selection\n     */\n    showInventoryOverview() {\n        if (!this.previewPane) return;\n        \n        const totalItems = Object.keys(this.inventory.items).length;\n        const totalFolders = Object.keys(this.inventory.folders).length;\n        \n        // Count items by type\n        let scripts = 0, entities = 0, images = 0, markdown = 0;\n        Object.values(this.inventory.items).forEach(item => {\n            switch(item.itemType) {\n                case 'script': scripts++; break;\n                case 'image': images++; break;\n                case 'markdown': markdown++; break;\n                default: entities++; break;\n            }\n        });\n        \n        // Count remote vs local items\n        let remoteItems = 0;\n        Object.values(this.inventory.items).forEach(item => {\n            if (this.inventory.firebase.isItemInRemoteLocation(item)) {\n                remoteItems++;\n            }\n        });\n        \n        this.previewPane.innerHTML = `\n            <div class=\"preview-header\">\n                <div class=\"preview-title\">\n                    <span class=\"preview-icon-btn\" style=\"cursor: default;\">\uD83D\uDCE6</span>\n                    <h2>Inventory Overview</h2>\n                </div>\n            </div>\n            <div class=\"preview-meta\">\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Total Items:</span>\n                    <span class=\"meta-value\">${totalItems}</span>\n                </div>\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Total Folders:</span>\n                    <span class=\"meta-value\">${totalFolders}</span>\n                </div>\n            </div>\n            <div class=\"preview-content\" style=\"padding: 20px;\">\n                <h3>Item Breakdown</h3>\n                <div style=\"margin: 15px 0;\">\n                    ${entities > 0 ? `<div style=\"margin: 5px 0;\">\uD83D\uDCE6 Entities: ${entities}</div>` : ''}\n                    ${scripts > 0 ? `<div style=\"margin: 5px 0;\">\uD83D\uDCDC Scripts: ${scripts}</div>` : ''}\n                    ${images > 0 ? `<div style=\"margin: 5px 0;\">\uD83D\uDDBC\uFE0F Images: ${images}</div>` : ''}\n                    ${markdown > 0 ? `<div style=\"margin: 5px 0;\">\uD83D\uDCDD Markdown: ${markdown}</div>` : ''}\n                </div>\n                <h3>Storage</h3>\n                <div style=\"margin: 15px 0;\">\n                    <div style=\"margin: 5px 0;\">\uD83D\uDCBE Local Items: ${totalItems - remoteItems}</div>\n                    ${remoteItems > 0 ? `<div style=\"margin: 5px 0;\">\u2601\uFE0F Remote Items: ${remoteItems}</div>` : ''}\n                </div>\n                <div style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #333;\">\n                    <p style=\"color: #888; font-size: 0.9em;\">Select an item to view its details, or navigate into a folder to see folder information.</p>\n                </div>\n            </div>\n        `;\n        this.previewPane.style.display = 'block';\n    }\n    \n    /**\n     * Show folder details in preview pane\n     */\n    showFolderDetails(folderKey, folder) {\n        if (!this.previewPane) return;\n        \n        const itemCount = this.inventory.getItemCountInFolder(folderKey);\n        const dateStr = folder.created ? new Date(folder.created).toLocaleString() : 'Unknown';\n        const isRemote = folder.remote || false;\n        const folderPath = this.inventory.getCurrentFolderPath();\n        const description = folder._description || '';\n        const isPublic = folder.public || false;\n        \n        // Count subfolders\n        let subfolderCount = 0;\n        Object.entries(this.inventory.folders).forEach(([key, subfolder]) => {\n            if (subfolder.parent === folderKey) {\n                subfolderCount++;\n            }\n        });\n        \n        this.previewPane.innerHTML = `\n            <div class=\"preview-header\">\n                <div class=\"preview-title\">\n                    <span class=\"preview-icon-btn\" style=\"cursor: default;\">\uD83D\uDCC1</span>\n                    <h2 ${this.inventory.firebase.folderIsMine(folder) ? `contenteditable=\"true\" class=\"editable-folder-name\"` : `class=\"folder-name-readonly\"`} data-folder-key=\"${folderKey}\">${folder.name}</h2>\n                </div>\n            </div>\n            <div class=\"preview-meta\">\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Type:</span>\n                    <span class=\"meta-value\">Folder</span>\n                </div>\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Path:</span>\n                    <span class=\"meta-value\">${folderPath}</span>\n                </div>\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Items:</span>\n                    <span class=\"meta-value\">${itemCount}</span>\n                </div>\n                ${subfolderCount > 0 ? `\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Subfolders:</span>\n                        <span class=\"meta-value\">${subfolderCount}</span>\n                    </div>\n                ` : ''}\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Storage:</span>\n                    <span class=\"meta-value\">${isRemote ? '\u2601\uFE0F Remote' : '\uD83D\uDCBE Local'}</span>\n                </div>\n                <div class=\"meta-item\">\n                    <span class=\"meta-label\">Created:</span>\n                    <span class=\"meta-value\">${dateStr}</span>\n                </div>\n            </div>\n            ${this.inventory.firebase.folderIsMine(folder) ? `\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\" style=\"display: flex; align-items: center; justify-content: space-between;\">\n                        <div style=\"display: flex; align-items: center; gap: 8px;\">\n                            <input type=\"checkbox\" id=\"folder-public-checkbox\" class=\"folder-public-checkbox\" data-folder-key=\"${folderKey}\" \n                                ${isPublic ? 'checked' : ''} style=\"cursor: pointer;\">\n                            <label for=\"folder-public-checkbox\" style=\"cursor: pointer;\">Public Folder</label>\n                        </div>\n                        <span style=\"color: #888; font-size: 0.9em;\">${isPublic ? 'Contents in this folder are public' : 'Contents in this folder are private'}</span>\n                    </div>\n                </div>\n            ` : ''}\n            <div class=\"preview-meta\">\n                <div class=\"meta-label\">Description:</div>\n                ${this.inventory.firebase.folderIsMine(folder) ? \n                    `<textarea class=\"description-textarea\" data-folder-key=\"${folderKey}\" placeholder=\"Enter a description for this folder...\">${this.escapeHtml(description)}</textarea>` :\n                    `<div class=\"description-readonly\" style=\"padding: 8px; background: #2a2a2a; border: 1px solid #333; border-radius: 4px; color: #ccc; min-height: 60px; white-space: pre-wrap;\">${this.escapeHtml(description) || '<span style=\"color: #666;\">No description provided</span>'}</div>`\n                }\n            </div>\n            <div class=\"preview-content\" style=\"padding: 20px;\">\n                <h3>Folder Information</h3>\n                <p style=\"color: #888; margin: 10px 0;\">This folder contains ${itemCount} item${itemCount !== 1 ? 's' : ''} and ${subfolderCount} subfolder${subfolderCount !== 1 ? 's' : ''}.</p>\n                ${isRemote ? `\n                    <p style=\"color: #6bb6ff; margin: 10px 0;\" onclick=\"inventory.firebase.copyFirebaseRef()\">\uD83D\uDD17 Synced</p>\n                ` : `\n                    <p style=\"color: #888; margin: 10px 0;\">This folder is stored locally.</p>\n                `}\n            </div>\n        `;\n        this.previewPane.style.display = 'block';\n        \n        // Add event listeners for folder renaming\n        this.attachFolderPreviewEventListeners(folderKey, folder);\n    }\n    \n    /**\n     * Attach event listeners for folder preview\n     */\n    attachFolderPreviewEventListeners(folderKey, folder) {\n        // Only allow editing folder name if user owns it\n        if (this.inventory.firebase.folderIsMine(folder)) {\n            const editableName = this.previewPane.querySelector('.editable-folder-name');\n            if (editableName) {\n                const originalName = folder.name;\n                \n                editableName.addEventListener('keydown', (e) => {\n                    if (e.key === 'Enter') {\n                        e.preventDefault();\n                        editableName.blur();\n                    }\n                    if (e.key === 'Escape') {\n                        e.preventDefault();\n                        editableName.textContent = originalName;\n                        editableName.blur();\n                    }\n                });\n                \n                editableName.addEventListener('blur', () => {\n                    const newName = editableName.textContent.trim();\n                    if (newName && newName !== originalName) {\n                        // Show warning about renaming consequences\n                        const isRemote = folder.remote || false;\n                        let warningMessage = `<strong>Warning:</strong> Renaming this folder may break existing references and scripts that depend on it.`;\n                        \n                        if (isRemote) {\n                            warningMessage += `<br><br><strong>Important:</strong> This folder is currently synchronized with Firebase. After renaming, it will become a local-only folder and lose its remote connection.`;\n                        }\n                        \n                        warningMessage += `<br><br>Are you sure you want to rename \"${originalName}\" to \"${newName}\"?`;\n                        \n                        this.showWarningConfirm(\n                            'Folder Rename Warning',\n                            warningMessage,\n                            () => {\n                                // User confirmed - proceed with rename\n                                this.inventory.handleFolderRename(folderKey, newName);\n                            },\n                            () => {\n                                // User cancelled - revert name\n                                editableName.textContent = originalName;\n                            }\n                        );\n                    } else if (!newName) {\n                        editableName.textContent = originalName;\n                    }\n                });\n                \n                editableName.addEventListener('focus', () => {\n                    const range = document.createRange();\n                    range.selectNodeContents(editableName);\n                    const selection = window.getSelection();\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                });\n            }\n        }\n        \n        // Description textarea - only if user owns the folder\n        if (this.inventory.firebase.folderIsMine(folder)) {\n            const descriptionTextarea = this.previewPane.querySelector('.description-textarea');\n            if (descriptionTextarea) {\n                descriptionTextarea.addEventListener('blur', () => {\n                    const updatedFolder = this.inventory.folders[folderKey];\n                    if (updatedFolder) {\n                        updatedFolder._description = descriptionTextarea.value;\n                        this.inventory.syncFolder(folderKey, updatedFolder);\n                        showNotification(`Updated description for folder \"${folder.name}\"`);\n                    }\n                });\n                \n                descriptionTextarea.addEventListener('keydown', (e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        descriptionTextarea.blur();\n                    }\n                });\n            }\n        }\n        \n        // Public checkbox - only if user owns the folder\n        const publicCheckbox = this.previewPane.querySelector('.folder-public-checkbox');\n        if (publicCheckbox) {\n            publicCheckbox.addEventListener('change', () => {\n                const updatedFolder = this.inventory.folders[folderKey];\n                if (updatedFolder) {\n                    updatedFolder.public = publicCheckbox.checked;\n                    this.inventory.syncFolder(folderKey, updatedFolder);\n                    \n                    // Update the status text\n                    const statusText = publicCheckbox.parentElement.parentElement.querySelector('span');\n                    if (statusText) {\n                        statusText.textContent = publicCheckbox.checked ? \n                            'Contents in this folder are public' : \n                            'Contents in this folder are private';\n                    }\n                    \n                    showNotification(`Folder \"${folder.name}\" is now ${publicCheckbox.checked ? 'public' : 'private'}`);\n                }\n            });\n        }\n    }\n\n    /**\n     * Generate preview content for an item\n     */\n    generatePreviewContent(item, itemName) {\n        const dateStr = new Date(item.created).toLocaleString();\n        const itemType = item.itemType || 'entity';\n        const description = item.description || '';\n        \n        // Use item's icon or fall back to default based on type\n        const displayIcon = item.icon || (itemType === 'script' ? '\uD83D\uDCDC' : itemType === 'image' ? '\uD83D\uDDBC\uFE0F' : '\uD83D\uDCE6');\n        \n        // Check if the item is in a different folder than the current folder\n        const itemFolder = item.folder || null;\n        const showMoveButton = itemFolder !== this.inventory.currentFolder;\n        \n        let previewHeader = `<div class=\"preview-header\">\n                    ${showMoveButton ? `\n                        <button class=\"move-here-btn\" data-item-name=\"${itemName}\">\n                            \uD83D\uDCC1 Move\n                        </button>\n                    ` : ''}\n                    <div class=\"preview-title\">\n                        <button class=\"preview-icon-btn\" title=\"Click to change icon\">${displayIcon}</button>\n                        <h2 contenteditable=\"true\" class=\"editable-name\" data-item-name=\"${item.name}\">${item.name}</h2>\n                    </div>\n                    <button class=\"preview-close-btn\">\u00D7</button>\n                </div>`\n        \n        // Special handling for folderRef items\n        if (itemType === 'folderRef') {\n            return `\n                ${previewHeader}\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Type:</span>\n                        <span class=\"meta-value\">Public Folder Reference</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Author:</span>\n                        <span class=\"meta-value\">${item.author || 'Unknown'}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Source:</span>\n                        <span class=\"meta-value\" style=\"font-size: 0.9em; word-break: break-all;\">${item.importedFrom || 'Unknown'}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Created:</span>\n                        <span class=\"meta-value\">${dateStr}</span>\n                    </div>\n                </div>\n                ${item._description ? `\n                    <div class=\"preview-meta\">\n                        <div class=\"meta-label\">Description:</div>\n                        <div class=\"description-readonly\" style=\"padding: 8px; background: #2a2a2a; border: 1px solid #333; border-radius: 4px; color: #ccc; min-height: 60px; white-space: pre-wrap;\">\n                            ${this.escapeHtml(item._description)}\n                        </div>\n                    </div>\n                ` : ''}\n                <div class=\"preview-content\" style=\"padding: 20px;\">\n                    <h3>Public Folder</h3>\n                    <p style=\"color: #888; margin: 10px 0;\">This is a reference to a public folder shared by ${item.author}.</p>\n                    <p style=\"color: #6bb6ff; margin: 10px 0;\">Click the \uD83D\uDCE5 import button to download this folder to your inventory.</p>\n                    <div style=\"margin-top: 20px; padding: 15px; background: #2a2a2a; border-radius: 4px;\">\n                        <button class=\"import-folderref-preview-btn\" data-item-name=\"${itemName}\" style=\"\n                            padding: 10px 20px;\n                            background: #4CAF50;\n                            color: white;\n                            border: none;\n                            border-radius: 4px;\n                            cursor: pointer;\n                            font-size: 14px;\n                        \">\n                            \uD83D\uDCE5 Import Folder\n                        </button>\n                    </div>\n                </div>\n            `;\n        }\n        \n        if (itemType === 'image') {\n            const size = item.data.size ? (item.data.size / 1024).toFixed(2) + ' KB' : 'Unknown';\n            const dimensions = item.data.width && item.data.height ? \n                `${item.data.width}\u00D7${item.data.height}` : 'Unknown';\n            \n            return `\n                ${previewHeader}\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Type:</span>\n                        <span class=\"meta-value\">Image</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Size:</span>\n                        <span class=\"meta-value\">${size}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Dimensions:</span>\n                        <span class=\"meta-value\">${dimensions}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Author:</span>\n                        <span class=\"meta-value\">${item.author}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Created:</span>\n                        <span class=\"meta-value\">${dateStr}</span>\n                    </div>\n                </div>\n                <div class=\"preview-meta\">\n                    <div class=\"meta-label\">Description:</div>\n                    <textarea class=\"description-textarea\" data-item-name=\"${item.name}\" placeholder=\"Enter a description...\">${this.escapeHtml(description)}</textarea>\n                </div>\n                <div class=\"preview-content\">\n                    <h3>Image Preview</h3>\n                    <div class=\"image-preview-container\" style=\"text-align: center; margin: 20px 0;\">\n                        <img src=\"${item.data.url}\" alt=\"${item.name}\" style=\"max-width: 100%; max-height: 400px; border: 1px solid #333; border-radius: 4px;\">\n                    </div>\n                    <div class=\"preview-actions\">\n                        <button class=\"action-btn copy-image-url-btn\" data-url=\"${item.data.url}\">\n                            \uD83D\uDCCB Copy URL\n                        </button>\n                        <button class=\"action-btn open-image-btn\" data-url=\"${item.data.url}\">\n                            \uD83D\uDD17 Open in New Tab\n                        </button>\n                    </div>\n                </div>\n            `;\n        } else if (itemType === 'markdown') {\n            const markdownContent = item.data || '';\n            \n            return `\n                ${previewHeader}\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Type:</span>\n                        <span class=\"meta-value\">Markdown</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Author:</span>\n                        <span class=\"meta-value\">${item.author}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Created:</span>\n                        <span class=\"meta-value\">${dateStr}</span>\n                    </div>\n                </div>\n                <div class=\"preview-meta\">\n                    <div class=\"meta-label\">Description:</div>\n                    <textarea class=\"description-textarea\" data-item-name=\"${item.name}\" placeholder=\"Enter a description...\">${this.escapeHtml(description)}</textarea>\n                </div>\n                <div class=\"preview-content\">\n                    <h3>Markdown Content</h3>\n                    <pre class=\"script-preview\"><code>${this.escapeHtml(item.data)}</code></pre>\n                    <div class=\"preview-actions\">\n                        <button class=\"action-btn edit-script-preview-btn\" data-item-name=\"${item.name}\">\n                            \u270F\uFE0F Edit Markdown\n                        </button>\n                    </div>\n                </div>\n            `;\n        } else if (itemType === 'script') {\n            const scriptContent = item.data || '';\n            const preview = scriptContent.substring(0, 500) + (scriptContent.length > 500 ? '...' : '');\n            \n            return `\n                ${previewHeader}\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Type:</span>\n                        <span class=\"meta-value\">Script</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Author:</span>\n                        <span class=\"meta-value\">${item.author}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Created:</span>\n                        <span class=\"meta-value\">${dateStr}</span>\n                    </div>\n                </div>\n                <div class=\"preview-meta\">\n                    <div class=\"meta-label\">Script Options:</div>\n                    <div style=\"display: flex; gap: 20px; padding: 10px;\">\n                        <label style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\n                            <input type=\"checkbox\" class=\"script-global-toggle\" data-item-name=\"${item.name}\"\n                                ${item.global ? 'checked' : ''} style=\"cursor: pointer;\">\n                            <span>Global</span>\n                        </label>\n                        <label style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\n                            <input type=\"checkbox\" class=\"script-startup-toggle\" data-item-name=\"${item.name}\"\n                                ${item.startup ? 'checked' : ''} style=\"cursor: pointer;\">\n                            <span>Startup</span>\n                        </label>\n                        <label style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\n                            <input type=\"checkbox\" class=\"script-active-toggle\" data-item-name=\"${item.name}\"\n                                ${item.active ? 'checked' : ''} style=\"cursor: pointer;\">\n                            <span>Active</span>\n                        </label>\n                        <label style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\n                            <input type=\"checkbox\" class=\"script-auto-update-toggle\" data-item-name=\"${item.name}\"\n                                ${item.autoUpdate ? 'checked' : ''} style=\"cursor: pointer;\">\n                            <span>Auto</span>\n                        </label>\n                    </div>\n                    ${item.startup ? `\n                        <div style=\"padding: 10px; border-top: 1px solid #333;\">\n                            <label style=\"display: flex; align-items: center; gap: 8px;\">\n                                <span>Startup Sequence:</span>\n                                <select class=\"script-startup-sequence\" data-item-name=\"${itemName}\" style=\"background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px;\">\n                                    <option value=\"onInspectorLoaded\" ${(!item.startupSequence || item.startupSequence === 'onInspectorLoaded') ? 'selected' : ''}>onInspectorLoaded</option>\n                                    <option value=\"onSceneLoaded\" ${item.startupSequence === 'onSceneLoaded' ? 'selected' : ''}>onSceneLoaded</option>\n                                    <option value=\"after\" ${item.startupSequence && item.startupSequence.startsWith('after:') ? 'selected' : ''}>after</option>\n                                </select>\n                                ${item.startupSequence && item.startupSequence.startsWith('after:') ? `\n                                    <input type=\"text\" class=\"script-after-input\" data-item-name=\"${itemName}\"\n                                        value=\"${item.startupSequence.split(':')[1]}\"\n                                        placeholder=\"ScriptName\"\n                                        style=\"background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px; margin-left: 8px;\">\n                                ` : `\n                                    <input type=\"text\" class=\"script-after-input\" data-item-name=\"${itemName}\"\n                                        value=\"ScriptName\"\n                                        placeholder=\"ScriptName\"\n                                        style=\"background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 4px 8px; border-radius: 4px; margin-left: 8px; display: none;\">\n                                `}\n                            </label>\n                        </div>\n                    ` : ''}\n                    <div style=\"padding: 5px 10px; font-size: 0.9em; color: #888;\">\n                        <em>Note: Both startup and active must be enabled for script to run on startup</em>\n                        <em>Note: Global requires all other players to have the script in their inventory to run</em>\n                    </div>\n                </div>\n                <div class=\"preview-meta\">\n                    <div class=\"meta-label\">Description:</div>\n                    <textarea class=\"description-textarea\" data-item-name=\"${item.name}\" placeholder=\"Enter a description...\">${this.escapeHtml(description)}</textarea>\n                </div>\n                <div class=\"preview-content\">\n                    <h3>Script Content</h3>\n                    <pre class=\"script-preview\"><code>${this.escapeHtml(item.data)}</code></pre>\n                    <div class=\"preview-actions\">\n                        <button class=\"action-btn edit-script-preview-btn\" data-item-name=\"${item.name}\">\n                            \u270F\uFE0F Edit Script\n                        </button>\n                    </div>\n                </div>\n            `;\n        } else {\n            // Entity preview\n            const componentCount = item.data.components ? item.data.components.length : 0;\n            const childCount = item.data.children ? item.data.children.length : 0;\n            \n            return `\n                ${previewHeader}\n                <div class=\"preview-meta\">\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Type:</span>\n                        <span class=\"meta-value\">Entity</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Author:</span>\n                        <span class=\"meta-value\">${item.author}</span>\n                    </div>\n                    <div class=\"meta-item\">\n                        <span class=\"meta-label\">Created:</span>\n                        <span class=\"meta-value\">${dateStr}</span>\n                    </div>\n                    ${componentCount > 0 ? `\n                        <div class=\"meta-item\">\n                            <span class=\"meta-label\">Components:</span>\n                            <span class=\"meta-value\">${componentCount}</span>\n                        </div>\n                    ` : ''}\n                    ${childCount > 0 ? `\n                        <div class=\"meta-item\">\n                            <span class=\"meta-label\">Children:</span>\n                            <span class=\"meta-value\">${childCount}</span>\n                        </div>\n                    ` : ''}\n                </div>\n                <div class=\"preview-meta\">\n                    <div class=\"meta-label\">Description:</div>\n                    <textarea class=\"description-textarea\" data-item-name=\"${item.name}\" placeholder=\"Enter a description...\">${this.escapeHtml(description)}</textarea>\n                </div>\n                <div class=\"preview-content\">\n                    <h3>Entity</h3>\n                    <div class=\"json-tree\">\n                        ${this.renderJsonTree(item.data)}\n                    </div>\n                </div>\n            `;\n        }\n    }\n\n    /**\n     * Render JSON tree with collapsible nodes\n     */\n    renderJsonTree(obj, path = '', level = 0) {\n        if (obj === null || obj === undefined) {\n            return `<span class=\"json-null\">null</span>`;\n        }\n        \n        if (typeof obj !== 'object') {\n            return `<span class=\"json-value\">${this.formatJsonValue(obj)}</span>`;\n        }\n        \n        if (Array.isArray(obj)) {\n            if (obj.length === 0) {\n                return `<span class=\"json-bracket\">[]</span>`;\n            }\n            \n            const id = `json-${path}-array`.replace(/[.\\[\\]]/g, '-');\n            return `\n                <span class=\"json-array\">\n                    <input type=\"checkbox\" id=\"${id}\" class=\"json-toggle\" checked>\n                    <label for=\"${id}\" class=\"json-label\">\n                        <span class=\"json-arrow\">\u25BC</span>\n                        <span class=\"json-bracket\">[</span>\n                        <span class=\"json-preview\">${obj.length} items</span>\n                    </label>\n                    <div class=\"json-content\">\n                        ${obj.map((item, index) => `\n                            <div class=\"json-item\">\n                                <span class=\"json-key\">${index}:</span>\n                                ${this.renderJsonTree(item, `${path}[${index}]`, level + 1)}\n                            </div>\n                        `).join('')}\n                    </div>\n                    <span class=\"json-bracket\">]</span>\n                </span>\n            `;\n        }\n        \n        // Object\n        const keys = Object.keys(obj);\n        if (keys.length === 0) {\n            return `<span class=\"json-bracket\">{}</span>`;\n        }\n        \n        const id = `json-${path}-object`.replace(/[.\\[\\]]/g, '-');\n        const isExpanded = level < 2; // Expand first two levels by default\n        \n        return `\n            <span class=\"json-object\">\n                <input type=\"checkbox\" id=\"${id}\" class=\"json-toggle\" ${isExpanded ? 'checked' : ''}>\n                <label for=\"${id}\" class=\"json-label\">\n                    <span class=\"json-arrow\">\u25BC</span>\n                    <span class=\"json-bracket\">{</span>\n                    <span class=\"json-preview\">${keys.length} ${keys.length === 1 ? 'property' : 'properties'}</span>\n                </label>\n                <div class=\"json-content\">\n                    ${keys.map(key => `\n                        <div class=\"json-item\">\n                            <span class=\"json-key\">\"${key}\":</span>\n                            ${this.renderJsonTree(obj[key], `${path}.${key}`, level + 1)}\n                        </div>\n                    `).join('')}\n                </div>\n                <span class=\"json-bracket\">}</span>\n            </span>\n        `;\n    }\n    \n    /**\n     * Format JSON value for display\n     */\n    formatJsonValue(value) {\n        if (typeof value === 'string') {\n            return `<span class=\"json-string\">\"${this.escapeHtml(value)}\"</span>`;\n        }\n        if (typeof value === 'boolean') {\n            return `<span class=\"json-boolean\">${value}</span>`;\n        }\n        if (typeof value === 'number') {\n            return `<span class=\"json-number\">${value}</span>`;\n        }\n        return String(value);\n    }\n\n    /**\n     * Setup drop zone for drag and drop\n     */\n    setupDropZone() {\n        // Add click handler to preview pane for deselecting when clicking in empty areas\n        if (this.previewPane) {\n            this.previewPane.addEventListener('mousedown', (e) => {\n                // Only deselect if clicking the preview pane background itself, not content\n                if (e.target === this.previewPane || \n                    e.target.classList.contains('preview-content') ||\n                    e.target.classList.contains('preview-meta')) {\n                    // But not if clicking interactive elements\n                    const clickedOnButton = e.target.closest('button');\n                    const clickedOnInput = e.target.closest('input, textarea, select');\n                    const clickedOnEditable = e.target.closest('[contenteditable]');\n                    const clickedOnPreviewPane = e.target.closest('.inventory-preview-pane')\n                    log(\"inventory\", \"clickedOn [dropZone]\", e.target)\n                    if (!clickedOnButton && !clickedOnInput && !clickedOnEditable && !clickedOnPreviewPane) {\n                        if (this.inventory.selectedItem) {\n                            this.inventory.selectedItem = null;\n                            this.showEmptyPreview();\n                            this.inventory.ui.render();\n                        }\n                    }\n                }\n            });\n        }\n        \n        this.container.addEventListener('dragover', (e) => {\n            // Only handle external drags (from hierarchy)\n            if (!this.inventory.draggedItem) {\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'copy';\n            }\n        });\n        \n        this.container.addEventListener('dragleave', (e) => {\n            if (e.target === this.container) {\n            }\n        });\n        \n        this.container.addEventListener('drop', async (e) => {\n            // Only handle external drops (from hierarchy)\n            if (!this.inventory.draggedItem) {\n                e.preventDefault();\n                \n                const entityId = e.dataTransfer.getData('text/plain');\n                let change = new SaveEntityItemChange(entityId, null, null, {source: 'ui'});\n                window.changeManager.applyChange(change);\n            }\n        });\n    }\n\n    /**\n     * Show script name modal\n     */\n    showScriptNameModal() {\n        const modalOverlay = this.createModalOverlay();\n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>Create New File</h3>\n                <button class=\"modal-close-btn\" id=\"modalCloseBtn\">\u00D7</button>\n            </div>\n            <div class=\"modal-body\">\n                <label for=\"fileTypeSelect\">File Type:</label>\n                <select id=\"fileTypeSelect\" style=\"width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #333; background: #1e1e1e; color: #ccc; border-radius: 4px;\">\n                    <option value=\"script\" selected>JavaScript (.js)</option>\n                    <option value=\"markdown\">Markdown (.md)</option>\n                </select>\n                \n                <label for=\"scriptNameInput\">File Name:</label>\n                <input type=\"text\" id=\"scriptNameInput\" placeholder=\"MyScript\" autocomplete=\"off\">\n                <div class=\"modal-hint\" id=\"fileHint\">Enter a name for your script (e.g., PlayerController)</div>\n                <div class=\"modal-error\" id=\"modalError\" style=\"display: none;\"></div>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-create-btn\" id=\"modalCreateBtn\">Create File</button>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const input = modalContent.querySelector('#scriptNameInput');\n        const fileTypeSelect = modalContent.querySelector('#fileTypeSelect');\n        const fileHint = modalContent.querySelector('#fileHint');\n        const createBtn = modalContent.querySelector('#modalCreateBtn');\n        \n        // Update hint and button text based on file type\n        fileTypeSelect.addEventListener('change', () => {\n            if (fileTypeSelect.value === 'markdown') {\n                fileHint.textContent = 'Enter a name for your markdown file (e.g., README)';\n                createBtn.textContent = 'Create Markdown';\n            } else {\n                fileHint.textContent = 'Enter a name for your script (e.g., PlayerController)';\n                createBtn.textContent = 'Create Script';\n            }\n        });\n        \n        setTimeout(() => input.focus(), 100);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        const handleCreate = () => {\n            const fileName = input.value.trim();\n            const fileType = fileTypeSelect.value;\n            const errorDiv = modalContent.querySelector('#modalError');\n            \n            if (!fileName) {\n                errorDiv.textContent = 'Please enter a file name';\n                errorDiv.style.display = 'block';\n                return;\n            }\n            \n            // Add appropriate extension based on file type\n            let finalName;\n            if (fileType === 'markdown') {\n                finalName = fileName.endsWith('.md') ? fileName : fileName + '.md';\n            } else {\n                finalName = fileName.endsWith('.js') ? fileName : fileName + '.js';\n            }\n            \n            if (this.inventory.items[finalName]) {\n                this.showOverwriteModal(finalName, () => {\n                    closeModal();\n                    this.inventory.finalizeScriptCreation(finalName, fileType);\n                });\n            } else {\n                closeModal();\n                this.inventory.finalizeScriptCreation(finalName, fileType);\n            }\n        };\n        \n        this.attachModalEventListeners(modalContent, modalOverlay, closeModal, handleCreate);\n    }\n\n    /**\n     * Show overwrite confirmation modal\n     */\n    showOverwriteModal(fileName, onConfirm) {\n        const modalOverlay = this.createModalOverlay();\n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>File Already Exists</h3>\n            </div>\n            <div class=\"modal-body\">\n                <p>A script named \"<strong>${fileName}</strong>\" already exists.</p>\n                <p>Do you want to override the existing file?</p>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-overwrite-btn\" id=\"modalOverwriteBtn\">Overwrite</button>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        modalContent.querySelector('#modalCancelBtn').addEventListener('mousedown', closeModal);\n        modalContent.querySelector('#modalOverwriteBtn').addEventListener('mousedown', () => {\n            closeModal();\n            onConfirm();\n        });\n        \n        modalOverlay.addEventListener('mousedown', (e) => {\n            if (e.target === modalOverlay) closeModal();\n        });\n    }\n\n\n    /**\n     * Show folder name modal\n     */\n    showFolderNameModal(onConfirm) {\n        const modalOverlay = this.createModalOverlay();\n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>Create New Folder</h3>\n                <button class=\"modal-close-btn\" id=\"modalCloseBtn\">\u00D7</button>\n            </div>\n            <div class=\"modal-body\">\n                <label for=\"folderNameInput\">Folder Name:</label>\n                <input type=\"text\" id=\"folderNameInput\" placeholder=\"New Folder\" autocomplete=\"off\">\n                <div class=\"modal-hint\">Enter a name for your folder</div>\n                <div class=\"modal-error\" id=\"modalError\" style=\"display: none;\"></div>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-create-btn\" id=\"modalCreateBtn\">Create Folder</button>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const input = modalContent.querySelector('#folderNameInput');\n        setTimeout(() => input.focus(), 100);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        const handleCreate = () => {\n            const folderName = input.value.trim();\n            const errorDiv = modalContent.querySelector('#modalError');\n            \n            if (!folderName) {\n                errorDiv.textContent = 'Please enter a folder name';\n                errorDiv.style.display = 'block';\n                return;\n            }\n            \n            closeModal();\n            onConfirm(folderName);\n        };\n        \n        this.attachModalEventListeners(modalContent, modalOverlay, closeModal, handleCreate);\n    }\n\n    /**\n     * Show rename warning modal\n     */\n    showWarningConfirm (title, message, onConfirm, onCancel) {\n        // Create modal overlay\n        const modalOverlay = document.createElement('div');\n        modalOverlay.className = 'modal-overlay';\n        \n        // Create modal content\n        const modalContent = document.createElement('div');\n        modalContent.className = 'modal-content modal-warning';\n        \n        modalContent.innerHTML = `\n            <div class=\"modal-header\">\n                <h3>\u26A0\uFE0F ${title}</h3>\n            </div>\n            <div class=\"modal-body\">\n                <p>${message}</p>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-confirm-btn modal-warning-btn\" id=\"modalConfirmBtn\">Continue Anyway</button>\n            </div>\n        `;\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        // Setup event listeners\n        const cancelBtn = modalContent.querySelector('#modalCancelBtn');\n        const confirmBtn = modalContent.querySelector('#modalConfirmBtn');\n        \n        const closeModal = () => {\n            modalOverlay.remove();\n        };\n        \n        cancelBtn.addEventListener('mousedown', () => {\n            closeModal();\n            if (onCancel) onCancel();\n        });\n        \n        confirmBtn.addEventListener('mousedown', () => {\n            closeModal();\n            if (onConfirm) onConfirm();\n        });\n        \n        // Click outside to close (and cancel)\n        modalOverlay.addEventListener('mousedown', (e) => {\n            if (e.target === modalOverlay) {\n                closeModal();\n                if (onCancel) onCancel();\n            }\n        });\n        \n        // ESC key to close (and cancel)\n        const handleKeydown = (e) => {\n            if (e.key === 'Escape') {\n                closeModal();\n                if (onCancel) onCancel();\n                document.removeEventListener('keydown', handleKeydown);\n            }\n        };\n        document.addEventListener('keydown', handleKeydown);\n    }\n\n    /**\n     * Show confirmation modal\n     */\n    showConfirmModal(message, onConfirm, title = 'Confirm') {\n        const modalOverlay = this.createModalOverlay();\n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>${title}</h3>\n            </div>\n            <div class=\"modal-body\">\n                <p>${message}</p>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-confirm-btn\" id=\"modalConfirmBtn\">Confirm</button>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        modalContent.querySelector('#modalCancelBtn').addEventListener('mousedown', closeModal);\n        modalContent.querySelector('#modalConfirmBtn').addEventListener('mousedown', () => {\n            closeModal();\n            onConfirm();\n        });\n        \n        modalOverlay.addEventListener('mousedown', (e) => {\n            if (e.target === modalOverlay) closeModal();\n        });\n    }\n\n    /**\n     * Show import Firebase modal\n     */\n    showImportFirebaseModal() {\n        const modalOverlay = this.createModalOverlay();\n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>Import from Firebase</h3>\n                <button class=\"modal-close-btn\" id=\"modalCloseBtn\">\u00D7</button>\n            </div>\n            <div class=\"modal-body\">\n                <label for=\"firebaseRefInput\">Firebase Reference Path:</label>\n                <input type=\"text\" id=\"firebaseRefInput\" placeholder=\"inventory/username/folder\" autocomplete=\"off\">\n                <div class=\"modal-hint\">Enter a Firebase inventory path (e.g., inventory/john_doe/scripts)</div>\n                <div class=\"modal-error\" id=\"modalError\" style=\"display: none;\"></div>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"modal-cancel-btn\" id=\"modalCancelBtn\">Cancel</button>\n                <button class=\"modal-import-btn\" id=\"modalImportBtn\">Import</button>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const input = modalContent.querySelector('#firebaseRefInput');\n        setTimeout(() => input.focus(), 100);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        const handleImport = async () => {\n            let firebaseRef = input.value.trim();\n            const errorDiv = modalContent.querySelector('#modalError');\n            const importBtn = modalContent.querySelector('#modalImportBtn');\n            \n            if (!firebaseRef) {\n                errorDiv.textContent = 'Please enter a Firebase reference or username';\n                errorDiv.style.display = 'block';\n                return;\n            }\n            \n            // Check if input is just a username (no slashes)\n            if (!firebaseRef.includes('/')) {\n                // Treat as username - attempt to import public folders\n                importBtn.textContent = 'Checking user...';\n                importBtn.disabled = true;\n                \n                try {\n                    const success = await this.inventory.firebase.importPublicUserFolders(firebaseRef);\n                    if (success) {\n                        closeModal();\n                        this.inventory.ui.render();\n                        showNotification(`Imported public folders from user \"${firebaseRef}\"`);\n                    } else {\n                        errorDiv.textContent = `User \"${firebaseRef}\" not found or has no public folders`;\n                        errorDiv.style.display = 'block';\n                        importBtn.textContent = 'Import';\n                        importBtn.disabled = false;\n                    }\n                } catch (error) {\n                    errorDiv.textContent = `Error: ${error.message}`;\n                    errorDiv.style.display = 'block';\n                    importBtn.textContent = 'Import';\n                    importBtn.disabled = false;\n                }\n                return;\n            }\n\n            // Regular Firebase reference import\n            if (firebaseRef.startsWith('~/')) {\n                firebaseRef = firebaseRef.replace('~/', '');\n                // Auto-prepend with inventory/SM.myName()/ if not starting with inventory/\n                const userName = SM.myName();\n                if (!userName) {\n                    errorDiv.textContent = 'Unable to get current username';\n                    errorDiv.style.display = 'block';\n                    return;\n                }\n                firebaseRef = `inventory/${userName}/${firebaseRef}`;\n            }\n            \n            importBtn.textContent = 'Importing...';\n            importBtn.disabled = true;\n\n            log(\"inventory\", \"importing from firebase\", firebaseRef)\n            \n            try {\n                const success = await this.inventory.firebase.importFromFirebase(firebaseRef);\n                if (success) {\n                    closeModal();\n                } else {\n                    errorDiv.textContent = 'No data found at this reference or import failed';\n                    errorDiv.style.display = 'block';\n                    importBtn.textContent = 'Import';\n                    importBtn.disabled = false;\n                }\n            } catch (error) {\n                errorDiv.textContent = `Import error: ${error.message}`;\n                errorDiv.style.display = 'block';\n                importBtn.textContent = 'Import';\n                importBtn.disabled = false;\n            }\n        };\n        \n        this.attachModalEventListeners(modalContent, modalOverlay, closeModal, handleImport);\n    }\n\n    /**\n     * Create modal overlay\n     */\n    createModalOverlay() {\n        const modalOverlay = document.createElement('div');\n        modalOverlay.className = 'modal-overlay';\n        return modalOverlay;\n    }\n\n    /**\n     * Create modal content container\n     */\n    createModalContent(innerHTML) {\n        const modalContent = document.createElement('div');\n        modalContent.className = 'modal-content';\n        modalContent.innerHTML = innerHTML;\n        return modalContent;\n    }\n\n    /**\n     * Show emoji picker modal\n     */\n    showEmojiPicker(itemName, item) {\n        const modalOverlay = this.createModalOverlay();\n        \n        // Common emojis organized by category        \n        const modalContent = this.createModalContent(`\n            <div class=\"modal-header\">\n                <h3>Choose an Icon</h3>\n                <button class=\"modal-close-btn\" id=\"modalCloseBtn\">\u00D7</button>\n            </div>\n            <div class=\"modal-body emoji-picker-body\">\n                <div class=\"emoji-categories\">\n                    ${Object.entries(emojiCategories).map(([category, emojis]) => `\n                        <div class=\"emoji-category\">\n                            <h4 class=\"emoji-category-title\">${category}</h4>\n                            <div class=\"emoji-grid\">\n                                ${emojis.map(emoji => `\n                                    <button class=\"emoji-btn\" data-emoji=\"${emoji}\" title=\"${emoji}\">\n                                        ${emoji}\n                                    </button>\n                                `).join('')}\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n                <div class=\"custom-emoji-container\">\n                    <label for=\"customEmojiInput\">Or enter custom emoji:</label>\n                    <div class=\"custom-emoji-row\">\n                        <input type=\"text\" id=\"customEmojiInput\" placeholder=\"Enter any emoji...\" maxlength=\"2\" autocomplete=\"off\">\n                        <button class=\"modal-apply-btn\" id=\"applyCustomEmoji\">Apply</button>\n                    </div>\n                </div>\n            </div>\n        `);\n        \n        modalOverlay.appendChild(modalContent);\n        document.body.appendChild(modalOverlay);\n        \n        const closeModal = () => modalOverlay.remove();\n        \n        // Handle emoji selection\n        const selectEmoji = async (emoji) => {\n            item.icon = emoji;\n            \n            // Update localStorage\n            const storageKey = `inventory_${itemName}`;\n            localStorage.setItem(storageKey, JSON.stringify(item));\n            \n            // Sync to Firebase if remote\n            if (this.inventory.isRemote || this.inventory.firebase.isItemInRemoteLocation(item)) {\n                await this.inventory.firebase.syncToFirebase(item);\n            }\n            \n            // Update preview\n            const iconBtn = this.previewPane.querySelector('.preview-icon-btn');\n            if (iconBtn) {\n                iconBtn.textContent = emoji;\n            }\n            \n            // Refresh inventory display\n            this.render();\n            \n            closeModal();\n            showNotification(`Icon updated to ${emoji}`);\n        };\n        \n        // Add event listeners\n        modalContent.querySelector('#modalCloseBtn').addEventListener('mousedown', closeModal);\n        \n        // Emoji button clicks\n        modalContent.querySelectorAll('.emoji-btn').forEach(btn => {\n            btn.addEventListener('mousedown', () => {\n                selectEmoji(btn.dataset.emoji);\n            });\n        });\n        \n        // Custom emoji input\n        const customInput = modalContent.querySelector('#customEmojiInput');\n        const applyBtn = modalContent.querySelector('#applyCustomEmoji');\n        \n        const applyCustom = () => {\n            const customEmoji = customInput.value.trim();\n            if (customEmoji) {\n                selectEmoji(customEmoji);\n            }\n        };\n        \n        applyBtn.addEventListener('mousedown', applyCustom);\n        customInput.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter') {\n                applyCustom();\n            } else if (e.key === 'Escape') {\n                closeModal();\n            }\n        });\n        \n        // Search functionality\n        // const searchInput = modalContent.querySelector('#emojiSearchInput');\n        // searchInput.addEventListener('input', (e) => {\n        //     const searchTerm = e.target.value.toLowerCase();\n        //     modalContent.querySelectorAll('.emoji-category').forEach(category => {\n        //         const hasVisibleEmojis = Array.from(category.querySelectorAll('.emoji-btn')).some(btn => {\n        //             const matches = !searchTerm || btn.dataset.emoji.includes(searchTerm);\n        //             btn.style.display = matches ? '' : 'none';\n        //             return matches;\n        //         });\n        //         category.style.display = hasVisibleEmojis ? '' : 'none';\n        //     });\n        // });\n        \n        modalOverlay.addEventListener('mousedown', (e) => {\n            if (e.target === modalOverlay) closeModal();\n        });\n    }\n\n    /**\n     * Attach common modal event listeners\n     */\n    attachModalEventListeners(modalContent, modalOverlay, closeModal, handleAction) {\n        const closeBtn = modalContent.querySelector('#modalCloseBtn');\n        const cancelBtn = modalContent.querySelector('#modalCancelBtn');\n        const actionBtn = modalContent.querySelector('#modalCreateBtn, #modalImportBtn, #modalRenameBtn');\n        const input = modalContent.querySelector('input');\n        \n        if (closeBtn) closeBtn.addEventListener('mousedown', closeModal);\n        if (cancelBtn) cancelBtn.addEventListener('mousedown', closeModal);\n        if (actionBtn) actionBtn.addEventListener('mousedown', handleAction);\n        \n        if (input) {\n            input.addEventListener('keydown', (e) => {\n                if (e.key === 'Enter') {\n                    handleAction();\n                } else if (e.key === 'Escape') {\n                    closeModal();\n                }\n            });\n        }\n        \n        modalOverlay.addEventListener('mousedown', (e) => {\n            if (e.target === modalOverlay) closeModal();\n        });\n    }\n\n    \n\n    /**\n     * Escape HTML characters\n     */\n    escapeHtml(text) {\n        const map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    /**\n     * Show notification - now uses imported utility\n     */\n    notify(message, type = 'info') {\n        showNotification(message, type);\n    }\n}", "/**\n * InventoryFileHandler - Handles file upload and processing operations\n */\nexport class InventoryFileHandler {\n    constructor(inventory) {\n        this.inventory = inventory;\n    }\n\n    /**\n     * Handle file upload event\n     */\n    async handleFileUpload(event) {\n        const file = event.target.files[0];\n        if (!file) return;\n        \n        const fileName = file.name;\n        const fileExt = fileName.split('.').pop().toLowerCase();\n        \n        try {\n            if (fileExt === 'js') {\n                // Handle JavaScript files\n                const fileContent = await this.readFile(file);\n                await this.handleScriptUpload(fileName, fileContent, 'script');\n            } else if (fileExt === 'md') {\n                // Handle Markdown files\n                const fileContent = await this.readFile(file);\n                await this.handleScriptUpload(fileName, fileContent, 'markdown');\n            } else if (fileExt === 'json') {\n                // Handle JSON files\n                const fileContent = await this.readFile(file);\n                await this.handleJsonUpload(fileName, fileContent);\n            } else if (['png', 'jpg', 'jpeg', 'bmp', 'gif'].includes(fileExt)) {\n                // Handle image files\n                await this.handleImageUpload(file);\n            } else {\n                showNotification('Please upload a .js, .md, .json, or image file (.png, .jpg, .jpeg, .bmp, .gif)');\n            }\n        } catch (error) {\n            console.error('File upload error:', error);\n            showNotification(`Error uploading file: ${error.message}`);\n        }\n        \n        // Clear the input for next upload\n        event.target.value = '';\n    }\n\n    /**\n     * Read file contents\n     */\n    readFile(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = (e) => resolve(e.target.result);\n            reader.onerror = reject;\n            reader.readAsText(file);\n        });\n    }\n\n    /**\n     * Handle script file upload\n     */\n    async handleScriptUpload(fileName, content, fileType = 'script') {\n        const existingKeys = Object.keys(this.inventory.items);\n        \n        // Check for existing item\n        if (existingKeys.includes(fileName)) {\n            const itemType = fileType === 'markdown' ? 'Markdown' : 'Script';\n            this.inventory.ui.showConfirmModal(\n                `An item named \"${fileName}\" already exists. Do you want to overwrite it?`,\n                () => {\n                    // Continue with overwrite\n                    this.inventory.saveScriptFromUpload(fileName, content, fileType);\n                },\n                `Overwrite ${itemType}`\n            );\n            return;\n        }\n        \n        // No conflict, save directly\n        this.inventory.saveScriptFromUpload(fileName, content, fileType);\n    }\n\n    /**\n     * Handle JSON file upload\n     */\n    async handleJsonUpload(fileName, content) {\n        try {\n            const jsonData = JSON.parse(content);\n            \n            // Check if it's an entity inventory item format\n            if (this.isInventoryEntityFormat(jsonData)) {\n                const itemName = jsonData.name;\n                const existingKeys = Object.keys(this.inventory.items);\n                \n                // Check for existing item\n                if (existingKeys.includes(itemName)) {\n                    this.inventory.ui.showConfirmModal(\n                        `An item named \"${itemName}\" already exists. Do you want to overwrite it?`,\n                        () => {\n                            // Continue with overwrite\n                            this.inventory.saveItemFromUpload(itemName, jsonData);\n                        },\n                        'Overwrite Item'\n                    );\n                    return;\n                }\n                \n                // No conflict, save directly\n                this.inventory.saveItemFromUpload(itemName, jsonData);\n            } else {\n                this.inventory.ui.notify('The JSON file is not in the correct inventory entity format');\n            }\n        } catch (error) {\n            this.inventory.ui.notify('Invalid JSON file');\n        }\n    }\n\n    /**\n     * Handle image file upload\n     */\n    async handleImageUpload(file) {\n        const fileName = file.name;\n        const existingKeys = Object.keys(this.inventory.items);\n        \n        // Check for existing item\n        if (existingKeys.includes(fileName)) {\n            this.inventory.ui.showConfirmModal(\n                `An item named \"${fileName}\" already exists. Do you want to overwrite it?`,\n                () => {\n                    // Continue with overwrite\n                    this.inventory.firebase.uploadImageToFirebase(file);\n                },\n                'Overwrite Image'\n            );\n            return;\n        }\n        \n        // No conflict, upload directly\n        this.inventory.firebase.uploadImageToFirebase(file);\n    }\n\n    /**\n     * Check if JSON data is in inventory entity format\n     */\n    isInventoryEntityFormat(data) {\n        return data && \n               typeof data === 'object' &&\n               'author' in data &&\n               'name' in data &&\n               'created' in data &&\n               'itemType' in data &&\n               'data' in data;\n    }\n}", "import { LoadItemChange, CreateFolderChange, DeleteItemChange, SaveEntityItemChange, RenameItemChange, RenameFolderChange, RemoveFolderChange, MoveItemDirectoryChange, CreateScriptItemChange, EditScriptItemChange} from '../../change-types.js';\nimport { InventoryFirebase } from './inventory-firebase.js';\nimport { InventoryUI } from './inventory-ui.js';\nimport { InventoryFileHandler } from './inventory-file-handler.js';\n\n/**\n * Main Inventory class - orchestrates inventory functionality through specialized modules\n */\nexport class Inventory {\n    constructor() {\n        // DOM elements\n        this.container = document.getElementById('inventory-page');\n        this.previewPane = document.getElementById('previewPane');\n        \n        // State management\n        this.items = this.loadItems();\n        this.folders = this.loadFolders();\n        this.selectedItem = null;\n        this.currentFolder = null;\n        \n        // Always show preview pane on initialization\n        if (this.previewPane) {\n            this.previewPane.style.display = 'block';\n        }\n        \n        // Listen for page switches to ensure preview pane is visible\n        window.addEventListener('page-switched', (e) => {\n            if (e.detail.pageId === 'inventory') {\n                // Ensure preview pane is visible when switching to inventory\n                if (this.previewPane) {\n                    this.previewPane.style.display = 'block';\n                }\n                // Show empty preview if no item selected\n                if (!this.selectedItem) {\n                    this.ui.showEmptyPreview();\n                }\n                this.ui.render();\n            }\n        });\n        this.expandedFolders = new Set();\n        this.draggedItem = null;\n        this.isRemote = false;\n        this.sortBy = 'alphabetical'; // alphabetical, date, last_used\n        this.sortDirection = 'asc'; // asc or desc\n        \n        // Initialize modules\n        this.firebase = new InventoryFirebase(this);\n        this.ui = new InventoryUI(this);\n        this.fileHandler = new InventoryFileHandler(this);\n        \n        // Setup initial UI\n        this.ui.setupDropZone();\n        this.ui.render();\n        this.ui.showEmptyPreview();\n    }\n    \n    /**\n     * Reload inventory\n     */\n    reload() {\n        this.items = this.loadItems();\n        this.folders = this.loadFolders();\n        this.ui.render();\n    }\n    \n    /**\n     * Load items from localStorage\n     */\n    loadItems() {\n        const items = {};\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (key.startsWith('inventory_') && !key.startsWith('inventory_folder_')) {\n                try {\n                    const itemKey = key.replace('inventory_', '');\n                    const item = JSON.parse(localStorage.getItem(key));\n                    \n                    // Migrate script items to have startup and active properties\n                    if (item.itemType === 'script') {\n                        if (item.startup === undefined) item.startup = false;\n                        if (item.active === undefined) item.active = false;\n                    }\n                    \n                    items[itemKey] = item;\n                } catch (error) {\n                    console.error(`Failed to parse inventory item ${key}:`, error);\n                }\n            }\n        }\n        return items;\n    }\n    \n    /**\n     * Load folders from localStorage\n     */\n    loadFolders() {\n        const folders = {};\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (key.startsWith('inventory_folder_')) {\n                try {\n                    const folderKey = key.replace('inventory_folder_', '');\n                    folders[folderKey] = JSON.parse(localStorage.getItem(key));\n                } catch (error) {\n                    console.error(`Failed to parse folder ${key}:`, error);\n                }\n            }\n        }\n        return folders;\n    }\n    \n    /**\n     * Remove an item from inventory\n     */\n    removeItem(itemName) {\n        this.ui.showConfirmModal(\n            `Are you sure you want to remove \"${itemName}\" from your inventory?`,\n            () => {\n                let change = new DeleteItemChange(itemName, {source: 'ui'});\n                changeManager.applyChange(change);\n                this.ui.render();\n                showNotification(`Removed \"${itemName}\" from inventory`);\n            },\n            'Remove Item'\n        );\n    }\n\n\n    syncItem(itemName, item){\n        this.items[itemName] = item;\n        item.last_used = Date.now();\n        const storageKey = `inventory_${itemName}`;\n        localStorage.setItem(storageKey, JSON.stringify(item));\n        if (this.firebase.isItemInRemoteLocation(item)) {\n            this.firebase.syncToFirebase(item);\n        }\n        this.ui.render();\n    }\n    \n    /**\n     * Sync folder data\n     */\n    syncFolder(folderKey, folder) {\n        this.folders[folderKey] = folder;\n        const storageKey = `inventory_folder_${folderKey}`;\n        localStorage.setItem(storageKey, JSON.stringify(folder));\n        \n        // Sync to Firebase if folder is remote\n        if (folder.remote) {\n            this.firebase.syncFolderToFirebase(folderKey, folder);\n        }\n    }\n    \n    /**\n     * Get available scripts in current folder and all child subfolders recursively\n     */\n    getAvailableScripts() {\n        const scripts = [];\n\n        // Helper function to get all scripts in a folder and its subfolders\n        const getScriptsInFolder = (folderPath) => {\n            // Get scripts directly in this folder\n            const scriptsInFolder = Object.values(this.items).filter(item =>{\n                if(folderPath){\n                    return item.itemType === 'script' && item.folder === folderPath\n                }else{\n                    return !item.folder\n                }\n            });\n               \n            scripts.push(...scriptsInFolder);\n\n            // Get all subfolders of this folder\n            const subfolders = Object.entries(this.folders).filter(([name, folder]) =>\n                folder.parent === folderPath\n            );\n\n            // Recursively get scripts from each subfolder\n            for (const [subfolderName] of subfolders) {\n                getScriptsInFolder(subfolderName);\n            }\n        };\n\n        // Start from current folder\n        getScriptsInFolder(this.currentFolder);\n\n        return scripts;\n    }\n\n    \n    /**\n     * Select an item\n     */\n    selectItem(itemName) {\n        if (this.selectedItem === itemName) {\n            // Deselect if clicking the same item\n            this.selectedItem = null;\n            this.ui.showEmptyPreview();\n        } else {\n            this.selectedItem = itemName;\n            this.ui.showPreview(itemName);\n        }\n        this.ui.render();\n    }\n    \n    /**\n     * Download selected item\n     */\n    downloadSelectedItem() {\n        if (!this.selectedItem) return;\n        \n        const item = this.items[this.selectedItem];\n        if (!item) return;\n        \n        let blob, fileName, message;\n        \n        // Export based on item type\n        if (item.itemType === 'script') {\n            // Export as JavaScript file\n            blob = new Blob([item.data], { type: 'text/javascript' });\n            fileName = item.name;\n            message = `Exported script \"${item.name}\"`;\n        } else if (item.itemType === 'markdown') {\n            // Export as Markdown file\n            blob = new Blob([item.data], { type: 'text/markdown' });\n            fileName = item.name;\n            message = `Exported markdown \"${item.name}\"`;\n        } else {\n            // Export as JSON for entities and other types\n            const jsonStr = JSON.stringify(item, null, 2);\n            blob = new Blob([jsonStr], { type: 'application/json' });\n            fileName = `${item.name}.json`;\n            message = `Exported \"${item.name}\" as JSON`;\n        }\n        \n        // Create download link\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = fileName;\n        \n        // Trigger download\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        \n        // Cleanup\n        URL.revokeObjectURL(url);\n        \n        // Show notification\n        showNotification(message);\n    }\n    \n    /**\n     * Export selected item as JSON (legacy method for compatibility)\n     */\n    exportSelectedItem() {\n        this.downloadSelectedItem();\n    }\n    \n    /**\n     * Update last used timestamp for an item\n     */\n    updateLastUsed(itemName) {\n        const item = this.items[itemName];\n        if (item) {\n            item.lastUsed = Date.now();\n        }\n    }\n    \n\n    /**\n     * Load entity to scene by name\n     */\n    async loadEntityToSceneByName(itemName) {\n        this.updateLastUsed(itemName);\n        let change = new LoadItemChange(itemName, SM.selectedEntity, null, {source: 'ui'});\n        await window.changeManager.applyChange(change);\n    }\n    \n    /**\n     * Load by command\n     */\n    async loadByCMD(itemName) {\n        let data = localStorage.getItem(\"inventory_\" + itemName);\n        if (!data) {\n            log(\"inventory\", \"NO ITEM NAMED: \", itemName);\n            return;\n        }\n        let item = JSON.parse(data);\n        if (!item.history || !item.history.length) {\n            log(\"inventory\", \"Item has no history\");\n            return;\n        }\n        \n        for (let i = 0; i < item.history.length; i++) {\n            let h = item.history[i];\n            let command = \"\";\n            Object.entries(h).forEach(([k, v]) => {\n                if (k === \"options\") {\n                    return;\n                }\n                if (typeof(v) === \"object\") {\n                    command += JSON.stringify(v) + \" \";\n                } else {\n                    command += v + \" \";\n                }\n            });\n            command = command.trim();\n            if (window.RunCommand) {\n                await window.RunCommand(command);\n            }\n        }\n    }\n    \n    /**\n     * Open script editor\n     */\n    openScriptEditor(itemName) {\n        const item = this.items[itemName];\n        if (!item || item.itemType !== 'script') return;\n        \n        // Update last_used timestamp\n        this.updateLastUsed(itemName);\n        \n        // Create a custom event to open the script editor\n        const event = new CustomEvent('open-script-editor', {\n            detail: {\n                name: itemName,\n                content: item.data,\n                author: item.author,\n                created: item.created\n            }\n        });\n        window.dispatchEvent(event);\n    }\n    \n    /**\n     * Open markdown editor\n     */\n    openMarkdownEditor(itemName) {\n        const item = this.items[itemName];\n        if (!item || item.itemType !== 'markdown') return;\n        \n        // Update last_used timestamp\n        this.updateLastUsed(itemName);\n        \n        // Create a custom event to open the script editor with markdown mode\n        const event = new CustomEvent('open-script-editor', {\n            detail: {\n                name: itemName,\n                content: item.data,\n                author: item.author,\n                created: item.created,\n                isMarkdown: true\n            }\n        });\n        window.dispatchEvent(event);\n    }\n    \n    /**\n     * Create new script\n     */\n    async createNewScript() {\n        // Show modal for script name input\n        this.ui.showScriptNameModal();\n    }\n    \n    \n    /**\n     * Finalize script creation\n     */\n    async finalizeScriptCreation(finalName, fileType = 'script') {\n        let change = new CreateScriptItemChange(finalName, {source: 'ui', fileType: fileType});\n        window.changeManager.applyChange(change);\n\n        this.ui.render();\n        const itemType = fileType === 'markdown' ? 'markdown file' : 'script';\n        showNotification(`Created new ${itemType} \"${finalName}\"`);\n        \n        // Open appropriate editor based on file type\n        if (fileType === 'markdown') {\n            this.openMarkdownEditor(finalName);\n        } else {\n            this.openScriptEditor(finalName);\n        }\n    }\n    \n    /**\n     * Save script item\n     */\n    saveScriptFromUpload(fileName, content, fileType = 'script') {\n        // Create item based on type\n        const now = Date.now();\n        const item = {\n            author: SM.scene?.localUser?.name || 'Unknown',\n            name: fileName,\n            created: now,\n            last_used: now,\n            itemType: fileType,\n            icon: fileType === 'markdown' ? '\uD83D\uDCDD' : '\uD83D\uDCDC',\n            description: '',\n            data: content,\n            startup: false,  // Script runs on scene startup (only relevant for scripts)\n            startupSequence: \"onSceneLoaded\",\n            active: false,    // Script is active even without being attached to GameObject (only relevant for scripts)\n            global: false,    // Script is global (only relevant for scripts)\n            autoUpdate: false // Script auto updates when imported from remote folder\n        };\n        \n        // Only add folder property if we're in a folder\n        if (this.currentFolder) {\n            item.folder = this.currentFolder;\n        }\n\n        this.syncItem(fileName, item);\n        const itemTypeDisplay = fileType === 'markdown' ? 'markdown' : 'script';\n        showNotification(`Added ${itemTypeDisplay} \"${fileName}\" to inventory`);\n    }\n    \n    /**\n     * Save inventory item\n     */\n    saveItemFromUpload(itemName, jsonData) {\n        // Add folder property if we're in a folder\n        if (this.currentFolder && !jsonData.folder) {\n            jsonData.folder = this.currentFolder;\n        }\n        \n        // Save to localStorage\n        const storageKey = `inventory_${itemName}`;\n        localStorage.setItem(storageKey, JSON.stringify(jsonData));\n        \n        // Update local items\n        this.items[itemName] = jsonData;\n        \n        // Sync to Firebase if in remote location\n        if (this.firebase.isItemInRemoteLocation()) {\n            this.firebase.syncToFirebase(jsonData);\n        }\n        \n        // Select the imported item\n        this.selectItem(itemName);\n        \n        // Show success message\n        this.ui.notify(`Imported \"${itemName}\" to inventory`);\n    }\n    \n    /**\n     * Save image item\n     */\n    saveImageItem(fileName, imageItem) {\n        // Only add folder property if we're in a folder\n        if (this.currentFolder) {\n            imageItem.folder = this.currentFolder;\n        }\n        \n        // Save to localStorage\n        const storageKey = `inventory_${fileName}`;\n        localStorage.setItem(storageKey, JSON.stringify(imageItem));\n        \n        // Update items cache\n        this.items[fileName] = imageItem;\n        \n        // Sync to Firebase if in remote location\n        if (this.firebase.isItemInRemoteLocation()) {\n            this.firebase.syncToFirebase(imageItem);\n        }\n        \n        // Show success notification\n        this.ui.notify(`Image \"${fileName}\" added to inventory`);\n        \n        // Re-render\n        this.ui.render();\n    }\n    \n    /**\n     * Create new folder\n     */\n    createNewFolder() {\n        this.ui.showFolderNameModal(async (folderName) => {\n            if (!folderName || folderName.trim() === '') return;\n            \n            // Validate folder name for Firebase compliance\n            if (!this.firebase.isValidFirebasePath(folderName)) {\n                this.ui.notify('Folder name cannot contain: . $ # [ ] / or be empty');\n                return;\n            }\n            \n            // Sanitize the folder name\n            const sanitizedName = this.firebase.sanitizeFirebasePath(folderName);\n            \n            let change = new CreateFolderChange(sanitizedName, this.currentFolder, {source: 'ui'});\n            window.changeManager.applyChange(change);\n            \n            // Re-render\n            this.ui.render();\n            \n            this.ui.notify(`Created folder \"${sanitizedName}\"`);\n        });\n    }\n    \n    /**\n     * Open folder\n     */\n    openFolder(folderName) {\n        log(\"inventory\", \"Opening folder: \", folderName)\n        this.currentFolder = folderName;\n        // Don't deselect item when navigating folders\n        // this.selectedItem = null;\n        // this.ui.showEmptyPreview();\n        this.updateFolderLastUsed(folderName);\n        this.ui.render();\n        // Re-show preview if item was selected\n        if (this.selectedItem) {\n            this.ui.showPreview(this.selectedItem);\n        }\n    }\n    \n    /**\n     * Update folder last used timestamp\n     */\n    updateFolderLastUsed(folderName) {\n        const folder = this.folders[folderName];\n        if (folder) {\n            folder.lastUsed = Date.now();\n            const storageKey = `inventory_folder_${folderName}`;\n            localStorage.setItem(storageKey, JSON.stringify(folder));\n        }\n    }\n    \n    /**\n     * Navigate to folder path\n     */\n    navigateToFolder(folderPath) {\n        // Handle empty string, '/', or falsy values as root navigation\n        if (!folderPath || folderPath === '/' || folderPath === '') {\n            this.currentFolder = null;\n        } else {\n            this.currentFolder = folderPath;\n        }\n        log(\"inventory\", \"Navigating to folder: \", folderPath)\n        // Don't deselect item when navigating folders\n        // this.selectedItem = null;\n        // this.ui.showEmptyPreview();\n        this.ui.render();\n        // Re-show preview if item was selected\n        if (this.selectedItem) {\n            this.ui.showPreview(this.selectedItem);\n        }\n    }\n    \n    /**\n     * Toggle folder expansion\n     */\n    toggleFolderExpansion(folderName) {\n        if (this.expandedFolders.has(folderName)) {\n            this.expandedFolders.delete(folderName);\n        } else {\n            this.expandedFolders.add(folderName);\n        }\n        this.ui.render();\n    }\n    \n    /**\n     * Move item to folder\n     */\n    async moveItemToFolder(itemName, folderName) {\n        let change = new MoveItemDirectoryChange(itemName, folderName, {source: 'ui'});\n        let outcome = await window.changeManager.applyChange(change);\n        if (!outcome) return;\n        \n        this.ui.render();\n        if (folderName) {\n            this.ui.notify(`Moved \"${itemName}\" to folder \"${folderName}\"`);\n        } else {\n            this.ui.notify(`Moved \"${itemName}\" to root`);\n        }\n    }\n    \n    /**\n     * Move folder to another folder\n     */\n    async moveFolderToFolder(sourceFolderName, targetFolderName) {\n        const sourceFolder = this.folders[sourceFolderName];\n        if (!sourceFolder) return;\n        \n        // Prevent moving a folder into itself or its descendants\n        if (sourceFolderName === targetFolderName) return;\n        \n        // Check if target is a descendant of source\n        if (targetFolderName && this.isFolderDescendant(targetFolderName, sourceFolderName)) {\n            this.ui.notify(`Cannot move folder into its own subfolder`);\n            return;\n        }\n        \n        // Update the folder's parent\n        sourceFolder.parent = targetFolderName || null;\n        this.folders[sourceFolderName] = sourceFolder;\n        \n        // // Save to localStorage\n        // this.saveToLocalStorage();\n        \n        // // Sync with Firebase if enabled\n        // await this.firebase.syncFolder(sourceFolderName, sourceFolder);\n        \n        this.ui.render();\n        if (targetFolderName) {\n            showNotification(`Moved folder \"${sourceFolder.name}\" to \"${this.folders[targetFolderName].name}\"`);\n        } else {\n            showNotification(`Moved folder \"${sourceFolder.name}\" to root`);\n        }\n    }\n    \n    /**\n     * Check if a folder is a descendant of another folder\n     */\n    isFolderDescendant(childFolderName, parentFolderName) {\n        let current = this.folders[childFolderName];\n        while (current && current.parent) {\n            if (current.parent === parentFolderName) {\n                return true;\n            }\n            current = this.folders[current.parent];\n        }\n        return false;\n    }\n\n    \n    /**\n     * Handle folder rename with proper cleanup\n     */\n    handleFolderRename(folderKey, newName) {\n        const folder = this.folders[folderKey];\n        if (!folder) return;\n        if(newName === folder.name) return;\n        \n        // Generate new folder key\n        newName = newName.replace(/\\s+/g, '_');\n        \n        // Ensure unique folder key\n        if (this.folders[newName]) {\n            let counter = 1;\n            while (this.folders[`${newName}_${counter}`]) {\n                counter++;\n            }\n            newName = `${newName}_${counter}`;\n        }\n        // Apply the rename change\n        let change = new RenameFolderChange(folderKey, newName, {source: 'ui'});\n        changeManager.applyChange(change);\n    }\n    \n    /**\n     * Execute folder rename (called by change manager)\n     */\n    _renameFolder(oldKey, newKey) {\n        const folder = this.folders[oldKey];\n        if (!folder) return;\n        \n        // If folder was remote, remove remote status\n        if (folder.remote) {\n            folder.remote = false;\n            showNotification('Warning: Renamed folder is no longer synchronized with Firebase', 'warning');\n        }\n        \n        // Update folder name\n        folder.name = newKey;\n        \n        // Update folder in storage\n        this.folders[newKey] = folder;\n        delete this.folders[oldKey];\n        \n        // Update localStorage\n        localStorage.removeItem(`inventory_folder_${oldKey}`);\n        localStorage.setItem(`inventory_folder_${newKey}`, JSON.stringify(folder));\n        \n        // Update all items in this folder to reference new key\n        Object.entries(this.items).forEach(([itemKey, item]) => {\n            if (item.folder === oldKey) {\n                item.folder = newKey;\n                localStorage.setItem(`inventory_${itemKey}`, JSON.stringify(item));\n            }\n        });\n        \n        // Update all subfolders to reference new parent key\n        Object.entries(this.folders).forEach(([subKey, subfolder]) => {\n            if (subfolder.parent === oldKey) {\n                subfolder.parent = newKey;\n                localStorage.setItem(`inventory_folder_${subKey}`, JSON.stringify(subfolder));\n            }\n        });\n        \n        // Update current folder if needed\n        if (this.currentFolder === oldKey) {\n            this.currentFolder = newKey;\n        }\n        \n        // Update expanded folders set\n        if (this.expandedFolders.has(oldKey)) {\n            this.expandedFolders.delete(oldKey);\n            this.expandedFolders.add(newKey);\n        }\n        \n        this.ui.render();\n        showNotification(`Folder renamed to \"${newKey}\"`);\n        \n        // Re-show folder details with updated info\n        if (this.currentFolder === newKey) {\n            this.ui.showFolderDetails(newKey, this.folders[newKey]);\n        }\n    }\n    \n    /**\n     * Remove folder\n     */\n    removeFolder(folderName) {\n        const folder = this.folders[folderName];\n        if (!folder) return;\n        \n        // Check if folder has items or subfolders\n        const hasItems = Object.values(this.items).some(item => item.folder === folderName);\n        const hasSubfolders = Object.values(this.folders).some(f => f.parent === folderName);\n        \n        if (hasItems || hasSubfolders) {\n            this.ui.showConfirmModal(\n                `Folder \"${folder.name}\" contains ${hasItems ? 'items' : 'subfolders'}. All contents will be permanently deleted. Are you sure?`,\n                () => {\n                    this.finalizeRemoveFolder(folderName, folder);\n                },\n                'Delete Folder'\n            );\n            return;\n        }\n        \n        // Empty folder, remove directly\n        this.finalizeRemoveFolder(folderName, folder);\n    }\n    \n    /**\n     * Finalize remove folder\n     */\n    async finalizeRemoveFolder(folderName, folder) {\n        let change = new RemoveFolderChange(folderName, {source: 'ui'});\n        window.changeManager.applyChange(change);\n        this.ui.render();\n        this.ui.notify(`Removed folder \"${folder.name}\"`);\n    }\n    \n    /**\n     * Get current folder path\n     */\n    getCurrentFolderPath() {\n        if (!this.currentFolder) return '/';\n        \n        const parts = [];\n        let current = this.currentFolder;\n        \n        while (current) {\n            parts.unshift(current);\n            const folder = this.folders[current];\n            current = folder?.parent;\n        }\n        \n        return '/' + parts.join('/');\n    }\n    \n    /**\n     * Get item count in folder\n     */\n    getItemCountInFolder(folderKey) {\n        let count = 0;\n        \n        // Count items\n        Object.values(this.items).forEach(item => {\n            if (item.folder === folderKey) count++;\n        });\n        \n        // Count subfolders\n        Object.values(this.folders).forEach(folder => {\n            if (folder.parent === folderKey) count++;\n        });\n        \n        return count;\n    }\n    \n    /**\n     * Sort items\n     */\n    sortItems(items, isFolder = false) {\n        const sorted = [...items].sort((a, b) => {\n            let compareValue = 0;\n            \n            switch (this.sortBy) {\n                case 'alphabetical':\n                    compareValue = (a.name || a.key).localeCompare(b.name || b.key);\n                    break;\n                case 'date':\n                    compareValue = (a.created || 0) - (b.created || 0);\n                    break;\n                case 'last_used':\n                    // If no last_used, fall back to created date\n                    const aTime = a.last_used || a.lastUsed || a.created || 0;\n                    const bTime = b.last_used || b.lastUsed || b.created || 0;\n                    compareValue = aTime - bTime;\n                    break;\n            }\n            \n            // Apply sort direction\n            return this.sortDirection === 'asc' ? compareValue : -compareValue;\n        });\n        \n        return sorted;\n    }\n    \n    /**\n     * Check if data is inventory entity format\n     */\n    isInventoryEntityFormat(data) {\n        return this.fileHandler.isInventoryEntityFormat(data);\n    }\n    \n    /**\n     * Check if item is in remote location\n     */\n    isItemInRemoteLocation() {\n        return this.firebase.isItemInRemoteLocation();\n    }\n    \n    /**\n     * Calculate size of item or folder\n     */\n    calculateSize(itemOrFolderName, isFolder = false) {\n        let totalSize = 0;\n        \n        if (isFolder) {\n            // Calculate size of all items in this folder\n            Object.entries(this.items).forEach(([key, item]) => {\n                if (item.folder === itemOrFolderName) {\n                    const itemData = JSON.stringify(item);\n                    totalSize += new Blob([itemData]).size;\n                }\n            });\n            \n            // Calculate size of all subfolders\n            Object.entries(this.folders).forEach(([key, folder]) => {\n                if (folder.parent === itemOrFolderName) {\n                    totalSize += this.calculateSize(key, true);\n                }\n            });\n        } else {\n            // Calculate size of single item\n            const item = this.items[itemOrFolderName];\n            if (item) {\n                const itemData = JSON.stringify(item);\n                totalSize = new Blob([itemData]).size;\n            }\n        }\n        \n        return totalSize;\n    }\n    \n    /**\n     * Get current view contents\n     */\n    getCurrentViewContents() {\n        const contents = {\n            folders: {},\n            items: {}\n        };\n        \n        // Get folders in current location\n        Object.entries(this.folders).forEach(([key, folder]) => {\n            if (folder.parent === this.currentFolder) {\n                contents.folders[key] = folder;\n            }\n        });\n        \n        // Get items in current location\n        Object.entries(this.items).forEach(([key, item]) => {\n            if (item.folder === this.currentFolder) {\n                contents.items[key] = item;\n            }\n        });\n        \n        return contents;\n    }\n    \n    /**\n     * Get folder contents recursively\n     */\n    getFolderContentsRecursive(folderName) {\n        const contents = {\n            items: {},\n            folders: {}\n        };\n\n        // Get all items in this folder\n        Object.entries(this.items).forEach(([key, item]) => {\n            if (item.folder === folderName) {\n                contents.items[key] = item;\n            }\n        });\n\n        // Get all subfolders and their contents\n        Object.entries(this.folders).forEach(([key, folder]) => {\n            if (folder.parent === folderName) {\n                contents.folders[key] = folder;\n                // Recursively get subfolder contents\n                const subContents = this.getFolderContentsRecursive(key);\n                Object.assign(contents.items, subContents.items);\n                Object.assign(contents.folders, subContents.folders);\n            }\n        });\n\n        return contents;\n    }\n\n    /**\n     * Update all existing scripts to include new schema parameters\n     */\n    updateScriptSchema() {\n        let updatedCount = 0;\n\n        // Iterate through all items\n        Object.entries(this.items).forEach(([itemKey, item]) => {\n            // Only process script items\n            if (item.itemType === 'script') {\n                let needsUpdate = false;\n\n                // Add global parameter if missing\n                if (item.global === undefined) {\n                    item.global = false;\n                    needsUpdate = true;\n                }\n\n                // Add global parameter if missing\n                if (item.startup === undefined) {\n                    item.startup = false;\n                    needsUpdate = true;\n                }\n\n                // Add global parameter if missing\n                if (item.active === undefined) {\n                    item.active = false;\n                    needsUpdate = true;\n                }\n\n                // Add startupSequence parameter if missing\n                if (item.startupSequence === undefined) {\n                    item.startupSequence = \"onSceneLoaded\";\n                    needsUpdate = true;\n                }\n\n                // Save updated item if changes were made\n                if (needsUpdate) {\n                    const storageKey = `inventory_${itemKey}`;\n                    localStorage.setItem(storageKey, JSON.stringify(item));\n                    updatedCount++;\n                }\n            }\n        });\n\n        // Reload items from localStorage to ensure consistency\n        if (updatedCount > 0) {\n            this.items = this.loadItems();\n            this.ui.render();\n            showNotification(`Updated ${updatedCount} script${updatedCount > 1 ? 's' : ''} with new schema parameters`);\n        } else {\n            showNotification('All scripts are already up to date');\n        }\n\n        return updatedCount;\n    }\n\n    /**\n     * Convert entity data from old format to new format\n     * Old format: Transform is a component with options wrapper\n     * New format: Transform is auto-generated, components don't have options wrapper\n     */\n    convertEntityToNewFormat(entityData) {\n        if (!entityData) return null;\n\n        // Helper to check if entity has old format\n        const hasOldFormat = (entity) => {\n            if (!entity.components || !Array.isArray(entity.components)) return false;\n            // Check if any component has the old 'options' wrapper or Transform is in components\n            return entity.components.some(comp =>\n                comp.options !== undefined || comp.type === 'Transform'\n            );\n        };\n\n        // Helper to convert a single entity\n        const convertEntity = (entity) => {\n            let needsConversion = hasOldFormat(entity);\n\n            if (needsConversion) {\n                // Find and extract Transform component data\n                let transformComponent = entity.components.find(c => c.type === 'Transform');\n                let transformData = null;\n\n                if (transformComponent) {\n                    transformData = {\n                        localPosition: transformComponent.properties?.localPosition || { x: 0, y: 0, z: 0 },\n                        localRotation: transformComponent.properties?.localRotation || { x: 0, y: 0, z: 0, w: 1 },\n                        localScale: transformComponent.properties?.localScale || { x: 1, y: 1, z: 1 }\n                    };\n                }\n\n                // Remove Transform from components and clean up options wrapper\n                entity.components = entity.components\n                    .filter(comp => comp.type !== 'Transform')\n                    .map(comp => {\n                        return comp;\n                    });\n\n                // Add transform data at entity level\n                if (transformData) {\n                    entity.transform = transformData;\n                }\n            }\n\n            // Recursively convert children\n            if (entity.children && Array.isArray(entity.children)) {\n                entity.children = entity.children.map(child => convertEntity(child));\n            }\n\n            return entity;\n        };\n\n        // Convert the entity tree\n        return convertEntity(JSON.parse(JSON.stringify(entityData))); // Deep clone before conversion\n    }\n\n    /**\n     * Update component names from BanterX format to simplified format\n     */\n    updateComponentNames(entityData) {\n        if (!entityData) return null;\n\n        const componentNameMap = {\n            'BanterGeometry': 'Geometry',\n            'BanterMaterial': 'Material',\n            'BanterRigidbody': 'Rigidbody',\n            'BanterAudioSource': 'AudioSource',\n            'BanterVideoPlayer': 'VideoPlayer',\n            'BanterText': 'Text',\n            'BanterBillboard': 'Billboard',\n            'BanterGrabHandle': 'GrabHandle',\n            'BanterSyncedObject': 'SyncedObject',\n            'BanterPhysicMaterial': 'PhysicMaterial',\n            'BanterMirror': 'Mirror',\n            'BanterBrowser': 'Browser',\n            'BanterHeldEvents': 'HeldEvents',\n            'BanterAttachedObject': 'AttachedObject',\n            'BanterGLTF': 'GLTF',\n            'BanterAssetBundle': 'AssetBundle',\n            'BanterPortal': 'Portal',\n            'BanterColliderEvents': 'ColliderEvents',\n            'BanterBox': 'Box',\n            'BanterCircle': 'Circle',\n            'BanterCone': 'Cone',\n            'BanterCylinder': 'Cylinder',\n            'BanterPlane': 'Plane',\n            'BanterRing': 'Ring',\n            'BanterSphere': 'Sphere',\n            'BanterTorus': 'Torus',\n            'BanterInvertedMesh': 'InvertedMesh',\n            'BanterKitItem': 'KitItem',\n            'BanterStreetView': 'StreetView',\n            'BanterWorldObject': 'WorldObject',\n            'BanterGrabbable': 'Grabbable',\n            'BanterUIPanel': 'UIPanel',\n            'BanterAvatarPedestal': 'AvatarPedestal',\n            'BanterTorusKnot': 'TorusKnot',\n            'BanterApple': 'Apple',\n            'BanterCatenoid': 'Catenoid',\n            'BanterFermet': 'Fermet',\n            'BanterHelicoid': 'Helicoid',\n            'BanterHorn': 'Horn',\n            'BanterKlein': 'Klein',\n            'BanterMobius': 'Mobius',\n            'BanterMobius3d': 'Mobius3d',\n            'BanterNatica': 'Natica',\n            'BanterPillow': 'Pillow',\n            'BanterScherk': 'Scherk',\n            'BanterSnail': 'Snail',\n            'BanterSpiral': 'Spiral',\n            'BanterSpring': 'Spring'\n        };\n\n        const updateEntity = (entity) => {\n            let needsUpdate = false;\n\n            // Update component type names\n            if (entity.components && Array.isArray(entity.components)) {\n                entity.components = entity.components.map(comp => {\n                    if (componentNameMap[comp.type]) {\n                        comp.type = componentNameMap[comp.type];\n                        needsUpdate = true;\n                    }\n                    return comp;\n                });\n            }\n\n            // Recursively update children\n            if (entity.children && Array.isArray(entity.children)) {\n                entity.children = entity.children.map(child => updateEntity(child));\n            }\n\n            return entity;\n        };\n\n        return updateEntity(JSON.parse(JSON.stringify(entityData))); // Deep clone before updating\n    }\n\n    /**\n     * Update all entity items in inventory to new format\n     * This converts items from the old format (Transform as component with options)\n     * to the new format (Transform auto-generated at entity level)\n     * Also updates component names from BanterX format to simplified format\n     */\n    updateItems() {\n        let updatedCount = 0;\n        let alreadyUpdatedCount = 0;\n\n        // Iterate through all items\n        Object.entries(this.items).forEach(([itemKey, item]) => {\n            // Only process entity items\n            if (item.itemType === 'entity') {\n                let needsUpdate = false;\n\n                // Check if item needs conversion\n                const hasOldFormat = (entityData) => {\n                    if (!entityData || !entityData.components) return false;\n                    return entityData.components.some(c =>\n                        c.options !== undefined || c.type === 'Transform'\n                    );\n                };\n\n                // Check if item has BanterX component names\n                const hasBanterNames = (entityData) => {\n                    if (!entityData || !entityData.components) return false;\n                    const checkEntity = (entity) => {\n                        if (entity.components && entity.components.some(c => c.type && c.type.startsWith('Banter'))) {\n                            return true;\n                        }\n                        if (entity.children && entity.children.some(child => checkEntity(child))) {\n                            return true;\n                        }\n                        return false;\n                    };\n                    return checkEntity(entityData);\n                };\n\n                // Check if entity has spaceProps property\n                const hasSpaceProps = (entityData) => {\n                    if (!entityData) return false;\n                    const checkEntity = (entity) => {\n                        if (entity.spaceProps !== undefined) {\n                            return true;\n                        }\n                        if (entity.children && entity.children.some(child => checkEntity(child))) {\n                            return true;\n                        }\n                        return false;\n                    };\n                    return checkEntity(entityData);\n                };\n\n                // Helper to remove spaceProps from entity tree\n                const removeSpaceProps = (entityData) => {\n                    if (!entityData) return entityData;\n\n                    const cleanEntity = (entity) => {\n                        // Remove spaceProps property if it exists\n                        if (entity.spaceProps !== undefined) {\n                            delete entity.spaceProps;\n                        }\n\n                        // Recursively clean children\n                        if (entity.children && Array.isArray(entity.children)) {\n                            entity.children = entity.children.map(child => cleanEntity(child));\n                        }\n\n                        return entity;\n                    };\n\n                    return cleanEntity(JSON.parse(JSON.stringify(entityData))); // Deep clone before cleaning\n                };\n\n                // Convert old format if needed\n                if (hasOldFormat(item.data)) {\n                    item.data = this.convertEntityToNewFormat(item.data);\n                    needsUpdate = true;\n                }\n\n                // Update component names if needed\n                if (hasBanterNames(item.data)) {\n                    item.data = this.updateComponentNames(item.data);\n                    needsUpdate = true;\n                }\n\n                // Remove spaceProps if present\n                if (hasSpaceProps(item.data)) {\n                    item.data = removeSpaceProps(item.data);\n                    needsUpdate = true;\n                }\n\n                if (needsUpdate) {\n                    // Save updated item\n                    const storageKey = `inventory_${itemKey}`;\n                    localStorage.setItem(storageKey, JSON.stringify(item));\n                    updatedCount++;\n\n                    log('inventory', `Updated item \"${itemKey}\"`);\n                } else {\n                    alreadyUpdatedCount++;\n                }\n            }\n        });\n\n        // Reload items from localStorage to ensure consistency\n        if (updatedCount > 0) {\n            this.items = this.loadItems();\n            this.ui.render();\n            showNotification(`Updated ${updatedCount} entity item${updatedCount > 1 ? 's' : ''}`);\n        } else {\n            showNotification(`All ${alreadyUpdatedCount} entity items are already up to date`);\n        }\n\n        return { updated: updatedCount, alreadyUpdated: alreadyUpdatedCount };\n    }\n\n    installAll(path, minUpdateTime){\n        let data = `import\u00B6${path}\u00B6${minUpdateTime}`;\n        net.sendOneShot(data);\n    }\n\n\n}", "import { EditScriptItemChange, ComponentPropertyChange } from '../../change-types.js';\nimport { confirm, showNotification } from '../../utils.js';\n\nexport class ScriptEditor {\n    constructor(scriptData) {\n        this.currentScript = scriptData;\n        this.editor = null;\n        this.isModified = false;\n        this.scriptRunnerEntities = new Map(); // Map of entityId -> ScriptRunner component\n        this.selectedEntities = new Set();\n        this.codemirror = null;\n        this.pageId = `script-editor-${scriptData.name.replace(/[^a-zA-Z0-9]/g, '-')}-${Date.now()}`;\n        this.pageElement = null;\n        this.navElement = null;\n        this.keydownHandler = null;\n        this.eventListenersSetup = false;\n        this.saveBtnHandler = null;\n        this.playBtnHandler = null;\n        this.stopBtnHandler = null;\n        this.closeBtnHandler = null;\n        this.entityButtonHandlers = new Map();\n        this.lastSave = scriptData.created;\n    }\n    \n    async open(openInBackground) {\n        this.isModified = false;\n        // Switch to the editor page\n        await this.createEditorPage();\n        \n        navigation.addDynamicPage(this.pageId, this.pageElement, this.navElement);\n        if(!openInBackground){\n            navigation.switchPage(this.pageId);\n        }\n        \n        // Render footer after page is added to DOM\n        setTimeout(() => {\n            this.renderFooter();\n        }, 0);\n        \n        this.pageSwitchHandler = (e) => {\n            if(e.detail.pageId === this.pageId){\n                this.renderFooter();\n                if (this.codemirror) {\n                    setTimeout(() => this.codemirror.refresh(), 100);\n                }\n            }\n        };\n        window.addEventListener('page-switched', this.pageSwitchHandler);\n    }\n\n    renderFooter(){\n        this.findScriptRunnerEntities();\n        const footer = this.pageElement?.querySelector('.script-editor-footer');\n        if(footer){\n            footer.innerHTML = `\n                <div class=\"footer-info\">\n                    <span>Author: ${this.currentScript.author}</span>\n                    <span>Created: ${new Date(this.currentScript.created).toLocaleString()}</span>\n                </div>\n                ${this.scriptRunnerEntities.size > 0 ? `\n                <div class=\"scriptrunner-controls\">\n                    <div class=\"entity-selector-panel\">\n                        <div class=\"entity-selector-title\">ScriptRunner Instances:</div>\n                        <div class=\"entity-selector-buttons\" id=\"entitySelectorButtons-${this.pageId}\">\n                            ${Array.from(this.scriptRunnerEntities.entries()).map(([entityId, component]) => {\n                                const entity = SM.getEntityById(entityId);\n                                const entityName = entity?.name || 'Unknown Entity';\n                                const isSelected = this.selectedEntities.has(entityId);\n                                return `<button class=\"entity-selector-btn ${isSelected ? 'selected' : ''}\" data-entity-id=\"${entityId}\">${entityName}</button>`;\n                            }).join('')}\n                        </div>\n                    </div>\n                    <div class=\"playback-controls\">\n                        <button class=\"control-btn play-btn\" id=\"playBtn-${this.pageId}\" title=\"Start\" ${!this.canRun() ? 'disabled' : ''}>\n                            \u25B6\uFE0F\n                        </button>\n                        \n                        <button class=\"control-btn stop-btn\" id=\"stopBtn-${this.pageId}\" title=\"Stop\" disabled>\n                            \u23F9\uFE0F\n                        </button>\n                    </div>\n                </div>\n                ` : ''}\n            `;\n\n            // <div class=\"console-output\" id=\"consoleOutput-${this.pageId}\" style=\"display: ${this.scriptRunnerEntities.size > 0 ? 'block' : 'none'};\">\n            //     <div class=\"console-header\">Console Output</div>\n            //     <div class=\"console-content\" id=\"consoleContent-${this.pageId}\"></div>\n            // </div>\n        }\n        this.setupEventListeners();\n        this.updatePlaybackButtons();\n    }\n    \n    async createEditorPage() {\n        // Create the page element\n        this.pageElement = document.createElement('div');\n        this.pageElement.className = 'page';\n        this.pageElement.id = `${this.pageId}-page`;\n        \n        this.pageElement.innerHTML = `\n            <div class=\"script-editor-container\">\n                <div class=\"script-editor-header\">\n                    <div class=\"editor-title\">\n                        <span class=\"editor-icon\">\uD83D\uDCDC</span>\n                        <h2>Editing: ${this.currentScript.name}</h2>\n                        <span class=\"last-save\" id=\"lastSave-${this.pageId}\">Last saved: ${new Date(this.lastSave).toLocaleString()}</span>\n                        <span class=\"modified-indicator\" id=\"modifiedIndicator-${this.pageId}\" style=\"display: none;\">\u25CF</span>\n                    </div>\n                    <div class=\"editor-controls\">\n                        <button class=\"save-btn\" id=\"saveBtn-${this.pageId}\">\n                            \uD83D\uDCBE Save\n                        </button>\n                    </div>\n                </div>\n                <div class=\"script-editor-content\">\n                    <div class=\"code-editor-wrapper\" id=\"codeEditorWrapper-${this.pageId}\">\n                        <textarea class=\"code-editor\" id=\"codeEditor-${this.pageId}\">${this.escapeHtml(this.currentScript.content)}</textarea>\n                    </div>\n                </div>\n                <div class=\"script-editor-footer\">\n                    \n                </div>\n            </div>\n        `;\n        \n        // Add to page container\n        const pageContainer = document.querySelector('.page-container');\n        pageContainer.appendChild(this.pageElement);\n        \n        // Create nav element\n        this.navElement = document.createElement('button');\n        this.navElement.className = 'nav-item closeable';\n        this.navElement.setAttribute('data-page', this.pageId);\n        this.navElement.innerHTML = `\n            <span class=\"nav-icon\">\uD83D\uDCDC</span>\n            ${this.currentScript.name}\n            <span class=\"close-tab-btn\" data-close-script=\"${this.pageId}\">\u00D7</span>\n        `;\n        \n        // Setup event listeners and CodeMirror\n        setTimeout(() => {\n            this.setupEventListeners();\n            this.initializeCodeMirror();\n        }, 100);\n    }\n    \n    async initializeCodeMirror() {\n        // Load CodeMirror from CDN\n        const isProduction = window.location.hostname !== 'localhost';\n        const cdnBase = 'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13';\n        \n        // Load CSS\n        const cssLinks = [\n            `${cdnBase}/codemirror.min.css`,\n            `${cdnBase}/theme/monokai.min.css`,\n            `${cdnBase}/addon/hint/show-hint.min.css`,\n            `${cdnBase}/addon/dialog/dialog.min.css`\n        ];\n        \n        cssLinks.forEach(href => {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = href;\n            document.head.appendChild(link);\n        });\n        \n        // Load scripts\n        await this.loadScript(`${cdnBase}/codemirror.min.js`);\n        await Promise.all([\n            this.loadScript(`${cdnBase}/mode/javascript/javascript.min.js`),\n            this.loadScript(`${cdnBase}/addon/edit/closebrackets.min.js`),\n            this.loadScript(`${cdnBase}/addon/edit/matchbrackets.min.js`),\n            this.loadScript(`${cdnBase}/addon/comment/comment.min.js`),\n            this.loadScript(`${cdnBase}/addon/hint/show-hint.min.js`),\n            this.loadScript(`${cdnBase}/addon/hint/javascript-hint.min.js`),\n            this.loadScript(`${cdnBase}/addon/search/searchcursor.min.js`),\n            this.loadScript(`${cdnBase}/addon/search/search.min.js`),\n            this.loadScript(`${cdnBase}/addon/dialog/dialog.min.js`),\n            this.loadScript(`${cdnBase}/addon/selection/active-line.min.js`)\n        ]);\n        \n        // Initialize CodeMirror\n        const textarea = document.getElementById(`codeEditor-${this.pageId}`);\n        if (textarea && window.CodeMirror) {\n            this.codemirror = CodeMirror.fromTextArea(textarea, {\n                mode: 'javascript',\n                theme: 'monokai',\n                lineNumbers: true,\n                autoCloseBrackets: true,\n                matchBrackets: true,\n                indentUnit: 4,\n                tabSize: 4,\n                indentWithTabs: false,\n                styleActiveLine: true,\n                extraKeys: {\n                    'Tab': (cm) => {\n                        if (cm.somethingSelected()) {\n                            cm.indentSelection('add');\n                        } else {\n                            cm.replaceSelection(cm.getOption('indentWithTabs')? '\\t' : \n                                Array(cm.getOption('indentUnit') + 1).join(' '), 'end');\n                        }\n                    },\n                    'Shift-Tab': (cm) => cm.indentSelection('subtract'),\n                    'Ctrl-Space': 'autocomplete',\n                    'Cmd-Space': 'autocomplete',\n                    'Ctrl-/': 'toggleComment',\n                    'Cmd-/': 'toggleComment',\n                    'Ctrl-F': 'findPersistent',\n                    'Cmd-F': 'findPersistent'\n                }\n            });\n            \n            // Track modifications\n            this.codemirror.on('change', () => {\n                this.isModified = true;\n                document.getElementById(`modifiedIndicator-${this.pageId}`).style.display = 'inline';\n            });\n            \n            // Set initial size\n            setTimeout(() => {\n                this.codemirror.refresh();\n            }, 100);\n        }\n    }\n    \n    loadScript(src) {\n        return new Promise((resolve, reject) => {\n            const script = document.createElement('script');\n            script.src = src;\n            script.onload = resolve;\n            script.onerror = reject;\n            document.head.appendChild(script);\n        });\n    }\n    \n    cleanupEventListeners() {\n        // Remove save button listener\n        if (this.saveBtnHandler) {\n            const saveBtn = document.getElementById(`saveBtn-${this.pageId}`);\n            if (saveBtn) {\n                saveBtn.removeEventListener('mousedown', this.saveBtnHandler);\n            }\n            this.saveBtnHandler = null;\n        }\n        \n        // Remove playback control listeners\n        if (this.playBtnHandler) {\n            const playBtn = document.getElementById(`playBtn-${this.pageId}`);\n            if (playBtn) {\n                playBtn.removeEventListener('mousedown', this.playBtnHandler);\n            }\n            this.playBtnHandler = null;\n        }\n        \n        if (this.stopBtnHandler) {\n            const stopBtn = document.getElementById(`stopBtn-${this.pageId}`);\n            if (stopBtn) {\n                stopBtn.removeEventListener('mousedown', this.stopBtnHandler);\n            }\n            this.stopBtnHandler = null;\n        }\n        \n        // Remove close button listener\n        if (this.closeBtnHandler && this.navElement) {\n            const closeBtn = this.navElement.querySelector(`[data-close-script=\"${this.pageId}\"]`);\n            if (closeBtn) {\n                closeBtn.removeEventListener('mousedown', this.closeBtnHandler);\n            }\n            this.closeBtnHandler = null;\n        }\n        \n        // Remove keyboard shortcut listener\n        if (this.keydownHandler) {\n            document.removeEventListener('keydown', this.keydownHandler);\n            this.keydownHandler = null;\n        }\n        \n        // Remove entity button listeners\n        this.entityButtonHandlers.forEach((handler, btn) => {\n            btn.removeEventListener('mousedown', handler);\n        });\n        this.entityButtonHandlers.clear();\n    }\n    \n    setupEventListeners() {\n        // Clean up any existing listeners first\n        this.cleanupEventListeners();\n        \n        // CodeMirror is now initialized separately\n        \n        // Save button\n        const saveBtn = document.getElementById(`saveBtn-${this.pageId}`);\n        if (saveBtn) {\n            this.saveBtnHandler = () => this.save();\n            saveBtn.addEventListener('mousedown', this.saveBtnHandler);\n        }\n        \n        // Playback controls\n        const playBtn = document.getElementById(`playBtn-${this.pageId}`);\n        const stopBtn = document.getElementById(`stopBtn-${this.pageId}`);\n        \n        if (playBtn) {\n            this.playBtnHandler = () => this.play();\n            playBtn.addEventListener('mousedown', this.playBtnHandler);\n        }\n        \n        if (stopBtn) {\n            this.stopBtnHandler = () => this.stop();\n            stopBtn.addEventListener('mousedown', this.stopBtnHandler);\n        }\n        \n        // Close button\n        if (this.navElement) {\n            const closeBtn = this.navElement.querySelector(`[data-close-script=\"${this.pageId}\"]`);\n            if (closeBtn) {\n                this.closeBtnHandler = (e) => {\n                    e.stopPropagation();\n                    this.close();\n                };\n                closeBtn.addEventListener('mousedown', this.closeBtnHandler);\n            }\n        }\n        \n        // Keyboard shortcuts - only add if not already added\n        if (!this.keydownHandler) {\n            this.keydownHandler = (e) => {\n                // Only handle if this script editor is active\n                if (navigation.currentPage === this.pageId) {\n                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n                        e.preventDefault();\n                        this.save();\n                    }\n                }\n            };\n            document.addEventListener('keydown', this.keydownHandler);\n        }\n        \n        // Entity selector buttons\n        const entityButtons = this.pageElement.querySelectorAll('.entity-selector-btn');\n        entityButtons.forEach(btn => {\n            const handler = () => {\n                const entityId = btn.dataset.entityId;\n                this.selectEntity(entityId);\n            };\n            this.entityButtonHandlers.set(btn, handler);\n            btn.addEventListener('mousedown', handler);\n        });\n    }\n    \n    save(source=\"ui\") {\n        if (!this.codemirror) return;\n\n        const newContent = this.codemirror.getValue();\n        const change = new EditScriptItemChange(this.currentScript.name, newContent, {source: source});\n        changeManager.applyChange(change);\n\n        // Update local content\n        this.currentScript.content = newContent;\n        this.isModified = false;\n        this.lastSave = Date.now();\n        document.getElementById(`lastSave-${this.pageId}`).textContent = `Last saved: ${new Date(this.lastSave).toLocaleString()}`;\n        document.getElementById(`modifiedIndicator-${this.pageId}`).style.display = 'none';\n\n        //this.run('Refresh');\n    }\n    \n    findScriptRunnerEntities() {\n        this.scriptRunnerEntities.clear();\n\n        // Iterate through all entities to find ScriptRunner components using this script\n        SM.getAllEntities().forEach((entity) => {\n            if (entity.components) {\n                entity.components.forEach(component => {\n                    if (component.type === 'ScriptRunner' &&\n                        component.properties?.file === this.currentScript.name) {\n                        this.scriptRunnerEntities.set(entity.id, component);\n                        // this.wrapConsoleForComponent(component, entity.name);\n                    }\n                });\n            }\n        });\n\n        this.selectedEntities = new Set(this.scriptRunnerEntities.keys());\n        return this.scriptRunnerEntities;\n    }\n    \n    selectEntity(entityId) {\n        if(this.selectedEntities.has(entityId)){\n            this.selectedEntities.delete(entityId);\n        }else{\n            this.selectedEntities.add(entityId);\n        }\n        \n        // Update UI\n        this.pageElement.querySelectorAll('.entity-selector-btn').forEach(btn => {\n            btn.classList.toggle('selected', this.selectedEntities.has(btn.dataset.entityId));\n        });\n        \n        // Enable/disable playback controls\n        const playBtn = document.getElementById(`playBtn-${this.pageId}`);\n        if (playBtn) {\n            playBtn.disabled = !this.canRun();\n        }\n        \n        // Clear console when switching entities\n        //this.clearConsole();\n    }\n    \n    canRun(){\n        let stoppedSelected = Array.from(this.selectedEntities).filter(entityId => {\n            let component = this.scriptRunnerEntities.get(entityId);\n            return !component.ctx._running;\n        })\n        return stoppedSelected.length > 0;\n    }\n\n    canStop(){\n        let runningSelected = Array.from(this.selectedEntities).filter(entityId => {\n            let component = this.scriptRunnerEntities.get(entityId);\n            return component.ctx._running;\n        })\n        return runningSelected.length > 0;\n    }\n    \n    \n    // wrapConsoleForComponent(component, entityName) {\n    //     // Create a console wrapper that logs to our console\n    //     const consoleWrapper = {\n    //         log: (...args) => this.log('log', args.join(' '), entityName),\n    //         error: (...args) => this.log('error', args.join(' '), entityName),\n    //         warn: (...args) => this.log('warn', args.join(' '), entityName),\n    //         info: (...args) => this.log('info', args.join(' '), entityName)\n    //     };\n        \n    //     // Override the console in the script context\n    //     if (component.ctx) {\n    //         component.ctx.log = consoleWrapper.log;\n    //     }\n    // }\n\n    run(action){\n        let components = Array.from(this.selectedEntities)\n        .map(entityId => this.scriptRunnerEntities.get(entityId))\n\n        if(action === 'Start'){\n            components = components.filter(component => component && component.ctx && !component.ctx._running);\n        }else if(action === 'Stop'){\n            components = components.filter(component => component && component.ctx && component.ctx._running);\n        }\n        \n        if (components.length === 0) return;\n        components.forEach(component => {\n            let entity = component._entity;\n            let entityName = entity?.name || 'Unknown';\n            try {\n                \n                component[action]();\n                // this.wrapConsoleForComponent(component, entityName);\n            } catch (error) {\n                this.log('error', `Script error: ${error.message}`, entityName);\n            }\n        })\n        setTimeout(()=>{\n            this.updatePlaybackButtons();\n        }, 100);\n    }\n\n    play() {\n        this.run('Refresh');\n    }\n    \n    stop() {\n        this.run('Stop');\n    }\n\n    \n    updatePlaybackButtons() {\n        const playBtn = document.getElementById(`playBtn-${this.pageId}`);\n        const stopBtn = document.getElementById(`stopBtn-${this.pageId}`);\n        if(playBtn){\n            playBtn.disabled = !this.canRun();\n        }\n        if(stopBtn){\n            stopBtn.disabled = !this.canStop();\n        }\n\n    }\n    \n    log(type, message, entityName) {\n        log(\"mono\", type, message, entityName);\n        const consoleContent = document.getElementById(`consoleContent-${this.pageId}`);\n        if (!consoleContent) return;\n        \n        const entry = document.createElement('div');\n        entry.className = `console-entry console-${type}`;\n        \n        const timestamp = new Date().toLocaleTimeString();\n        const entityPrefix = entityName ? `[${entityName}] ` : '';\n        entry.innerHTML = `\n            <span class=\"console-timestamp\">[${timestamp}]</span>\n            <span class=\"console-entity\">${entityPrefix}</span>\n            <span class=\"console-message\">${message}</span>\n        `;\n        \n        consoleContent.appendChild(entry);\n        consoleContent.scrollTop = consoleContent.scrollHeight;\n    }\n    \n    clearConsole() {\n        const consoleContent = document.getElementById(`consoleContent-${this.pageId}`);\n        if (consoleContent) {\n            consoleContent.innerHTML = '';\n        }\n    }\n    \n    async close() {\n        if (this.isModified) {\n            const confirmClose = await confirm('You have unsaved changes. Are you sure you want to close?');\n            if (!confirmClose) return;\n        }\n        \n        // Cleanup all event listeners\n        this.cleanupEventListeners();\n        \n        // Cleanup CodeMirror\n        if (this.codemirror) {\n            this.codemirror.toTextArea();\n            this.codemirror = null;\n        }\n        \n        // Remove page switch event listener\n        if (this.pageSwitchHandler) {\n            window.removeEventListener('page-switched', this.pageSwitchHandler);\n        }\n        \n        navigation.removeDynamicPage(this.pageId);\n    }\n    \n    \n    \n    escapeHtml(text) {\n        const map = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n}", "import { confirm } from '../../utils.js';\n\nexport class StatementBlockEditor {\n    constructor(options = {}) {\n        this.blocks = [];\n        this.originalTranscript = '';\n        this.serviceUrl = options.serviceUrl || window.blockServiceUrl;\n        this.onBlocksChanged = options.onBlocksChanged || (() => {});\n        this.container = null;\n        this.isProcessing = false;\n        this.mergeModalCreated = false;\n        this.pendingMerge = null;\n    }\n    \n    async processTranscript(transcript) {\n        if (!transcript || this.isProcessing) return [];\n        \n        this.isProcessing = true;\n        this.originalTranscript = transcript;\n        \n        try {\n            const response = await fetch(this.serviceUrl, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    intent:\"The speaker is submitting in a feedback ticketing form for a VR creator tool project\",\n                    text: transcript,\n                    existing_blocks: this.blocks\n                }),\n                signal: AbortSignal.timeout(10000) // 10 second timeout\n            });\n            \n            if (!response.ok) {\n                throw new Error(`Service error: ${response.status}`);\n            }\n            \n            const result = await response.json();\n            log(\"inspector\", \"[block] result: \", result)\n            this.blocks = result.blocks || [];\n            this.onBlocksChanged(this.blocks);\n            \n            return this.blocks;\n            \n        } catch (error) {\n            err(\"inspector\", 'Block processing failed:', error);\n            throw error;\n        } finally {\n            this.isProcessing = false;\n        }\n    }\n    \n    renderBlocks(container) {\n        if (!container) return;\n        \n        this.container = container;\n        const blocksList = container.querySelector('#blocksList') || container;\n        \n        if (this.blocks.length === 0) {\n            blocksList.innerHTML = '<div class=\"empty-blocks\">No blocks to display</div>';\n            return;\n        }\n        \n        // Add drop zones between blocks and at the beginning\n        let blocksHtml = '<div class=\"block-drop-zone\" data-drop-index=\"0\"></div>';\n        \n        this.blocks.forEach((block, index) => {\n            blocksHtml += `\n                <div class=\"statement-block\" data-block-index=\"${index}\">\n                    <div class=\"block-content\" contenteditable=\"true\">${this.escapeHtml(block)}</div>\n                    <div class=\"block-actions\">\n                        <button class=\"block-delete\" aria-label=\"Delete block\">\u00D7</button>\n                        <div class=\"block-drag\" aria-label=\"Reorder block\" role=\"button\" tabindex=\"0\">\u22EE\u22EE</div>\n                    </div>\n                </div>\n                <div class=\"block-drop-zone\" data-drop-index=\"${index + 1}\"></div>\n            `;\n        });\n        \n        blocksList.innerHTML = blocksHtml;\n        \n        // Create merge modal if it doesn't exist\n        this._createMergeModal();\n        \n        // Attach event listeners\n        this._attachBlockEventListeners(blocksList);\n    }\n    \n    addBlock(content) {\n        if (!content || typeof content !== 'string') return;\n        \n        this.blocks.push(content.trim());\n        this.onBlocksChanged(this.blocks);\n        \n        if (this.container) {\n            this.renderBlocks(this.container);\n        }\n    }\n    \n    updateBlock(index, content) {\n        if (index < 0 || index >= this.blocks.length) return;\n        \n        this.blocks[index] = content.trim();\n        this.onBlocksChanged(this.blocks);\n    }\n    \n    deleteBlock(index) {\n        if (index < 0 || index >= this.blocks.length) return;\n        \n        this.blocks.splice(index, 1);\n        this.onBlocksChanged(this.blocks);\n        \n        if (this.container) {\n            this.renderBlocks(this.container);\n        }\n    }\n    \n    reorderBlocks(fromIndex, toIndex) {\n        if (fromIndex < 0 || fromIndex >= this.blocks.length ||\n            toIndex < 0 || toIndex > this.blocks.length) return;\n        \n        const [movedBlock] = this.blocks.splice(fromIndex, 1);\n        \n        // Adjust toIndex if needed after removal\n        if (toIndex > fromIndex) {\n            toIndex--;\n        }\n        \n        this.blocks.splice(toIndex, 0, movedBlock);\n        this.onBlocksChanged(this.blocks);\n        \n        if (this.container) {\n            this.renderBlocks(this.container);\n        }\n    }\n    \n    mergeBlocks(fromIndex, toIndex) {\n        if (fromIndex < 0 || fromIndex >= this.blocks.length ||\n            toIndex < 0 || toIndex >= this.blocks.length ||\n            fromIndex === toIndex) return;\n        \n        // Combine the content of both blocks\n        const mergedContent = this.blocks[toIndex] + '\\n\\n' + this.blocks[fromIndex];\n        \n        // Update the target block and remove the source block\n        this.blocks[toIndex] = mergedContent;\n        this.blocks.splice(fromIndex, 1);\n        \n        this.onBlocksChanged(this.blocks);\n        \n        if (this.container) {\n            this.renderBlocks(this.container);\n        }\n    }\n    \n    getBlocks() {\n        return [...this.blocks];\n    }\n    \n    getRawTranscript() {\n        return this.originalTranscript;\n    }\n    \n    clear() {\n        this.blocks = [];\n        this.originalTranscript = '';\n        this.isProcessing = false;\n        this.onBlocksChanged(this.blocks);\n        \n        if (this.container) {\n            this.renderBlocks(this.container);\n        }\n    }\n    \n    escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n    \n    _createMergeModal() {\n        if (this.mergeModalCreated) return;\n        \n        // Check if modal already exists in DOM\n        if (document.getElementById('blockMergeModal')) {\n            this.mergeModalCreated = true;\n            return;\n        }\n        \n        const modal = document.createElement('div');\n        modal.id = 'blockMergeModal';\n        modal.className = 'block-merge-modal';\n        modal.style.display = 'none';\n        modal.innerHTML = `\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h3>Merge Blocks?</h3>\n                </div>\n                <div class=\"modal-body\">\n                    <p>Do you want to merge these two blocks together?</p>\n                    <div class=\"merge-preview\">\n                        <div class=\"merge-preview-block\" id=\"mergeTargetPreview\"></div>\n                        <div class=\"merge-arrow\">+</div>\n                        <div class=\"merge-preview-block\" id=\"mergeSourcePreview\"></div>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    <button class=\"modal-btn modal-btn-primary\" id=\"confirmMergeBtn\">Merge</button>\n                    <button class=\"modal-btn modal-btn-secondary\" id=\"cancelMergeBtn\">Cancel</button>\n                </div>\n            </div>\n        `;\n        \n        document.body.appendChild(modal);\n        \n        // Add event listeners\n        document.getElementById('confirmMergeBtn').addEventListener('mousedown', () => {\n            this._confirmMerge();\n        });\n        \n        document.getElementById('cancelMergeBtn').addEventListener('mousedown', () => {\n            this._cancelMerge();\n        });\n        \n        // Close on outside click\n        modal.addEventListener('mousedown', (e) => {\n            if (e.target === modal) {\n                this._cancelMerge();\n            }\n        });\n        \n        this.mergeModalCreated = true;\n    }\n    \n    _showMergeModal(sourceIndex, targetIndex) {\n        this.pendingMerge = { sourceIndex, targetIndex };\n        \n        const modal = document.getElementById('blockMergeModal');\n        const sourcePreview = document.getElementById('mergeSourcePreview');\n        const targetPreview = document.getElementById('mergeTargetPreview');\n        \n        // Show preview of blocks to be merged\n        const sourceText = this.blocks[sourceIndex];\n        const targetText = this.blocks[targetIndex];\n        \n        sourcePreview.textContent = sourceText.length > 100 ? \n            sourceText.substring(0, 100) + '...' : sourceText;\n        targetPreview.textContent = targetText.length > 100 ? \n            targetText.substring(0, 100) + '...' : targetText;\n        \n        modal.style.display = 'flex';\n    }\n    \n    _confirmMerge() {\n        if (this.pendingMerge) {\n            this.mergeBlocks(this.pendingMerge.sourceIndex, this.pendingMerge.targetIndex);\n            this.pendingMerge = null;\n        }\n        document.getElementById('blockMergeModal').style.display = 'none';\n    }\n    \n    _cancelMerge() {\n        this.pendingMerge = null;\n        document.getElementById('blockMergeModal').style.display = 'none';\n    }\n    \n    _attachBlockEventListeners(blocksList) {\n        // Content editing\n        blocksList.querySelectorAll('.block-content').forEach(content => {\n            content.addEventListener('blur', (e) => {\n                const index = parseInt(e.target.closest('.statement-block').dataset.blockIndex);\n                this.updateBlock(index, e.target.textContent);\n            });\n            \n            // Prevent newline on Enter\n            content.addEventListener('keydown', (e) => {\n                if (e.key === 'Enter') {\n                    e.preventDefault();\n                    e.target.blur();\n                }\n            });\n        });\n        \n        // Delete buttons\n        blocksList.querySelectorAll('.block-delete').forEach(btn => {\n            btn.addEventListener('mousedown', async (e) => {\n                const index = parseInt(e.target.closest('.statement-block').dataset.blockIndex);\n                if (await confirm('Delete this block?')) {\n                    this.deleteBlock(index);\n                }\n            });\n        });\n        \n        // Drag functionality\n        this._setupDragAndDrop(blocksList);\n    }\n    \n    _setupDragAndDrop(blocksList) {\n        let draggedElement = null;\n        let draggedIndex = null;\n        let dropTarget = null;\n        \n        // Make drag handles draggable\n        blocksList.querySelectorAll('.statement-block').forEach(block => {\n            const dragHandle = block.querySelector('.block-drag');\n            \n            // Ensure block is not draggable, only the handle\n            block.draggable = false;\n            \n            // Make the drag handle draggable\n            dragHandle.draggable = true;\n            \n            // Drag handle events\n            dragHandle.addEventListener('dragstart', (e) => {\n                draggedElement = block;\n                draggedIndex = parseInt(block.dataset.blockIndex);\n                block.classList.add('dragging');\n                \n                // Set drag effect\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', draggedIndex.toString());\n                \n                // Show drop zones\n                blocksList.querySelectorAll('.block-drop-zone').forEach(zone => {\n                    zone.classList.add('active');\n                });\n                \n                // Stop event from bubbling to prevent issues\n                e.stopPropagation();\n            });\n            \n            dragHandle.addEventListener('dragend', (e) => {\n                if (draggedElement) {\n                    draggedElement.classList.remove('dragging');\n                }\n                \n                // Remove any drag-over classes and hide drop zones\n                blocksList.querySelectorAll('.drag-over').forEach(el => {\n                    el.classList.remove('drag-over');\n                });\n                blocksList.querySelectorAll('.block-drop-zone').forEach(zone => {\n                    zone.classList.remove('active', 'drag-over');\n                });\n                \n                draggedElement = null;\n                draggedIndex = null;\n                dropTarget = null;\n            });\n            \n            // Block dragover for merge functionality\n            block.addEventListener('dragover', (e) => {\n                if (!draggedElement || block === draggedElement) return;\n                \n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'move';\n                \n                // Visual feedback for merge\n                block.classList.add('drag-over');\n                dropTarget = { type: 'merge', element: block };\n                \n                return false;\n            });\n            \n            // Block drop for merge functionality\n            block.addEventListener('drop', (e) => {\n                if (e.stopPropagation) {\n                    e.stopPropagation();\n                }\n                \n                if (draggedElement && block !== draggedElement) {\n                    const targetIndex = parseInt(block.dataset.blockIndex);\n                    \n                    // Show merge confirmation modal\n                    this._showMergeModal(draggedIndex, targetIndex);\n                }\n                \n                return false;\n            });\n            \n            block.addEventListener('dragleave', (e) => {\n                // Only remove drag-over if we're actually leaving the block\n                if (!block.contains(e.relatedTarget)) {\n                    block.classList.remove('drag-over');\n                    if (dropTarget && dropTarget.element === block) {\n                        dropTarget = null;\n                    }\n                }\n            });\n        });\n        \n        // Setup drop zones for reordering\n        blocksList.querySelectorAll('.block-drop-zone').forEach(zone => {\n            zone.addEventListener('dragover', (e) => {\n                if (!draggedElement) return;\n                \n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'move';\n                \n                // Clear other highlights\n                blocksList.querySelectorAll('.drag-over').forEach(el => {\n                    if (el !== zone) el.classList.remove('drag-over');\n                });\n                \n                zone.classList.add('drag-over');\n                dropTarget = { type: 'reorder', element: zone };\n                \n                return false;\n            });\n            \n            zone.addEventListener('drop', (e) => {\n                if (e.stopPropagation) {\n                    e.stopPropagation();\n                }\n                \n                if (draggedElement) {\n                    const dropIndex = parseInt(zone.dataset.dropIndex);\n                    \n                    // Perform the reorder\n                    this.reorderBlocks(draggedIndex, dropIndex);\n                }\n                \n                return false;\n            });\n            \n            zone.addEventListener('dragleave', (e) => {\n                zone.classList.remove('drag-over');\n                if (dropTarget && dropTarget.element === zone) {\n                    dropTarget = null;\n                }\n            });\n        });\n        \n        // Prevent default drag behavior on document\n        document.addEventListener('dragover', (e) => {\n            if (draggedElement) {\n                e.preventDefault();\n            }\n        });\n        \n        document.addEventListener('drop', (e) => {\n            if (draggedElement) {\n                e.preventDefault();\n            }\n        });\n    }\n    \n    // Save draft to localStorage\n    saveDraft() {\n        const draft = {\n            originalTranscript: this.originalTranscript,\n            blocks: this.blocks,\n            lastModified: Date.now(),\n            mode: 'blocks'\n        };\n        \n        localStorage.setItem('feedback_block_draft', JSON.stringify(draft));\n    }\n    \n    // Load draft from localStorage\n    loadDraft() {\n        const draftStr = localStorage.getItem('feedback_block_draft');\n        if (!draftStr) return null;\n        \n        try {\n            const draft = JSON.parse(draftStr);\n            this.originalTranscript = draft.originalTranscript || '';\n            this.blocks = draft.blocks || [];\n            return draft;\n        } catch (error) {\n            err(\"inspector\", 'Failed to load draft:', error);\n            return null;\n        }\n    }\n    \n    // Clear draft from localStorage\n    clearDraft() {\n        localStorage.removeItem('feedback_block_draft');\n    }\n}", "/**\n * FeedbackAPI - Client for interacting with the feedback proxy endpoints\n * Handles all communication with the auth server for feedback operations\n */\nexport class FeedbackAPI {\n    constructor(baseUrl = null) {\n        // Determine base URL based on environment\n        if (baseUrl) {\n            this.baseUrl = baseUrl;\n        } else {\n            // Use production URL if available, otherwise localhost for development\n            this.baseUrl = window.location.hostname === 'localhost'\n                ? 'http://localhost:3303'\n                : 'https://auth.tippy.dev';\n        }\n\n        this.apiPath = '/api/feedback';\n        log(\"feedback-api\", `Initialized FeedbackAPI with base URL: ${this.baseUrl}`);\n    }\n\n    /**\n     * Make an HTTP request to the API\n     * @private\n     */\n    async _request(endpoint, options = {}) {\n        const url = `${this.baseUrl}${this.apiPath}${endpoint}`;\n\n        try {\n            const response = await fetch(url, {\n                ...options,\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...options.headers\n                }\n            });\n\n            const data = await response.json();\n\n            if (!data.success) {\n                throw new Error(data.error || 'Request failed');\n            }\n\n            return data;\n        } catch (error) {\n            err(\"feedback-api\", `Request failed for ${endpoint}:`, error);\n            throw error;\n        }\n    }\n\n    /**\n     * Create a new feedback ticket\n     * @param {Object} feedback - Ticket data\n     * @returns {Promise<Object>} Created ticket\n     */\n    async createTicket(feedback) {\n        log(\"feedback-api\", \"Creating ticket:\", feedback.ticketId);\n\n        const response = await this._request('/tickets', {\n            method: 'POST',\n            body: JSON.stringify(feedback)\n        });\n\n        return response.ticket;\n    }\n\n    /**\n     * Get a single ticket by ID\n     * @param {string} ticketId - Ticket ID\n     * @returns {Promise<Object>} Ticket data\n     */\n    async getTicket(ticketId) {\n        log(\"feedback-api\", \"Fetching ticket:\", ticketId);\n\n        const response = await this._request(`/tickets/${ticketId}`, {\n            method: 'GET'\n        });\n\n        return response.ticket;\n    }\n\n    /**\n     * Get all tickets with optional filtering\n     * @param {Object} filters - Optional filters (type, status, limit, offset)\n     * @returns {Promise<Array>} Array of tickets\n     */\n    async getAllTickets(filters = {}) {\n        log(\"feedback-api\", \"Fetching all tickets with filters:\", filters);\n\n        // Build query string from filters\n        const queryParams = new URLSearchParams();\n        if (filters.type) queryParams.append('type', filters.type);\n        if (filters.status) queryParams.append('status', filters.status);\n        if (filters.limit) queryParams.append('limit', filters.limit);\n        if (filters.offset) queryParams.append('offset', filters.offset);\n\n        const queryString = queryParams.toString();\n        const endpoint = `/tickets${queryString ? '?' + queryString : ''}`;\n\n        const response = await this._request(endpoint, {\n            method: 'GET'\n        });\n\n        return response.tickets;\n    }\n\n    /**\n     * Update a ticket\n     * @param {string} ticketId - Ticket ID\n     * @param {Object} updates - Fields to update\n     * @returns {Promise<Object>} Updated ticket\n     */\n    async updateTicket(ticketId, updates) {\n        log(\"feedback-api\", \"Updating ticket:\", ticketId, updates);\n\n        const response = await this._request(`/tickets/${ticketId}`, {\n            method: 'PUT',\n            body: JSON.stringify(updates)\n        });\n\n        return response.ticket;\n    }\n\n    /**\n     * Delete a ticket\n     * @param {string} ticketId - Ticket ID\n     * @returns {Promise<void>}\n     */\n    async deleteTicket(ticketId) {\n        log(\"feedback-api\", \"Deleting ticket:\", ticketId);\n\n        await this._request(`/tickets/${ticketId}`, {\n            method: 'DELETE'\n        });\n    }\n\n    /**\n     * Add a comment to a ticket\n     * @param {string} ticketId - Ticket ID\n     * @param {Object} comment - Comment data (author, content)\n     * @returns {Promise<Object>} Added comment with index\n     */\n    async addComment(ticketId, comment) {\n        log(\"feedback-api\", \"Adding comment to ticket:\", ticketId);\n\n        const response = await this._request(`/tickets/${ticketId}/comments`, {\n            method: 'POST',\n            body: JSON.stringify(comment)\n        });\n\n        return {\n            comment: response.comment,\n            commentIndex: response.commentIndex\n        };\n    }\n\n    /**\n     * Update a comment\n     * @param {string} ticketId - Ticket ID\n     * @param {number} commentIndex - Comment index\n     * @param {string} content - New comment content\n     * @returns {Promise<Object>} Updated comment\n     */\n    async updateComment(ticketId, commentIndex, content) {\n        log(\"feedback-api\", \"Updating comment:\", ticketId, commentIndex);\n\n        const response = await this._request(`/tickets/${ticketId}/comments/${commentIndex}`, {\n            method: 'PUT',\n            body: JSON.stringify({ content })\n        });\n\n        return response.comment;\n    }\n\n    /**\n     * Delete a comment\n     * @param {string} ticketId - Ticket ID\n     * @param {number} commentIndex - Comment index\n     * @returns {Promise<void>}\n     */\n    async deleteComment(ticketId, commentIndex) {\n        log(\"feedback-api\", \"Deleting comment:\", ticketId, commentIndex);\n\n        await this._request(`/tickets/${ticketId}/comments/${commentIndex}`, {\n            method: 'DELETE'\n        });\n    }\n}\n", "import { StatementBlockEditor } from './statement-block-editor.js';\nimport { confirm } from '../../utils.js';\nimport { FeedbackAPI } from './feedback-api.js';\n\nexport class Feedback {\n    constructor() {\n        this.selectedType = 'feature';\n        this.recording = false;\n        this.speechRecognizer = null;\n        this.micInited = false;\n        this.speechBuffer = '';\n        this.rlen = 0;\n        this.timeoutId = null;\n        this.tickets = [];\n        this.currentTicket = null;\n        this.editingTicket = null;\n        this.statementBlockEditor = null;\n        this.useBlockMode = true; // Feature flag\n        this.blockEditorContainer = null;\n        this.isAddingToBlocks = false;\n        this.api = new FeedbackAPI(); // Initialize API client\n        this.init();\n    }\n    \n    async init() {\n        await this.get_key();\n        this.setupTypeButtons();\n        this.setupSubmitButton();\n        this.setupSpeechRecognition();\n        this.setupTicketLookup();\n        this.setupTicketsList();\n        this.setupBlockEditor();\n        \n        window.addEventListener('page-switched', (e)=>{\n            log(\"inspector\", \"page-switched\", e.detail.pageId)\n            if(e.detail.pageId === 'feedback'){\n                this.loadAllTickets();\n            }\n        })\n        \n        // Add keyboard event listeners for modals\n        document.addEventListener('keydown', (e) => {\n            if (document.getElementById('ticketEditModal').style.display === 'flex') {\n                if (e.key === 'Escape') {\n                    this.closeEditModal();\n                } else if (e.key === 'Enter' && e.target.id !== 'ticketEditContent' && !e.shiftKey) {\n                    // Only save on Enter if not in the textarea\n                    this.saveTicketEdit();\n                }\n            } else if (document.getElementById('ticketDetailModal').style.display === 'flex') {\n                if (e.key === 'Escape') {\n                    this.closeTicketDetailModal();\n                }\n            }\n        });\n\n        // Add click-outside-to-close for ticket detail modal\n        document.getElementById('ticketDetailModal')?.addEventListener('mousedown', (e) => {\n            if (e.target.id === 'ticketDetailModal') {\n                this.closeTicketDetailModal();\n            }\n        });\n    }\n    \n\n    async get_key(){\n        let key = await fetch(`${window.repoUrl}/../something-for-the-time`);\n        key = await key.text();\n        this.key = key;\n    }\n    \n    setupTypeButtons() {\n        const typeButtons = document.querySelectorAll('.feedback-type-btn');\n        typeButtons.forEach(btn => {\n            btn.addEventListener('mousedown', () => {\n                typeButtons.forEach(b => b.classList.remove('active'));\n                btn.classList.add('active');\n                this.selectedType = btn.getAttribute('data-type');\n            });\n        });\n    }\n    \n    setupSubmitButton() {\n        const submitBtn = document.getElementById('submitFeedbackBtn');\n        submitBtn.addEventListener('mousedown', () => this.submitFeedback());\n    }\n    \n    setupBlockEditor() {\n        this.blockEditorContainer = document.getElementById('blockEditorContainer');\n        \n        if (!this.blockEditorContainer) {\n            log(\"inspector\", 'Block editor container not found in DOM');\n            return;\n        }\n        \n        // Initialize the block editor\n        this.statementBlockEditor = new StatementBlockEditor({\n            serviceUrl: `https://app.tippy.dev/api/process-text`,\n            onBlocksChanged: (blocks) => {\n                // Auto-save draft when blocks change\n                if (this.statementBlockEditor) {\n                    this.statementBlockEditor.saveDraft();\n                }\n            }\n        });\n        \n        // Check for existing draft\n        const draft = this.statementBlockEditor.loadDraft();\n        if (draft && draft.blocks.length > 0) {\n            this.showBlockEditor(draft.blocks);\n            this.showStatus('Draft restored from previous session', 'info');\n        }\n        \n        // Setup dual submit buttons\n        const submitOriginalBtn = document.getElementById('submitOriginalBtn');\n        const submitRefinementBtn = document.getElementById('submitRefinementBtn');\n        \n        if (submitOriginalBtn) {\n            submitOriginalBtn.addEventListener('mousedown', () => this.submitOriginal());\n        }\n        \n        if (submitRefinementBtn) {\n            submitRefinementBtn.addEventListener('mousedown', () => this.submitRefinement());\n        }\n        \n        // Setup clear draft button\n        const clearDraftBtn = document.getElementById('clearDraftBtn');\n        if (clearDraftBtn) {\n            clearDraftBtn.addEventListener('mousedown', () => this.clearDraft());\n        }\n    }\n    \n    setupSpeechRecognition() {\n        const micButton = document.getElementById('micButton');\n        if (!micButton) return;\n        \n        // Store the original mic handler\n        this.originalMicHandler = () => {\n            if (!this.micInited) {\n                this.initializeMic();\n            } else {\n                this.toggleRecording();\n            }\n        };\n        \n        micButton.addEventListener('mousedown', this.originalMicHandler);\n    }\n    \n    initializeMic() {\n        if (this.micInited) return;\n        \n        try {\n            log(\"inspector\", \"[mic] initializing..\")\n            // You'll need to provide your Azure subscription key and region\n            if (!this.key) {\n                this.showSpeechStatus('Speech recognition not configured', 'error');\n                return;\n            }\n            \n            const speechConfig = window.SpeechSDK.SpeechConfig.fromSubscription(this.key, 'eastus');\n            speechConfig.speechRecognitionLanguage = 'en-US';\n            \n            const audioConfig = window.SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();\n            this.speechRecognizer = new window.SpeechSDK.SpeechRecognizer(speechConfig, audioConfig);\n            \n            this.speechRecognizer.recognizing = (s, e) => {\n                const recognizingText = e.result.text;\n                const delta = recognizingText.length - this.rlen;\n                const newText = recognizingText.slice(this.rlen);\n                log(\"inspector\", \"[mic] recognizing..\", newText)\n                this.speechBuffer += newText;\n                this.updateTextarea();\n                this.rlen = recognizingText.length;\n                \n                // Reset timeout for auto-stop\n                clearTimeout(this.timeoutId);\n                this.timeoutId = setTimeout(() => {\n                    this.completeRecognition();\n                }, 2000);\n            };\n            \n            this.speechRecognizer.recognized = (s, e) => {\n                if (e.result.reason === window.SpeechSDK.ResultReason.RecognizedSpeech) {\n                    log(\"inspector\", \"[mic] recognized: \", e.result.text)\n                    this.completeRecognition();\n                    this.rlen = 0;\n                }\n            };\n            \n            this.speechRecognizer.canceled = (s, e) => {\n                err(\"inspector\", 'Speech recognition canceled:', e.reason);\n                if (e.reason === window.SpeechSDK.CancellationReason.Error) {\n                    this.showSpeechStatus('Speech recognition error: ' + e.errorDetails, 'error');\n                }\n                this.stopRecording();\n            };\n            \n            this.speechRecognizer.sessionStopped = (s, e) => {\n                log(\"inspector\", \"[mic] session stopped\")\n                this.stopRecording();\n            };\n            this.micInited = true;\n            this.toggleRecording();\n            \n        } catch (error) {\n            err(\"inspector\", 'Failed to initialize speech recognition:', error);\n            this.showSpeechStatus('Failed to initialize microphone', 'error');\n        }\n    }\n    \n    toggleRecording() {\n        if (!this.recording) {\n            this.startRecording();\n        } else {\n            this.stopRecording();\n        }\n    }\n    \n    startRecording() {\n        const micButton = document.getElementById('micButton');\n        const textarea = document.getElementById('feedbackDetails');\n        const micStatus = document.getElementById('micButton').querySelector('.mic-status');\n        // Save current textarea content\n        this.speechBuffer = textarea.value ? textarea.value + ' ' : '';\n        this.rlen = 0;\n        let lastStatus = micStatus.textContent;\n        micStatus.textContent = '\u23F3';\n        this.speechRecognizer.startContinuousRecognitionAsync(\n            () => {\n                micStatus.textContent = lastStatus;\n                this.recording = true;\n                micButton.classList.add('recording');\n                this.showSpeechStatus('Listening...', 'recording');\n                \n                // Disable submit buttons while recording\n                this.disableSubmitButtons();\n                \n                // Visual feedback\n                this.animateRecording();\n            },\n            (error) => {\n                err(\"inspector\", 'Failed to start recording:', error);\n                this.showSpeechStatus('Failed to start recording', 'error');\n            }\n        );\n    }\n    \n    stopRecording() {\n        if(!this.recording) return;\n        const micButton = document.getElementById('micButton');\n        \n        this.speechRecognizer.stopContinuousRecognitionAsync(\n            async () => {\n                this.recording = false;\n                micButton.classList.remove('recording');\n                this.hideSpeechStatus();\n                clearTimeout(this.timeoutId);\n                log(\"inspector\", \"[mic] stopped recording\")\n                \n                // Re-enable submit buttons after recording stops\n                this.enableSubmitButtons();\n                \n                // Update button icon back to \"Add More\" if in block mode\n                if (this.blockEditorContainer && this.blockEditorContainer.style.display !== 'none') {\n                    const micStatus = micButton.querySelector('.mic-status');\n                    if (micStatus) {\n                        micStatus.textContent = '\u2795';\n                    }\n                    micButton.title = 'Add more content';\n                }\n                \n                // Process transcript with block editor if enabled\n                if (this.useBlockMode && this.statementBlockEditor) {\n                    const transcript = document.getElementById('feedbackDetails').value.trim();\n                    \n                    if (transcript) {\n                        if (this.isAddingToBlocks) {\n                            // Adding to existing blocks\n                            await this.processAdditionalTranscript(transcript);\n                            this.isAddingToBlocks = false;\n                        } else {\n                            // Process new transcript\n                            if(transcript.length > 60){\n                                await this.processTranscriptWithBlocks(transcript);\n                            }\n                        }\n                    }\n                }\n            },\n            (error) => {\n                err(\"inspector\", 'Failed to stop recording:', error);\n                // Re-enable submit buttons even on error\n                this.enableSubmitButtons();\n            }\n        );\n    }\n    \n    completeRecognition() {\n        this.updateTextarea();\n        this.speechBuffer = document.getElementById('feedbackDetails').value+\"\\n\";\n        this.rlen = 0;\n    }\n    \n    updateTextarea() {\n        const textarea = document.getElementById('feedbackDetails');\n        textarea.value = this.speechBuffer;\n        // Trigger input event for any listeners\n        textarea.dispatchEvent(new Event('input'));\n    }\n    \n    animateRecording() {\n        const indicator = document.querySelector('.recording-indicator');\n        if (!indicator || !this.recording) return;\n        \n        // Pulse animation\n        let scale = 1;\n        const animate = () => {\n            if (!this.recording) return;\n            \n            scale = scale === 1 ? 1.2 : 1;\n            indicator.style.transform = `scale(${scale})`;\n            setTimeout(() => animate(), 500);\n        };\n        animate();\n    }\n    \n    showSpeechStatus(message, type) {\n        const statusEl = document.getElementById('speechStatus');\n        statusEl.textContent = message;\n        statusEl.className = `speech-status ${type}`;\n        statusEl.style.display = 'block';\n    }\n    \n    hideSpeechStatus() {\n        const statusEl = document.getElementById('speechStatus');\n        statusEl.style.display = 'none';\n    }\n    \n    async processTranscriptWithBlocks(transcript) {\n        log(\"inspector\", \"[block] processing transcript..\", transcript)\n        try {\n            this.showProcessingUI();\n            const blocks = await this.statementBlockEditor.processTranscript(transcript);\n            this.hideProcessingUI();\n            \n            if (blocks && blocks.length > 0) {\n                this.showBlockEditor(blocks);\n                // Keep the original transcript visible\n            } else {\n                this.showFallbackOption(transcript);\n            }\n        } catch (error) {\n                err(\"inspector\", 'Block processing failed:', error);\n            this.hideProcessingUI();\n            this.showFallbackOption(transcript);\n        }\n    }\n    \n    async processAdditionalTranscript(transcript) {\n        log(\"inspector\", \"[block] processing additional transcript..\", transcript)\n        try {\n            this.showProcessingUI();\n            // Get existing blocks to send as context\n            const existingBlocks = this.statementBlockEditor.getBlocks();\n            \n            // Process the new transcript with existing blocks as context\n            const blocks = await this.statementBlockEditor.processTranscript(transcript);\n            this.hideProcessingUI();\n            \n            if (blocks && blocks.length > 0) {\n                this.showBlockEditor(blocks);\n                // Re-enable the textarea and make it read-only again\n                const textarea = document.getElementById('feedbackDetails');\n                if (textarea) {\n                    textarea.readOnly = true;\n                    textarea.style.opacity = '0.7';\n                }\n            }\n        } catch (error) {\n            err(\"inspector\", 'Failed to add additional content:', error);\n            this.hideProcessingUI();\n            this.showStatus('Failed to process additional content', 'error');\n        }\n    }\n    \n    showProcessingUI() {\n        const processingOverlay = document.createElement('div');\n        processingOverlay.id = 'processingOverlay';\n        processingOverlay.className = 'processing-overlay';\n        processingOverlay.innerHTML = `\n            <div class=\"processing-content\">\n                <div class=\"processing-spinner\"></div>\n                <p>Processing your feedback...</p>\n            </div>\n        `;\n        \n        const feedbackSection = document.querySelector('.feedback-section');\n        if (feedbackSection) {\n            feedbackSection.appendChild(processingOverlay);\n        }\n    }\n    \n    hideProcessingUI() {\n        const overlay = document.getElementById('processingOverlay');\n        if (overlay) {\n            overlay.remove();\n        }\n    }\n    \n    showBlockEditor(blocks) {\n        if (!this.blockEditorContainer || !this.statementBlockEditor) return;\n        \n        // Keep the original textarea visible but make it read-only\n        const textarea = document.getElementById('feedbackDetails');\n        if (textarea) {\n            textarea.readOnly = true;\n            textarea.style.opacity = '0.7';\n        }\n        \n        // Show the block editor\n        this.blockEditorContainer.style.display = 'block';\n        \n        // Show the clear draft button\n        const clearDraftBtn = document.getElementById('clearDraftBtn');\n        if (clearDraftBtn) {\n            clearDraftBtn.style.display = 'inline-flex';\n        }\n        \n        // Render the blocks\n        this.statementBlockEditor.renderBlocks(this.blockEditorContainer);\n        \n        // Update UI for block mode\n        this.updateUIForBlockMode();\n    }\n    \n    hideBlockEditor() {\n        if (!this.blockEditorContainer) return;\n        \n        this.blockEditorContainer.style.display = 'none';\n        \n        // Hide the clear draft button\n        const clearDraftBtn = document.getElementById('clearDraftBtn');\n        if (clearDraftBtn) {\n            clearDraftBtn.style.display = 'none';\n        }\n        \n        // Reset textarea to editable\n        const textarea = document.getElementById('feedbackDetails');\n        if (textarea) {\n            textarea.readOnly = false;\n            textarea.style.opacity = '1';\n        }\n        \n        // Reset UI to normal mode\n        this.resetUIFromBlockMode();\n    }\n    \n    toggleTranscriptView() {\n        const originalView = document.querySelector('.original-transcript');\n        const blocksList = document.getElementById('blocksList');\n        const toggleBtn = document.querySelector('.toggle-view-btn');\n        \n        if (!originalView || !blocksList) return;\n        \n        if (originalView.style.display === 'none') {\n            // Show original transcript\n            originalView.style.display = 'block';\n            blocksList.style.display = 'none';\n            toggleBtn.textContent = 'View Blocks';\n            \n            // Display the original transcript\n            const originalTextDiv = document.getElementById('originalText');\n            if (originalTextDiv) {\n                originalTextDiv.textContent = this.statementBlockEditor.getRawTranscript();\n            }\n        } else {\n            // Show blocks\n            originalView.style.display = 'none';\n            blocksList.style.display = 'block';\n            toggleBtn.textContent = 'View Original';\n        }\n    }\n    \n    showFallbackOption(transcript) {\n        const message = `\n            <div>Unable to process into blocks. Would you like to:</div>\n            <div class=\"fallback-options\">\n                <button onmousedown=\"feedback.useOriginalTranscript()\">Use Original Text</button>\n                <button onmousedown=\"feedback.retryBlockProcessing()\">Try Again</button>\n            </div>\n        `;\n        this.showStatus(message, 'warning');\n        \n        // Keep the transcript in the textarea\n        document.getElementById('feedbackDetails').value = transcript;\n    }\n    \n    useOriginalTranscript() {\n        this.useBlockMode = false;\n        this.hideBlockEditor();\n        this.hideSpeechStatus();\n        this.showStatus('Using original transcript', 'info');\n    }\n    \n    retryBlockProcessing() {\n        const transcript = document.getElementById('feedbackDetails').value.trim();\n        if (transcript) {\n            this.processTranscriptWithBlocks(transcript);\n        }\n    }\n    \n    startAddingToBlocks() {\n        // If currently recording, stop it first\n        if (this.recording) {\n            this.stopRecording();\n            return;\n        }\n        \n        this.isAddingToBlocks = true;\n        const textarea = document.getElementById('feedbackDetails');\n        \n        // Clear and enable textarea for new input\n        if (textarea) {\n            textarea.value = '';\n            textarea.readOnly = false;\n            textarea.style.opacity = '1';\n            textarea.focus();\n        }\n        \n        this.showStatus('Record additional content to add to your blocks', 'info');\n        \n        // Start recording if mic is initialized\n        if (this.micInited) {\n            this.startRecording();\n        }else{\n            this.initializeMic();\n        }\n    }\n    \n    updateUIForBlockMode() {\n        // Hide single submit button, show dual buttons\n        const singleSubmit = document.getElementById('submitFeedbackBtn');\n        const dualSubmit = document.getElementById('dualSubmitButtons');\n        const fixWithVoice = document.getElementById('fixWithVoice');\n        \n        if (singleSubmit) singleSubmit.style.display = 'none';\n        if (dualSubmit) dualSubmit.style.display = 'flex';\n        if (fixWithVoice) fixWithVoice.style.display = 'flex';\n        // Convert mic button to \"Add More\" button\n        const micButton = document.getElementById('micButton');\n        this.addMoreHandler = () => this.startAddingToBlocks();\n\n        if (micButton) {\n            const micStatus = micButton.querySelector('.mic-status');\n            if (micStatus && !this.recording) {\n                micStatus.textContent = '\u2795';\n            }\n            micButton.title = this.recording ? 'Stop recording' : 'Add more content';\n            \n            // Update click handler for add more functionality\n            micButton.removeEventListener('mousedown', this.originalMicHandler);\n            micButton.addEventListener('mousedown', this.addMoreHandler);\n        }\n        if(fixWithVoice){\n            fixWithVoice.addEventListener('mousedown', this.addMoreHandler);\n        }\n    }\n    \n    resetUIFromBlockMode() {\n        // Show single submit button, hide dual buttons\n        const singleSubmit = document.getElementById('submitFeedbackBtn');\n        const dualSubmit = document.getElementById('dualSubmitButtons');\n        const fixWithVoice = document.getElementById('fixWithVoice');\n        if (singleSubmit) singleSubmit.style.display = 'block';\n        if (dualSubmit) dualSubmit.style.display = 'none';\n        if (fixWithVoice) fixWithVoice.style.display = 'none';\n        \n        // Reset mic button to original state\n        const micButton = document.getElementById('micButton');\n        if (micButton) {\n            const micStatus = micButton.querySelector('.mic-status');\n            if (micStatus) {\n                micStatus.textContent = '';\n            }\n            micButton.title = 'Click to record feedback';\n            \n            // Restore original click handler\n            if (this.addMoreHandler) {\n                micButton.removeEventListener('mousedown', this.addMoreHandler);\n            }\n            micButton.addEventListener('mousedown', this.originalMicHandler);\n        }\n        \n        // Clear blocks\n        if (this.statementBlockEditor) {\n            this.statementBlockEditor.clear();\n        }\n    }\n    \n    async submitOriginal() {\n        // Get the original transcript from the textarea\n        const originalText = document.getElementById('feedbackDetails').value.trim();\n        \n        if (!originalText) {\n            this.showStatus('Please provide feedback details', 'error');\n            return;\n        }\n        \n        // Submit the original text\n        await this.submitFeedback();\n    }\n    \n    async submitRefinement() {\n        if (!this.statementBlockEditor) {\n            this.showStatus('No refinement available', 'error');\n            return;\n        }\n        \n        const blocks = this.statementBlockEditor.getBlocks();\n        \n        if (blocks.length === 0) {\n            this.showStatus('Please add some feedback blocks', 'error');\n            return;\n        }\n        \n        // Format blocks into feedback text\n        const formattedFeedback = blocks.map((block, index) => `${index + 1}. ${block}`).join('\\n\\n');\n        \n        // Temporarily set the textarea value for submission\n        const textarea = document.getElementById('feedbackDetails');\n        const originalValue = textarea.value;\n        textarea.value = formattedFeedback;\n        \n        // Submit the refined text\n        await this.submitFeedback();\n        \n        // Restore original value in case submission fails\n        if (document.getElementById('feedbackDetails').value === formattedFeedback) {\n            textarea.value = originalValue;\n        }\n    }\n    \n    async clearDraft() {\n        if (await confirm('Are you sure you want to clear your draft and start over?')) {\n            // Clear the block editor\n            if (this.statementBlockEditor) {\n                this.statementBlockEditor.clear();\n                this.statementBlockEditor.clearDraft();\n            }\n            \n            // Hide the block editor\n            this.hideBlockEditor();\n            \n            // Clear the textarea\n            const textarea = document.getElementById('feedbackDetails');\n            if (textarea) {\n                textarea.value = '';\n                textarea.readOnly = false;\n                textarea.style.opacity = '1';\n                textarea.focus();\n            }\n            \n            // Reset any recording flags\n            this.isAddingToBlocks = false;\n            \n            // Clear any existing status message\n            this.hideSpeechStatus();\n            this.showStatus(\"\", \"info\");\n        }\n    }\n    \n    async submitFeedback() {\n        const details = document.getElementById('feedbackDetails').value.trim();\n        \n        if (!details) {\n            this.showStatus('Please provide feedback details', 'error');\n            return;\n        }\n        \n        // Generate a title from the first line or first 50 chars of feedback\n        const title = details.split('\\n')[0].substring(0, 50) + (details.length > 50 ? '...' : '');\n        \n        const feedback = {\n            type: this.selectedType,\n            title,\n            details,\n            timestamp: new Date().toISOString(),\n            inspector_version: '1.0.0',\n            user_agent: navigator.userAgent,\n            createdBy: SM.myName()\n        };\n        \n        try {\n            // Generate ticket ID\n            const ticketId = this.generateTicketId();\n            feedback.ticketId = ticketId;\n            feedback.status = 'open';\n            \n            // Save to Firebase\n            await this.saveFeedbackToFirebase(feedback);\n            \n            // Also save locally as backup\n            this.storeFeedbackLocally(feedback);\n                     \n            this.showStatus(\n                `Thank you for your feedback! Your ticket number is <strong>#${ticketId}</strong><br>`,\n                'success'\n            );\n\n            setTimeout(()=>{\n                this.loadAllTickets()\n            }, 250)\n            \n            // Clear form\n            document.getElementById('feedbackDetails').value = '';\n            \n            // Clear block editor if in use\n            if (this.useBlockMode && this.statementBlockEditor) {\n                this.statementBlockEditor.clear();\n                this.hideBlockEditor();\n            }\n        } catch (error) {\n            console.error('Failed to submit feedback:', error);\n            this.showStatus('Failed to submit feedback. Please try again.', 'error');\n        }\n    }\n    \n    generateTicketId() {\n        // Generate a ticket ID in format: FB_YYYYMMDD_XXXX (using underscores for Firestore compatibility)\n        const date = new Date();\n        const dateStr = date.toISOString().slice(0, 10).replace(/-/g, '');\n        const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n        let accro = \"BUG\"\n        if(this.selectedType === \"feature\"){\n            accro = \"FEAT\"\n        }else if(this.selectedType === \"improvement\"){\n            accro = \"IDEA\"\n        }\n        return `${accro}_${dateStr}_${random}`;\n    }\n    \n    \n    \n    async saveFeedbackToFirebase(feedback) {\n        log(\"net\",\"saving feedback via API =>\", feedback)\n        try {\n            // Save via API instead of direct Firebase\n            await this.api.createTicket(feedback);\n\n            log(\"net\", 'Feedback saved via API:', feedback.ticketId);\n        } catch (error) {\n            err(\"net\", 'Error saving feedback:', error);\n            // Don't throw - we'll still save locally\n        }\n    }\n    \n    async getFeedbackByTicket(ticketId) {\n        try {\n            // Get via API instead of direct Firebase\n            const ticket = await this.api.getTicket(ticketId);\n            return ticket;\n        } catch (error) {\n            err(\"net\", 'Error fetching feedback:', error);\n            return null;\n        }\n    }\n    \n    storeFeedbackLocally(feedback) {\n        const feedbackHistory = JSON.parse(localStorage.getItem('inspector_feedback') || '[]');\n        feedbackHistory.push(feedback);\n        localStorage.setItem('inspector_feedback', JSON.stringify(feedbackHistory));\n    }\n    \n\n    showStatus(message, type) {\n        const statusEl = document.getElementById('feedbackStatus');\n        statusEl.innerHTML = message;\n        statusEl.className = `feedback-status ${type}`;\n        statusEl.style.display = 'block';\n        \n        if (type === 'success') {\n            setTimeout(() => {\n                statusEl.style.display = 'none';\n            }, 10000);\n        }\n    }\n    \n    setupTicketLookup() {\n        const lookupBtn = document.getElementById('lookupTicketBtn');\n        const lookupInput = document.getElementById('ticketLookupInput');\n        \n        if (!lookupBtn || !lookupInput) return;\n        \n        lookupBtn.addEventListener('mousedown', () => this.lookupTicket());\n        lookupInput.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                this.lookupTicket();\n            }\n        });\n    }\n    \n    async lookupTicket() {\n        const ticketId = document.getElementById('ticketLookupInput').value.trim();\n        const resultDiv = document.getElementById('ticketResult');\n        \n        if (!ticketId) {\n            this.showTicketResult('Please enter a ticket ID', 'error');\n            return;\n        }\n        \n        this.showTicketResult('Looking up ticket...', 'loading');\n        \n        try {\n            const feedback = await this.getFeedbackByTicket(ticketId);\n            \n            if (feedback) {\n                const html = `\n                    <div class=\"ticket-found\">\n                        <h4>Ticket #${feedback.ticketId}</h4>\n                        <div class=\"ticket-details\">\n                            <div class=\"ticket-field\">\n                                <span class=\"field-label\">Type:</span>\n                                <span class=\"field-value type-${feedback.type}\">${feedback.type}</span>\n                            </div>\n                            <div class=\"ticket-field\">\n                                <span class=\"field-label\">Status:</span>\n                                <span class=\"field-value status-${feedback.status}\">${feedback.status}</span>\n                            </div>\n                            <div class=\"ticket-field\">\n                                <span class=\"field-label\">Submitted:</span>\n                                <span class=\"field-value\">${new Date(feedback.timestamp).toLocaleString()}</span>\n                            </div>\n                            <div class=\"ticket-field full-width\">\n                                <span class=\"field-label\">Description:</span>\n                                <div class=\"field-value description\">${this.escapeHtml(feedback.details)}</div>\n                            </div>\n                        </div>\n                    </div>\n                `;\n                this.showTicketResult(html, 'success');\n            } else {\n                this.showTicketResult('Ticket not found. Please check the ID and try again.', 'error');\n            }\n        } catch (error) {\n            err(\"net\", 'Error looking up ticket:', error);\n            this.showTicketResult('Failed to lookup ticket. Please try again later.', 'error');\n        }\n    }\n    \n    showTicketResult(content, type) {\n        const resultDiv = document.getElementById('ticketResult');\n        resultDiv.innerHTML = content;\n        resultDiv.className = `ticket-result ${type}`;\n        resultDiv.style.display = 'block';\n    }\n    \n    escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n    \n    // Tickets List Methods\n    setupTicketsList() {\n        const refreshBtn = document.getElementById('refreshTicketsBtn');\n        const typeFilter = document.getElementById('ticketFilterType');\n        const statusFilter = document.getElementById('ticketFilterStatus');\n        \n        if (refreshBtn) {\n            refreshBtn.addEventListener('mousedown', () => this.loadAllTickets());\n        }\n        \n        if (typeFilter) {\n            typeFilter.addEventListener('change', () => this.filterTickets());\n        }\n        \n        if (statusFilter) {\n            statusFilter.addEventListener('change', () => this.filterTickets());\n        }\n    }\n    \n    async loadAllTickets() {\n        const ticketsList = document.getElementById('ticketsList');\n        if (!ticketsList) return;\n\n        ticketsList.innerHTML = '<div class=\"loading-tickets\">Loading tickets...</div>';\n\n        try {\n            // Get all tickets via API instead of direct Firebase\n            const allTickets = await this.api.getAllTickets();\n\n            // Tickets are already sorted by the API (newest first)\n            this.tickets = allTickets;\n            this.displayTickets(allTickets);\n\n        } catch (error) {\n            err(\"net\", 'Error loading tickets:', error);\n            ticketsList.innerHTML = '<div class=\"error-loading\">Failed to load tickets</div>';\n        }\n    }\n    \n    displayTickets(tickets) {\n        const ticketsList = document.getElementById('ticketsList');\n        if (!ticketsList) return;\n        \n        if (tickets.length === 0) {\n            ticketsList.innerHTML = '<div class=\"empty-tickets\">No tickets found</div>';\n            return;\n        }\n        \n        const currentUserId = SM.myName();\n        const ticketsHtml = tickets.map(ticket => {\n            const isOwner = ticket.createdBy === currentUserId;\n            const date = new Date(ticket.timestamp || ticket.createdAt);\n            \n            return `\n                <div class=\"ticket-item ${isOwner ? 'ticket-item-owner' : ''}\" data-ticket-id=\"${ticket.ticketId}\">\n                    <div class=\"ticket-item-header\">\n                        <span class=\"ticket-item-id\">#${ticket.ticketId}</span>\n                        <div class=\"ticket-item-meta\">\n                            <span class=\"ticket-type-badge ${ticket.type}\">${ticket.type}</span>\n                            <span class=\"ticket-status-badge ${ticket.status}\">${ticket.status}</span>\n                            ${ticket.comments && ticket.comments.length > 0 ? `\n                                <span class=\"ticket-comments-badge\" title=\"${ticket.comments.length} comment${ticket.comments.length !== 1 ? 's' : ''}\">\n                                    \uD83D\uDCAC ${ticket.comments.length}\n                                </span>\n                            ` : ''}\n                        </div>\n                    </div>\n                    <div class=\"ticket-item-title\">${this.escapeHtml(ticket.details ? (ticket.details.length > 100 ? ticket.details.substring(0, 100) + '...' : ticket.details) : 'No description')}</div>\n                    <div class=\"ticket-item-author\">\n                        by ${ticket.createdBy} \u2022 ${date.toLocaleDateString()}\n                    </div>\n                    ${isOwner ? `\n                        <div class=\"ticket-item-actions\">\n                            <button class=\"ticket-action-btn edit\" onmousedown=\"feedback.editTicket('${ticket.ticketId}')\">Edit</button>\n                            <button class=\"ticket-action-btn delete\" onmousedown=\"feedback.deleteTicket('${ticket.ticketId}')\">Delete</button>\n                        </div>\n                    ` : ''}\n                </div>\n            `;\n        }).join('');\n        \n        ticketsList.innerHTML = ticketsHtml;\n        \n        // Add click handlers to open ticket details\n        ticketsList.querySelectorAll('.ticket-item').forEach(item => {\n            item.addEventListener('mousedown', (e) => {\n                if (!e.target.classList.contains('ticket-action-btn')) {\n                    const ticketId = item.getAttribute('data-ticket-id');\n                    this.openTicketDetail(ticketId);\n                }\n            });\n        });\n    }\n    \n    filterTickets() {\n        const typeFilter = document.getElementById('ticketFilterType').value;\n        const statusFilter = document.getElementById('ticketFilterStatus').value;\n        \n        let filteredTickets = this.tickets;\n        \n        if (typeFilter !== 'all') {\n            filteredTickets = filteredTickets.filter(t => t.type === typeFilter);\n        }\n        \n        if (statusFilter !== 'all') {\n            filteredTickets = filteredTickets.filter(t => t.status === statusFilter);\n        }\n        \n        this.displayTickets(filteredTickets);\n    }\n    \n    async openTicketDetail(ticketId) {\n        const ticket = this.tickets.find(t => t.ticketId === ticketId);\n        if (!ticket) return;\n\n        // Fetch fresh ticket data to ensure we have latest comments\n        try {\n            const latestData = await this.api.getTicket(ticketId);\n            if (latestData) {\n                Object.assign(ticket, latestData);\n            }\n        } catch (error) {\n            err(\"net\", 'Error fetching latest ticket data:', error);\n        }\n\n        this.currentTicket = ticket;\n\n        const modal = document.getElementById('ticketDetailModal');\n        const modalTitle = document.getElementById('modalTicketId');\n        const modalContent = document.getElementById('modalTicketContent');\n\n        // Setup close button handler\n        const closeBtn = modal.querySelector('[data-action=\"close-ticket-modal\"]');\n        if (closeBtn) {\n            closeBtn.onclick = () => this.closeTicketDetailModal();\n        }\n\n        modalTitle.textContent = `Ticket #${ticket.ticketId}`;\n\n        const date = new Date(ticket.timestamp || ticket.createdAt);\n        const isOwner = ticket.createdBy === SM.myName();\n        \n        modalContent.innerHTML = `\n            <div class=\"ticket-detail-content\">\n                <div class=\"ticket-detail-field\">\n                    <div class=\"ticket-detail-label\">Type</div>\n                    <div class=\"ticket-detail-value\">\n                        <span class=\"ticket-type-badge ${ticket.type}\">${ticket.type}</span>\n                    </div>\n                </div>\n                <div class=\"ticket-detail-field\">\n                    <div class=\"ticket-detail-label\">Status</div>\n                    <div class=\"ticket-detail-value\">\n                        <span class=\"ticket-status-badge ${ticket.status}\">${ticket.status}</span>\n                    </div>\n                </div>\n                <div class=\"ticket-detail-field\">\n                    <div class=\"ticket-detail-label\">Created By</div>\n                    <div class=\"ticket-detail-value\">${ticket.createdBy}</div>\n                </div>\n                <div class=\"ticket-detail-field\">\n                    <div class=\"ticket-detail-label\">Created At</div>\n                    <div class=\"ticket-detail-value\">${date.toLocaleString()}</div>\n                </div>\n                ${ticket.editedAt ? `\n                    <div class=\"ticket-detail-field\">\n                        <div class=\"ticket-detail-label\">Last Edited</div>\n                        <div class=\"ticket-detail-value\">${new Date(ticket.editedAt).toLocaleString()}</div>\n                    </div>\n                ` : ''}\n                <div class=\"ticket-detail-field\">\n                    <div class=\"ticket-detail-label\">Description</div>\n                    <div class=\"ticket-detail-value\">${this.escapeHtml(ticket.details)}</div>\n                </div>\n            </div>\n            \n            <div class=\"comments-section\">\n                <h3 class=\"comments-header\">Comments</h3>\n                <div id=\"commentsList\" class=\"comments-list\">\n                    <div class=\"loading-comments\">Loading comments...</div>\n                </div>\n                <div class=\"comment-form\">\n                    <div class=\"comment-input-container\">\n                        <textarea id=\"newCommentInput\" class=\"comment-input\" placeholder=\"Add a comment...\"></textarea>\n                        <button id=\"commentMicBtn\" class=\"comment-mic-btn\" title=\"Click to record comment\">\n                            <span class=\"mic-icon\">\uD83C\uDFA4</span>\n                        </button>\n                    </div>\n                    <button class=\"comment-submit-btn\" onmousedown=\"feedback.addComment()\">Post</button>\n                </div>\n            </div>\n        `;\n        \n        modal.style.display = 'flex';\n        \n        // Setup comment mic button\n        this.setupCommentMic();\n        \n        // Load comments\n        await this.loadComments(ticket);\n    }\n    \n    async loadComments(ticket) {\n        const commentsList = document.getElementById('commentsList');\n\n        try {\n            // Fetch latest ticket data to ensure we have updated comments\n            const latestData = await this.api.getTicket(ticket.ticketId);\n            if (latestData) {\n                ticket.comments = latestData.comments || [];\n\n                // Update the current ticket reference\n                if (this.currentTicket && this.currentTicket.ticketId === ticket.ticketId) {\n                    this.currentTicket.comments = ticket.comments;\n                }\n            }\n\n            const comments = ticket.comments || [];\n            \n            if (comments.length === 0) {\n                commentsList.innerHTML = '<div class=\"empty-comments\">No comments yet. Be the first to comment!</div>';\n                return;\n            }\n            \n            const currentUser = (SM.scene?.localUser?.name) || SM.myName() || 'Anonymous';\n            \n            const commentsHtml = comments.map((comment, index) => {\n                const date = new Date(comment.timestamp);\n                const isAuthor = comment.author === currentUser;\n                \n                return `\n                    <div class=\"comment-item\" data-comment-index=\"${index}\">\n                        <div class=\"comment-header\">\n                            <span class=\"comment-author\">${comment.author}</span>\n                            <span class=\"comment-time\">${date.toLocaleString()}${comment.editedAt ? ' (edited)' : ''}</span>\n                            ${isAuthor ? `\n                                <div class=\"comment-actions\">\n                                    <button class=\"comment-edit-btn\" onmousedown=\"feedback.editComment(${index})\">Edit</button>\n                                    <button class=\"comment-delete-btn\" onmousedown=\"feedback.deleteComment(${index})\">Delete</button>\n                                </div>\n                            ` : ''}\n                        </div>\n                        <div class=\"comment-content\" id=\"comment-content-${index}\">${this.escapeHtml(comment.content)}</div>\n                        <div class=\"comment-edit-form\" id=\"comment-edit-${index}\" style=\"display: none;\">\n                            <textarea class=\"comment-edit-textarea\" id=\"comment-edit-textarea-${index}\">${this.escapeHtml(comment.content)}</textarea>\n                            <div class=\"comment-edit-actions\">\n                                <button class=\"comment-save-btn\" onmousedown=\"feedback.saveEditedComment(${index})\">Save</button>\n                                <button class=\"comment-cancel-btn\" onmousedown=\"feedback.cancelEditComment(${index})\">Cancel</button>\n                            </div>\n                        </div>\n                    </div>\n                `;\n            }).join('');\n            \n            commentsList.innerHTML = commentsHtml;\n            \n        } catch (error) {\n            err(\"net\", 'Error loading comments:', error);\n            commentsList.innerHTML = '<div class=\"error-loading\">Failed to load comments</div>';\n        }\n    }\n    \n    async addComment() {\n        const input = document.getElementById('newCommentInput');\n        const content = input.value.trim();\n\n        if (!content || !this.currentTicket) return;\n\n        try {\n            const comment = {\n                author: (SM.scene?.localUser?.name) || SM.myName() || 'Anonymous',\n                content: content\n            };\n\n            // Add comment via API\n            const result = await this.api.addComment(this.currentTicket.ticketId, comment);\n\n            // Update local data\n            if (!this.currentTicket.comments) {\n                this.currentTicket.comments = [];\n            }\n            this.currentTicket.comments.push(result.comment);\n\n            const ticketIndex = this.tickets.findIndex(t => t.ticketId === this.currentTicket.ticketId);\n            if (ticketIndex !== -1) {\n                this.tickets[ticketIndex] = this.currentTicket;\n            }\n\n            // Clear input and reload comments\n            input.value = '';\n            await this.loadComments(this.currentTicket);\n\n            // Update the comment count in the ticket list\n            this.updateTicketCommentCount(this.currentTicket.ticketId, this.currentTicket.comments.length);\n\n        } catch (error) {\n            err(\"net\", 'Error adding comment:', error);\n            showNotification('Failed to add comment. Please try again.');\n        }\n    }\n    \n    async editTicket(ticketId) {\n        const ticket = this.tickets.find(t => t.ticketId === ticketId);\n        if (!ticket) return;\n        \n        // Store the ticket being edited\n        this.editingTicket = ticket;\n        \n        // Set current content in the textarea\n        const contentTextarea = document.getElementById('ticketEditContent');\n        contentTextarea.value = ticket.details || '';\n        \n        // Show the modal\n        document.getElementById('ticketEditModal').style.display = 'flex';\n        \n        // Focus the textarea\n        setTimeout(() => contentTextarea.focus(), 100);\n    }\n    \n    closeEditModal() {\n        document.getElementById('ticketEditModal').style.display = 'none';\n        this.editingTicket = null;\n    }\n    \n    async saveTicketEdit() {\n        if (!this.editingTicket) return;\n\n        const contentTextarea = document.getElementById('ticketEditContent');\n        const newContent = contentTextarea.value.trim();\n\n        if (!newContent) {\n            showNotification('Feedback content cannot be empty.');\n            return;\n        }\n\n        try {\n            // Update ticket via API\n            const updatedTicket = await this.api.updateTicket(this.editingTicket.ticketId, {\n                details: newContent\n            });\n\n            // Update local data\n            this.editingTicket.details = newContent;\n            this.editingTicket.editedAt = updatedTicket.editedAt;\n            \n            // Update the display to show the edited content\n            const ticketItems = document.querySelectorAll('.ticket-item');\n            ticketItems.forEach(item => {\n                if (item.getAttribute('data-ticket-id') === this.editingTicket.ticketId) {\n                    const titleElement = item.querySelector('.ticket-item-title');\n                    if (titleElement) {\n                        // Truncate to first 100 chars for display\n                        const truncated = newContent.length > 100 ? newContent.substring(0, 100) + '...' : newContent;\n                        titleElement.textContent = truncated;\n                    }\n                }\n            });\n            \n            // Close the modal\n            this.closeEditModal();\n            \n            // If the ticket detail modal is open, update it\n            if (this.currentTicket && this.currentTicket.ticketId === this.editingTicket.ticketId) {\n                this.currentTicket.details = newContent;\n                this.currentTicket.editedAt = this.editingTicket.editedAt;\n                // Re-open the ticket detail to refresh the display\n                this.openTicketDetail(this.editingTicket.ticketId);\n            }\n            \n        } catch (error) {\n            console.error('Error updating ticket:', error);\n            showNotification('Failed to update ticket. Please try again.');\n        }\n    }\n    \n    async deleteTicket(ticketId) {\n        if (!await confirm('Are you sure you want to delete this ticket?')) return;\n\n        const ticket = this.tickets.find(t => t.ticketId === ticketId);\n        if (!ticket) return;\n\n        try {\n            // Delete ticket via API\n            await this.api.deleteTicket(ticketId);\n\n            // Remove from local data\n            this.tickets = this.tickets.filter(t => t.ticketId !== ticketId);\n            this.displayTickets(this.tickets);\n\n        } catch (error) {\n            console.error('Error deleting ticket:', error);\n            showNotification('Failed to delete ticket. Please try again.');\n        }\n    }\n    \n    // Comment editing methods\n    editComment(commentIndex) {\n        // Hide the comment content and show the edit form\n        document.getElementById(`comment-content-${commentIndex}`).style.display = 'none';\n        document.getElementById(`comment-edit-${commentIndex}`).style.display = 'block';\n        \n        // Focus the textarea\n        const textarea = document.getElementById(`comment-edit-textarea-${commentIndex}`);\n        textarea.focus();\n        textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n    }\n    \n    cancelEditComment(commentIndex) {\n        // Hide the edit form and show the comment content\n        document.getElementById(`comment-edit-${commentIndex}`).style.display = 'none';\n        document.getElementById(`comment-content-${commentIndex}`).style.display = 'block';\n    }\n    \n    async saveEditedComment(commentIndex) {\n        const textarea = document.getElementById(`comment-edit-textarea-${commentIndex}`);\n        const newContent = textarea.value.trim();\n\n        if (!newContent || !this.currentTicket) return;\n\n        try {\n            // Update comment via API\n            const updatedComment = await this.api.updateComment(\n                this.currentTicket.ticketId,\n                commentIndex,\n                newContent\n            );\n\n            // Update local data\n            this.currentTicket.comments[commentIndex] = updatedComment;\n\n            const ticketIndex = this.tickets.findIndex(t => t.ticketId === this.currentTicket.ticketId);\n            if (ticketIndex !== -1) {\n                this.tickets[ticketIndex] = this.currentTicket;\n            }\n\n            // Reload comments to show the update\n            await this.loadComments(this.currentTicket);\n\n            // Update the comment count in the ticket list\n            this.updateTicketCommentCount(this.currentTicket.ticketId, this.currentTicket.comments.length);\n\n        } catch (error) {\n            console.error('Error saving edited comment:', error);\n            showNotification('Failed to save comment. Please try again.');\n        }\n    }\n    \n    async deleteComment(commentIndex) {\n        if (!await confirm('Are you sure you want to delete this comment?')) return;\n\n        if (!this.currentTicket) return;\n\n        try {\n            // Delete comment via API\n            await this.api.deleteComment(this.currentTicket.ticketId, commentIndex);\n\n            // Update local data - remove the comment\n            this.currentTicket.comments = this.currentTicket.comments.filter((_, index) => index !== commentIndex);\n\n            const ticketIndex = this.tickets.findIndex(t => t.ticketId === this.currentTicket.ticketId);\n            if (ticketIndex !== -1) {\n                this.tickets[ticketIndex] = this.currentTicket;\n            }\n\n            // Reload comments to show the update\n            await this.loadComments(this.currentTicket);\n\n            // Update the comment count in the ticket list\n            this.updateTicketCommentCount(this.currentTicket.ticketId, this.currentTicket.comments.length);\n\n        } catch (error) {\n            console.error('Error deleting comment:', error);\n            showNotification('Failed to delete comment. Please try again.');\n        }\n    }\n    \n    updateTicketCommentCount(ticketId, commentCount) {\n        // Find the ticket item in the DOM\n        const ticketItem = document.querySelector(`.ticket-item[data-ticket-id=\"${ticketId}\"]`);\n        if (!ticketItem) return;\n        \n        const metaContainer = ticketItem.querySelector('.ticket-item-meta');\n        if (!metaContainer) return;\n        \n        // Remove existing comment badge if any\n        const existingBadge = metaContainer.querySelector('.ticket-comments-badge');\n        if (existingBadge) {\n            existingBadge.remove();\n        }\n        \n        // Add new comment badge if there are comments\n        if (commentCount > 0) {\n            const commentBadge = `<span class=\"ticket-comments-badge\" title=\"${commentCount} comment${commentCount !== 1 ? 's' : ''}\">\n                \uD83D\uDCAC ${commentCount}\n            </span>`;\n            metaContainer.insertAdjacentHTML('beforeend', commentBadge);\n        }\n    }\n    \n    setupCommentMic() {\n        const commentMicBtn = document.getElementById('commentMicBtn');\n        if (!commentMicBtn) return;\n        \n        // Create a simple recording state for comments\n        let isRecordingComment = false;\n        \n        commentMicBtn.addEventListener('mousedown', () => {\n            if (!this.micInited) {\n                // Initialize mic if not already done\n                this.initializeMic();\n                // After init, we'll need to click again to start recording\n                return;\n            }\n            \n            if (!isRecordingComment) {\n                // Start recording for comment\n                this.startCommentRecording(commentMicBtn);\n                isRecordingComment = true;\n            } else {\n                // Stop recording for comment\n                this.stopCommentRecording(commentMicBtn);\n                isRecordingComment = false;\n            }\n        });\n    }\n    \n    startCommentRecording(micButton) {\n        const commentInput = document.getElementById('newCommentInput');\n        if (!commentInput) return;\n        \n        // Save current content\n        this.commentSpeechBuffer = commentInput.value ? commentInput.value + ' ' : '';\n        \n        // Temporarily hijack the main speech buffer\n        const originalBuffer = this.speechBuffer;\n        this.speechBuffer = this.commentSpeechBuffer;\n        \n        this.speechRecognizer.recognizing = (s, e) => {\n            const recognizingText = e.result.text;\n            this.commentSpeechBuffer = this.commentSpeechBuffer + recognizingText.slice(this.rlen);\n            commentInput.value = this.commentSpeechBuffer;\n            this.rlen = recognizingText.length;\n        };\n        \n        this.speechRecognizer.recognized = (s, e) => {\n            if (e.result.reason === window.SpeechSDK.ResultReason.RecognizedSpeech) {\n                this.commentSpeechBuffer += ' ';\n                commentInput.value = this.commentSpeechBuffer;\n                this.rlen = 0;\n            }\n        };\n        \n        this.speechRecognizer.startContinuousRecognitionAsync(\n            () => {\n                micButton.classList.add('recording');\n                const micIcon = micButton.querySelector('.mic-icon');\n                if (micIcon) micIcon.textContent = '\uD83D\uDD34';\n            },\n            (error) => {\n                console.error('Failed to start comment recording:', error);\n                this.showStatus('Failed to start recording', 'error');\n            }\n        );\n        \n        // Store original buffer to restore later\n        this._originalSpeechBuffer = originalBuffer;\n    }\n    \n    stopCommentRecording(micButton) {\n        this.speechRecognizer.stopContinuousRecognitionAsync(\n            () => {\n                micButton.classList.remove('recording');\n                const micIcon = micButton.querySelector('.mic-icon');\n                if (micIcon) micIcon.textContent = '\uD83C\uDFA4';\n                \n                // Restore original speech buffer and recognizer settings\n                this.speechBuffer = this._originalSpeechBuffer || '';\n                this.rlen = 0;\n                \n                // Re-setup main recognizer\n                this.setupMainRecognizer();\n            },\n            (error) => {\n                console.error('Failed to stop comment recording:', error);\n            }\n        );\n    }\n    \n    setupMainRecognizer() {\n        // Restore the main feedback recognizer settings\n        this.speechRecognizer.recognizing = (s, e) => {\n            const recognizingText = e.result.text;\n            const delta = recognizingText.length - this.rlen;\n            const newText = recognizingText.slice(this.rlen);\n            \n            this.speechBuffer += newText;\n            this.updateTextarea();\n            this.rlen = recognizingText.length;\n            \n            // Reset timeout for auto-stop\n            clearTimeout(this.timeoutId);\n            this.timeoutId = setTimeout(() => {\n                this.completeRecognition();\n            }, 2000);\n        };\n        \n        this.speechRecognizer.recognized = (s, e) => {\n            if (e.result.reason === window.SpeechSDK.ResultReason.RecognizedSpeech) {\n                this.completeRecognition();\n                this.rlen = 0;\n            }\n        };\n    }\n    \n    disableSubmitButtons() {\n        // Disable single submit button\n        const singleSubmit = document.getElementById('submitFeedbackBtn');\n        if (singleSubmit) {\n            singleSubmit.disabled = true;\n            singleSubmit.style.opacity = '0.5';\n            singleSubmit.style.cursor = 'not-allowed';\n            singleSubmit.innerHTML = \"Stop Recording to Submit\"\n        }\n        \n        // Disable dual submit buttons (for block mode)\n        const submitOriginalBtn = document.getElementById('submitOriginalBtn');\n        const submitRefinementBtn = document.getElementById('submitRefinementBtn');\n        \n        if (submitOriginalBtn) {\n            submitOriginalBtn.disabled = true;\n            submitOriginalBtn.style.opacity = '0.5';\n            submitOriginalBtn.style.cursor = 'not-allowed';\n        }\n        \n        if (submitRefinementBtn) {\n            submitRefinementBtn.disabled = true;\n            submitRefinementBtn.style.opacity = '0.5';\n            submitRefinementBtn.style.cursor = 'not-allowed';\n        }\n    }\n    \n    enableSubmitButtons() {\n        // Enable single submit button\n        const singleSubmit = document.getElementById('submitFeedbackBtn');\n        if (singleSubmit) {\n            singleSubmit.disabled = false;\n            singleSubmit.style.opacity = '1';\n            singleSubmit.style.cursor = 'pointer';\n            singleSubmit.innerHTML = \"Submit Feedback\";\n        }\n\n        // Enable dual submit buttons (for block mode)\n        const submitOriginalBtn = document.getElementById('submitOriginalBtn');\n        const submitRefinementBtn = document.getElementById('submitRefinementBtn');\n\n        if (submitOriginalBtn) {\n            submitOriginalBtn.disabled = false;\n            submitOriginalBtn.style.opacity = '1';\n            submitOriginalBtn.style.cursor = 'pointer';\n        }\n\n        if (submitRefinementBtn) {\n            submitRefinementBtn.disabled = false;\n            submitRefinementBtn.style.opacity = '1';\n            submitRefinementBtn.style.cursor = 'pointer';\n        }\n    }\n\n    closeTicketDetailModal() {\n        const modal = document.getElementById('ticketDetailModal');\n        if (modal) {\n            modal.style.display = 'none';\n        }\n        this.currentTicket = null;\n    }\n}", "import { deepClone, parseBest, appendToConsole, showNotification } from './utils.js';\nimport { EntityPropertyChange, ComponentPropertyChange, RemoveComponentChange, ScriptRunnerVarChange, ReorderComponentChange } from './change-types.js';\n\nexport class InputHandler{\n    constructor(){\n        this.currentInput = null;\n        // this.attach();\n        // this.syncWithActiveElement();\n        this.initialized = false;\n        this.tolerance = 1;\n        this.setup = ()=>{\n            if(window.scene === undefined){\n                setTimeout(this.setup, 400)\n                return;\n            } \n\n            if(this.initialize){\n                return;\n            }\n            this.initialized = true;\n            // scene.LegacyEnableQuaternionPose()\n            // scene.LegacyEnableControllerExtras()\n            // scene.EnableLegacy()\n\n           \n\n            this.getRightControllerRot = ()=>{\n                //console.log(\"todo: set with tippy\")\n                let user = SM.myName()\n                let rightHandPath = `People/${user}/Trackers/RIGHT_HAND`\n                let rightHand = SM.getEntityById(rightHandPath)\n                if(!rightHand){\n                    showNotification(\"Error: RIGHT_HAND Tracker not found\")\n                    return {\n                        x: 0,\n                        y: 0,\n                        z: 0,\n                    }\n                }\n                let pos = rightHand.transform.localRotation;\n                return {\n                    x: pos.x,\n                    y: pos.y,\n                    z: pos.z,\n                }\n               \n            }\n            this.radialCrown = document.getElementById(\"radialCrown\");\n            this.radialCrownTol = document.getElementById(\"radialCrownTol\");\n            this.inputHelper = document.getElementById(\"inputHelper\");\n            this.spacePanel = document.getElementById(\"spacePropsContent\");\n            this.lifeCyclePanel = document.getElementById(\"lifecyclePanel\");\n            this.inputHelperInfo = document.getElementById(\"inputHelperInfo\");\n            this.inputHelperValue = document.getElementById(\"inputHelperValue\");\n            this.inputHelperSubject = document.getElementById(\"inputHelperSubject\");\n            this.radialCrownTolDisplay = document.getElementById(\"radialCrownTolDisplay\");\n        }\n\n        this.focusComponent = \"\";\n        this.focusProperty = \"\";\n        this.setup();\n        this.eventListeners = [];\n      \n    }\n\n    addEventListeners(element, event, callback){\n        if(!element) {\n            return;\n        }\n        element.addEventListener(event, callback);\n        this.eventListeners.push({element, event, callback});\n    }\n    \n    clearEventListeners(){\n        this.eventListeners.forEach(listener => {\n            listener.element.removeEventListener(listener.event, listener.callback);\n        });\n        this.eventListeners = []\n    }\n\n\n    setValue(target, property, value){\n        let sections = property.split(\".\");\n        let lockkey = target.id+\"_\"+sections[0];\n        const scaleLockHandler = inspector.propertiesPanel?.scaleLockHandler;\n        if(scaleLockHandler?.isLocked(lockkey)){\n            // Get current value based on target type\n            let currentValue;\n            if(target.type === \"Entity\"){\n                currentValue = target.transformVal(sections[0]);\n            }else{\n                currentValue = target.properties[sections[0]];\n            }\n            const newScale = scaleLockHandler.handleProportionalScale(lockkey, currentValue, sections[1], value);\n            target.Set(sections[0], newScale);\n            return;\n        }\n\n        if(!property.includes(\".\")){\n            target.Set(property, value);\n            return;\n        }\n        let [key, axis] = property.split(\".\");\n        if(target.type === \"Entity\"){\n            let currentVec = deepClone(target.transformVal(key));\n            currentVec[axis] = value;\n            target.Set(key, currentVec);\n        }else{\n            let currentVec = deepClone(target.properties[key]);\n            currentVec[axis] = value;\n            target.Set(key, currentVec);\n        }\n\n    }\n\n    helpNumericInputElement(element, target, property){\n        let turnLoopInterval = null;\n        let tolTurnLoopInterval = null;\n        let lastRadialRot = 0;\n        let currentRadialRot = 0;\n        let lastTolRot = 0;\n        let currentTolRot = 0;\n        let name = (target.type === \"Entity\") ? target.name : target._entity.name;\n        let type = (target.type === \"Entity\") ? '' : target.type;\n\n\n        this.currentInput.style.backgroundColor = \"#1e3764\";\n        this.currentInput.style.borderColor = \"#326689\";\n        this.inputHelper.style.display = \"block\";\n        this.spacePanel.style.display = \"none\"; \n        this.lifeCyclePanel.style.display = \"none\";\n        this.inputHelperSubject.innerHTML = `\n            <span style=\"color:orange\">${name}</span> \n            <span style=\"color:#8babd5\">${type}</span> \n            <span >${property}</span>\n        `;\n        this.inputHelperValue.innerHTML = element.value;\n        // Clear any existing event listeners before adding new ones\n        this.clearEventListeners();\n        \n        // interval is managed at the instance level\n        this.addEventListeners(this.radialCrown, \"mousedown\", (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n            let startRot = this.getRightControllerRot();\n            let value = parseFloat(element.value);\n            if(isNaN(value) || value === 0){\n                value = 1;\n            }\n            let relInc = Math.abs((value / 180) * this.tolerance);\n            let signFlip = 1;\n            let lastRotX = -999999;\n            let turnLoop = ()=>{\n                let currentRot = this.getRightControllerRot();\n                let cX = currentRot.x;\n                if(lastRotX === -999999){\n                    lastRotX = cX;\n                }else{\n                    if(Math.abs(cX - lastRotX) > .8){\n                        signFlip *= -1;\n                    }\n                }\n                lastRotX = cX;\n                cX = cX * signFlip;\n                \n                let deltaX = -(Math.round((cX - startRot.x) * 180*100)/100);\n                let valueDelta = deltaX*relInc;\n                let valueTarget = value + valueDelta;\n                element.value = valueTarget;\n                this.inputHelperInfo.innerHTML = (valueDelta > 0 ? \"+\" : \"\") + `${valueDelta.toFixed(4)}` //   :relInc: ${relInc}, :deltaX: ${deltaX}, :valueDelta: ${valueDelta}, :valueTarget: ${valueTarget}\n                this.radialCrown.style.transform = `rotateZ(${lastRadialRot + deltaX}deg)`;\n                currentRadialRot = lastRadialRot + deltaX;\n                this.inputHelperValue.innerHTML = valueTarget.toFixed(4);\n                this.setValue(target, property, valueTarget);\n            }\n            if(turnLoopInterval){\n                clearInterval(turnLoopInterval);\n                turnLoopInterval = null;\n            }\n            turnLoopInterval = setInterval(turnLoop, 100)\n            this.radialCrown.style.boxShadow = \"0px 0px 20px black\";\n        })\n\n        this.addEventListeners(this.radialCrownTol, \"mousedown\", (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n            let startRot = this.getRightControllerRot();\n            let signFlip = 1;\n            let lastRotX = -999999;\n            let minRot = -270;\n            let maxRot = 270;\n            let turnLoop = ()=>{\n                let currentRot = this.getRightControllerRot();\n                let cX = currentRot.x;\n                if(lastRotX === -999999){\n                    lastRotX = cX;\n                }else{\n                    if(Math.abs(cX - lastRotX) > .8){\n                        signFlip *= -1;\n                    }\n                }\n                lastRotX = cX;\n                cX = cX * signFlip;\n                \n                let deltaX = -(Math.round((cX - startRot.x) * 180*100)/100);\n                let valueDelta = deltaX;\n\n                let targetRot = lastTolRot + deltaX;\n                if(targetRot < minRot){\n                    targetRot = minRot;\n                }\n                if(targetRot > maxRot){\n                    targetRot = maxRot;\n                }   \n                let value = Math.exp(targetRot/12);\n                let displayVal = value.toFixed(12);\n                if(value < .000000001){\n                    displayVal = value.toFixed(11);\n                }else if(value < .00000001){\n                    displayVal = value.toFixed(10);\n                }else if(value < .0000001){\n                    displayVal = value.toFixed(9);\n                }else if(value < .000001){\n                    displayVal = value.toFixed(8);\n                }else if(value < .00001){\n                    displayVal = value.toFixed(7);\n                }else if(value < .0001){\n                    displayVal = value.toFixed(6);\n                }else if(value < .001){\n                    displayVal = value.toFixed(5);\n                }else if(value < .01){\n                    displayVal = value.toFixed(4);\n                }else if(value < .1){\n                    displayVal = value.toFixed(3);\n                }else if(value < 1){\n                    displayVal = value.toFixed(2);\n                }else if(value < 10){\n                    displayVal = value.toFixed(1);\n                }else{\n                    displayVal = value.toFixed(0);\n                }\n                this.radialCrownTolDisplay.innerHTML = `Tol +/- ${displayVal}` //   :relInc: ${relInc}, :deltaX: ${deltaX}, :valueDelta: ${valueDelta}, :valueTarget: ${valueTarget}\n                this.radialCrownTol.style.transform = `rotateZ(${targetRot}deg)`;\n                this.tolerance = value;\n                currentTolRot = targetRot;\n            }\n            if(tolTurnLoopInterval){\n                clearInterval(tolTurnLoopInterval);\n                tolTurnLoopInterval = null;\n            }\n            tolTurnLoopInterval = setInterval(turnLoop, 100)\n            this.radialCrownTol.style.boxShadow = \"0px 0px 20px black\";\n        })\n\n        let stopTurnLoops = ()=>{\n            this.inputHelperInfo.innerHTML = \"\";\n            lastRadialRot = currentRadialRot;\n            lastTolRot = currentTolRot;\n            clearInterval(turnLoopInterval);\n            clearInterval(tolTurnLoopInterval);    \n            turnLoopInterval = null;\n            tolTurnLoopInterval = null;\n            this.radialCrown.style.boxShadow = \"none\";\n            this.radialCrownTol.style.boxShadow = \"none\";\n        }\n\n        this.addEventListeners(this.inputHelper, \"mouseleave\", (e)=>{\n            stopTurnLoops();\n        })\n\n        this.addEventListeners(this.inputHelper, \"mouseup\", (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n            stopTurnLoops();\n        })\n\n        this.addEventListeners(document.body, \"mouseup\", (e)=>{\n            stopTurnLoops();\n            this.checkInputBlur();\n        })\n\n    }\n\n    helpColorInputElement(element, component, property){\n        // Clear any existing event listeners\n        this.clearEventListeners();\n\n\n        // Hide numeric input UI and show color selector UI\n        if(!this.colorSelectorContainer){\n            this.setupColorSelector();\n        }\n        \n        this.currentInput.style.backgroundColor = \"#1e3764\";\n        this.currentInput.style.borderColor = \"#326689\";\n        this.inputHelper.style.display = \"block\";\n        this.spacePanel.style.display = \"none\"; \n        this.lifeCyclePanel.style.display = \"none\";\n        \n        // Hide numeric input controls\n        const numericContainer = document.getElementById(\"radialCrown\")?.parentElement;\n        if(numericContainer) {\n            numericContainer.id = \"numericInputContainer\";\n            numericContainer.style.display = \"none\";\n        }\n        this.colorSelectorContainer.style.display = \"block\";\n        \n        // Set subject\n        this.inputHelperSubject.innerHTML = `\n            <span style=\"color:orange\">${component._entity.name}</span> \n            <span style=\"color:#8babd5\">${component.type}</span> \n            <span >${property}</span>\n        `;\n        \n        // Get current color value\n        let currentColor = this.getColorValue(component, property);\n        \n        // Initialize color selector with current value\n        this.initColorSelector(currentColor, (newColor) => {\n            this.setColorValue(component, property, newColor);\n            this.updateColorDisplay(newColor);\n        });\n        \n        \n        \n\n        this.addEventListeners(this.inputHelper, \"mouseup\", (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n        })\n\n        // Add cleanup handlers\n        this.addEventListeners(document.body, \"mouseup\", () => {\n            this.checkInputBlur();\n        });\n        \n    }\n    \n    setupColorSelector(){\n        // Create color selector elements dynamically\n        const container = document.createElement('div');\n        container.className = 'color-selector-container';\n        container.id = 'colorSelectorContainer';\n        container.style.display = 'none';\n        \n        // Color preview at top\n        const preview = document.createElement('div');\n        preview.className = 'color-preview-large';\n        preview.id = 'colorPreviewLarge';\n        container.appendChild(preview);\n        \n        // Main picker area with saturation/brightness square and hue bar\n        const pickerArea = document.createElement('div');\n        pickerArea.className = 'color-picker-area';\n        \n        // Saturation/Brightness square\n        const sbSquare = document.createElement('div');\n        sbSquare.className = 'color-sb-square';\n        sbSquare.id = 'colorSbSquare';\n        \n        const sbCursor = document.createElement('div');\n        sbCursor.className = 'color-sb-cursor';\n        sbCursor.id = 'sbCursor';\n        sbSquare.appendChild(sbCursor);\n        \n        pickerArea.appendChild(sbSquare);\n        \n        // Hue bar\n        const hueBar = document.createElement('div');\n        hueBar.className = 'color-hue-bar';\n        hueBar.id = 'colorHueBar';\n        \n        const hueSlider = document.createElement('div');\n        hueSlider.className = 'color-hue-slider';\n        hueSlider.id = 'hueSlider';\n        hueBar.appendChild(hueSlider);\n        \n        pickerArea.appendChild(hueBar);\n        \n        container.appendChild(pickerArea);\n        \n        // Alpha slider\n        const alphaWrapper = document.createElement('div');\n        alphaWrapper.className = 'color-alpha-wrapper';\n        \n        const alphaLabel = document.createElement('span');\n        alphaLabel.className = 'color-slider-label';\n        alphaLabel.textContent = 'Alpha';\n        alphaWrapper.appendChild(alphaLabel);\n        \n        const alphaBar = document.createElement('div');\n        alphaBar.className = 'color-alpha-bar';\n        alphaBar.id = 'colorAlphaBar';\n        \n        const alphaSlider = document.createElement('div');\n        alphaSlider.className = 'color-alpha-slider';\n        alphaSlider.id = 'alphaSlider';\n        alphaBar.appendChild(alphaSlider);\n        \n        alphaWrapper.appendChild(alphaBar);\n        \n        const alphaValue = document.createElement('span');\n        alphaValue.className = 'color-slider-value';\n        alphaValue.id = 'alphaValue';\n        alphaValue.textContent = '100%';\n        alphaWrapper.appendChild(alphaValue);\n        \n        container.appendChild(alphaWrapper);\n        \n        // Color values display\n        const values = document.createElement('div');\n        values.className = 'color-values';\n        \n        const rgbRow = document.createElement('div');\n        rgbRow.className = 'color-value-row';\n        rgbRow.innerHTML = '<span>RGB:</span><span id=\"rgbDisplay\">255, 255, 255</span>';\n        values.appendChild(rgbRow);\n        \n        const hexRow = document.createElement('div');\n        hexRow.className = 'color-value-row';\n\n        const hexLabel = document.createElement('span');\n        hexLabel.textContent = 'Hex:';\n        hexRow.appendChild(hexLabel);\n\n        const hexInput = document.createElement('input');\n        hexInput.type = 'text';\n        hexInput.id = 'hexDisplay';\n        hexInput.className = 'hex-input';\n        hexInput.value = '#FFFFFF';\n        hexInput.maxLength = 7;\n        hexInput.style.cssText = 'background: #1a1a1a; border: 1px solid #444; color: #fff; padding: 2px 6px; font-family: monospace; width: 80px; cursor: pointer;';\n        hexRow.appendChild(hexInput);\n\n        const copyBtn = document.createElement('button');\n        copyBtn.textContent = 'Copy';\n        copyBtn.className = 'hex-copy-btn';\n        copyBtn.style.cssText = 'margin-left: 8px; padding: 2px 8px; background: #2a2a2a; border: 1px solid #444; color: #8babd5; cursor: pointer; font-size: 11px;';\n        hexRow.appendChild(copyBtn);\n\n        values.appendChild(hexRow);\n        \n        container.appendChild(values);\n        \n        // Add to properties content\n        const propertiesContent = document.querySelector('#inputHelper .properties-content');\n        propertiesContent.appendChild(container);\n        \n        // Store reference\n        this.colorSelectorContainer = container;\n    }\n    \n    \n    initColorSelector(color, onChange){\n        this.colorChangeCallback = onChange;\n        this.currentHSV = this.rgbToHsv(color.r * 255, color.g * 255, color.b * 255);\n        this.currentAlpha = color.a || 1;\n\n        // Update displays\n        this.updateColorDisplay(color);\n        this.updatePickerVisuals();\n\n        // Setup interactions\n        this.setupSaturationBrightnessPicker();\n        this.setupHuePicker();\n        this.setupAlphaPicker();\n        this.setupHexInputHandlers();\n    }\n    \n    setupSaturationBrightnessPicker(){\n        const square = document.getElementById('colorSbSquare');\n        const cursor = document.getElementById('sbCursor');\n        \n        \n        if(!square || !cursor) {\n            return;\n        }\n        \n        let isDragging = false;\n        \n        const updateSB = (e) => {\n            const rect = square.getBoundingClientRect();\n            const x = Math.max(0, Math.min(rect.width, e.clientX - rect.left));\n            const y = Math.max(0, Math.min(rect.height, e.clientY - rect.top));\n            \n            this.currentHSV.s = x / rect.width;\n            this.currentHSV.v = 1 - (y / rect.height);\n            \n            cursor.style.left = `${x}px`;\n            cursor.style.top = `${y}px`;\n            \n            this.updateFromHSV();\n        };\n        \n        const mouseDownHandler = (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            isDragging = true;\n            updateSB(e);\n        };\n        \n        const mouseMoveHandler = (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     updateSB(e);\n            // }\n        };\n        \n        const mouseUpHandler = (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     isDragging = false;\n            // }\n        };\n        \n        this.addEventListeners(square, 'mousedown', mouseDownHandler);\n        this.addEventListeners(document, 'mousemove', mouseMoveHandler);\n        this.addEventListeners(document, 'mouseup', mouseUpHandler);\n    }\n    \n    setupHuePicker(){\n        const bar = document.getElementById('colorHueBar');\n        const slider = document.getElementById('hueSlider');\n        \n        if(!bar || !slider) {\n            console.error('Hue picker elements not found');\n            return;\n        }\n        \n        let isDragging = false;\n        \n        const updateHue = (e) => {\n            const rect = bar.getBoundingClientRect();\n            const y = Math.max(0, Math.min(rect.height, e.clientY - rect.top));\n            \n            this.currentHSV.h = (y / rect.height) * 360;\n            slider.style.top = `${y - 2}px`;\n            \n            this.updateFromHSV();\n            this.updatePickerVisuals();\n        };\n        \n        this.addEventListeners(bar, 'mousedown', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            isDragging = true;\n            updateHue(e);\n        });\n        \n        this.addEventListeners(document, 'mousemove', (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     updateHue(e);\n            // }\n        });\n        \n        this.addEventListeners(document, 'mouseup', (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     isDragging = false;\n            // }\n        });\n    }\n    \n    setupAlphaPicker(){\n        const bar = document.getElementById('colorAlphaBar');\n        const slider = document.getElementById('alphaSlider');\n        const valueDisplay = document.getElementById('alphaValue');\n        \n        if(!bar || !slider || !valueDisplay) {\n            console.error('Alpha picker elements not found');\n            return;\n        }\n        \n        let isDragging = false;\n        \n        const updateAlpha = (e) => {\n            const rect = bar.getBoundingClientRect();\n            const x = Math.max(0, Math.min(rect.width, e.clientX - rect.left));\n            \n            this.currentAlpha = x / rect.width;\n            slider.style.left = `${x - 2}px`;\n            valueDisplay.textContent = `${Math.round(this.currentAlpha * 100)}%`;\n            \n            this.updateFromHSV();\n        };\n        \n        this.addEventListeners(bar, 'mousedown', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            isDragging = true;\n            updateAlpha(e);\n        });\n        \n        this.addEventListeners(document, 'mousemove', (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     updateAlpha(e);\n            // }\n        });\n        \n        this.addEventListeners(document, 'mouseup', (e) => {\n            // if(isDragging) {\n            //     e.preventDefault();\n            //     isDragging = false;\n            // }\n        });\n    }\n\n    setupHexInputHandlers(){\n        const hexInput = document.getElementById('hexDisplay');\n        const copyBtn = document.querySelector('.hex-copy-btn');\n\n        if(!hexInput || !copyBtn){\n            console.error('Hex input elements not found');\n            return;\n        }\n\n        // Copy button handler\n        this.addEventListeners(copyBtn, 'click', async (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            try {\n                await navigator.clipboard.writeText(hexInput.value);\n                // Visual feedback\n                const originalText = copyBtn.textContent;\n                const originalBg = copyBtn.style.background;\n                copyBtn.textContent = 'Copied!';\n                copyBtn.style.background = '#2d5016';\n                setTimeout(() => {\n                    copyBtn.textContent = originalText;\n                    copyBtn.style.background = originalBg;\n                }, 1000);\n            } catch (err) {\n                console.error('Failed to copy:', err);\n                showNotification('Failed to copy hex value');\n            }\n        });\n\n        // Hex input handler - update color when user pastes or types\n        this.addEventListeners(hexInput, 'input', (e) => {\n            let hexValue = hexInput.value.trim();\n\n            // Auto-add # if missing\n            if(hexValue.length > 0 && !hexValue.startsWith('#')){\n                hexValue = '#' + hexValue;\n                hexInput.value = hexValue;\n            }\n\n            // Only process if we have a complete hex value\n            if(hexValue.length === 7){\n                const rgb = this.hexToRgb(hexValue);\n                if(rgb){\n                    // Update HSV from the new RGB values\n                    this.currentHSV = this.rgbToHsv(rgb.r, rgb.g, rgb.b);\n\n                    // Update the color\n                    this.updateFromHSV();\n                    this.updatePickerVisuals();\n\n                    // Visual feedback - green border\n                    hexInput.style.borderColor = '#4a7c29';\n                    setTimeout(() => {\n                        hexInput.style.borderColor = '#444';\n                    }, 500);\n                } else {\n                    // Invalid hex - red border\n                    hexInput.style.borderColor = '#a02020';\n                }\n            }\n        });\n\n        // Select all text when clicking on the input\n        this.addEventListeners(hexInput, 'click', (e) => {\n            e.stopPropagation();\n            hexInput.select();\n        });\n\n        // Handle paste event\n        this.addEventListeners(hexInput, 'paste', (e) => {\n            e.stopPropagation();\n            // Let the input event handler process the pasted value\n        });\n    }\n\n    updatePickerVisuals(){\n        // Update saturation/brightness square background\n        const square = document.getElementById('colorSbSquare');\n        if(square){\n            const hueColor = this.hsvToRgb(this.currentHSV.h, 1, 1);\n            square.style.background = `\n                linear-gradient(to bottom, \n                    rgba(0,0,0,0) 0%, \n                    rgba(0,0,0,1) 100%\n                ),\n                linear-gradient(to right, \n                    rgba(255,255,255,1) 0%, \n                    rgb(${hueColor.r}, ${hueColor.g}, ${hueColor.b}) 100%\n                )\n            `;\n            \n            // Update cursor position\n            const cursor = document.getElementById('sbCursor');\n            if(cursor){\n                // Use fixed dimensions since getBoundingClientRect might return 0 initially\n                const width = 200; // matching CSS width\n                const height = 200; // matching CSS height\n                cursor.style.left = `${this.currentHSV.s * width}px`;\n                cursor.style.top = `${(1 - this.currentHSV.v) * height}px`;\n            }\n        }\n        \n        // Update hue slider position\n        const hueSlider = document.getElementById('hueSlider');\n        if(hueSlider){\n            const height = 200; // matching CSS height\n            hueSlider.style.top = `${(this.currentHSV.h / 360) * height - 2}px`;\n        }\n        \n        // Update alpha slider position\n        const alphaSlider = document.getElementById('alphaSlider');\n        const alphaValue = document.getElementById('alphaValue');\n        if(alphaSlider){\n            // Alpha bar width is flex, but we can estimate\n            const width = 160; // approximate width\n            alphaSlider.style.left = `${this.currentAlpha * width - 2}px`;\n        }\n        if(alphaValue){\n            alphaValue.textContent = `${Math.round(this.currentAlpha * 100)}%`;\n        }\n    }\n    \n    updateFromHSV(){\n        const rgb = this.hsvToRgb(this.currentHSV.h, this.currentHSV.s, this.currentHSV.v);\n        const color = {\n            r: rgb.r / 255,\n            g: rgb.g / 255,\n            b: rgb.b / 255,\n            a: this.currentAlpha\n        };\n        \n        if(this.colorChangeCallback){\n            this.colorChangeCallback(color);\n        }\n        \n        this.updateColorDisplay(color);\n    }\n    \n    updateColorDisplay(color){\n        const r = Math.round(color.r * 255);\n        const g = Math.round(color.g * 255);\n        const b = Math.round(color.b * 255);\n        const a = color.a || 1;\n        \n        // Update preview\n        const preview = document.getElementById('colorPreviewLarge');\n        if(preview){\n            preview.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${a})`;\n        }\n        \n        // Update value displays\n        const rgbDisplay = document.getElementById('rgbDisplay');\n        if(rgbDisplay){\n            rgbDisplay.textContent = `${r}, ${g}, ${b}`;\n        }\n        \n        const hexDisplay = document.getElementById('hexDisplay');\n        if(hexDisplay){\n            hexDisplay.value = this.rgbToHex(r, g, b);\n        }\n        \n        // Update main value display\n        this.inputHelperValue.innerHTML = ``;\n    }\n    \n    \n    getColorValue(component, property){\n        // Handle MonoBehavior variables\n        if(this.contextType === 'scriptrunner'){\n            const varDef = component.vars?.[property];\n            return varDef?.value || {r: 1, g: 1, b: 1, a: 1};\n        }\n\n        // Handle regular component properties\n        if(!property.includes(\".\")){\n            return component.properties[property] || {r: 1, g: 1, b: 1, a: 1};\n        }\n        // Handle nested properties like color.r\n        let [key, channel] = property.split(\".\");\n        return component.properties[key] || {r: 1, g: 1, b: 1, a: 1};\n    }\n    \n    setColorValue(component, property, color){\n        // Handle MonoBehavior variables\n        if(this.contextType === 'scriptrunner'){\n            const change = new ScriptRunnerVarChange(component.id, property, {type: 'color', value: color}, { source: 'ui' });\n            window.changeManager.applyChange(change);\n            return;\n        }\n\n        // Handle regular component properties\n        if(!property.includes(\".\")){\n            component.Set(property, color);\n            return;\n        }\n        // Handle individual channel updates\n        let [key, channel] = property.split(\".\");\n        let currentColor = deepClone(component.properties[key]);\n        if(channel){\n            currentColor[channel] = color[channel];\n        } else {\n            currentColor = color;\n        }\n        component.Set(key, currentColor);\n    }\n    \n    // Color conversion utilities\n    rgbToHsv(r, g, b){\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        \n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const delta = max - min;\n        \n        let h = 0;\n        let s = max === 0 ? 0 : delta / max;\n        let v = max;\n        \n        if(delta !== 0){\n            if(max === r){\n                h = ((g - b) / delta + (g < b ? 6 : 0)) * 60;\n            } else if(max === g){\n                h = ((b - r) / delta + 2) * 60;\n            } else {\n                h = ((r - g) / delta + 4) * 60;\n            }\n        }\n        \n        return {h, s, v};\n    }\n    \n    hsvToRgb(h, s, v){\n        const c = v * s;\n        const x = c * (1 - Math.abs((h / 60) % 2 - 1));\n        const m = v - c;\n        \n        let r, g, b;\n        \n        if(h >= 0 && h < 60){\n            [r, g, b] = [c, x, 0];\n        } else if(h >= 60 && h < 120){\n            [r, g, b] = [x, c, 0];\n        } else if(h >= 120 && h < 180){\n            [r, g, b] = [0, c, x];\n        } else if(h >= 180 && h < 240){\n            [r, g, b] = [0, x, c];\n        } else if(h >= 240 && h < 300){\n            [r, g, b] = [x, 0, c];\n        } else {\n            [r, g, b] = [c, 0, x];\n        }\n        \n        return {\n            r: Math.round((r + m) * 255),\n            g: Math.round((g + m) * 255),\n            b: Math.round((b + m) * 255)\n        };\n    }\n    \n    rgbToHex(r, g, b){\n        return '#' + [r, g, b].map(x => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n        }).join('').toUpperCase();\n    }\n\n    hexToRgb(hex){\n        // Remove # if present\n        hex = hex.replace('#', '');\n\n        // Validate hex format\n        if(!/^[0-9A-Fa-f]{6}$/.test(hex)){\n            return null;\n        }\n\n        return {\n            r: parseInt(hex.substring(0, 2), 16),\n            g: parseInt(hex.substring(2, 4), 16),\n            b: parseInt(hex.substring(4, 6), 16)\n        };\n    }\n   \n    getDeepActiveElement(doc = document){\n        let activeEl = doc.activeElement;\n        while (activeEl && activeEl.shadowRoot && activeEl.shadowRoot.activeElement) {\n            activeEl = activeEl.shadowRoot.activeElement;\n        }\n        return activeEl;\n    }\n\n    isInputElement(element){\n        if(!element){\n            return false;\n        }\n        if(element instanceof HTMLInputElement){\n            return true;\n        }\n        if(element instanceof HTMLTextAreaElement){\n            return true;\n        }\n        if(element.isContentEditable === true){\n            return true;\n        }\n        if(element.contentEditable === \"true\"){\n            return true;\n        }\n        return false;\n    }\n\n    syncWithActiveElement(){\n        const active = this.getDeepActiveElement();\n        this.currentInput = this.isInputElement(active) ? active : null;\n    }\n\n\n    clearHighlight(){\n        this.inputHelper.style.display = \"none\";\n        this.spacePanel.style.display = \"block\";\n        this.lifeCyclePanel.style.display = \"block\";\n        \n        // Reset numeric input container visibility\n        const numericContainer = document.getElementById(\"numericInputContainer\");\n        if(numericContainer) {\n            numericContainer.style.display = \"block\";\n        }\n        \n        // Hide color selector if it exists\n        if(this.colorSelectorContainer) {\n            this.colorSelectorContainer.style.display = \"none\";\n        }\n        \n        if(this.currentInput && this.currentInput.style){\n            this.currentInput.style.backgroundColor = \"#0f0f0f\";\n            this.currentInput.style.borderColor = \"#2a2a2a\";\n        }\n        this.currentInput = null;\n      \n        this.clearEventListeners();\n    }\n\n    checkInputBlur(){\n        const activeEl = this.getDeepActiveElement();\n        if(activeEl === document.body){\n            this.clearHighlight();\n            this.focusComponent = null;\n            this.focusProperty = null;\n            inspector.propertiesPanel.render(SM.selectedEntity)\n        }\n    }\n\n    inputFocusChanged(activeEl, component, property, contextType = null){\n        if(!this.initialized){\n            return;\n        }\n        if(this.currentInput === activeEl){\n            return;\n        }\n\n        this.focusComponent = component;\n        this.focusProperty = property;\n        this.contextType = contextType; // 'monobehavior' or null for regular components\n        //inspector.propertiesPanel.render(SM.selectedEntity)\n        this.clearHighlight();\n\n        this.currentInput = activeEl;\n        if(activeEl.type === \"number\"){\n            this.helpNumericInputElement(activeEl, component, property);\n        }\n        if(activeEl.type === \"color\"){\n            this.helpColorInputElement(activeEl, component, property);\n        }\n\n    }\n\n}\nexport const inputHandler = new InputHandler();\nwindow.inputHandler = inputHandler;", "/**\n * Tippy Bundle Entry Point\n *\n * This is the bundled entry point for esbuild.\n * All imports are static for proper bundling and tree-shaking.\n */\n\n// Core utilities and logging\nimport { logger } from './utils.js';\n\n// Loading screen\nimport { loadingScreen } from './pages/world-inspector/loading-screen.js';\n\n// Core modules\nimport { sceneManager } from './scene-manager.js';\nimport { net } from './networking.js';\nimport { changeManager } from './change-manager.js';\nimport { lifecycleManager } from './lifecycle-manager.js';\n\n// UI Panels\nimport { HierarchyPanel } from './pages/world-inspector/hierarchy-panel.js';\nimport { PropertiesPanel } from './pages/world-inspector/properties-panel/index.js';\nimport { SpacePropsPanel } from './pages/world-inspector/space-props-panel.js';\nimport { ComponentMenu } from './pages/world-inspector/component-menu.js';\nimport { LifecyclePanel } from './pages/world-inspector/lifecycle-panel.js';\n\n// Pages\nimport { Navigation } from './navigation.js';\nimport { Inventory } from './pages/inventory/inventory.js';\nimport { ScriptEditor } from './pages/script-editor/script-editor.js';\nimport { Feedback } from './pages/feedback/feedback.js';\n\n// Input handling\nimport { InputHandler } from './input-handler.js';\n\n// Make loading screen globally accessible\nwindow.loadingScreen = loadingScreen;\n\n// Global app instance\nclass InspectorApp {\n    constructor() {\n        this.navigation = null;\n        this.hierarchyPanel = null;\n        this.propertiesPanel = null;\n        this.spacePropsPanel = null;\n        this.componentMenu = null;\n        this.inventory = null;\n        this.scriptEditors = null;\n        this.lifecyclePanel = null;\n        this.feedback = null;\n        this.initialized = false;\n    }\n\n    /**\n     * Initialize the inspector application\n     */\n    async initialize() {\n        log(\"init\", \"File Server: \" + window.fileServer);\n        log(\"init\", \"Ngrok URL: \" + window.ngrokUrl);\n        log(\"init\", \"Repo URL: \" + window.repoUrl);\n        log(\"init\", \"Block Service URL: \" + window.blockServiceUrl);\n        document.body.style.height = \"100vh\";\n\n        if (this.initialized) return;\n\n        log('init', 'Initializing Unity Scene Inspector...');\n        try {\n            // Initialize navigation\n            loadingScreen.updateStage('ui-panels', 10, 'Initializing navigation...');\n            this.navigation = new Navigation();\n\n            // Initialize scene manager\n            loadingScreen.updateStage('scene-connect', 0, 'Connecting to Unity scene...');\n            await SM.initialize();\n\n            // Set up change manager to scene manager integration\n            changeManager.addChangeListener(async (change) => {\n                this.spacePropsPanel.render('changeManager');\n                this.propertiesPanel.render(SM.selectedEntity);\n            });\n\n            // Initialize UI panels\n            this.hierarchyPanel = new HierarchyPanel();\n            this.propertiesPanel = new PropertiesPanel();\n            this.spacePropsPanel = new SpacePropsPanel();\n            this.componentMenu = new ComponentMenu();\n            this.lifecyclePanel = new LifecyclePanel();\n\n            // Initialize inventory\n            this.inventory = new Inventory();\n            // Expose inventory globally for WebSocket toggle utilities\n            window.inventoryInstance = this.inventory;\n\n            // Initialize feedback\n            this.feedback = new Feedback();\n\n            // Initialize script editors map\n            this.scriptEditors = new Map();\n\n            // Set up global references for inline handlers\n            window.spacePropsPanel = this.spacePropsPanel;\n            window.inventory = this.inventory;\n            window.navigation = this.navigation;\n            window.scriptEditors = this.scriptEditors;\n            window.lifecyclePanel = this.lifecyclePanel;\n            window.feedback = this.feedback;\n\n            // Initial render\n            this.hierarchyPanel.render();\n            this.spacePropsPanel.render('initialization');\n            this.lifecyclePanel.render();\n            this.setupGlobalEventHandlers();\n\n            // Setup console toggle buttons\n            const toggleButtons = document.querySelectorAll('.console-toggle');\n            toggleButtons.forEach(btn => {\n                btn.addEventListener('mousedown', () => {\n                    const toggleType = btn.dataset.toggle;\n                    window.logger.include[toggleType] = !window.logger.include[toggleType];\n                    btn.classList.toggle('active', window.logger.include[toggleType]);\n                });\n            });\n\n            // Setup clear shell button (moved to shell header)\n            const clearShellBtn = document.getElementById('clearShellBtn2');\n            if (clearShellBtn) {\n                clearShellBtn.addEventListener('mousedown', () => {\n                    this.lifecyclePanel.clearShell();\n                });\n            }\n\n            const refreshPanelBtn = document.getElementById('refreshPanelBtn');\n            if (refreshPanelBtn) {\n                refreshPanelBtn.addEventListener('mousedown', () => {\n                    this.lifecyclePanel.render();\n                });\n            }\n\n            // Set up history notifications\n            this.setupHistoryNotifications();\n\n            // Handle window resize\n            this.setupResizeHandlers();\n\n            this.loadOldTabs();\n\n            this.initialized = true;\n            log('init', 'Inspector initialized successfully');\n            await SM.executeStartupScripts(\"onInspectorLoaded\");\n\n        } catch (error) {\n            err('init', 'Failed to initialize inspector:', error);\n\n            // Show error in loading screen if it's still visible\n            if (loadingScreen.element) {\n                loadingScreen.setError(error.message || 'Failed to initialize the Scene Inspector');\n            } else {\n                this.showInitError(error);\n            }\n        }\n    }\n\n    /**\n     * Setup history notification handling\n     */\n    setupHistoryNotifications() {\n        // Create notification container\n        let notificationContainer = document.getElementById('historyNotifications');\n        if (!notificationContainer) {\n            notificationContainer = document.createElement('div');\n            notificationContainer.id = 'historyNotifications';\n            document.body.appendChild(notificationContainer);\n        }\n\n        // Wire up undo/redo buttons\n        const undoBtn = document.getElementById('undoBtn');\n        const redoBtn = document.getElementById('redoBtn');\n\n        if (undoBtn) {\n            undoBtn.addEventListener('mousedown', () => {\n                if (changeManager) {\n                    changeManager.undo();\n                }\n            });\n        }\n\n        if (redoBtn) {\n            redoBtn.addEventListener('mousedown', () => {\n                if (changeManager) {\n                    changeManager.redo();\n                }\n            });\n        }\n\n        // Wire up save button\n        const saveBtn = document.getElementById('saveBtn');\n        if (saveBtn) {\n            saveBtn.addEventListener('mousedown', () => {\n                SM.saveScene();\n                this.showNotification('Scene saved', 'success');\n                saveBtn.style.opacity = 0.5;\n                saveBtn.style.pointerEvents = \"none\";\n            });\n        }\n\n        // Listen for history notifications\n        document.addEventListener('historyNotification', (event) => {\n            const { message, type } = event.detail;\n            this.showNotification(message, type);\n        });\n\n        // Listen for history changes to update UI\n        document.addEventListener('historyChangeApplied', (event) => {\n            // Refresh relevant panels\n            const change = event.detail.change;\n            if (change.type === 'spaceProperty') {\n                this.spacePropsPanel.render('historyChangeApplied');\n            } else if (change.type === 'component' || change.type === 'entity' ||\n                      change.type === 'componentAdd' || change.type === 'componentRemove') {\n                this.propertiesPanel.render(SM.selectedEntity);\n            } else if (change.type === 'entityAdd' || change.type === 'entityRemove' ||\n                      change.type === 'entityMove') {\n                this.hierarchyPanel.render();\n                this.propertiesPanel.render(SM.selectedEntity);\n            }\n        });\n    }\n\n    /**\n     * Show notification to user\n     */\n    showNotification(message, type = 'info') {\n        const notification = document.createElement('div');\n        notification.className = `history-notification ${type}`;\n        notification.textContent = message;\n\n        document.body.appendChild(notification);\n\n        // Trigger animation\n        setTimeout(() => notification.classList.add('show'), 10);\n\n        // Remove after delay\n        setTimeout(() => {\n            notification.classList.remove('show');\n            setTimeout(() => notification.remove(), 300);\n        }, 3000);\n    }\n\n    /**\n     * Setup global event handlers\n     */\n    setupGlobalEventHandlers() {\n        log(\"init\", \"setting up global event handlers\")\n        // Handle hierarchy changes from change manager\n        changeManager.addChangeListener((change) => {\n            // Update hierarchy panel if entity names or active state changed\n            const hierarchyChanges = change.type === 'entity' && (change.property === 'name' || change.property === 'active');\n            if (hierarchyChanges.length > 0) {\n                this.hierarchyPanel.render();\n            }\n        });\n\n        // Handle hierarchy changes (legacy - for compatibility)\n        document.addEventListener('entityPropertiesChanged', () => {\n            this.hierarchyPanel.render();\n        });\n\n        // Handle script editor events\n        window.addEventListener('open-script-editor', (event) => {\n            const scriptData = event.detail;\n            const editorKey = scriptData.name;\n\n            // Check if editor for this script already exists\n            let existingEditor = null;\n            for (const [key, editor] of this.scriptEditors) {\n                if (editor.currentScript.name === scriptData.name) {\n                    existingEditor = editor;\n                    // Switch to existing tab\n                    if(!event.detail.openInBackground){\n                        navigation.switchPage(editor.pageId);\n                    }\n                    return;\n                }\n            }\n\n            // Create new script editor instance\n            const scriptEditor = new ScriptEditor(scriptData);\n            this.scriptEditors.set(editorKey, scriptEditor);\n\n            let saveTabs = ()=>{\n                localStorage.setItem(`openedEditors`, Array.from(this.scriptEditors.keys()).join(\",\"));\n            }\n            saveTabs();\n            scriptEditor.open(event.detail.openInBackground);\n\n            // Clean up when editor is closed\n            const originalClose = scriptEditor.close.bind(scriptEditor);\n            scriptEditor.close = () => {\n                originalClose();\n                this.scriptEditors.delete(editorKey);\n                saveTabs();\n            };\n        });\n\n        // Handle space state changes from Unity\n        if (SM.scene) {\n\n            let onLoad = async ()=>{\n                log(\"init\", \"onLoad()\");\n                if(window.isLocalHost){\n                    SM.scene.localUser = {\n                        name: \"Technocrat\",\n                        uid: \"abcdefghi\",\n                        id: \"abcdefghi\",\n                        isLocal: true,\n                        color: \"#000000\"\n                    }\n                    SM.scene.users = {\n                        [SM.scene.localUser.id]: SM.scene.localUser\n                    }\n                }\n                await saveLocalUserSceneToLocalStorage(SM.scene.localUser);\n\n                SM.setup();\n                loadingScreen.updateStage('scene-connect', 100, 'Scene connected');\n                loadingScreen.hide();\n            }\n\n            SM.scene.addEventListener('space-state-changed', (event) => {\n                // Sync external changes through change manager\n            });\n\n            SM.scene.On(\"loaded\", async () => {\n                onLoad();\n            });\n\n            SM.scene.On(\"one-shot\", async (event) => {\n                net.handleOneShot(event);\n                document.dispatchEvent(new CustomEvent('oneshotReceived', {detail: event}));\n            });\n\n            SM.scene.On(\"user-left\", (event) => {\n                log('scene-event', \"[USER LEFT] fired\", event)\n            })\n\n            SM.scene.On(\"user-joined\", (event) => {\n                SM.handleUserJoined(event);\n            })\n\n            scene.On(\"button-released\", e => {\n                SM.getAllScriptRunners().forEach(m=>{\n                    if(m.ctx.buttonReleased){\n                        m.ctx.buttonReleased(e)\n                    }\n                })\n            })\n\n            scene.On(\"button-pressed\", e => {\n                SM.getAllScriptRunners().forEach(m=>{\n                    if(m.ctx.buttonPressed){\n                        m.ctx.buttonPressed(e)\n                    }\n                })\n            })\n\n            let runWhenUnityLoaded = ()=>{\n                if(SM.scene.unityLoaded){\n                    log('init', \"localUser =>\", SM.scene.localUser)\n                    if(!SM.scene.localUser){\n                        log('init', \"No local user found, loading from localStorage\")\n                        loadLocalUserSceneFromLocalStorage(SM.scene);\n                    }\n                    onLoad();\n                }else{\n                    setTimeout(runWhenUnityLoaded, 500);\n                }\n            }\n            runWhenUnityLoaded();\n        }\n\n        // Keyboard shortcuts\n        document.addEventListener('keydown', (e) => {\n            // Ctrl/Cmd + F: Focus search\n            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {\n                e.preventDefault();\n                const searchInput = document.getElementById('searchInput');\n                if (searchInput) {\n                    searchInput.focus();\n                    searchInput.select();\n                }\n            }\n\n            // Delete key: Delete selected entity\n            if (e.key === 'Delete' && SM.selectedEntity) {\n                const deleteBtn = document.getElementById('deleteEntityBtn');\n                if (deleteBtn && !e.target.matches('input, textarea')) {\n                    deleteBtn.click();\n                }\n            }\n\n            // Ctrl/Cmd + N: Add new child entity\n            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {\n                e.preventDefault();\n                const addBtn = document.getElementById('addChildEntityBtn');\n                if (addBtn) {\n                    addBtn.click();\n                }\n            }\n        });\n    }\n\n    loadOldTabs(){\n        let openedEditors = localStorage.getItem(`openedEditors`);\n        if(openedEditors){\n            openedEditors.split(\",\").forEach(editor=>{\n                const scriptItem = window.inventory.items[editor];\n                if (scriptItem && scriptItem.itemType === 'script') {\n                    const event = new CustomEvent('open-script-editor', {\n                        detail: {\n                            name: editor,\n                            content: scriptItem.data,\n                            author: scriptItem.author,\n                            created: scriptItem.created,\n                            openInBackground: true\n                        },\n\n                    });\n                    window.dispatchEvent(event);\n                }\n            })\n        }\n    }\n\n    /**\n     * Setup resize handlers\n     */\n    setupResizeHandlers() {\n        // Make panels resizable\n        const hierarchyPanel = document.querySelector('.hierarchy-panel');\n        const propertiesPanel = document.querySelector('.properties-panel');\n        const spacePropsContainer = document.querySelector('.space-props-panel-container');\n\n        if (hierarchyPanel && propertiesPanel) {\n            this.makeResizable(hierarchyPanel, 'right', 200, 500);\n        }\n\n        if (spacePropsContainer && propertiesPanel) {\n            this.makeResizable(spacePropsContainer, 'left', 300, 600);\n        }\n    }\n\n    /**\n     * Make a panel resizable\n     */\n    makeResizable(panel, direction, minSize, maxSize) {\n        const resizer = document.createElement('div');\n        resizer.className = 'panel-resizer';\n        resizer.style.position = 'absolute';\n        resizer.style[direction] = '0';\n        resizer.style.top = '0';\n        resizer.style.bottom = '0';\n        resizer.style.width = '4px';\n        resizer.style.cursor = direction === 'right' ? 'ew-resize' : 'ew-resize';\n        resizer.style.zIndex = '100';\n\n        panel.style.position = 'relative';\n        panel.appendChild(resizer);\n\n        let isResizing = false;\n        let startX = 0;\n        let startWidth = 0;\n\n        resizer.addEventListener('mousedown', (e) => {\n            isResizing = true;\n            startX = e.clientX;\n            startWidth = panel.offsetWidth;\n            document.body.style.cursor = direction === 'right' ? 'ew-resize' : 'ew-resize';\n            e.preventDefault();\n        });\n\n        document.addEventListener('mousemove', (e) => {\n            if (!isResizing) return;\n\n            const diff = direction === 'right' ?\n                e.clientX - startX :\n                startX - e.clientX;\n\n            const newWidth = Math.max(minSize, Math.min(maxSize, startWidth + diff));\n            panel.style.width = newWidth + 'px';\n            panel.style.flexShrink = '0';\n        });\n\n        document.addEventListener('mouseup', () => {\n            if (isResizing) {\n                isResizing = false;\n                document.body.style.cursor = '';\n            }\n        });\n    }\n\n    /**\n     * Show initialization error\n     */\n    showInitError(error) {\n        const container = document.querySelector('.inspector-container');\n        if (container) {\n            container.innerHTML = `\n                <div class=\"init-error\" style=\"\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                    height: 100%;\n                    padding: 40px;\n                    text-align: center;\n                \">\n                    <h2 style=\"color: #ff6b6b; margin-bottom: 20px;\">Initialization Error</h2>\n                    <p style=\"color: #888; margin-bottom: 10px;\">Failed to initialize the Scene Inspector</p>\n                    <p style=\"color: #666; font-size: 14px; max-width: 600px;\">${error.message}</p>\n                    <button onmousedown=\"location.reload()\" style=\"\n                        margin-top: 30px;\n                        padding: 10px 20px;\n                        background: #2a2a2a;\n                        border: 1px solid #3a3a3a;\n                        border-radius: 4px;\n                        color: #e8e8e8;\n                        cursor: pointer;\n                    \">Reload</button>\n                </div>\n            `;\n        }\n    }\n}\n\n// Create and initialize app instance\nconst app = new InspectorApp();\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => app.initialize());\n} else {\n    app.initialize();\n}\n\n// Export app instance for debugging\nwindow.inspector = app;\n\n// Helper functions for local user persistence\nvar loadLocalUserSceneFromLocalStorage = (scene)=>{\n    var luser = JSON.parse(localStorage.getItem(\"localUser\"));\n    if(luser){\n        scene.localUser = luser\n        scene.users = {\n            [luser.uid]: luser\n        }\n    }\n}\n\nvar saveLocalUserSceneToLocalStorage = async (luser)=>{\n    if(!luser){\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return await saveLocalUserSceneToLocalStorage(SM.scene.localUser);\n    }\n    localStorage.setItem(\"localUser\", JSON.stringify({\n        \"name\": luser.name,\n        \"uid\": luser.uid,\n        \"isLocal\": luser.isLocal,\n        \"color\": luser.color\n    }));\n}\n"],
  "mappings": "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ACtB,GAAI,CAACA,EAAK,MAAO,GACjB,IAAIC,EAASD,GACFA,EACN,KAAK,EACL,QAAQ,iBAAkB,GAAG,EAC7B,QAAQ,OAAQ,GAAG,EACnB,QAAQ,SAAU,GAAG,EACrB,QAAQ,SAAU,EAAE,EAEzB,OAAOA,EAAI,MAAM,GAAG,EAAE,IAAIC,CAAK,EAAE,KAAK,GAAG,CAC7C,CAKA,oBAAoBD,EAAK,CAErB,IAAME,EAAe,gBACrB,OAAOF,GAAOA,EAAI,KAAK,EAAE,OAAS,GAAK,CAACE,EAAa,KAAKF,CAAG,CACjE,CACJ,EC1nCO,IAAMG,GAAkB,CAC7B,QAAW,CACT,SACA,SACA,SACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,KAAQ,CACN,eACA,eACA,eACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,WACF,EACA,MAAS,CACP,eACA,eACA,eACA,eACA,eACA,eACA,eACA,8BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,MAAS,CACP,eACA,SACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,YACA,YACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,OAAU,CACR,eACA,eACA,eACA,eACA,eACA,SACA,eACA,SACA,SACA,SACA,eACA,eACA,eACA,SACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,QAAW,CACT,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,eACA,eACA,8BACA,8BACA,SACA,SACA,SACA,eACA,SACA,SACA,eACA,eACA,eACA,eACA,eACA,SACA,eACA,eACA,eACA,eACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,OAAU,CACR,eACA,eACA,eACA,eACA,SACA,SACA,SACA,SACA,SACA,SACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,OAAU,CACR,eACA,kBACA,kBACA,kBACA,kBACA,kBACA,eACA,eACA,eACA,eACA,eACA,iCACA,iCACA,kBACA,oCACA,oCACA,kBACA,oCACA,oCACA,kBACA,oCACA,oCACA,kBACA,oCACA,oCACA,kBACA,oCACA,oCACA,SACA,kBACA,kBACA,kBACA,kBACA,kBACA,SACA,kBACA,kBACA,kBACA,kBACA,kBACA,eACA,kBACA,kBACA,kBACA,kBACA,kBACA,eACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,gDACA,8BACA,gDACA,8BACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,kBACA,oCACA,oCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,kBACA,oCACA,oCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,kBACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,8BACA,6CACA,4DACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,0CACA,2BACA,0CACA,0CACA,0CACA,yDACA,0CACA,yDACA,yDACA,0CACA,yDACA,0CACA,yDACA,yDACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,6CACA,2BACA,2BACA,2BACA,2BACA,2BACA,6CACA,2BACA,6CACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,YACA,8BACA,8BACA,8BACA,6CACA,6CACA,4DACA,4DACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,0CACA,2BACA,0CACA,0CACA,0CACA,yDACA,0CACA,yDACA,yDACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,6CACA,2BACA,2BACA,2BACA,2BACA,2BACA,6CACA,2BACA,6CACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,+DACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,8EACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,kBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,kBACA,oCACA,oCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,2BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,2BACA,YACA,iCACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,8BACA,8BACA,YACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,gDACA,8BACA,gDACA,8BACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,8BACA,8BACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,gDACA,8BACA,gDACA,8BACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,qBACA,uCACA,yDACA,uCACA,yDACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,YACA,8BACA,8BACA,8BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,0CACA,2BACA,6CACA,2BACA,2BACA,2BACA,2BACA,2BACA,6CACA,2BACA,6CACA,0CACA,yDACA,2BACA,0CACA,qBACA,uCACA,uCACA,uCACA,8EACA,8EACA,8EACA,8EACA,+DACA,+DACA,+DACA,+DACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,8EACA,8EACA,8EACA,8EACA,+DACA,+DACA,+DACA,+DACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,8EACA,8EACA,8EACA,8EACA,+DACA,+DACA,+DACA,+DACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,8EACA,8EACA,8EACA,8EACA,+DACA,+DACA,+DACA,+DACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,qBACA,uCACA,uCACA,uCACA,8EACA,8EACA,8EACA,8EACA,+DACA,+DACA,+DACA,+DACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,4DACA,4DACA,4DACA,4DACA,4DACA,oCACA,sDACA,oCACA,oCACA,oCACA,oCACA,oCACA,sDACA,oCACA,sDACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,qBACA,uCACA,uCACA,YACA,8BACA,8BACA,YACA,8BACA,8BACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,6CACA,6CACA,6CACA,6CACA,qBACA,6CACA,6CACA,6CACA,6CACA,qBACA,6CACA,6CACA,6CACA,6CACA,qBACA,6CACA,6CACA,6CACA,6CACA,qBACA,6CACA,6CACA,6CACA,6CACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,qBACA,YACA,qBACA,qBACA,qBACA,qBACA,oBACF,EACA,QAAW,CACT,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,wBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,2BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,wBACA,2BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,8BACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,KAAQ,CACN,SACA,YACA,YACA,YACA,YACA,kBACA,YACA,2BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,2BACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,UAAa,CACX,SACA,eACA,SACA,SACA,eACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,OAAU,CACR,eACA,eACA,SACA,eACA,SACA,SACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,WAAc,CACZ,eACA,eACA,eACA,eACA,eACA,SACA,SACA,SACA,eACA,SACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,kBACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,kBACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACF,EACA,MAAS,CACP,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,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",
  "names": ["utils_exports", "__export", "Logger", "appendToShell", "clamp", "confirm", "debounce", "decodeSpacePropertyKey", "deepClone", "deepEqual", "encodeSpacePropertyKey", "eulerToQuaternion", "formatNumber", "formatPropertyName", "generateId", "getComponentIcon", "getNestedProperty", "hexToRgb", "isColorObject", "isEncodedSpacePropertyKey", "isQuaternion", "isVector3Object", "isVector4Object", "lerp", "parseBest", "parseValue", "quaternionToEuler", "rgbToHex", "setNestedProperty", "showNotification", "throttle", "toSafeName", "name", "str", "r", "g", "b", "toHex", "n", "hex", "result", "value", "q", "norm", "x", "y", "z", "w", "sinr_cosp", "cosr_cosp", "roll", "sinp", "pitch", "siny_cosp", "cosy_cosp", "yaw", "euler", "cy", "sy", "cp", "sp", "cr", "sr", "obj", "exclude", "remove_all_underscores", "item", "clonedObj", "key", "func", "wait", "timeout", "args", "later", "prefix", "min", "max", "start", "end", "decimals", "path", "current", "keys", "lastKey", "target", "obj1", "obj2", "keys1", "keys2", "limit", "inThrottle", "componentType", "trimmed", "message", "resolve", "modal", "modalContent", "messageDiv", "buttonContainer", "cancelBtn", "okBtn", "handleEscape", "e", "notification", "tag", "id", "shellEl", "children", "div", "color", "subject", "innerHTML", "items", "color_arr", "style_arr", "i", "hash", "hue", "saturation", "lightness", "stackLines", "line", "match", "filePath", "lineNum", "colNum", "isError", "logger", "callerInfo", "a", "locationInfo", "_originalLog", "_originalError", "MAX_ARG_LENGTH", "truncatedArgs", "arg", "msg", "vec1", "vec2", "qNormalize", "qConjugate", "qMul", "normalizeVec3", "v", "qTwistAroundAxis", "qIn", "axis", "dot", "vProj", "twist", "qLockAxis", "X_AXIS", "Y_AXIS", "Z_AXIS", "q", "lockX", "lockY", "lockZ", "qNormalize", "qLockAxis", "decodeSpacePropertyKey", "encodedKey", "withoutPrefix", "lastColonIndex", "componentId", "entityAndProperty", "firstSlashIndex", "entityName", "propertyPath", "encodeSpacePropertyKey", "isEncodedSpacePropertyKey", "key", "LoadingScreen", "retryBtn", "totalTime", "stageId", "subProgress", "subText", "stageIndex", "s", "stageDuration", "stage", "progress", "totalWeight", "sum", "completedWeight", "currentStage", "roundedProgress", "message", "totalModules", "loadedModules", "timeoutMs", "resolve", "reject", "checkInterval", "elapsed", "checkFrequency", "loadingScreen", "EntityComponent", "entity", "sceneComponent", "properties", "options", "newComponent", "snapshot", "data", "p", "v1", "v2", "defaultProperties", "id", "newProps", "property", "value", "parseBest", "idx", "callback", "bs_props", "getScale", "entID", "x", "scale", "parentScale", "TransformComponent", "EntityComponent", "entity", "sceneComponent", "properties", "options", "property", "value", "parseBest", "eulerToQuaternion", "vector3", "addX", "addY", "addZ", "curVec", "newVec", "multX", "multY", "multZ", "Entity", "_Entity", "entityData", "options", "parentEntity", "params", "lp", "lr", "ls", "newGameObject", "snapshot", "data", "component", "componentClass", "c", "key", "targetEntity", "checkInterval", "builtEntity", "expected_id", "existingEntity", "newEntity", "targetID", "child", "claimedParent", "componentType", "index", "fromIndex", "toIndex", "movedComponent", "script", "newParent", "firstAttempt", "oldParent", "newName", "newId", "origRef", "parentRef", "newSnapshot", "scriptrunners", "scriptrunner", "children", "components", "parent", "entity", "property", "prop", "base", "newValue", "parseBest", "eulerToQuaternion", "componentsData", "x", "descendants", "descendant", "value", "directions", "rot", "forward", "right", "up", "transformProperty", "newParentId", "properties", "callback", "bs_props", "p", "e", "scriptName", "scripts", "childName", "collectDescendants", "ScriptRunnerComponent", "EntityComponent", "entity", "sceneComponent", "properties", "options", "property", "value", "parseBest", "varName", "varValue", "fileName", "scriptAsset", "scriptContent", "varSpecs", "historicalVars", "initializedVars", "varSpec", "selEnt", "x", "event", "oneShot", "newContext", "d", "v", "args", "newValue", "ScriptAssetComponent", "EntityComponent", "entity", "sceneComponent", "properties", "options", "property", "value", "parseBest", "runner", "x", "MeshComponent", "EntityComponent", "entity", "sceneComponent", "properties", "options", "material", "GeometryComponent", "MeshComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "MaterialComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "RigidbodyComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "AudioSourceComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "VideoPlayerComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "TextComponent", "MeshComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "BoxColliderControls", "component", "material", "buttonEl", "BoxColliderComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "SphereColliderComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "CapsuleColliderComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "MeshColliderComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "BillboardComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "GrabHandleComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "SyncedObjectComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "PhysicMaterialComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "MirrorComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "layer", "BrowserComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "HeldEventsComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "AttachedObjectComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "e", "GLTFComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "prop", "property", "value", "AssetBundleComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "PortalComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "ColliderEventsComponent", "EntityComponent", "sceneComponent", "property", "value", "BoxComponent", "MeshComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "CircleComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "prop", "parseBest", "property", "value", "e", "ConeComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "boolProps", "prop", "parseBest", "property", "value", "e", "CylinderComponent", "MeshComponent", "entity", "sceneComponent", "properties", "options", "prop", "parseBest", "property", "value", "e", "PlaneComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "prop", "parseBest", "property", "value", "e", "RingComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "prop", "parseBest", "property", "value", "e", "SphereComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "prop", "parseBest", "property", "value", "e", "TorusComponent", "MeshComponent", "sceneComponent", "properties", "floatProps", "intProps", "prop", "parseBest", "property", "value", "e", "InvertedMeshComponent", "MeshComponent", "sceneComponent", "property", "value", "KitItemComponent", "EntityComponent", "sceneComponent", "properties", "property", "value", "parseBest", "e", "StreetViewComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "WorldObjectComponent", "EntityComponent", "sceneComponent", "property", "value", "noInf", "value", "ConfigurableJointComponent", "EntityComponent", "sceneComponent", "properties", "prop", "property", "e", "noInf", "value", "JointComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "vector3Props", "e", "CharacterJointComponent", "JointComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "FixedJointComponent", "JointComponent", "sceneComponent", "property", "value", "parseBest", "HingeJointComponent", "JointComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "SpringJointComponent", "JointComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "GrabbableComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "UIPanelComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "color", "AvatarPedestalComponent", "EntityComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "TorusKnotComponent", "MeshComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "ParametricSurfaceComponent", "MeshComponent", "sceneComponent", "properties", "parseBest", "property", "value", "e", "AppleComponent", "ParametricSurfaceComponent", "CatenoidComponent", "ParametricSurfaceComponent", "FermetComponent", "ParametricSurfaceComponent", "HelicoidComponent", "ParametricSurfaceComponent", "HornComponent", "ParametricSurfaceComponent", "KleinComponent", "ParametricSurfaceComponent", "MobiusComponent", "ParametricSurfaceComponent", "Mobius3dComponent", "ParametricSurfaceComponent", "NaticaComponent", "ParametricSurfaceComponent", "PillowComponent", "ParametricSurfaceComponent", "ScherkComponent", "ParametricSurfaceComponent", "SnailComponent", "ParametricSurfaceComponent", "SpiralComponent", "ParametricSurfaceComponent", "SpringComponent", "ParametricSurfaceComponent", "LightComponent", "EntityComponent", "sceneComponent", "properties", "prop", "parseBest", "property", "value", "e", "BanterLayers", "SUPPORTED_COMPONENTS", "componentTypeMap", "TransformComponent", "GeometryComponent", "MaterialComponent", "RigidbodyComponent", "AudioSourceComponent", "VideoPlayerComponent", "TextComponent", "BoxColliderComponent", "SphereColliderComponent", "CapsuleColliderComponent", "MeshColliderComponent", "BillboardComponent", "GrabHandleComponent", "SyncedObjectComponent", "PhysicMaterialComponent", "MirrorComponent", "BrowserComponent", "HeldEventsComponent", "AttachedObjectComponent", "GLTFComponent", "AssetBundleComponent", "PortalComponent", "ColliderEventsComponent", "BoxComponent", "CircleComponent", "ConeComponent", "CylinderComponent", "PlaneComponent", "RingComponent", "SphereComponent", "TorusComponent", "InvertedMeshComponent", "KitItemComponent", "StreetViewComponent", "WorldObjectComponent", "ConfigurableJointComponent", "CharacterJointComponent", "FixedJointComponent", "HingeJointComponent", "SpringJointComponent", "GrabbableComponent", "UIPanelComponent", "AvatarPedestalComponent", "TorusKnotComponent", "AppleComponent", "CatenoidComponent", "FermetComponent", "HelicoidComponent", "HornComponent", "KleinComponent", "MobiusComponent", "Mobius3dComponent", "NaticaComponent", "PillowComponent", "ScherkComponent", "SnailComponent", "SpiralComponent", "SpringComponent", "LightComponent", "ScriptRunnerComponent", "ScriptAssetComponent", "componentBSTypeMap", "componentTextMap", "componentBundleMap", "Entity", "EntityComponent", "name", "category", "_", "meta", "categories", "stats", "cat", "componentType", "bsType", "key", "layerNum", "layerName", "componentName", "SceneManager", "objectName", "confirm", "newGameObject", "value", "state", "x", "sceneObj", "peopleObj", "scene_entity", "people_entity", "hierarchy", "e", "s", "error", "ui", "r", "event", "name", "createEntityHierarchy", "obj", "component_refs", "entity", "c", "component", "component_ref", "componentTextMap", "childPromises", "child", "updateUI", "h", "destination", "options", "hierarchyToEntity", "parentId", "gO_path", "gO", "Entity", "ref_idx", "component_array", "componentID", "SUPPORTED_COMPONENTS", "componentClass", "componentBSTypeMap", "props", "entityComponent", "ScriptRunnerComponent", "promises", "key", "componentId", "useFallback", "crawlEnts", "arr", "cid", "i", "ent", "j", "comp", "inChild", "fallback", "entityId", "uuid", "eid", "sceneFallback", "entityName", "scriptName", "newEntity", "gameObject", "sourceEntity", "componentIdMap", "componentIndex", "sourceComponent", "componentTypeMap", "parentEntity", "childIndex", "sourceChild", "stage", "attempts", "resolve", "startupScripts", "item", "script", "scriptContext", "sceneManager", "dig", "map", "unityId", "owned", "FirebaseAuthHelper", "networking", "currentUser", "secret", "username", "error", "credential", "uid", "callback", "user", "attachAuthToDatabase", "authHelper", "initAuth", "originalMethods", "path", "data", "updates", "Networking", "callback", "varsRef", "listenerInfo", "vars", "result", "key", "value", "ref", "secret", "firebaseConfig", "initFirebaseListeners", "attachAuthToDatabase", "snapshot", "spaceState", "error", "testRef", "storage", "storageRef", "testPath", "testContent", "blob", "downloadURL", "uploadError", "parsed", "path", "data", "newRef", "updates", "options", "query", "childSnapshot", "timestamp", "sender", "items", "code", "componentId", "scriptrunner", "minUpdateTime", "saveBtn", "event", "message", "firstColon", "secondColon", "appendToShell", "hostOnly", "scriptName", "scriptContent", "now", "name", "remote_message", "net", "db", "testData", "listSnapshot", "ChangeManager", "listener", "index", "change", "outcome", "shouldRecord", "timeout", "error", "fn", "resolve", "entry", "changeManager", "undoBtn", "redoBtn", "message", "type", "entity", "get_ids", "ids", "component_ids", "x", "c", "children_ids", "valueExists", "obj", "validSet", "value", "relevant", "history", "u", "command", "mergeId", "localhost", "LifecycleManager", "context", "scriptRunner", "intervalMs", "fps", "componentId", "event", "key", "error", "lifecycle", "scripts", "id", "entityName", "s", "fileName", "owner", "scriptId", "mb", "standardKeys", "methodName", "args", "all", "running", "byFile", "byOwner", "info", "change_types_exports", "__export", "AddComponentChange", "AddEntityChange", "Change", "CloneEntityChange", "ComponentPropertyChange", "CreateFolderChange", "CreateScriptItemChange", "DeleteItemChange", "EditScriptItemChange", "EntityMoveChange", "EntityPropertyChange", "LoadItemChange", "LoadScriptChange", "MoveFolderChange", "MoveItemDirectoryChange", "RemoveComponentChange", "RemoveEntityChange", "RemoveFolderChange", "RenameFolderChange", "RenameItemChange", "ReorderComponentChange", "SaveEntityItemChange", "ScriptRunnerVarChange", "SpacePropertyChange", "Change", "message", "showNotification", "cmd_el", "command", "commandStr", "key", "value", "appendToShell", "EntityPropertyChange", "entityId", "property", "newValue", "options", "entity", "newId", "ComponentPropertyChange", "componentId", "deepClone", "SpacePropertyChange", "protect", "AddComponentChange", "componentType", "validation", "errorMsg", "s", "checks", "resolve", "check", "component", "ReorderComponentChange", "fromIndex", "toIndex", "components", "event", "data", "RemoveComponentChange", "AddEntityChange", "parentId", "entityName", "exists", "RemoveEntityChange", "EntityMoveChange", "newParentId", "parent", "ScriptRunnerVarChange", "varName", "LoadItemChange", "itemName", "itemData", "newEntName", "item", "entName", "entData", "compDict", "changeChildrenIds", "entComps", "compId", "newID", "childName", "child", "everythingLoaded", "componentsLoaded", "isLoaded", "LoadScriptChange", "scriptName", "sanatizedScriptName", "checkExistingInScene", "CloneEntityChange", "exportData", "originalName", "entityData", "SaveEntityItemChange", "_SaveEntityItemChange", "folder", "now", "inventoryItem", "storageKey", "folderName", "existingKeys", "DeleteItemChange", "RenameItemChange", "newName", "oldKey", "sAuth", "sFolder", "sItem", "firebasePath", "newKey", "editor", "oldCloseBtn", "newCloseBtn", "editorTitle", "sanitizedFolder", "sanitizedItemName", "error", "folderData", "CreateFolderChange", "parentFolderName", "trimmedName", "parentFolder", "parentPath", "path", "RenameFolderChange", "MoveFolderChange", "RemoveFolderChange", "_RemoveFolderChange", "folderPath", "subfolder", "MoveItemDirectoryChange", "CreateScriptItemChange", "defaultContent", "itemType", "icon", "EditScriptItemChange", "scriptContent", "COMMAND_HISTORY_KEY", "MAX_HISTORY_SIZE", "CommandHistory", "stored", "index", "currentValue", "commandHistory", "commandInputEl", "e", "execString", "typeName", "category", "_", "meta", "name", "suggestions", "input", "allComponents", "lowerInput", "lowerName", "score", "commonChars", "char", "a", "b", "HierarchyPanel", "parentId", "change", "AddEntityChange", "changeManager", "CloneEntityChange", "entity", "confirm", "RemoveEntityChange", "SaveEntityItemChange", "nodeElement", "searchTerm", "level", "isExpanded", "hasChildren", "isSelected", "nodeDiv", "node", "e", "toggle", "content", "icon", "name", "childrenContainer", "child", "childNode", "component", "entityId", "message", "el", "target", "targetEntityId", "EntityMoveChange", "targetId", "checkChildren", "parent", "ScaleLockHandler", "scaleLockKey", "ratios", "currentValue", "isLocked", "baseValue", "value", "lockButton", "e", "axis", "newValue", "result", "numValue", "oldValue", "scaleFactor", "entityId", "keysToRemove", "key", "TransformHandler", "mode", "entity", "onToggle", "transformToggleBtn", "e", "onReset", "resetButton", "section", "utils", "quaternionToEuler", "formatNumber", "transforms", "labels", "formatPropertyName", "name", "str", "positionLabel", "rotationLabel", "scaleLabel", "eulerAngles", "labelText", "values", "propertyRows", "row", "label", "inputs", "PropertyUpdater", "componentId", "propertyKey", "newValue", "utils", "propertyRowId", "propertyRow", "value", "checkbox", "numberInput", "dropdown", "textInput", "vectorInputs", "quaternionToEuler", "formatNumber", "eulerAngles", "colorSwatch", "rgbaInputs", "colorInput", "rgbToHex", "properties", "key", "entitySection", "propertyLabel", "propertyRows", "row", "label", "VectorColorInputRenderer", "utils", "label", "value", "onChange", "entityId", "entity", "isScaleProperty", "scaleLockHandler", "showResetButton", "vectorContainer", "vectorGroup", "axis", "axisLabel", "input", "newVector", "e", "scaleLockKey", "lockButton", "resetButton", "quaternionToEuler", "formatNumber", "eulerAngles", "key", "componentId", "component", "rgbToHex", "hexToRgb", "colorGroup", "preview", "swatch", "colorInput", "rgb", "newColor", "rgbaContainer", "channel", "newValue", "onReset", "PropertyInputRenderer", "utils", "changeManager", "scaleLockHandler", "VectorColorInputRenderer", "label", "value", "type", "onChange", "enums", "entityId", "entity", "formatPropertyName", "row", "labelElement", "valueContainer", "key", "component", "componentIndex", "propertyIndex", "parseBest", "deepClone", "ComponentPropertyChange", "componentType", "componentId", "button", "colorInput", "newColor", "change", "input", "numValue", "e", "select", "enumValue", "option", "isScaleProperty", "showResetButton", "vector3Input", "vector4Input", "enumValues", "dropdown", "enumKey", "user", "nullOption", "handleVector3Change", "axis", "newValue", "newVector", "EntityPropertiesRenderer", "propertyInputRenderer", "transformHandler", "scaleLockHandler", "utils", "changeManager", "entity", "showLoadSettings", "section", "header", "body", "headerContent", "titleDiv", "transformToggleBtn", "asyncRow", "nameRow", "layerRow", "activeRow", "row", "EntityPropertyChange", "nameLabel", "inputName", "handleRename", "newName", "change", "value", "BanterLayers", "deepClone", "quaternionToEuler", "eulerToQuaternion", "rows", "transforms", "labels", "positionRow", "axis", "newValue", "rotationRow", "currentEntity", "currentQuaternion", "eulerAngles", "numValue", "oldValue", "newQuaternion", "scaleRow", "scaleLockKey", "newVector", "label", "valueContainer", "input", "ComponentRenderer", "propertyInputRenderer", "utils", "changeManager", "component", "index", "totalComponents", "entityId", "showLoadSettings", "section", "header", "body", "headerContent", "titleDiv", "actionsDiv", "ReorderComponentChange", "RemoveComponentChange", "confirm", "upBtn", "e", "change", "downBtn", "deleteBtn", "toggleSpan", "asyncRow", "key", "value", "propIndex", "propertyRow", "controls", "control", "button", "row", "label", "valueContainer", "input", "componentKey", "isExpanded", "toggle", "collapsedSet", "components", "ScriptRunnerRenderer", "propertyInputRenderer", "utils", "changeManager", "VectorColorInputRenderer", "component", "index", "totalComponents", "entityId", "section", "header", "body", "headerContent", "titleDiv", "ownerColor", "actionsDiv", "owner", "ReorderComponentChange", "RemoveComponentChange", "confirm", "refreshBtn", "e", "upBtn", "change", "downBtn", "deleteBtn", "toggleSpan", "ComponentPropertyChange", "nameRow", "value", "fileRow", "hotreloadRow", "varsHeader", "varName", "varValue", "varRow", "editButton", "fileLabel", "fileContainer", "fileSelect", "emptyOption", "scripts", "x", "addScriptOption", "script", "option", "ScriptRunnerVarChange", "formatPropertyName", "row", "label", "valueContainer", "input", "numValue", "vectorGroup", "axis", "axisLabel", "colorInput", "newColor", "editButtonRow", "assetEnt", "buttonContainer", "componentKey", "isExpanded", "toggle", "collapsedSet", "ScriptAssetRenderer", "propertyInputRenderer", "utils", "changeManager", "VectorColorInputRenderer", "component", "index", "totalComponents", "entityId", "section", "header", "body", "headerContent", "titleDiv", "actionsDiv", "owner", "ReorderComponentChange", "RemoveComponentChange", "confirm", "upBtn", "e", "change", "downBtn", "deleteBtn", "toggleSpan", "nameRow", "dataRow", "varsSection", "label", "valueContainer", "input", "headerRow", "lineCount", "lines", "textareaContainer", "textarea", "editButton", "event", "varsContainer", "varsHeader", "varsBody", "title", "varsCount", "badge", "titleContainer", "toggle", "vars", "varName", "varData", "varRow", "addVarSection", "varsKey", "isExpanded", "ComponentPropertyChange", "formatPropertyName", "row", "leftSide", "nameLabel", "typeBadge", "colors", "rightSide", "newVars", "updateVar", "newValue", "checkboxContainer", "checkbox", "checkboxLabel", "numberInput", "numValue", "textInput", "formGrid", "nameGroup", "nameInput", "typeGroup", "typeLabel", "typeSelect", "type", "option", "valueGroup", "valueLabel", "defaultValueInput", "addButton", "varType", "varValue", "typedValue", "componentKey", "collapsedSet", "PropertiesPanel", "utils_exports", "changeManager", "change_types_exports", "ScaleLockHandler", "TransformHandler", "PropertyUpdater", "PropertyInputRenderer", "EntityPropertiesRenderer", "ComponentRenderer", "ScriptRunnerRenderer", "ScriptAssetRenderer", "entity", "component", "index", "componentKey", "hasExpandedComponent", "entityId", "targetEntityId", "pending", "scrollTop", "entitySection", "componentElement", "componentId", "propertyKey", "newValue", "key", "axis", "value", "c", "vector", "numValue", "oldValue", "ComponentPropertyChange", "change", "componentType", "RemoveComponentChange", "ReorderComponentChange", "totalComponents", "SyncStatusComparator", "now", "localMap", "networkMap", "error", "hierarchy", "source", "pathMap", "processEntity", "entity", "parentPath", "currentPath", "c", "child", "components", "comp", "match", "type", "properties", "typeName", "path", "localEntity", "networkEntity", "divergence", "local", "network", "localChildren", "networkChildren", "propertyName", "tolerance", "localTypes", "networkTypes", "t", "parentsWithDivergentChildren", "_divergence", "lastSlash", "existing", "summary", "componentId", "publicProps", "prefix", "key", "propName", "value", "parseBest", "component", "sceneComponent", "prop", "componentPropDivergences", "localComp", "networkComp", "nc", "propDiffs", "lc", "missingLocalProps", "localProps", "networkProps", "differences", "localVal", "networkVal", "val1", "val2", "keys1", "keys2", "SpacePropsPanel", "SyncStatusComparator", "publicHeader", "protectedHeader", "popupBtn", "e", "renderCount", "toggleBtn", "protToggle", "pubToggle", "type", "spacePropsContent", "prop", "isActive", "isPublic", "title", "propsKey", "capitalized", "header", "closeBtn", "resizeHandle", "viewToggleBtns", "btn", "mode", "b", "searchBarContainer", "propertyFiltersContainer", "searchInput", "refreshBtn", "property", "rect", "x", "y", "deltaX", "deltaY", "newWidth", "newHeight", "keyInput", "valueInput", "addProp", "collapseBtn", "panel", "resolve", "snapshot", "key", "value", "publicVars", "protectedVars", "publicKeyInput", "publicValueInput", "protectedKeyInput", "protectedValueInput", "refreshSpacePropsBtn", "addPublic", "addProtected", "propertyKey", "isProtected", "propKey", "originalColor", "origin", "vars", "popupCounter", "publicCounter", "protectedCounter", "props", "isPopup", "suffix", "listElement", "countElement", "propKeys", "filteredKeys", "a", "aKey", "bKey", "aPinned", "bPinned", "propItem", "item", "isPinned", "pinBtn", "keyElement", "valueContainer", "isEditing", "isQuaternion", "eulerAngles", "quaternionToEuler", "valueDisplay", "formatNumber", "actions", "deleteBtn", "isVector3Object", "vectorGroup", "axis", "input", "label", "saveBtn", "cancelBtn", "editBtn", "xInput", "currentValue", "yInput", "zInput", "newValue", "change", "SpacePropertyChange", "changeManager", "listener", "scriptContent", "scriptName", "modal", "contentContainer", "lines", "lineNumberWidth", "pre", "line", "index", "lineNumber", "lineElement", "footer", "sizeKB", "closeOnEscape", "text", "div", "confirm", "vector3Pattern", "match", "event", "saved", "expandedSaved", "nodes", "filtersSaved", "filters", "tree", "cleanKey", "colonIndex", "entityPath", "propertyName", "pathParts", "current", "i", "part", "componentName", "lastUnderscore", "componentType", "componentId", "treeContainer", "simpleSection", "simpleHeader", "simpleContent", "propElement", "scriptsSection", "scriptsHeader", "scriptsContent", "scriptData", "scriptElement", "entitySection", "entityHeader", "entityContent", "node", "nodeElement", "componentSection", "componentHeader", "componentContent", "componentGroup", "groupElement", "keySpan", "valueSpan", "previewId", "expandBtn", "nameSpan", "metaSpan", "wrapperElement", "previewContainer", "preview", "depth", "parentPath", "fullPath", "nodeId", "headerElement", "hasChildren", "hasProperties", "canExpand", "arrow", "spacer", "childrenContainer", "propName", "propData", "childKey", "childNode", "childElement", "groupId", "hasInstances", "countSpan", "instancesContainer", "instanceId", "instance", "instanceElement", "instanceIdDisplay", "instanceNodeId", "instanceHeader", "instanceNameSpan", "propCountSpan", "propertiesContainer", "path", "styleEl", "_props", "divergences", "summary", "treeHTML", "localHierarchy", "networkHierarchy", "renderEntity", "entity", "currentPath", "divergence", "status", "indent", "statusIcon", "statusClass", "statusTooltip", "html", "compDivergence", "values", "localVal", "networkVal", "localColor", "networkColor", "child", "netEntity", "rootName", "c", "networkEntity", "updateCount", "error", "ComponentMenu", "categories", "category", "index", "categoryName", "header", "toggleIcon", "event", "item", "componentType", "categoryElement", "isExpanded", "itemsContainer", "searchTerm", "term", "items", "name", "desc", "matches", "hasVisibleItems", "entity", "change", "AddComponentChange", "changeManager", "bundles", "componentBundleMap", "bundle", "LifecyclePanel", "collapseBtn", "panel", "scriptRunner", "listElement", "scriptRunners", "table", "thead", "tbody", "row", "nameCell", "scriptName", "scriptItem", "event", "ownerCell", "usageCell", "entitiesText", "logCell", "logCheckbox", "actionsCell", "stopBtn", "refreshBtn", "componentId", "enabled", "lifecycle", "output", "id", "outputStr", "shellEl", "Navigation", "page", "pageId", "navItem", "index", "id", "event", "originalDragOver", "e", "entityId", "SaveEntityItemChange", "change", "pageElement", "navElement", "dynamicPage", "dragImage", "rect", "midpoint", "insertBefore", "draggedPageId", "targetPageId", "targetTab", "navRect", "draggedIndex", "targetIndex", "navItemsContainer", "fragment", "InventoryAPI", "baseUrl", "isLocalhost", "endpoint", "options", "url", "response", "data", "error", "item", "itemName", "updates", "folderData", "folderKey", "contents", "file", "metadata", "formData", "username", "userName", "user", "path", "folder", "itemPath", "firebaseRef", "parentFolder", "minUpdateTime", "targetUsername", "folderPath", "operation", "queue", "failed", "InventoryWebSocket", "config", "resolve", "reject", "error", "connectResolve", "connectReject", "event", "message", "userName", "secret", "authTimeout", "listenerId", "data", "key", "listener", "snapshot", "path", "callback", "toRemove", "delay", "interval", "InventoryFirebase", "inventory", "InventoryAPI", "userName", "secret", "InventoryWebSocket", "error", "folderName", "folder", "existingPath", "firebasePath", "sanitizedParent", "sanitizedFolderName", "glbLoaderKey", "firstCall", "glbListenerId", "snapshot", "value", "glb_url", "mesh_name", "entity", "listeners", "addedListenerId", "removedListenerId", "changedListenerId", "key", "data", "subfolderName", "fullFolderName", "storageKey", "itemName", "item", "itemKey", "editor", "newContent", "assetEnt", "assetComp", "e", "listenerIds", "path", "listenerId", "basePath", "sanitizedFolder", "obj", "cleaned", "inventoryItem", "cleanedItem", "folderKey", "folderMetadata", "folderData", "itemsInFolder", "syncedCount", "contents", "totalSize", "oneMB", "itemCount", "folderCount", "sizeInMB", "bulkData", "sanitizedItemName", "folderContents", "subfolder", "sanitizedSubfolderName", "result", "username", "now", "userFolder", "folderStorageKey", "folderRefsCreated", "folderInfo", "folderRefKey", "folderRef", "itemStorageKey", "firebaseRef", "parentFolder", "minUpdateTime", "subjectName", "existingFolder", "importedCount", "isSingleFolder", "hasInventoryContent", "containerFolder", "foldersInFolder", "finalItemName", "counter", "parentFolderName", "file", "metadata", "imageItem", "img", "str", "clean", "invalidChars", "emojiCategories", "InventoryUI", "inventory", "inventoryContainer", "totalItems", "folderPath", "makeRemoteBtn", "name", "uploadBtn", "fileInput", "sortDropdown", "newFolderBtn", "sortDirectionBtn", "e", "container", "clickedOnItem", "clickedOnFolder", "clickedOnButton", "clickedOnInput", "clickedOnBreadcrumb", "clickedOnPreviewPane", "item", "folder", "btn", "itemName", "folderName", "err", "folderRef", "error", "exportBtn", "newScriptBtn", "copyLinkBtn", "forceSyncBtn", "importFirebaseBtn", "folderHeader", "draggedFolderName", "inventoryGrid", "isOverFolderHeader", "isOverSameFolder", "parts", "path", "part", "index", "foldersHtml", "itemsHtml", "foldersArray", "key", "itemsArray", "itemCount", "isExpanded", "folderKey", "items", "subfolders", "isInFolder", "dateStr", "itemType", "itemIcon", "isSelected", "itemActions", "previewContent", "moveHereBtn", "closeBtn", "iconBtn", "editBtn", "copyUrlBtn", "url", "openImageBtn", "startupToggle", "startupSequenceSelect", "value", "afterInput", "scriptName", "activeToggle", "globalToggle", "autoUpdateToggle", "descriptionTextarea", "importFolderRefBtn", "editableName", "originalName", "newName", "change", "RenameItemChange", "range", "selection", "totalFolders", "scripts", "entities", "images", "markdown", "remoteItems", "isRemote", "description", "isPublic", "subfolderCount", "subfolder", "warningMessage", "updatedFolder", "publicCheckbox", "statusText", "displayIcon", "previewHeader", "size", "dimensions", "markdownContent", "scriptContent", "preview", "componentCount", "childCount", "obj", "level", "id", "keys", "clickedOnEditable", "entityId", "SaveEntityItemChange", "modalOverlay", "modalContent", "input", "fileTypeSelect", "fileHint", "createBtn", "closeModal", "handleCreate", "fileName", "fileType", "errorDiv", "finalName", "onConfirm", "title", "message", "onCancel", "cancelBtn", "confirmBtn", "handleKeydown", "handleImport", "firebaseRef", "importBtn", "userName", "innerHTML", "emojiCategories", "category", "emojis", "emoji", "selectEmoji", "storageKey", "customInput", "applyBtn", "applyCustom", "customEmoji", "handleAction", "actionBtn", "text", "map", "m", "type", "InventoryFileHandler", "inventory", "event", "file", "fileName", "fileExt", "fileContent", "error", "resolve", "reject", "reader", "e", "content", "fileType", "itemType", "jsonData", "itemName", "data", "Inventory", "InventoryFirebase", "InventoryUI", "InventoryFileHandler", "items", "i", "key", "itemKey", "item", "error", "folders", "folderKey", "itemName", "change", "DeleteItemChange", "storageKey", "folder", "scripts", "getScriptsInFolder", "folderPath", "scriptsInFolder", "subfolders", "name", "subfolderName", "blob", "fileName", "message", "jsonStr", "url", "a", "LoadItemChange", "data", "h", "command", "k", "v", "event", "finalName", "fileType", "CreateScriptItemChange", "itemType", "content", "now", "itemTypeDisplay", "jsonData", "imageItem", "folderName", "sanitizedName", "CreateFolderChange", "MoveItemDirectoryChange", "sourceFolderName", "targetFolderName", "sourceFolder", "childFolderName", "parentFolderName", "current", "newName", "counter", "RenameFolderChange", "oldKey", "newKey", "subKey", "subfolder", "hasItems", "hasSubfolders", "f", "RemoveFolderChange", "parts", "count", "isFolder", "b", "compareValue", "aTime", "bTime", "itemOrFolderName", "totalSize", "itemData", "contents", "subContents", "updatedCount", "needsUpdate", "entityData", "hasOldFormat", "entity", "comp", "convertEntity", "transformComponent", "c", "transformData", "child", "componentNameMap", "updateEntity", "alreadyUpdatedCount", "hasBanterNames", "checkEntity", "hasSpaceProps", "removeSpaceProps", "cleanEntity", "path", "minUpdateTime", "ScriptEditor", "scriptData", "openInBackground", "e", "footer", "entityId", "component", "entityName", "isProduction", "cdnBase", "href", "link", "textarea", "cm", "src", "resolve", "reject", "script", "saveBtn", "playBtn", "stopBtn", "closeBtn", "handler", "btn", "source", "newContent", "change", "EditScriptItemChange", "entity", "action", "components", "error", "type", "message", "consoleContent", "entry", "timestamp", "entityPrefix", "confirm", "text", "map", "m", "StatementBlockEditor", "options", "transcript", "response", "result", "error", "container", "blocksList", "blocksHtml", "block", "index", "content", "fromIndex", "toIndex", "movedBlock", "mergedContent", "text", "div", "modal", "e", "sourceIndex", "targetIndex", "sourcePreview", "targetPreview", "sourceText", "targetText", "btn", "confirm", "draggedElement", "draggedIndex", "dropTarget", "dragHandle", "zone", "el", "dropIndex", "draft", "draftStr", "FeedbackAPI", "baseUrl", "endpoint", "options", "url", "data", "error", "feedback", "ticketId", "filters", "queryParams", "queryString", "updates", "comment", "response", "commentIndex", "content", "Feedback", "FeedbackAPI", "key", "typeButtons", "btn", "b", "StatementBlockEditor", "blocks", "draft", "submitOriginalBtn", "submitRefinementBtn", "clearDraftBtn", "micButton", "speechConfig", "audioConfig", "s", "e", "recognizingText", "delta", "newText", "error", "textarea", "micStatus", "lastStatus", "transcript", "indicator", "scale", "animate", "message", "type", "statusEl", "existingBlocks", "processingOverlay", "feedbackSection", "overlay", "originalView", "blocksList", "toggleBtn", "originalTextDiv", "singleSubmit", "dualSubmit", "fixWithVoice", "formattedFeedback", "block", "index", "originalValue", "confirm", "details", "title", "feedback", "ticketId", "dateStr", "random", "accro", "feedbackHistory", "lookupBtn", "lookupInput", "resultDiv", "html", "content", "text", "div", "refreshBtn", "typeFilter", "statusFilter", "ticketsList", "allTickets", "tickets", "currentUserId", "ticketsHtml", "ticket", "isOwner", "date", "item", "filteredTickets", "t", "latestData", "modal", "modalTitle", "modalContent", "closeBtn", "commentsList", "comments", "currentUser", "commentsHtml", "comment", "isAuthor", "input", "result", "ticketIndex", "contentTextarea", "newContent", "updatedTicket", "titleElement", "truncated", "commentIndex", "updatedComment", "_", "commentCount", "ticketItem", "metaContainer", "existingBadge", "commentBadge", "commentMicBtn", "isRecordingComment", "commentInput", "originalBuffer", "micIcon", "InputHandler", "rightHandPath", "rightHand", "showNotification", "pos", "element", "event", "callback", "listener", "target", "property", "value", "sections", "lockkey", "scaleLockHandler", "currentValue", "newScale", "key", "axis", "currentVec", "deepClone", "turnLoopInterval", "tolTurnLoopInterval", "lastRadialRot", "currentRadialRot", "lastTolRot", "currentTolRot", "name", "type", "e", "startRot", "relInc", "signFlip", "lastRotX", "turnLoop", "cX", "deltaX", "valueDelta", "valueTarget", "minRot", "maxRot", "targetRot", "displayVal", "stopTurnLoops", "component", "numericContainer", "currentColor", "newColor", "container", "preview", "pickerArea", "sbSquare", "sbCursor", "hueBar", "hueSlider", "alphaWrapper", "alphaLabel", "alphaBar", "alphaSlider", "alphaValue", "values", "rgbRow", "hexRow", "hexLabel", "hexInput", "copyBtn", "color", "onChange", "square", "cursor", "isDragging", "updateSB", "rect", "x", "y", "mouseDownHandler", "mouseMoveHandler", "mouseUpHandler", "bar", "slider", "updateHue", "valueDisplay", "updateAlpha", "originalText", "originalBg", "err", "hexValue", "rgb", "hueColor", "r", "g", "b", "a", "rgbDisplay", "hexDisplay", "channel", "change", "ScriptRunnerVarChange", "max", "min", "delta", "h", "s", "v", "c", "m", "hex", "doc", "activeEl", "active", "contextType", "inputHandler", "loadingScreen", "InspectorApp", "Navigation", "changeManager", "change", "HierarchyPanel", "PropertiesPanel", "SpacePropsPanel", "ComponentMenu", "LifecyclePanel", "Inventory", "Feedback", "btn", "toggleType", "clearShellBtn", "refreshPanelBtn", "error", "notificationContainer", "undoBtn", "redoBtn", "saveBtn", "event", "message", "type", "notification", "scriptData", "editorKey", "existingEditor", "key", "editor", "scriptEditor", "ScriptEditor", "saveTabs", "originalClose", "onLoad", "saveLocalUserSceneToLocalStorage", "net", "e", "m", "runWhenUnityLoaded", "loadLocalUserSceneFromLocalStorage", "searchInput", "deleteBtn", "addBtn", "openedEditors", "scriptItem", "hierarchyPanel", "propertiesPanel", "spacePropsContainer", "panel", "direction", "minSize", "maxSize", "resizer", "isResizing", "startX", "startWidth", "diff", "newWidth", "container", "app", "scene", "luser", "resolve"]
}
